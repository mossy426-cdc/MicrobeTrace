{"version":3,"file":"main.js","mappings":"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AOA,EAAE,CAACA,EAAE,CAACra,MAAM,GAAG,CAAC,CAAC;EAC5B;EAGA8U,UAAUA,CAACY,IAAI,EAAEJ,QAAA,GAAgB,IAAI;IAEjC;IAEC3gB,wDAAc,CAAC4K,OAAO,CAACC,aAAa,CAACtH,aAAa,CAACoiB,IAAI,CAAC5E,IAAI,CAAC;IAG9D;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAEJ;;EAGA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAIA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;;;;;EAKA6E,UAAUA,CAACC,OAAO;IACdA,OAAO,CAACC,YAAY,CAAC,OAAO,EAAE,8BAA8B,CAAC;IAC7D,IAAIC,eAAe,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EAAE,SAAS,EACtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAEtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAEtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACtF,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,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A;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IAGA;IAEA;IAEA;IACA;IACA;IAEA;IACA;IAEA;IACA;IACA;EAIJ;;EAGA;;;EAGAF,eAAeA,CAAA;IAEX;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA,IAAI,CAACk5C,SAAS,EAAE;EACpB;EAEA;;;EAGA4O,cAAcA,CAAA;IACV;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAAA;EAGJ;;;;;;EAMAsB,GAAGA,CAACh8E,KAAK,EAAEi8E,MAAM;IAEb;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAAA;EAGJ;;;;;EAKAC,UAAUA,CAACz2B,QAAa;IACpB,IAAGA,QAAQ,EAAC;MACR,OAAO,IAAI,CAACpiE,OAAO,CAACgxB,IAAI,CAACxpB,aAAa,CAACX,OAAO,CAACtD,IAAI,CAACb,kBAAkB,CAACyK,IAAI,CAAC4G,CAAC,IAAEA,CAAC,CAAC9J,KAAK,KAAKm4D,QAAQ,CAACn4D,KAAK,CAAC,KAAKtB,SAAS;;IAE5H,OAAO,IAAI;EACf;EAEA;;;EAGAunB,YAAYA,CAAA;IACP,IAAI,CAAClwB,OAAO,CAACgxB,IAAI,CAACg+D,iCAAiC,CAACprD,SAAS,GAAI,IAAI,CAAC5jC,OAAO,CAACgxB,IAAI,CAACg+D,iCAAiC,CAACnxF,aAAa,CAAC,KAAK,CAAC,GAAG,IAAI,CAACmC,OAAO,CAACgxB,IAAI,CAACg+D,iCAAiC,CAACnxF,aAAa,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qD,+BAA+B,oBAAoB,2BAA2B,SAAS,OAAO,mDAAmD,+BAA+B,kCAAkC,oCAAoC,SAAS,OAAO,KAAK,+DAA+D,6BAA6B,yEAAyE,2CAA2C,mBAAmB,yBAAyB,iDAAiD,KAAK,mCAAmC,kCAAkC,KAAK,8BAA8B,kCAAkC,KAAK,mCAAmC,kCAAkC,KAAK,iCAAiC,qBAAqB,KAAK,kCAAkC,wBAAwB,kBAAkB,6BAA6B,KAAK,kEAAkE,uBAAuB,mBAAmB,6BAA6B,KAAK,qDAAqD,gCAAgC,KAAK,oDAAoD,6BAA6B,KAAK,eAAe,+CAA+C,oDAAoD,KAAK,mBAAmB;AACtqH;AACA;;;;;;;;;;;AC5HA;AACA,4CAA4C,mBAAO,CAAC,wEAA6D;AACjH,kCAAkC,mBAAO,CAAC,iEAAsD;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,oHAAoH,WAAW,WAAW,WAAW,WAAW,UAAU,KAAK,UAAU,KAAK,WAAW,YAAY,YAAY,WAAW,KAAK,KAAK,WAAW,UAAU,UAAU,UAAU,KAAK,KAAK,UAAU,KAAK,KAAK,UAAU,WAAW,UAAU,UAAU,UAAU,UAAU,WAAW,WAAW,WAAW,WAAW,WAAW,UAAU,WAAW,KAAK,KAAK,UAAU,UAAU,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,WAAW,UAAU,WAAW,KAAK,KAAK,UAAU,KAAK,KAAK,UAAU,UAAU,UAAU,WAAW,WAAW,KAAK,KAAK,UAAU,WAAW,KAAK,KAAK,WAAW,KAAK,KAAK,WAAW,UAAU,WAAW,KAAK,MAAM,UAAU,WAAW,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,KAAK,KAAK,WAAW,WAAW,UAAU,KAAK,KAAK,UAAU,KAAK,KAAK,WAAW,KAAK,KAAK,UAAU,UAAU,KAAK,KAAK,WAAW,WAAW,WAAW,WAAW,KAAK,MAAM,UAAU,WAAW,UAAU,UAAU,KAAK,MAAM,WAAW,WAAW,WAAW,WAAW,KAAK,MAAM,WAAW,WAAW,WAAW,MAAM,OAAO,WAAW,MAAM,MAAM,WAAW,MAAM,YAAY,OAAO,WAAW,WAAW,WAAW,aAAa,MAAM,YAAY,OAAO,WAAW,UAAU,WAAW,UAAU,WAAW,UAAU,WAAW,aAAa,aAAa,UAAU,MAAM,YAAY,OAAO,WAAW,MAAM,MAAM,WAAW,WAAW,MAAM,MAAM,UAAU,WAAW,UAAU,WAAW,UAAU,WAAW,WAAW,WAAW,WAAW,MAAM,MAAM,UAAU,UAAU,WAAW,MAAM,MAAM,UAAU,MAAM,MAAM,UAAU,WAAW,UAAU,UAAU,UAAU,UAAU,WAAW,WAAW,WAAW,MAAM,MAAM,UAAU,UAAU,WAAW,MAAM,MAAM,UAAU,WAAW,MAAM,MAAM,UAAU,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,W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A;AACA,4CAA4C,mBAAO,CAAC,2EAAgE;AACpH,kCAAkC,mBAAO,CAAC,oEAAyD;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,6IAA6I,WAAW,WAAW,WAAW,KAAK,KAAK,WAAW,KAAK,KAAK,UAAU,KAAK,KAAK,WAAW,KAAK,KAAK,WAAW,WAAW,WAAW,WAAW,UAAU,WAAW,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,KAAK,WAAW,UAAU,KAAK,MAAM,YAAY,UAAU,UAAU,KAAK,MAAM,YAAY,WAAW,KAAK,MAAM,YAAY,UAAU,KAAK,MAAM,YAAY,WAAW,WAAW,KAAK,MAAM,WAAW,KAAK,MAAM,WAAW,MAAM,MAAM,WAAW,WAAW,MAAM,MAAM,YAAY,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,YAAY,MAAM,MAAM,WAAW,UAAU,WAAW,UAAU,MAAM,MAAM,WAAW,UAAU,MAAM,MAAM,WAAW,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,UAAU,WAAW,MAAM,MAAM,UAAU,WAAW,MAAM,MAAM,WAAW,UAAU,MAAM,MAAM,UAAU,WAAW,MAAM,MAAM,UAAU,WAAW,MAAM,MAAM,YAAY,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,WAAW,MAAM,MAAM,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,MAAM,UAAU,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,UAAU,WAAW,WAAW,UAAU,UAAU,UAAU,MAAM,MAAM,WAAW,UAAU,WAAW,WAAW,WAAW,OAAO,KAAK,MAAM,WAAW,MAAM,YAAY,OAAO,WAAW,aAAa,aAAa,aAAa,MAAM,MAAM,WAAW,WAAW,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW,iCAAiC,yBAAyB,uBAAuB,4BAA4B,GAAG,yBAAyB,+BAA+B,GAAG,eAAe,mBAAmB,GAAG,2CAA2C,sHAAsH,yBAAyB,6BAA6B,8BAA8B,oCAAoC,2BAA2B,0BAA0B,+BAA+B,gCAAgC,wCAAwC,6BAA6B,WAAW,kCAAkC,wCAAwC,6BAA6B,WAAW,kCAAkC,wCAAwC,6BAA6B,WAAW,0BAA0B,wCAAwC,6BAA6B,WAAW,8BAA8B,wCAAwC,6BAA6B,WAAW,+BAA+B,wCAAwC,6BAA6B,WAAW,OAAO,eAAe,iCAAiC,sBAAsB,uBAAuB,OAAO,+CAA+C,gCAAgC,iCAAiC,iBAAiB,qCAAqC,0BAA0B,WAAW,kBAAkB,iCAAiC,qCAAqC,0CAA0C,OAAO,uBAAuB,wBAAwB,0BAA0B,WAAW,mCAAmC,2BAA2B,WAAW,OAAO,yBAAyB,sBAAsB,oCAAoC,mCAAmC,wCAAwC,WAAW,OAAO,2BAA2B,yBAAyB,mBAAmB,0BAA0B,WAAW,OAAO,0CAA0C,uBAAuB,mBAAmB,2BAA2B,WAAW,OAAO,wBAAwB,0BAA0B,gBAAgB,+BAA+B,WAAW,OAAO,2BAA2B,yBAAyB,wBAAwB,2BAA2B,0BAA0B,OAAO,uBAAuB,yBAAyB,uBAAuB,OAAO,+BAA+B,yBAAyB,2BAA2B,gCAAgC,4CAA4C,WAAW,2BAA2B,yBAAyB,iCAAiC,WAAW,0BAA0B,yBAAyB,iCAAiC,WAAW,OAAO,+BAA+B,yBAAyB,uBAAuB,2BAA2B,yBAAyB,iCAAiC,WAAW,0BAA0B,yBAAyB,iCAAiC,WAAW,OAAO,iDAAiD,oCAAoC,OAAO,gDAAgD,wBAAwB,OAAO,GAAG,eAAe,WAAW,4BAA4B,uBAAuB,GAAG,iBAAiB,8BAA8B,gCAAgC,wBAAwB,oCAAoC,4BAA4B,4BAA4B,iCAAiC,GAAG,2DAA2D,iCAAiC,gCAAgC,2EAA2E,2CAA2C,eAAe,uCAAuC,mCAAmC,iCAAiC,4CAA4C,yCAAyC,8BAA8B,8BAA8B,iCAAiC,sCAAsC,oCAAoC,qCAAqC,4CAA4C,oDAAoD,wCAAwC,mBAAmB,eAAe,WAAW,OAAO,GAAG,oBAAoB,mCAAmC,GAAG,yDAAyD,4BAA4B,8EAA8E,+CAA+C,eAAe,yBAAyB,iDAAiD,wBAAwB,GAAG,+BAA+B,kCAAkC,GAAG,+BAA+B,kCAAkC,GAAG,mEAAmE,6BAA6B,GAAG,mBAAmB;AACv1N;AACA;;;;;;;;;;;AC7MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/base-component.directive.ts","./src/app/contactTraceCommonServices/common.service.ts","./src/app/filesComponent/files-plugin.component.ts","./src/app/golden-layout-component.service.ts","./src/app/golden-layout-host.component.ts","./src/app/helperClasses/auspiceHandler.ts","./src/app/helperClasses/colorIterator.ts","./src/app/helperClasses/customShapes.ts","./src/app/helperClasses/dialogSettings.ts","./src/app/helperClasses/inlineWorker.ts","./src/app/microbe-trace-next-plugin-visuals.ts","./src/app/microbe-trace-next-plugin.component.ts","./src/app/visualizationComponents/AggregateComponent/aggregate.component.ts","./src/app/visualizationComponents/AlignmentViewComponent/alignment-view-plugin-component.ts","./src/app/visualizationComponents/AlignmentViewComponent/generateAlignmentViewCanvas.ts","./src/app/visualizationComponents/BubbleComponent/bubble.component.ts","./src/app/visualizationComponents/CrosstabComponent/crosstab-plugin.component.ts","./src/app/visualizationComponents/GanttComponent/constants/color-schemes.ts","./src/app/visualizationComponents/GanttComponent/gantt-chart/gantt-chart.component.ts","./src/app/visualizationComponents/GanttComponent/gantt-chart/gantt-chart.service.ts","./src/app/visualizationComponents/GanttComponent/gantt-plugin.component.ts","./src/app/visualizationComponents/HeatmapComponent/heatmap.component.ts","./src/app/visualizationComponents/MapComponent/map-plugin.component.ts","./src/app/visualizationComponents/PhylogeneticComponent/phylogenetic-plugin.component.ts","./src/app/visualizationComponents/TableComponent/table-plugin-component.ts","./src/app/visualizationComponents/TimelineComponent/timeline-component.component.ts","./src/app/visualizationComponents/TwoDComponent/data2.ts","./src/app/visualizationComponents/TwoDComponent/twoD-plugin.component.ts","./src/app/workers/workModule.ts","./src/assets/metronic/app/core/core.module.ts","./src/assets/metronic/app/core/directives/menu-aside-offcanvas.directive.ts","./src/assets/metronic/app/core/directives/menu-aside-toggle.directive.ts","./src/assets/metronic/app/core/directives/menu-aside.directive.ts","./src/assets/metronic/app/core/directives/menu-horizontal-offcanvas.directive.ts","./src/assets/metronic/app/core/directives/menu-horizontal.directive.ts","./src/assets/metronic/app/core/services/layout-config.service.ts","./src/assets/metronic/app/core/services/layout/layout-ref.service.ts","./src/assets/metronic/app/core/services/utils.service.ts","./src/environments/environment.prod.ts","./src/main.ts","./src/shared/AppConsts.ts","./src/shared/common/app-component-base.ts","./src/shared/common/nav/app-url.service.ts","./src/shared/common/pipes/feature-checker.pipe.ts","./src/shared/common/pipes/localize.pipe.ts","./src/shared/common/pipes/permission.pipe.ts","./src/shared/common/session/app-session.service.ts","./src/shared/common/ui/app-ui-customization.service.ts","./src/shared/dnd.directive.ts","./src/shared/helpers/PrimengTableHelper.ts","./src/shared/utils/event-emitter.service.ts","./src/shared/utils/local-storage.service.ts","./src/shared/utils/null-value.directive.ts","./src/shared/utils/style-loader.service.ts","./src/shared/utils/utils.module.ts","./src/app/visualizationComponents/PhylogeneticComponent/tidytree.js","webpack:///./src/app/golden-layout-host.component.ts?addb","./src/app/visualizationComponents/MapComponent/map-plugin.component.css","./src/app/app.component.scss","./src/app/visualizationComponents/AggregateComponent/aggregate.component.scss","./src/app/visualizationComponents/AlignmentViewComponent/alignment-view-plugin-component.scss","./src/app/visualizationComponents/BubbleComponent/bubble.component.scss","./src/app/visualizationComponents/CrosstabComponent/crosstab-plugin.component.scss","./src/app/visualizationComponents/GanttComponent/gantt-chart/gantt-chart.component.scss","./src/app/visualizationComponents/GanttComponent/gantt-plugin.component.scss","./src/app/visualizationComponents/HeatmapComponent/heatmap.component.scss","./src/app/visualizationComponents/PhylogeneticComponent/phylogenetic-plugin.component.scss","./src/app/visualizationComponents/TimelineComponent/timeline-component.component.scss","./src/app/visualizationComponents/TwoDComponent/twoD-plugin.component.scss","./src/app/filesComponent/files-plugin.component.less","./src/app/microbe-trace-next-plugin.component.less","./src/app/visualizationComponents/TableComponent/table-plugin-component.less","./node_modules/moment/locale/ sync ^\\.\\/.*$"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { MicrobeTraceNextHomeComponent } from './microbe-trace-next-plugin.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: MicrobeTraceNextHomeComponent }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes, {})],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  title = 'sample-app';\r\n}\r\n\r\n\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { NgModule, Component } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport * as $ from 'jquery';\r\nimport { HttpClientModule, HttpClientJsonpModule } from '@angular/common/http';\r\nimport { FormsModule } from '@angular/forms';\r\n// import { ServiceProxyModule } from '@shared/service-proxies/service-proxy.module';\r\nimport { UtilsModule } from '@shared/utils/utils.module';\r\n// import { AbpModule } from 'abp-ng2-module/dist/src/abp.module';\r\n// import { ModalModule, TooltipModule, TabsModule, BsDropdownModule, PopoverModule } from 'ngx-bootstrap';\r\n// import { TableModule } from 'primeng/components/table/table';\r\n// import { FileUploadModule, ListboxModule, RadioButtonModule, CalendarModule, PaginatorModule, ProgressBarModule, ConfirmDialogModule, DropdownModule, AccordionModule, SidebarModule, MultiSelect, MultiSelectModule, SliderModule } from 'primeng/primeng';\r\n\r\nimport { GoldenLayoutComponentService } from './golden-layout-component.service';\r\nimport { GoldenLayoutHostComponent } from './golden-layout-host.component';\r\n\r\nimport { TableModule } from 'primeng/table';\r\nimport { FileUploadModule } from 'primeng/fileupload';\r\nimport { ListboxModule } from 'primeng/listbox';\r\nimport { RadioButtonModule } from 'primeng/radiobutton';\r\nimport { CalendarModule } from 'primeng/calendar';\r\nimport { PaginatorModule } from 'primeng/paginator';\r\nimport { ProgressBarModule } from 'primeng/progressbar';\r\nimport { ConfirmDialogModule } from 'primeng/confirmdialog';\r\nimport { DropdownModule } from 'primeng/dropdown';\r\nimport { AccordionModule } from 'primeng/accordion';\r\nimport { SidebarModule } from 'primeng/sidebar';\r\nimport { MultiSelectModule } from 'primeng/multiselect';\r\nimport { SliderModule } from 'primeng/slider';\r\nimport { TabViewModule } from 'primeng/tabview';\r\nimport { SelectButtonModule } from 'primeng/selectbutton';\r\nimport { TreeModule } from 'primeng/tree';\r\nimport { DialogModule } from 'primeng/dialog';\r\nimport { OrderListModule } from 'primeng/orderlist';\r\nimport { MicrobeTraceNextHomeComponent } from './microbe-trace-next-plugin.component';\r\nimport { AppSessionService } from '@shared/common/session/app-session.service';\r\nimport { AppUiCustomizationService } from '@shared/common/ui/app-ui-customization.service';\r\nimport { AppUrlService } from '@shared/common/nav/app-url.service';\r\nimport { FilesComponent } from './filesComponent/files-plugin.component';\r\nimport { PhylogeneticComponent } from './visualizationComponents/PhylogeneticComponent/phylogenetic-plugin.component';\r\nimport { TimelineComponent } from './visualizationComponents/TimelineComponent/timeline-component.component';\r\nimport { TwoDComponent } from './visualizationComponents/TwoDComponent/twoD-plugin.component';\r\nimport { CoreModule } from '@metronic/app/core/core.module';\r\nimport { TableComponent } from './visualizationComponents/TableComponent/table-plugin-component';\r\nimport { MapComponent } from './visualizationComponents/MapComponent/map-plugin.component';\r\nimport { AlignmentViewComponent } from './visualizationComponents/AlignmentViewComponent/alignment-view-plugin-component';\r\nimport { LeafletModule } from '@asymmetrik/ngx-leaflet';\r\nimport { LeafletMarkerClusterModule } from '@asymmetrik/ngx-leaflet-markercluster';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { MatSliderModule } from '@angular/material/slider';\r\nimport { DndDirective } from '@shared/dnd.directive';\r\n\r\nimport {MatSelectModule} from '@angular/material/select';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { CrosstabComponent } from './visualizationComponents/CrosstabComponent/crosstab-plugin.component';\r\nimport { AggregateComponent } from './visualizationComponents/AggregateComponent/aggregate.component';\r\nimport { BubbleComponent } from './visualizationComponents/BubbleComponent/bubble.component';\r\n\r\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\r\nimport { TabsModule } from 'ngx-bootstrap/tabs';\r\nimport { ModalModule } from 'ngx-bootstrap/modal';\r\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\r\nimport { PopoverModule } from 'ngx-bootstrap/popover';\r\n\r\nimport { VisGraphModule, VisSingleContainerModule, VisXYContainerModule, VisScatterModule, VisAxisModule, VisTooltipModule } from '@unovis/angular';\r\nimport { GanttComponent } from './visualizationComponents/GanttComponent/gantt-plugin.component';\r\nimport { GanttChartComponent } from './visualizationComponents/GanttComponent/gantt-chart/gantt-chart.component';\r\nimport { GanttChartService } from './visualizationComponents/GanttComponent/gantt-chart/gantt-chart.service';\r\nimport { HeatmapComponent } from './visualizationComponents/HeatmapComponent/heatmap.component';\r\nimport { GoogleTagManagerModule } from 'angular-google-tag-manager';\r\n// import * as PlotlyJS from 'plotly.js-dist-min';\r\n// import { PlotlyModule } from 'angular-plotly.js';\r\n\r\n// It is required to have JQuery as global in the window object.\r\nwindow['$'] = $;\r\n\r\n// PlotlyModule.plotlyjs = PlotlyJS;\r\n\r\n@Component({\r\n  template: `<h1>Test2</h1>`,\r\n  selector: `app-tested`,\r\n})\r\nexport class TestedComponent {\r\n  constructor() { }\r\n\r\n}\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    MicrobeTraceNextHomeComponent,\r\n    FilesComponent,\r\n    TwoDComponent,\r\n    TableComponent,\r\n    GoldenLayoutHostComponent,\r\n    MapComponent,\r\n    TestedComponent,\r\n    DndDirective,\r\n    PhylogeneticComponent,\r\n    TimelineComponent,\r\n    AlignmentViewComponent,\r\n    CrosstabComponent,\r\n    AggregateComponent,\r\n    GanttChartComponent,\r\n    GanttComponent,\r\n    HeatmapComponent,\r\n    BubbleComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    FormsModule,\r\n    HttpClientModule,\r\n    MatButtonModule,\r\n    MatInputModule,\r\n    MatMenuModule,\r\n    MatSliderModule,\r\n    MatToolbarModule,\r\n    MatSelectModule,\r\n    MatProgressSpinnerModule,\r\n    MatIconModule,\r\n    HttpClientJsonpModule,\r\n    ModalModule.forRoot(),\r\n    TooltipModule.forRoot(),\r\n    TabsModule.forRoot(),\r\n    BsDropdownModule.forRoot(),\r\n    PopoverModule.forRoot(),\r\n    FileUploadModule,\r\n    AppRoutingModule,\r\n    UtilsModule,\r\n    TableModule,\r\n    ListboxModule,   \r\n    RadioButtonModule,     \r\n    CalendarModule,\r\n    PaginatorModule,\r\n    ProgressBarModule,\r\n    CoreModule,\r\n    ConfirmDialogModule,    \r\n    DropdownModule,\r\n    TabViewModule,\r\n    SelectButtonModule,\r\n    TreeModule,\r\n    DialogModule,\r\n    AccordionModule,\r\n    SidebarModule,\r\n    MultiSelectModule,\r\n    SliderModule,\r\n    LeafletModule,\r\n    LeafletMarkerClusterModule,\r\n    VisGraphModule,\r\n    VisSingleContainerModule,\r\n    OrderListModule,\r\n    GoogleTagManagerModule.forRoot({id: 'G-0MWHB1NG2M',}),\r\n    CommonModule,\r\n    // PlotlyModule,\r\n    VisXYContainerModule, \r\n    VisScatterModule, \r\n    VisAxisModule,\r\n    VisTooltipModule,\r\n  ],\r\n  exports: [\r\n    SelectButtonModule\r\n  ],\r\n  providers: [\r\n    AppSessionService,\r\n    AppUiCustomizationService,\r\n    AppUrlService,\r\n    GanttChartService,\r\n    GoldenLayoutComponentService,\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Directive, InjectionToken } from '@angular/core';\r\nimport { ComponentContainer } from \"golden-layout\";\r\n  \r\n@Directive()\r\nexport abstract class BaseComponentDirective {\r\n    constructor(public rootHtmlElement: HTMLElement) {\r\n\r\n    }\r\n\r\n    setPositionAndSize(left: number, top: number, width: number, height: number) {\r\n        this.rootHtmlElement.style.left = this.numberToPixels(left);\r\n        this.rootHtmlElement.style.top = this.numberToPixels(top);\r\n        this.rootHtmlElement.style.width = this.numberToPixels(width);\r\n        this.rootHtmlElement.style.height = this.numberToPixels(height);\r\n    } \r\n\r\n    setVisibility(visible: boolean) {\r\n        if (visible) {\r\n            this.rootHtmlElement.style.display = '';\r\n        } else {\r\n            this.rootHtmlElement.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    setZIndex(value: string) {\r\n        this.rootHtmlElement.style.zIndex = value;\r\n    }\r\n\r\n    /**\r\n     * Convert a number to a string and adds 'px' at end of the string\r\n     * @param value a number to be converted into string\r\n     * @returns the string\r\n     */\r\n    private numberToPixels(value: number): string {\r\n        return value.toString(10) + 'px';\r\n    }\r\n}\r\n\r\nexport namespace BaseComponentDirective {\r\n    const GoldenLayoutContainerTokenName = 'GoldenLayoutContainer'; \r\n    export const GoldenLayoutContainerInjectionToken = new InjectionToken<ComponentContainer>(GoldenLayoutContainerTokenName);\r\n}\r\n","import { Injectable, OnInit, Output, EventEmitter, Injector, Directive } from '@angular/core';\r\nimport { BehaviorSubject, Observable, of } from 'rxjs';\r\nimport * as d3 from 'd3';\r\nimport * as patristic from 'patristic';\r\nimport * as GoldenLayout from 'golden-layout';\r\nimport * as Papa from 'papaparse';\r\nimport * as _ from 'lodash';\r\n// import { window } from 'ngx-bootstrap';\r\nimport moment from 'moment';\r\nimport { WorkerModule } from '../workers/workModule';\r\nimport { LocalStorageService } from '@shared/utils/local-storage.service';\r\n//import countriesJson from '../data/countries.json';\r\n//import countiesJson from '../data/counties.json';\r\n//import statesJson from '../data/states.json';\r\n//import landJson from '../data/land.json';\r\n//import starsJson from '../data/stars.json';\r\n\r\nimport AuspiceHandler from '@app/helperClasses/auspiceHandler';\r\nimport { AppComponentBase } from '@shared/common/app-component-base';\r\nimport { StashObjects, StashObject } from '../helperClasses/interfaces';\r\nimport { MicrobeTraceNextVisuals } from '../microbe-trace-next-plugin-visuals';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { map } from 'rxjs/operators';\r\nimport { window } from 'ngx-bootstrap/utils';\r\n// import { MicrobeTraceLink, MicrobeTraceNode, MicrobeTraceSessionGraphData } from '@app/visualizationComponents/TwoDComponent/mockdata';\r\nimport { GraphData, LinkDatum, NodeDatum } from '@app/visualizationComponents/TwoDComponent/data';\r\nimport { group } from 'console';\r\nimport { GraphNodeShape, GraphPanelConfig } from '@unovis/ts';\r\n\r\n\r\n// import { GoldenLayoutService } from '@embedded-enterprises/ng6-golden-layout';\r\n// import { ConsoleReporter } from 'jasmine';\r\n\r\n\r\n@Directive()\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CommonService extends AppComponentBase implements OnInit {\r\n\r\n    @Output() LoadViewEvent = new EventEmitter();\r\n\r\n    decoder: any = new TextDecoder('utf-8');\r\n    r01: any = Math.random;\r\n\r\n    thresholdHistogram: any;\r\n\r\n    // Set this to true to enable the debug mode/console logs to appear\r\n    public debugMode: boolean = true;\r\n\r\n    private linkElementSource = new BehaviorSubject<HTMLElement | null>(null);\r\n    private nodeElementSource = new BehaviorSubject<HTMLElement | null>(null);\r\n\r\n    currentLinkTableElement = this.linkElementSource.asObservable();\r\n\r\n    currentNodeTableElement = this.nodeElementSource.asObservable();\r\n\r\n\r\n    setLinkTableElement(element: HTMLElement | null) {\r\n        this.linkElementSource.next(element);\r\n    }\r\n\r\n    setNodeTableElement(element: HTMLElement | null) {\r\n        this.nodeElementSource.next(element);\r\n    }\r\n\r\n    GlobalSettingsModel: any = {\r\n        SelectedColorNodesByVariable: 'None',\r\n        SelectedColorLinksByVariable: 'None',\r\n        SelectedNodeColorVariable: 'None',\r\n        SelectedLinkColorVariable: '#a6cee3',\r\n        SelectedPruneWityTypesVariable: 'None',\r\n        SelectedStatisticsTypesVariable: 'Hide',\r\n        SelectedClusterMinimumSizeVariable: 0,\r\n        SelectedLinkSortVariable: 'Distance',\r\n        SelectedLinkThresholdVariable: 0.015,\r\n        SelectedDistanceMetricVariable: 'tn93',\r\n        SelectedLinkColorTableTypesVariable: 'Hide',\r\n        SelectedNodeColorTableTypesVariable: 'Hide',\r\n\r\n        SelectedColorVariable: '#ff8300',\r\n        SelectedBackgroundColorVariable: '#ffffff',\r\n        SelectedApplyStyleVariable: '',\r\n        SelectedRevealTypesVariable: 'Everything'\r\n    };\r\n\r\n    /**\r\n     * Returns an object that will eventually be filled with data. It is accessed throught commonService.session.data\r\n     * It will store a list of nodes, links, and clusters as well as fields that can be used for each\r\n     */\r\n    dataSkeleton = () => {\r\n        return {\r\n            nodes: [],\r\n            links: [],\r\n            unoNodes: [],\r\n            unoLinks: [],\r\n            clusters: [],\r\n            nodeFields: [\r\n                'index',\r\n                '_id',\r\n                'selected',\r\n                'cluster',\r\n                'visible',\r\n                'degree',\r\n                'origin'\r\n            ],\r\n            nodeExclusions: [],\r\n            linkFields: [\r\n                'index',\r\n                'source',\r\n                'target',\r\n                'distance',\r\n                'visible',\r\n                'cluster',\r\n                'origin',\r\n                'nn',\r\n                'directed'\r\n            ],\r\n            clusterFields: [\r\n                'id',\r\n                'nodes',\r\n                'links',\r\n                'sum_distances',\r\n                'links_per_node',\r\n                'mean_genetic_distance',\r\n                'visible'\r\n            ],\r\n            nodeFilter: {},\r\n            linkFilter: {},\r\n            clusterFilter: {},\r\n            nodeFilteredValues: [],\r\n            linkFilteredValues: [],\r\n            clusterFilteredValues: [],\r\n            nodeTableColumns: [],\r\n            linkTableColumns: [],\r\n            clusterTableColumns: [],\r\n            tree: {},\r\n            newickString: '',\r\n            reference:\r\n                'CCTCAGGTCACTCTTTGGCAACGACCCCTCGTCACAATAAAGATAGGGGGGCAACTAAAGGAAGCTCTATTAGATACAGGAGCAGATGATACAGTATTAGAAGAAATGAGTTTGCCAGGAAGATGGAAACCAAAAATGATAGGGGGAATTGGAGGTTTTATCAAAGTAAGACAGTATGATCAGATACTCATAGAAATCTGTGGACATAAAGCTATAGGTACAGTATTAGTAGGACCTACACCTGTCAACATAATTGGAAGAAATCTGTTGACTCAGATTGGTTGCACTTTAAATTTTCCCATTAGCCCTATTGAGACTGTACCAGTAAAATTAAAGCCAGGAATGGATGGCCCAAAAGTTAAACAATGGCCATTGACAGAAGAAAAAATAAAAGCATTAGTAGAAATTTGTACAGAGATGGAAAAGGAAGGGAAAATTTCAAAAATTGGGCCTGAAAATCCATACAATACTCCAGTATTTGCCATAAAGAAAAAAGACAGTACTAAATGGAGAAAATTAGTAGATTTCAGAGAACTTAATAAGAGAACTCAAGACTTCTGGGAAGTTCAATTAGGAATACCACATCCCGCAGGGTTAAAAAAGAAAAAATCAGTAACAGTACTGGATGTGGGTGATGCATATTTTTCAGTTCCCTTAGATGAAGACTTCAGGAAGTATACTGCATTTACCATACCTAGTATAAACAATGAGACACCAGGGATTAGATATCAGTACAATGTGCTTCCACAGGGATGGAAAGGATCACCAGCAATATTCCAAAGTAGCATGACAAAAATCTTAGAGCCTTTTAGAAAACAAAATCCAGACATAGTTATCTATCAATACATGGATGATTTGTATGTAGGATCTGACTTAGAAATAGGGCAGCATAGAACAAAAATAGAGGAGCTGAGACAACATCTGTTGAGGTGGGGACTTACCACACCAGACAAAAAACATCAGAAAGAACCTCCATTCCTTTGGATGGGTTATGAACTCCATCCTGATAAATGGACAGTACAGCCTATAGTGCTGCCAGAAAAAGACAGCTGGACTGTCAATGACATACAGAAGTTAGTGGGGAAATTGAATTGGGCAAGTCAGATTTACCCAGGGATTAAAGTAAGGCAATTATGTAAACTCCTTAGAGGAACCAAAGCACTAACAGAAGTAATACCACTAACAGAAGAAGCAGAGCTAGAACTGGCAGAAAACAGAGAGATTCTAAAAGAACCAGTACATGGAGTGTATTATGACCCATCAAAAGACTTAATAGCAGAAATACAGAAGCAGGGGCAAGGCCAATGGACATATCAAATTTATCAAGAGCCATTTAAAAATCTGAAAACAGGAAAATATGCAAGAATGAGGGGTGCCCACACTAATGATGTAAAACAATTAACAGAGGCAGTGCAAAAAATAACCACAGAAAGCATAGTAATATGGGGAAAGACTCCTAAATTTAAACTGCCCATACAAAAGGAAACATGGGAAACATGGTGGACAGAGTATTGGCAAGCCACCTGGATTCCTGAGTGGGAGTTTGTTAATACCCCTCCCTTAGTGAAATTATGGTACCAGTTAGAGAAAGAACCCATAGTAGGAGCAGAAACCTTC'\r\n        };\r\n    };\r\n\r\n    watermark: any = 'data:image/png;base64,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';\r\n    HXB2: any = 'TGGAAGGGCTAATTCACTCCCAACGAAGACAAGATATCCTTGATCTGTGGATCTACCACACACAAGGCTACTTCCCTGATTAGCAGAACTACACACCAGGGCCAGGGATCAGATATCCACTGACCTTTGGATGGTGCTACAAGCTAGTACCAGTTGAGCCAGAGAAGTTAGAAGAAGCCAACAAAGGAGAGAACACCAGCTTGTTACACCCTGTGAGCCTGCATGGAATGGATGACCCGGAGAGAGAAGTGTTAGAGTGGAGGTTTGACAGCCGCCTAGCATTTCATCACATGGCCCGAGAGCTGCATCCGGAGTACTTCAAGAACTGCTGACATCGAGCTTGCTACAAGGGACTTTCCGCTGGGGACTTTCCAGGGAGGCGTGGCCTGGGCGGGACTGGGGAGTGGCGAGCCCTCAGATCCTGCATATAAGCAGCTGCTTTTTGCCTGTACTGGGTCTCTCTGGTTAGACCAGATCTGAGCCTGGGAGCTCTCTGGCTAACTAGGGAACCCACTGCTTAAGCCTCAATAAAGCTTGCCTTGAGTGCTTCAAGTAGTGTGTGCCCGTCTGTTGTGTGACTCTGGTAACTAGAGATCCCTCAGACCCTTTTAGTCAGTGTGGAAAATCTCTAGCAGTGGCGCCCGAACAGGGACCTGAAAGCGAAAGGGAAACCAGAGGAGCTCTCTCGACGCAGGACTCGGCTTGCTGAAGCGCGCACGGCAAGAGGCGAGGGGCGGCGACTGGTGAGTACGCCAAAAATTTTGACTAGCGGAGGCTAGAAGGAGAGAGATGGGTGCGAGAGCGTCAGTATTAAGCGGGGGAGAATTAGATCGATGGGAAAAAATTCGGTTAAGGCCAGGGGGAAAGAAAAAATATAAATTAAAACATATAGTATGGGCAAGCAGGGAGCTAGAACGATTCGCAGTTAATCCTGGCCTGTTAGAAACATCAGAAGGCTGTAGACAAATACTGGGACAGCTACAACCATCCCTTCAGACAGGATCAGAAGAACTTAGATCATTATATAATACAGTAGCAACCCTCTATTGTGTGCATCAAAGGATAGAGATAAAAGACACCAAGGAAGCTTTAGACAAGATAGAGGAAGAGCAAAACAAAAGTAAGAAAAAAGCACAGCAAGCAGCAGCTGACACAGGACACAGCAATCAGGTCAGCCAAAATTACCCTATAGTGCAGAACATCCAGGGGCAAATGGTACATCAGGCCATATCACCTAGAACTTTAAATGCATGGGTAAAAGTAGTAGAAGAGAAGGCTTTCAGCCCAGAAGTGATACCCATGTTTTCAGCATTATCAGAAGGAGCCACCCCACAAGATTTAAACACCATGCTAAACACAGTGGGGGGACATCAAGCAGCCATGCAAATGTTAAAAGAGACCATCAATGAGGAAGCTGCAGAATGGGATAGAGTGCATCCAGTGCATGCAGGGCCTATTGCACCAGGCCAGATGAGAGAACCAAGGGGAAGTGACATAGCAGGAACTACTAGTACCCTTCAGGAACAAATAGGATGGATGACAAATAATCCACCTATCCCAGTAGGAGAAATTTATAAAAGATGGATAATCCTGGGATTAAATAAAATAGTAAGAATGTATAGCCCTACCAGCATTCTGGACATAAGACAAGGACCAAAGGAACCCTTTAGAGACTATGTAGACCGGTTCTATAAAACTCTAAGAGCCGAGCAAGCTTCACAGGAGGTAAAAAATTGGATGACAGAAACCTTGTTGGTCCAAAATGCGAACCCAGATTGTAAGACTATTTTAAAAGCATTGGGACCAGCGGCTACACTAGAAGAAATGATGACAGCATGTCAGGGAGTAGGAGGACCCGGCCATAAGGCAAGAGTTTTGGCTGAAGCAATGAGCCAAGTAACAAATTCAGCTACCATAATGATGCAGAGAGGCAATTTTAGGAACCAAAGAAAGATTGTTAAGTGTTTCAATTGTGGCAAAGAAGGGCACACAGCCAGAAATTGCAGGGCCCCTAGGAAAAAGGGCTGTTGGAAATGTGGAAAGGAAGGACACCAAATGAAAGATTGTACTGAGAGACAGGCTAATTTTTTAGGGAAGATCTGGCCTTCCTACAAGGGAAGGCCAGGGAATTTTCTTCAGAGCAGACCAGAGCCAACAGCCCCACCAGAAGAGAGCTTCAGGTCTGGGGTAGAGACAACAACTCCCCCTCAGAAGCAGGAGCCGATAGACAAGGAACTGTATCCTTTAACTTCCCTCAGGTCACTCTTTGGCAACGACCCCTCGTCACAATAAAGATAGGGGGGCAACTAAAGGAAGCTCTATTAGATACAGGAGCAGATGATACAGTATTAGAAGAAATGAGTTTGCCAGGAAGATGGAAACCAAAAATGATAGGGGGAATTGGAGGTTTTATCAAAGTAAGACAGTATGATCAGATACTCATAGAAATCTGTGGACATAAAGCTATAGGTACAGTATTAGTAGGACCTACACCTGTCAACATAATTGGAAGAAATCTGTTGACTCAGATTGGTTGCACTTTAAATTTTCCCATTAGCCCTATTGAGACTGTACCAGTAAAATTAAAGCCAGGAATGGATGGCCCAAAAGTTAAACAATGGCCATTGACAGAAGAAAAAATAAAAGCATTAGTAGAAATTTGTACAGAGATGGAAAAGGAAGGGAAAATTTCAAAAATTGGGCCTGAAAATCCATACAATACTCCAGTATTTGCCATAAAGAAAAAAGACAGTACTAAATGGAGAAAATTAGTAGATTTCAGAGAACTTAATAAGAGAACTCAAGACTTCTGGGAAGTTCAATTAGGAATACCACATCCCGCAGGGTTAAAAAAGAAAAAATCAGTAACAGTACTGGATGTGGGTGATGCATATTTTTCAGTTCCCTTAGATGAAGACTTCAGGAAGTATACTGCATTTACCATACCTAGTATAAACAATGAGACACCAGGGATTAGATATCAGTACAATGTGCTTCCACAGGGATGGAAAGGATCACCAGCAATATTCCAAAGTAGCATGACAAAAATCTTAGAGCCTTTTAGAAAACAAAATCCAGACATAGTTATCTATCAATACATGGATGATTTGTATGTAGGATCTGACTTAGAAATAGGGCAGCATAGAACAAAAATAGAGGAGCTGAGACAACATCTGTTGAGGTGGGGACTTACCACACCAGACAAAAAACATCAGAAAGAACCTCCATTCCTTTGGATGGGTTATGAACTCCATCCTGATAAATGGACAGTACAGCCTATAGTGCTGCCAGAAAAAGACAGCTGGACTGTCAATGACATACAGAAGTTAGTGGGGAAATTGAATTGGGCAAGTCAGATTTACCCAGGGATTAAAGTAAGGCAATTATGTAAACTCCTTAGAGGAACCAAAGCACTAACAGAAGTAATACCACTAACAGAAGAAGCAGAGCTAGAACTGGCAGAAAACAGAGAGATTCTAAAAGAACCAGTACATGGAGTGTATTATGACCCATCAAAAGACTTAATAGCAGAAATACAGAAGCAGGGGCAAGGCCAATGGACATATCAAATTTATCAAGAGCCATTTAAAAATCTGAAAACAGGAAAATATGCAAGAATGAGGGGTGCCCACACTAATGATGTAAAACAATTAACAGAGGCAGTGCAAAAAATAACCACAGAAAGCATAGTAATATGGGGAAAGACTCCTAAATTTAAACTGCCCATACAAAAGGAAACATGGGAAACATGGTGGACAGAGTATTGGCAAGCCACCTGGATTCCTGAGTGGGAGTTTGTTAATACCCCTCCCTTAGTGAAATTATGGTACCAGTTAGAGAAAGAACCCATAGTAGGAGCAGAAACCTTCTATGTAGATGGGGCAGCTAACAGGGAGACTAAATTAGGAAAAGCAGGATATGTTACTAATAGAGGAAGACAAAAAGTTGTCACCCTAACTGACACAACAAATCAGAAGACTGAGTTACAAGCAATTTATCTAGCTTTGCAGGATTCGGGATTAGAAGTAAACATAGTAACAGACTCACAATATGCATTAGGAATCATTCAAGCACAACCAGATCAAAGTGAATCAGAGTTAGTCAATCAAATAATAGAGCAGTTAATAAAAAAGGAAAAGGTCTATCTGGCATGGGTACCAGCACACAAAGGAATTGGAGGAAATGAACAAGTAGATAAATTAGTCAGTGCTGGAATCAGGAAAGTACTATTTTTAGATGGAATAGATAAGGCCCAAGATGAACATGAGAAATATCACAGTAATTGGAGAGCAATGGCTAGTGATTTTAACCTGCCACCTGTAGTAGCAAAAGAAATAGTAGCCAGCTGTGATAAATGTCAGCTAAAAGGAGAAGCCATGCATGGACAAGTAGACTGTAGTCCAGGAATATGGCAACTAGATTGTACACATTTAGAAGGAAAAGTTATCCTGGTAGCAGTTCATGTAGCCAGTGGATATATAGAAGCAGAAGTTATTCCAGCAGAAACAGGGCAGGAAACAGCATATTTTCTTTTAAAATTAGCAGGAAGATGGCCAGTAAAAACAATACATACTGACAATGGCAGCAATTTCACCGGTGCTACGGTTAGGGCCGCCTGTTGGTGGGCGGGAATCAAGCAGGAATTTGGAATTCCCTACAATCCCCAAAGTCAAGGAGTAGTAGAATCTATGAATAAAGAATTAAAGAAAATTATAGGACAGGTAAGAGATCAGGCTGAACATCTTAAGACAGCAGTACAAATGGCAGTATTCATCCACAATTTTAAAAGAAAAGGGGGGATTGGGGGGTACAGTGCAGGGGAAAGAATAGTAGACATAATAGCAACAGACATACAAACTAAAGAATTACAAAAACAAATTACAAAAATTCAAAATTTTCGGGTTTATTACAGGGACAGCAGAAATCCACTTTGGAAAGGACCAGCAAAGCTCCTCTGGAAAGGTGAAGGGGCAGTAGTAATACAAGATAATAGTGACATAAAAGTAGTGCCAAGAAGAAAAGCAAAGATCATTAGGGATTATGGAAAACAGATGGCAGGTGATGATTGTGTGGCAAGTAGACAGGATGAGGATTAGAACATGGAAAAGTTTAGTAAAACACCATATGTATGTTTCAGGGAAAGCTAGGGGATGGTTTTATAGACATCACTATGAAAGCCCTCATCCAAGAATAAGTTCAGAAGTACACATCCCACTAGGGGATGCTAGATTGGTAATAACAACATATTGGGGTCTGCATACAGGAGAAAGAGACTGGCATTTGGGTCAGGGAGTCTCCATAGAATGGAGGAAAAAGAGATATAGCACACAAGTAGACCCTGAACTAGCAGACCAACTAATTCATCTGTATTACTTTGACTGTTTTTCAGACTCTGCTATAAGAAAGGCCTTATTAGGACACATAGTTAGCCCTAGGTGTGAATATCAAGCAGGACATAACAAGGTAGGATCTCTACAATACTTGGCACTAGCAGCATTAATAACACCAAAAAAGATAAAGCCACCTTTGCCTAGTGTTACGAAACTGACAGAGGATAGATGGAACAAGCCCCAGAAGACCAAGGGCCACAGAGGGAGCCACACAATGAATGGACACTAGAGCTTTTAGAGGAGCTTAAGAATGAAGCTGTTAGACATTTTCCTAGGATTTGGCTCCATGGCTTAGGGCAACATATCTATGAAACTTATGGGGATACTTGGGCAGGAGTGGAAGCCATAATAAGAATTCTGCAACAACTGCTGTTTATCCATTTTCAGAATTGGGTGTCGACATAGCAGAATAGGCGTTACTCGACAGAGGAGAGCAAGAAATGGAGCCAGTAGATCCTAGACTAGAGCCCTGGAAGCATCCAGGAAGTCAGCCTAAAACTGCTTGTACCAATTGCTATTGTAAAAAGTGTTGCTTTCATTGCCAAGTTTGTTTCATAACAAAAGCCTTAGGCATCTCCTATGGCAGGAAGAAGCGGAGACAGCGACGAAGAGCTCATCAGAACAGTCAGACTCATCAAGCTTCTCTATCAAAGCAGTAAGTAGTACATGTAACGCAACCTATACCAATAGTAGCAATAGTAGCATTAGTAGTAGCAATAATAATAGCAATAGTTGTGTGGTCCATAGTAATCATAGAATATAGGAAAATATTAAGACAAAGAAAAATAGACAGGTTAATTGATAGACTAATAGAAAGAGCAGAAGACAGTGGCAATGAGAGTGAAGGAGAAATATCAGCACTTGTGGAGATGGGGGTGGAGATGGGGCACCATGCTCCTTGGGATGTTGATGATCTGTAGTGCTACAGAAAAATTGTGGGTCACAGTCTATTATGGGGTACCTGTGTGGAAGGAAGCAACCACCACTCTATTTTGTGCATCAGATGCTAAAGCATATGATACAGAGGTACATAATGTTTGGGCCACACATGCCTGTGTACCCACAGACCCCAACCCACAAGAAGTAGTATTGGTAAATGTGACAGAAAATTTTAACATGTGGAAAAATGACATGGTAGAACAGATGCATGAGGATATAATCAGTTTATGGGATCAAAGCCTAAAGCCATGTGTAAAATTAACCCCACTCTGTGTTAGTTTAAAGTGCACTGATTTGAAGAATGATACTAATACCAATAGTAGTAGCGGGAGAATGATAATGGAGAAAGGAGAGATAAAAAACTGCTCTTTCAATATCAGCACAAGCATAAGAGGTAAGGTGCAGAAAGAATATGCATTTTTTTATAAACTTGATATAATACCAATAGATAATGATACTACCAGCTATAAGTTGACAAGTTGTAACACCTCAGTCATTACACAGGCCTGTCCAAAGGTATCCTTTGAGCCAATTCCCATACATTATTGTGCCCCGGCTGGTTTTGCGATTCTAAAATGTAATAATAAGACGTTCAATGGAACAGGACCATGTACAAATGTCAGCACAGTACAATGTACACATGGAATTAGGCCAGTAGTATCAACTCAACTGCTGTTAAATGGCAGTCTAGCAGAAGAAGAGGTAGTAATTAGATCTGTCAATTTCACGGACAATGCTAAAACCATAATAGTACAGCTGAACACATCTGTAGAAATTAATTGTACAAGACCCAACAACAATACAAGAAAAAGAATCCGTATCCAGAGAGGACCAGGGAGAGCATTTGTTACAATAGGAAAAATAGGAAATATGAGACAAGCACATTGTAACATTAGTAGAGCAAAATGGAATAACACTTTAAAACAGATAGCTAGCAAATTAAGAGAACAATTTGGAAATAATAAAACAATAATCTTTAAGCAATCCTCAGGAGGGGACCCAGAAATTGTAACGCACAGTTTTAATTGTGGAGGGGAATTTTTCTACTGTAATTCAACACAACTGTTTAATAGTACTTGGTTTAATAGTACTTGGAGTACTGAAGGGTCAAATAACACTGAAGGAAGTGACACAATCACCCTCCCATGCAGAATAAAACAAATTATAAACATGTGGCAGAAAGTAGGAAAAGCAATGTATGCCCCTCCCATCAGTGGACAAATTAGATGTTCATCAAATATTACAGGGCTGCTATTAACAAGAGATGGTGGTAATAGCAACAATGAGTCCGAGATCTTCAGACCTGGAGGAGGAGATATGAGGGACAATTGGAGAAGTGAATTATATAAATATAAAGTAGTAAAAATTGAACCATTAGGAGTAGCACCCACCAAGGCAAAGAGAAGAGTGGTGCAGAGAGAAAAAAGAGCAGTGGGAATAGGAGCTTTGTTCCTTGGGTTCTTGGGAGCAGCAGGAAGCACTATGGGCGCAGCCTCAATGACGCTGACGGTACAGGCCAGACAATTATTGTCTGGTATAGTGCAGCAGCAGAACAATTTGCTGAGGGCTATTGAGGCGCAACAGCATCTGTTGCAACTCACAGTCTGGGGCATCAAGCAGCTCCAGGCAAGAATCCTGGCTGTGGAAAGATACCTAAAGGATCAACAGCTCCTGGGGATTTGGGGTTGCTCTGGAAAACTCATTTGCACCACTGCTGTGCCTTGGAATGCTAGTTGGAGTAATAAATCTCTGGAACAGATTTGGAATCACACGACCTGGATGGAGTGGGACAGAGAAATTAACAATTACACAAGCTTAATACACTCCTTAATTGAAGAATCGCAAAACCAGCAAGAAAAGAATGAACAAGAATTATTGGAATTAGATAAATGGGCAAGTTTGTGGAATTGGTTTAACATAACAAATTGGCTGTGGTATATAAAATTATTCATAATGATAGTAGGAGGCTTGGTAGGTTTAAGAATAGTTTTTGCTGTACTTTCTATAGTGAATAGAGTTAGGCAGGGATATTCACCATTATCGTTTCAGACCCACCTCCCAACCCCGAGGGGACCCGACAGGCCCGAAGGAATAGAAGAAGAAGGTGGAGAGAGAGACAGAGACAGATCCATTCGATTAGTGAACGGATCCTTGGCACTTATCTGGGACGATCTGCGGAGCCTGTGCCTCTTCAGCTACCACCGCTTGAGAGACTTACTCTTGATTGTAACGAGGATTGTGGAACTTCTGGGACGCAGGGGGTGGGAAGCCCTCAAATATTGGTGGAATCTCCTACAGTATTGGAGTCAGGAACTAAAGAATAGTGCTGTTAGCTTGCTCAATGCCACAGCCATAGCAGTAGCTGAGGGGACAGATAGGGTTATAGAAGTAGTACAAGGAGCTTGTAGAGCTATTCGCCACATACCTAGAAGAATAAGACAGGGCTTGGAAAGGATTTTGCTATAAGATGGGTGGCAAGTGGTCAAAAAGTAGTGTGATTGGATGGCCTACTGTAAGGGAAAGAATGAGACGAGCTGAGCCAGCAGCAGATAGGGTGGGAGCAGCATCTCGAGACCTGGAAAAACATGGAGCAATCACAAGTAGCAATACAGCAGCTACCAATGCTGCTTGTGCCTGGCTAGAAGCACAAGAGGAGGAGGAGGTGGGTTTTCCAGTCACACCTCAGGTACCTTTAAGACCAATGACTTACAAGGCAGCTGTAGATCTTAGCCACTTTTTAAAAGAAAAGGGGGGACTGGAAGGGCTAATTCACTCCCAAAGAAGACAAGATATCCTTGATCTGTGGATCTACCACACACAAGGCTACTTCCCTGATTAGCAGAACTACACACCAGGGCCAGGGGTCAGATATCCACTGACCTTTGGATGGTGCTACAAGCTAGTACCAGTTGAGCCAGATAAGATAGAAGAGGCCAATAAAGGAGAGAACACCAGCTTGTTACACCCTGTGAGCCTGCATGGGATGGATGACCCGGAGAGAGAAGTGTTAGAGTGGAGGTTTGACAGCCGCCTAGCATTTCATCACGTGGCCCGAGAGCTGCATCCGGAGTACTTCAAGAACTGCTGACATCGAGCTTGCTACAAGGGACTTTCCGCTGGGGACTTTCCAGGGAGGCGTGGCCTGGGCGGGACTGGGGAGTGGCGAGCCCTCAGATCCTGCATATAAGCAGCTGCTTTTTGCCTGTACTGGGTCTCTCTGGTTAGACCAGATCTGAGCCTGGGAGCTCTCTGGCTAACTAGGGAACCCACTGCTTAAGCCTCAATAAAGCTTGCCTTGAGTGCTTCAAGTAGTGTGTGCCCGTCTGTTGTGTGACTCTGGTAACTAGAGATCCCTCAGACCCTTTTAGTCAGTGTGGAAAATCTCTAGCA';\r\n    // layout: any = new GoldenLayout({\r\n    //     settings: {\r\n    //         selectionEnabled: true,\r\n    //         showPopoutIcon: false\r\n    //     },\r\n    //     content: [\r\n    //         {\r\n    //             type: 'stack',\r\n    //             content: []\r\n    //         }\r\n    //     ]\r\n    // }, $('#main-panel'));\r\n\r\n    /**\r\n     * @returns an object that stores the common widgets/settings used throughout MicrobeTrace\r\n     */\r\n    defaultWidgets = () => {\r\n        return {\r\n            '3DNet-link-tooltip-variable': 'None',\r\n            '3DNet-link-transparency': 0,\r\n            '3DNet-link-width': 1.6,\r\n            '3DNet-node-tooltip-variable': '_id',\r\n            '3DNet-node-radius': 4,\r\n            '3DNet-node-radius-variable': 'None',\r\n            'align-sw': false,\r\n            'align-none': true,\r\n            'alignView-charSetting': 'hide',\r\n            'alignView-colorSchemeName': 'n',\r\n            'alignView-customColorScheme': {\r\n                'A': '#ccff00',\r\n                'C': '#ffff00',\r\n                'G': '#ff9900',\r\n                'T': '#ff6600',\r\n                'ambig': '#ffffff',\r\n            },\r\n            'alignView-labelField': '_id',\r\n            'alignView-rulerMinorInterval': 20,\r\n            'alignView-selectedSize': 'l',\r\n            'alignView-showMiniMap': true,\r\n            'alignView-sortField': 'index',\r\n            'alignView-spanWidth': 10,\r\n            'alignView-spanHeight': 16,\r\n            'alignView-topDisplay': 'logo',\r\n            'ambiguity-resolution-strategy': 'AVERAGE',\r\n            'ambiguity-threshold': 0.015,\r\n            'background-color': '#ffffff',\r\n            'background-color-contrast': '#000000',\r\n            'bubble-x': 'cluster',\r\n            'bubble-y': 'None',\r\n            'bubble-charge': 0.05,\r\n            'bubble-size': 20,\r\n            'bubble-collapsed': false,\r\n            'choropleth-aggregate-as': 'states',\r\n            'choropleth-aggregate-on': 'None',\r\n            'choropleth-basemap-show': false,\r\n            'choropleth-color-high': '#800026',\r\n            'choropleth-color-low': '#ffffcc',\r\n            'choropleth-color-medium': '#fd8d3c',\r\n            'choropleth-satellite-show': false,\r\n            'choropleth-transparency': 0.3,\r\n            'cluster-minimum-size': 1,\r\n            'default-view': '2D Network', // 'Phylogenetic Tree' 'Alignment View'\r\n            'default-distance-metric': 'tn93',\r\n            'filtering-epsilon': -8,\r\n            'flow-showNodes': 'selected',\r\n            'gantt-date-list': '',\r\n            'globe-countries-show': false,\r\n            'globe-field-lat': 'None',\r\n            'globe-field-lon': 'None',\r\n            'globe-field-tract': 'None',\r\n            'globe-field-zipcode': 'None',\r\n            'globe-field-county': 'None',\r\n            'globe-field-state': 'None',\r\n            'globe-field-country': 'None',\r\n            'globe-link-show': true,\r\n            'globe-link-transparency': 0,\r\n            'globe-node-jitter': -2,\r\n            'globe-node-show': true,\r\n            'globe-node-transparency': 0,\r\n            'globe-stars-show': true,\r\n            'heatmap-invertX': false,\r\n            'heatmap-invertY': false,\r\n            'heatmap-color-high': '#a50026',\r\n            'heatmap-color-medium': '#ffffbf',\r\n            'heatmap-color-low': '#313695',\r\n            'heatmap-axislabels-show': false,\r\n            'histogram-axis-x': true,\r\n            'histogram-scale-log': false,\r\n            'histogram-variable': 'links-distance',\r\n            'infer-directionality-false': true,\r\n            'link-color': '#a6cee3',\r\n            'link-color-table-counts': true,\r\n            'link-color-table-frequencies': false,\r\n            'link-color-variable': 'None',\r\n            'link-directed': false,\r\n            'link-bidirectional': false,\r\n            'link-label-variable': 'None',\r\n            'link-label-decimal-length' : 3,\r\n            'link-length': 0.125,\r\n            'link-opacity': 0,\r\n            'link-show-nn': false,\r\n            'link-sort-variable': 'distance',\r\n            'link-threshold': 0.015,\r\n            'link-tooltip-variable': ['None'],\r\n            'link-width': 3,\r\n            \"link-width-max\":27,\r\n            \"link-width-min\":3,\r\n            'link-width-variable': 'None',\r\n            'link-width-reciprocal': true,\r\n            'link-origin-array-order': [],\r\n            'map-basemap-show': false,\r\n            'map-collapsing-on': true,\r\n            'map-counties-show': false,\r\n            'map-countries-show': true,\r\n            'map-field-lat': 'None',\r\n            'map-field-lon': 'None',\r\n            'map-field-tract': 'None',\r\n            'map-field-zipcode': 'None',\r\n            'map-field-county': 'None',\r\n            'map-field-state': 'None',\r\n            'map-field-country': 'None',\r\n            'map-link-show': true,\r\n            'map-link-tooltip-variable': 'None',\r\n            'map-link-transparency': 0,\r\n            'map-node-jitter': -2,\r\n            'map-node-show': true,\r\n            'map-node-tooltip-variable': '_id',\r\n            'map-node-transparency': 0,\r\n            'map-satellite-show': false,\r\n            'map-states-show': true,\r\n            \"mst-computed\": false,\r\n            'network-friction': 0.4,\r\n            'network-gravity': 0.05,\r\n            'network-link-strength': 0.124,\r\n            'node-charge': 200,\r\n            'node-border-width' : 2.0,\r\n            'node-color': '#1f77b4',\r\n            'node-color-table-counts': true,\r\n            'node-color-table-frequencies': false,\r\n            'node-color-variable': 'None',\r\n            'node-highlight': false,\r\n            'node-label-size': 16,\r\n            'node-label-variable': 'None',\r\n            'node-label-orientation': 'Right',\r\n            'node-opacity' : 0,\r\n            'node-radius': 20,\r\n            'node-radius-variable': 'None',\r\n            \"node-radius-min\": 20,\r\n            \"node-radius-max\": 100,\r\n            'node-symbol': 'symbolCircle',\r\n            'node-symbol-table-counts': true,\r\n            'node-symbol-table-frequencies': false,\r\n            'node-symbol-variable': 'None',\r\n            'node-symbol-table-visible': 'Hide',\r\n            'node-timeline-variable' : 'None',\r\n            'node-tooltip-variable': ['_id'],\r\n            'physics-tree-branch-type': 'Straight',\r\n            'physics-tree-charge': 30,\r\n            'physics-tree-friction': 0.05,\r\n            'physics-tree-gravity': 0.05,\r\n            'physics-tree-lateral-strength': 0.025,\r\n            'physics-tree-layout': 'Horizontal',\r\n            'physics-tree-node-label-variable': 'None',\r\n            'physics-tree-tooltip': 'id',\r\n            'physics-tree-type': 'tree',\r\n            'polygon-color': '#bbccee',\r\n            'polygon-color-table-name-sort': 'DESC',\r\n            'polygon-color-table-counts-sort': 'DESC',\r\n            'polygon-color-table-counts': true,\r\n            'polygon-color-table-frequencies': false,\r\n            'polygons-color-show': false,\r\n            'polygons-foci': 'cluster',\r\n            'polygons-gather-force': 0,\r\n            'polygons-label-show' : false,\r\n            'polygon-label-orientation' : 'Right',\r\n            'polygons-label-size' : 16,\r\n            'polygons-show' : false,\r\n            'polygon-color-table-visible': false,\r\n            'reference-source-file': true,\r\n            'reference-source-first': false,\r\n            'reference-source-consensus': false,\r\n            'scatterplot-xVar': 'index',\r\n            'scatterplot-yVar': 'distance',\r\n            'scatterplot-logScale': false,\r\n            'scatterplot-showNodes': false,\r\n            'search-field': '_id',\r\n            'selected-color': '#ff8300',\r\n            'selected-color-contrast': '#000000',\r\n            'selected-node-stroke-color': '#ff8300',\r\n            'selected-node-stroke-width': '4px',\r\n            'timeline-date-field': 'None',\r\n            'timeline-noncumulative': true,\r\n            'tree-animation-on': true,\r\n            'tree-branch-distances-hide': true,\r\n            'tree-branch-distance-size': 12,\r\n            'tree-branch-nodes-show': false,\r\n            'tree-horizontal-stretch': 1,\r\n            'tree-layout-vertical': false,\r\n            'tree-layout-horizontal': true,\r\n            'tree-layout-circular': false,\r\n            'tree-labels-align': false,\r\n            'tree-labels-show': false,\r\n            'tree-leaf-label-show': false,\r\n            'tree-leaf-label-size': 12,\r\n            'tree-leaf-node-radius-variable': 'None',\r\n            'tree-leaf-node-show': true,\r\n            'tree-leaf-node-size': 9,\r\n            'tree-mode-square': true,\r\n            'tree-mode-smooth': false,\r\n            'tree-mode-straight': false,\r\n            'tree-round-true': false,\r\n            'tree-ruler-show': true,\r\n            'tree-tooltip-show': true,\r\n            'tree-type': 'weighted',\r\n            'tree-vertical-stretch': 1,\r\n            'triangulate-false': true,\r\n            'twoD-settings-visible': 'Hide'\r\n        };\r\n    }\r\n\r\n    /**\r\n     * @returns a session object. It has the data object, information on goldenLayout layout, widgets, as well as other settings\r\n     */   \r\n    sessionSkeleton = () => {\r\n        return {\r\n            data: this.dataSkeleton(),\r\n            files: [],\r\n            layout: {\r\n                content: [\r\n                    {\r\n                        type: 'files'\r\n                    }\r\n                ],\r\n                type: 'stack'\r\n            },\r\n            messages: [],\r\n            meta: {\r\n                loadTime: 0,\r\n                readyTime: Date.now(),\r\n                startTime: 0,\r\n                anySequences: false\r\n            },\r\n            network: {\r\n                allPinned: false,\r\n                timelinePinned : false,\r\n                nodes: [],\r\n                timelineNodes: [],\r\n                initialLoad: false,\r\n                launched : false,\r\n                \r\n            },\r\n            state: {\r\n                timeStart: 0,\r\n                timeEnd: new Date(),\r\n                timeTarget: null\r\n            },\r\n            style: {\r\n                linkAlphas: [1],\r\n                linkColors: d3.schemePaired,\r\n                linkValueNames: {},\r\n                nodeAlphas: [1],\r\n                nodeColors: [d3.schemeCategory10[0]].concat(d3.schemeCategory10.slice(2)),\r\n                nodeColorsTable: {},\r\n                nodeColorsTableHistory: {\r\n                    'null' : '#EAE553'\r\n                },\r\n                nodeColorsTableKeys: {},\r\n                linkColorsTable: {},\r\n                linkColorsTableKeys: {},\r\n                nodeSymbols: [\r\n                    'symbolCircle',\r\n                    // 'symbolCross',\r\n                    'symbolDiamond',\r\n                    'symbolSquare',\r\n                    // 'symbolStar',\r\n                    'symbolTriangle',\r\n                    // 'symbolWye',\r\n                    // 'symbolTriangleDown',\r\n                    // 'symbolTriangleLeft',\r\n                    // 'symbolTriangleRight',\r\n                    // 'symbolDiamondAlt',\r\n                    // 'symbolDiamondSquare',\r\n                    // 'symbolPentagon',\r\n                    'symbolHexagon'\r\n                    // 'symbolHexagonAlt',\r\n                    // 'symbolOctagon',\r\n                    // 'symbolOctagonAlt',\r\n                    // 'symbolX'\r\n                ],\r\n                nodeSymbolsTable: {},\r\n                nodeSymbolsTableKeys: {},\r\n                nodeValueNames: {},\r\n                polygonAlphas: [0.5],\r\n                polygonColors: ['#bbccee','#cceeff','#ccddaa','#eeeebb','#ffcccc','#dddddd'],\r\n                polygonValueNames: {},\r\n                overwrite: {},\r\n                widgets: this.defaultWidgets()\r\n            },\r\n            timeline: 0 as any,\r\n            warnings: []\r\n        };\r\n    }\r\n    /**\r\n     * \r\n     * @returns object found at commonService.temp  which include a matrix for links between nodes and color/alpha mapping functions\r\n     */\r\n    tempSkeleton = () => {\r\n        return {\r\n            componentCache: {},\r\n            mapData: {},\r\n            matrix: {},\r\n            messageTimeout: null,\r\n            /* functions in style object get replaced If user decides to color a node, link, or polygon variable.\r\n             * these functions are replaced with one from the d3 package usind d3.scaleOrdinal(...).domain(...)\r\n             */\r\n            style: {\r\n                linkAlphaMap: () => 1 - this.session.style.widgets['link-opacity'],\r\n                linkColorMap: () => this.session.style.widgets['link-color'],\r\n                nodeAlphaMap: () => 1,\r\n                nodeColorMap: () => this.session.style.widgets['node-color'],\r\n                nodeSymbolMap: () => this.session.style.widgets['node-symbol'],\r\n                polygonAlphaMap: () => 0.5,\r\n                polygonColorMap: () => this.session.style.widgets['polygon-color']\r\n            },\r\n            trees: {}\r\n        };\r\n    }\r\n    temp: any = this.tempSkeleton();\r\n    session = this.sessionSkeleton();\r\n\r\n    //table = new Tabulator(\"#recall-stashes-available\", {\r\n    //    height: \"100%\",\r\n    //    layout: \"fitColumns\",\r\n    //    selectable: 1,\r\n    //    columns: [\r\n    //        { title: \"Name\", field: \"name\" },\r\n    //        { title: \"Date\", field: \"date\", align: \"right\", sorter: \"date\" }\r\n    //    ]\r\n    //});\r\n\r\n    /**\r\n     * @param injector \r\n     * @param localStorageService \r\n     * @param visuals - this injection allows users to access all the views from commonService (ie. commonService.visuals.twoD)\r\n     * @param http \r\n     */\r\n    constructor(injector: Injector,\r\n        public localStorageService: LocalStorageService,\r\n        public visuals: MicrobeTraceNextVisuals,\r\n        private http: HttpClient,\r\n        // private srv: GoldenLayoutService\r\n    ) {\r\n\r\n        super(injector);\r\n\r\n        //debugger;\r\n\r\n        this.initialize();\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.initialize();\r\n    }\r\n\r\n\r\n    /**\r\n     * Sets (window as any).context.commonSerive = this; and also calls reset() which sets commonService.temp and commonService.session back to default values (except \r\n     * temp.mapData, session.files, session.meta)\r\n     */\r\n    initialize() {\r\n        (window as any).context = ((window as any).context == undefined ? {} : (window as any).context);\r\n        (window as any).context.commonService = this;\r\n\r\n        this.reset();\r\n    }\r\n\r\n    /**\r\n     * Capitalizes the first letter of a string\r\n     * @param s - Expects a string\r\n     * @returns - the string with first letter capitalized. If typeof s != string returns empty string\r\n     */\r\n    capitalize(s) {\r\n        if (typeof s !== 'string') return ''\r\n        return s.charAt(0).toUpperCase() + s.slice(1)\r\n    }\r\n\r\n\r\n    /**\r\n     * Set commonService.session and commonService.temp back to default values\r\n     */\r\n    clearData() {\r\n        (window as any).context.commonService.session = (window as any).context.commonService.sessionSkeleton();\r\n\r\n        (window as any).context.commonService.temp = (window as any).context.commonService.tempSkeleton();\r\n    }\r\n\r\n    /**\r\n     * Update Legacy Node Symbols if loading new files\r\n     */\r\n    updateLegacyNodeSymbols() {\r\n        (window as any).context.commonService.session.style.nodeSymbols = [\r\n            'symbolCircle',\r\n            'symbolSquare',\r\n            'symbolTriangle',\r\n            'symbolHexagon',\r\n            'symbolDiamond'\r\n        ]\r\n    }\r\n\r\n\r\n    /**\r\n     * @returns a default node object\r\n     */\r\n    defaultNode(): any {\r\n\r\n        return {\r\n            index: (window as any).context.commonService.session.data.nodes.length,\r\n            _id: '',\r\n            selected: false,\r\n            cluster: 1,\r\n            visible: true,\r\n            degree: 0,\r\n            data: {},\r\n            origin: [],\r\n            hasDistance: false\r\n        }\r\n    }\r\n\r\n    /** \r\n     * XXXXX Not currently used; not sure of future use XXXXX\r\n     * @returns boolean\r\n     */\r\n    onlyUnique(value, index, self) {\r\n        return self.indexOf(value) === index;\r\n    }\r\n\r\n    /**\r\n     * Checks if an array or string contains a specified value.\r\n     * @param container - Where to search such as a []\r\n     * @param {any} value - The value to search for.\r\n     * @returns {boolean} - `true` if the `container` parameter contains the `value` parameter, and `false` otherwise.\r\n     */\r\n    includes(container: any, value: any) {\r\n        let returnValue = false;\r\n        const pos = container.indexOf(value);\r\n        if (pos >= 0) {\r\n            returnValue = true;\r\n        }\r\n\r\n        return returnValue;\r\n    };\r\n\r\n    /**\r\n     * Sanitizes user input to prevent cross-site scripting (XSS) attacks.\r\n     * @param {string|number|boolean} t - The user input to be sanitized.\r\n     * @param {boolean} [e=0 | false] - An optional parameter that specifies whether to encode the sanitized output as HTML entities.\r\n     * @returns {string} - The sanitized output.\r\n     */\r\n    filterXSS(t, e: any = 0) {\r\n        let argType: any = typeof t;\r\n        if(argType==='object'){\r\n            return JSON.stringify(t);\r\n        }\r\n        else if (argType === 'number' || argType === 'boolean') {\r\n            let tempT = t.toString();\r\n            t = tempT;\r\n        }\r\n        else if (argType != 'string' && argType != 'number')\r\n            t = '';\r\n\r\n        var i = t.replace(/javascript/gi, 'j&#97;vascript').replace(/expression/gi, 'expr&#101;ssion').replace(/onload/gi, 'onlo&#97;d').replace(/script/gi, '&#115;cript').replace(/onerror/gi, 'on&#101;rror');\r\n        return e === !0 ? i : i.replace(/>/g, '&gt;').replace(/</g, '&lt;')\r\n    };\r\n\r\n    /**\r\n     * @param {any} a an input value\r\n     * @returns {boolean} whether a is a number\r\n     */\r\n    isNumber(a: any): boolean {\r\n        return typeof a == 'number';\r\n    };\r\n\r\n    /**\r\n     * Adds a new node to an array of nodes.\r\n     * @param {Node} newNode - The new node to be added to the array.\r\n     * @param {boolean | null} [check=null] - An optional parameter that specifies whether to check for duplicates before adding the new node.\r\n     * @returns {number} - `1` if a new node was added to the array, `0` otherwise.\r\n     */\r\n    addNode(newNode: any, check: any = null): number {\r\n\r\n        //  If no _id, set _id to id\r\n        if ((window as any).context.commonService.isNumber(newNode._id)) {\r\n            newNode._id = '' + newNode._id;\r\n            if (!newNode._id || newNode._id === '') {\r\n                newNode._id = newNode.id;\r\n            }\r\n        } else {\r\n            if (newNode.id) {\r\n                newNode._id = newNode.id;\r\n            }\r\n        }\r\n        newNode._id = newNode._id.trim();\r\n\r\n        if ((window as any).context.commonService.session.data.nodeExclusions.indexOf(newNode._id) > -1) {\r\n            return 0;\r\n        }\r\n\r\n        if (check) {\r\n            let nodes = (window as any).context.commonService.session.data.nodes;\r\n\r\n            const n = nodes.length;\r\n            for (let i = 0; i < n; i++) {\r\n                let node = nodes[i];\r\n                if (node._id == newNode._id) {\r\n                    newNode.origin = (window as any).context.commonService.uniq(newNode.origin.concat(node.origin));\r\n                    Object.assign(node, newNode);\r\n                    return 0;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n        let newElement = Object.assign((window as any).context.commonService.defaultNode(), newNode);\r\n\r\n        if (newNode.hasOwnProperty('data') && newNode.data.hasOwnProperty('data')) {\r\n          newElement.data = newNode.data.data;\r\n        }\r\n        (window as any).context.commonService.session.data.nodes.push(newElement);\r\n\r\n        return 1;\r\n    };\r\n\r\n    /**\r\n     * Adds a new link to an array of links.\r\n     * @param {Object} newLink- The new link to be added to the array.\r\n     * @param {boolean | null} [check=null] - An optional parameter that specifies whether to check for duplicates before adding the new link.\r\n     * @returns {number} - `1` if a new link was added to the array, `0` otherwise.\r\n     */\r\n    addLink(newLink: any, check: any = true): number {\r\n\r\n        if(newLink.source === \"KF773571\" && newLink.target === \"KF773578\"){\r\n            console.log('new link 1: ', JSON.stringify(newLink));\r\n            // console.log('new link 2: ', JSON.stringify(newLink));\r\n        }\r\n\r\n        if(newLink.source === \"KF773430\" && newLink.target === \"KF773432\"){\r\n            console.log('new link 2: ', JSON.stringify(newLink));\r\n            // console.log('new link 2: ', JSON.stringify(newLink));\r\n        }\r\n    \r\n        const serv = (window as any).context.commonService;\r\n        const matrix = serv.temp.matrix;\r\n    \r\n        if (typeof newLink.source == 'number') {\r\n            newLink.source = newLink.source.toString().trim();\r\n        } else {\r\n            newLink.source = newLink.source.trim();\r\n        }\r\n        if (typeof newLink.target == 'number') {\r\n            newLink.target = newLink.target.toString().trim();\r\n        } else {\r\n            newLink.target = newLink.target.trim();\r\n        }\r\n    \r\n        if (!matrix[newLink.source]) {\r\n            matrix[newLink.source] = {};\r\n        }\r\n        if (!matrix[newLink.target]) {\r\n            matrix[newLink.target] = {};\r\n        }\r\n        if (newLink.source == newLink.target) return 0;\r\n        let linkIsNew = 1;\r\n        let sdlinks = serv.session.data.links;\r\n\r\n        if (matrix[newLink.source][newLink.target]) {\r\n            let oldLink = matrix[newLink.source][newLink.target];\r\n            let myorigin = this.uniq(newLink.origin.concat(oldLink.origin));\r\n            // console.log(JSON.stringify(myorigin));\r\n\r\n            // Ensure no empty origins\r\n            myorigin = myorigin.filter(origin => origin != '');\r\n\r\n            // Ensure new link keeps distance if already defined previously\r\n            if (oldLink.hasDistance) {\r\n                newLink.hasDistance = true;\r\n                newLink['distance'] = oldLink['distance'];\r\n                newLink.distanceOrigin = oldLink.distanceOrigin;\r\n            }\r\n\r\n            oldLink[\"origin\"] = myorigin;\r\n            newLink[\"origin\"] = myorigin;\r\n            // console.log(\"old link isL \" + `${JSON.stringify(oldLink)} ${JSON.stringify(newLink)}`);\r\n\r\n            // Only override if new isn't directed and old may be, and ensure its in the right direction\r\n            if(oldLink.directed) {\r\n                newLink.directed = true;\r\n                newLink.source = oldLink.source;\r\n                newLink.target = oldLink.target;\r\n            }\r\n            \r\n\r\n            _.merge(oldLink, newLink);\r\n\r\n            if (oldLink.origin.length > 0) {\r\n                console.log('old link origin: ', oldLink.origin);\r\n                // Array order hasn't been set yet, so we need to set it\r\n                if ((window as any).context.commonService.session.style.widgets['link-origin-array-order'].length == 0) {\r\n                    (window as any).context.commonService.session.style.widgets['link-origin-array-order'] = oldLink.origin;\r\n                }\r\n\r\n                console.log('old link array order: ', (window as any).context.commonService.session.style.widgets['link-origin-array-order']);\r\n\r\n\r\n                oldLink.origin = (window as any).context.commonService.session.style.widgets['link-origin-array-order'];\r\n                console.log('old link origin: ', oldLink.origin);\r\n\r\n            }\r\n\r\n            // TODO remove when confident this function never causes issues - used to debug easier\r\n            // Object.assign(oldLink, newLink);\r\n            // Object.assign(newLink, oldLink);\r\n\r\n\r\n            if(newLink[\"bidirectional\"]){\r\n                oldLink[\"bidirectional\"] = true;\r\n            }\r\n\r\n            linkIsNew = 0;\r\n        } else if (serv.temp.matrix[newLink.target][newLink.source]) {\r\n            console.warn(\"This scope should be unreachable. If you're using this code, something's wrong.\");\r\n            let oldLink = matrix[newLink.target][newLink.source];\r\n            let origin = this.uniq(newLink.origin.concat(oldLink.origin));\r\n            Object.assign(oldLink, newLink, { origin: origin });\r\n            linkIsNew = 0;\r\n        } else {\r\n\r\n             if (newLink.hasDistance) {\r\n                newLink = Object.assign({\r\n                index: sdlinks.length,\r\n                source: \"\",\r\n                target: \"\",\r\n                visible: false,\r\n                cluster: 1,\r\n                origin: [],\r\n                hasDistance: true\r\n                }, newLink);\r\n            } else {\r\n                newLink = Object.assign({\r\n                index: sdlinks.length,\r\n                source: \"\",\r\n                target: \"\",\r\n                visible: false,\r\n                cluster: 1,\r\n                origin: [],\r\n                hasDistance: false\r\n                }, newLink);\r\n    \r\n            }\r\n               // Always add the new link without merging\r\n               sdlinks.push(newLink);\r\n               matrix[newLink.source][newLink.target] = newLink;\r\n               matrix[newLink.target][newLink.source] = newLink;\r\n\r\n               linkIsNew = 1;\r\n\r\n        }\r\n\r\n\r\n        \r\n       \r\n        return linkIsNew;\r\n\r\n        // TODO Remove when not needed\r\n        // (window as any).context.commonService.session.data.linkFilteredValues = [...(window as any).context.commonService.session.data.links];\r\n        // return linkIsNew;\r\n    };\r\n\r\n    /**\r\n     * Removes duplicate elements from an array.\r\n     * @param {Array} a - The array to be processed.\r\n     * @returns {Array} - The array containing only the unique elements of the input array `a`.\r\n     */\r\n    uniq(a: any) {\r\n        let seen = {};\r\n        let out = [];\r\n        let len = a.length;\r\n        let j = 0;\r\n        for (let i = 0; i < len; i++) {\r\n            let item = a[i];\r\n            if (seen[item] !== 1) {\r\n                seen[item] = 1;\r\n                out[j++] = item;\r\n            }\r\n        }\r\n        return out;\r\n    }\r\n\r\n    public getSelectedNode(nodes: any[]): any {\r\n        return nodes.find(node => node.selected);\r\n    }\r\n    \r\n    /**\r\n     * This takes the information needed for twod network from microbetrace session file\r\n     */\r\n    // public legacyMicrobetraceAdapter (json : MicrobeTraceSessionGraphData) : GraphData {\r\n\r\n    //     let nodes : NodeDatum[] = json.nodes.map(x => {\r\n    //         return {\r\n    //             id: x.id,\r\n    //             color: \"\"\r\n    //         }\r\n    //     });\r\n\r\n    //     let links : LinkDatum[] = json.links.map(x => {\r\n    //         return {\r\n    //             source: x.source,\r\n    //             target: x.target,\r\n    //             chapter : String(x.distance)\r\n    //         }\r\n    //     });\r\n\r\n    //     return {\r\n    //         nodes : nodes,\r\n    //         links : links\r\n    //     }\r\n\r\n    // }\r\n\r\n    getColorByIndex( index : number ) {\r\n\r\n        let variable = (window as any).context.commonService.session.style.widgets['node-color-variable'];\r\n        let color = (window as any).context.commonService.session.style.widgets['node-color'];\r\n\r\n\r\n        if (variable == 'None') {\r\n\r\n            return color;\r\n\r\n        } else {\r\n\r\n            return (window as any).context.commonService.temp.style.nodeColorMap( (window as any).context.commonService.session.data.nodes[index][variable]);\r\n\r\n        }\r\n    }\r\n\r\n    public convertToGraphDataArray(microbeData: any): GraphData {\r\n        const nodes = microbeData.nodes.map((node) => ({\r\n          ...node, // Spread existing properties\r\n          id: node._id, // Ensure the id property is set correctly\r\n          group: node.cluster,\r\n          color: this.getColorByIndex(node.index) // Add or override the color property\r\n        }));\r\n      \r\n        const links = microbeData.links.map((link) => ({\r\n          ...link, // Spread existing properties\r\n          source: link.source, // Ensure source is correctly set\r\n          target: link.target, // Ensure target is correctly set\r\n          group: link.cluster ?? null, // Ensure group is set, default to null if undefined\r\n          chapter: link.distance ? link.distance.toString() : null // Convert distance to string for chapter\r\n        }));\r\n      \r\n        return {\r\n          nodes,\r\n          links\r\n        };\r\n      }\r\n      updateNodesAndGeneratePanels(graphData: any): { updatedNodes: any[], panels: any[], groups: any[] } {\r\n        // Update nodes with new group information based on foci\r\n        const updatedNodes = graphData.nodes.map(node => ({\r\n          ...node,\r\n          group: node[(window as any).context.commonService.session.style.widgets['polygons-foci']] // Set the group property based on the foci\r\n        }));\r\n      \r\n        // Generate panels based on the updated nodes\r\n        const uniqueGroups = Array.from(new Set(updatedNodes.map(node => node.group)));\r\n      \r\n        const panels = uniqueGroups.map(group => {\r\n          const groupNodes = updatedNodes.filter(node => node.group === group);\r\n          const groupColor = (window as any).context.commonService.temp.style.polygonColorMap(group) || '#000'; // Use color map or default color\r\n\r\n        //   (window as any).context.commonService.temp.style.polygonColorMap(group[(window as any).context.commonService.session.style.widgets['polygons-foci']]);\r\n\r\n          return {\r\n            nodes: groupNodes.map(node => node.id),\r\n            label: ((window as any).context.commonService.session.style.widgets['polygons-label-show']) ? `${(window as any).context.commonService.session.style.widgets['polygons-foci']} ${group}` : '',\r\n            labelPosition: ((window as any).context.commonService.session.style.widgets['polygons-label-orientation']) ? (window as any).context.commonService.session.style.widgets['polygons-label-orientation'] : 'top',\r\n            borderColor: groupColor,\r\n            borderWidth: 2,\r\n            fillColor: groupColor,\r\n            color: groupColor,\r\n            padding: 10,\r\n            dashedOutline: true,\r\n            // sideIconSymbol: '',\r\n            // sideIconShape: GraphNodeShape.Circle,\r\n            // sideIconShapeStroke: '#777',\r\n            // sideIconCursor: 'pointer',\r\n            // sideIconFontSize: '24px',\r\n            // sideIconShapeSize: 50,\r\n          };\r\n        });\r\n\r\n        const groups = uniqueGroups.map(group => ({\r\n            key: group,\r\n            values: updatedNodes.filter(node => node.group === group)\r\n          }));\r\n      \r\n        return { updatedNodes, panels, groups };\r\n      }\r\n\r\n      public halveLinksArray(links: LinkDatum[]): LinkDatum[] {\r\n        const halfIndex = Math.ceil(links.length / 4); // Ensures that for an odd number of links, the larger half is returned\r\n        \r\n        console.log('new links: ', links.slice(0, 500))\r\n        return links.slice(0, 10000);\r\n    }\r\n\r\n\r\n    /**\r\n     * I think this function allows users to import an svg image into MT. Not sure if it currently works.\r\n     * @param svg \r\n     */\r\n    processSVG(svg: any) {\r\n        let nodes = [];\r\n\r\n        const $xml: any = document.getElementById(svg);\r\n        if ($xml.find('#edges').length) {\r\n            $xml.find('#nodes circle').each((i, node) => {\r\n                const $node: any = document.getElementById(node);\r\n                const gephid = $node.attr('class');\r\n                nodes.push(gephid);\r\n                (window as any).context.commonService.addNode(\r\n                    {\r\n                        id: gephid + '',\r\n                        color: $node.attr('fill'),\r\n                        size: parseFloat($node.attr('r')),\r\n                        origin: ['Scraped Gephi SVG']\r\n                    },\r\n                    false\r\n                );\r\n            });\r\n            (window as any).context.commonService.session.data.nodeFields.push('color');\r\n            (window as any).context.commonService.session.data.nodeFields.push('size');\r\n            $xml.find('#edges path').each((i, link) => {\r\n                const $link = $(link);\r\n                const coords = $link.attr('class').split(' ');\r\n                let base = {\r\n                    source: coords[0] + '',\r\n                    target: coords[1] + '',\r\n                    color: $link.attr('stroke'),\r\n                    origin: ['Scraped MicrobeTrace SVG']\r\n                };\r\n                base[(window as any).context.commonService.session.style.widgets['default-distance-metric']] = 0;\r\n                (window as any).context.commonService.addLink(base, true);\r\n            });\r\n            (window as any).context.commonService.session.data.linkFields.push('color');\r\n        } else {\r\n            $xml.find('.nodes g').each((i, node) => {\r\n                nodes.push(\r\n                    $(node)\r\n                        .attr('transform')\r\n                        .slice(10, -1)\r\n                        .split(',')\r\n                        .map(parseFloat)\r\n                );\r\n                (window as any).context.commonService.addNode(\r\n                    {\r\n                        id: i + '',\r\n                        origin: ['Scraped SVG']\r\n                    },\r\n                    false\r\n                );\r\n            });\r\n            $xml.find('line').each((i, link) => {\r\n                let $l: any = document.getElementById(link);\r\n                const source = nodes.findIndex(d => {\r\n                    return (\r\n                        Math.abs(d[0] - parseFloat($l.attr('x1'))) < 0.0001 &&\r\n                        Math.abs(d[1] - parseFloat($l.attr('y1'))) < 0.0001\r\n                    );\r\n                });\r\n                const target = nodes.findIndex(d => {\r\n                    return (\r\n                        Math.abs(d[0] - parseFloat($l.attr('x2'))) < 0.0001 &&\r\n                        Math.abs(d[1] - parseFloat($l.attr('y2'))) < 0.0001\r\n                    );\r\n                });\r\n                if (source < 0 || target < 0) return;\r\n                let base = {\r\n                    source: source + '',\r\n                    target: target + '',\r\n                    origin: ['Scraped SVG']\r\n                };\r\n                base[(window as any).context.commonService.session.style.widgets['default-distance-metric']] = 0;\r\n                (window as any).context.commonService.addLink(base, true);\r\n            });\r\n        }\r\n        (window as any).context.commonService.runHamsters();\r\n    };\r\n\r\n    /**\r\n     * Loads JSON, MicrobeTrace, or HivTrace files into MicrobeTrace\r\n     * @param json \r\n     * @param {string} extension file extension such as json, hivtrace, or microbetrace\r\n     */\r\n    processJSON(json: any, extension: string) {\r\n        if(this.debugMode) {\r\n            console.log(\"Trying to process JSON file\");\r\n        }\r\n        let data;\r\n        try {\r\n            if(json.result) {\r\n                data = JSON.parse(json.result);\r\n            } else {\r\n                data = JSON.parse(json);\r\n            }\r\n        } catch (error) {\r\n\r\n            // abp.notify.error(\r\n            //     'File Not Recognized! Are you certain this is a MicrobeTrace Session or HIV-TRACE Output File?'\r\n            // );\r\n            console.error(error);\r\n            return;\r\n        }\r\n        if (extension == 'microbetrace') {\r\n            (window as any).context.commonService.session = this.sessionSkeleton();\r\n\r\n            (window as any).context.commonService.applySession(data);\r\n        } else {\r\n            if (data.meta && data.tree) {\r\n              // (window as any).context.commonService.applyAuspice(data);\r\n            } else {\r\n              if (data.version) {\r\n                  (window as any).context.commonService.applyGHOST(data);\r\n              } else {\r\n                console.log(\"Trying to load HIVTrace file\");\r\n                  (window as any).context.commonService.applyHIVTrace(data);\r\n              }\r\n           }\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Updates commonService.session with information from stashObject. Variables updated include data, files, state, style, and layout.\r\n     */\r\n    applySession(stashObject: StashObjects) {\r\n        //If anything here seems eccentric, assume it's to maintain compatibility with\r\n        //session files from older versions of MicrobeTrace.\r\n        $(\"#launch\").prop(\"disabled\", true)\r\n\r\n        $(document).trigger(\"stop-force-simulation\"); // stop previous network ticks so previous polygon won't show up\r\n        $(document).off('.2d');\r\n\r\n        if(this.debugMode) {\r\n            console.log('applying session:', stashObject);\r\n        }\r\n\r\n        if(stashObject.session) {\r\n\r\n        } else {\r\n            stashObject = {\r\n                tabs : [{\r\n                    label: 'Files',\r\n                    templateRef: null,\r\n                    tabTitle: 'Files',\r\n                    isActive: true,\r\n                    componentRef: null\r\n                }],\r\n                session: stashObject\r\n            }\r\n        }\r\n\r\n        const oldSession = stashObject.session;\r\n        (window as any).context.commonService.temp.matrix = [];\r\n        (window as any).context.commonService.session.files = oldSession.files;\r\n        (window as any).context.commonService.session.state = oldSession.state;\r\n        (window as any).context.commonService.session.style = oldSession.style;\r\n\r\n        (window as any).context.commonService.session.meta.startTime = Date.now();\r\n\r\n\r\n        if(oldSession.layout) {\r\n            (window as any).context.commonService.session.layout = oldSession.layout;\r\n        }\r\n\r\n        // layout.root.removeChild(layout.root.contentItems[0]);\r\n\r\n        const nodes = oldSession.data.nodes,\r\n            links = oldSession.data.links,\r\n            n = nodes.length,\r\n            m = links.length;\r\n\r\n        for (let i = 0; i < n; i++) (window as any).context.commonService.addNode(nodes[i]);\r\n        for (let j = 0; j < m; j++) {\r\n            // Add distance property for files saved prior to distance visibility fix\r\n            if ((links[j].origin).includes('Genetic Distance')) {\r\n                links[j].hasDistance = true;\r\n                links[j].distanceOrigin = 'Genetic Distance';\r\n            } else if (links[j].distance && links[j].distance > 0) {\r\n                links[j].hasDistance = true;\r\n            }\r\n            (window as any).context.commonService.addLink(links[j]);\r\n        }\r\n        // for (let j = 0; j < m; j++) (window as any).context.commonService.addLink(links[j]);\r\n        ['nodeFields', 'linkFields', 'clusterFields', 'nodeExclusions'].forEach(v => {\r\n            if (oldSession.data[v]) (window as any).context.commonService.session.data[v] = (window as any).context.commonService.uniq((window as any).context.commonService.session.data[v].concat(oldSession.data[v]));\r\n        });\r\n        // TODO: See about this process data functionality\r\n        (window as any).context.commonService.processData();\r\n\r\n\r\n        if (oldSession.network) (window as any).context.commonService.session.network = oldSession.network;\r\n         if (oldSession.data.geoJSONLayerName !== \"\") {\r\n            (window as any).context.commonService.session.data.geoJSON = oldSession.data.geoJSON;\r\n            (window as any).context.commonService.session.data.geoJSONLayerName = oldSession.data.geoJSONLayerName;\r\n        }\r\n        // TODO see if this is needed\r\n        // sessionApplied = true;\r\n\r\n        (window as any).context.commonService.applyStyle((window as any).context.commonService.session.style);\r\n\r\n        // TODO: See if this is needed\r\n        // if (!links[0]['distance']) {\r\n        //     if (links[0]['tn93']) {\r\n        //         (window as any).context.commonService.session.style.widgets['link-sort-variable'] = 'tn93';\r\n        //     } else {\r\n        //         (window as any).context.commonService.session.style.widgets['link-sort-variable'] = 'snps';\r\n        //     }\r\n        // }\r\n        (window as any).context.commonService.finishUp();\r\n\r\n        // TODO: implement this later\r\n        // $(\"#network-statistics-show\").parent().trigger(\"click\");\r\n    };\r\n\r\n    /**\r\n     * XXXXX Review if function is necessary XXXXX\r\n     * Sets session.data.nodeFilteredValues = session.data.nodes\r\n     */\r\n    processData() {\r\n        let nodes = this.session.data.nodes;\r\n        console.log('processing data: ', nodes);\r\n\r\n        (window as any).context.commonService.session.data.nodeFilteredValues = nodes;\r\n        //Add links for nodes with no edges\r\n        // this.uniqueNodes.forEach(x => {\r\n        //     this.commonService.addLink(Object.assign({\r\n        //         source: '' + x,\r\n        //         target: '' + x,\r\n        //         origin: origin,\r\n        //         visible: true,\r\n        //         distance: 0,\r\n        //     }, 'generated'));\r\n        // })\r\n\r\n        // this.processSequence()\r\n    }\r\n\r\n    /**\r\n     * Updates session.style with information from style object parameter, also updated Link Color Map, Node Color Map, and Polygon Color Map Functions\r\n     */\r\n    applyStyle(style) {\r\n        if(this.debugMode) {\r\n            console.log('applying style: ', style);\r\n        }\r\n        (window as any).context.commonService.session.style = style;\r\n        (window as any).context.commonService.session.style.widgets = Object.assign({},\r\n            (window as any).context.commonService.defaultWidgets(),\r\n            style.widgets\r\n        );\r\n        (window as any).context.commonService.createLinkColorMap();\r\n        (window as any).context.commonService.createNodeColorMap();\r\n        (window as any).context.commonService.createPolygonColorMap();\r\n\r\n        // finds id s in template/html where id=widget name, updated the value to the new value in the style file\r\n        let $id = null;\r\n        for (let id in (window as any).context.commonService.session.style.widgets) {\r\n            $id = $(\"#\" + id);\r\n            if ($id.length > 0) {\r\n                if ((window as any).context.commonService.includes([\"radio\", \"checkbox\"], ($id[0].type))) {\r\n                    if ((window as any).context.commonService.session.style.widgets[id]) $id.trigger(\"click\");\r\n                } else {\r\n                    if (id == 'default-distance-metric') {\r\n                        $id.val((window as any).context.commonService.session.style.widgets[id].toLowerCase());\r\n                        $(\"#\" + id+'2').val((window as any).context.commonService.session.style.widgets[id].toLowerCase());\r\n                    } else {\r\n                        $id.val((window as any).context.commonService.session.style.widgets[id]);\r\n                    }                    \r\n                }\r\n            }\r\n        }\r\n\r\n        // TODO uncomment if was meant to be\r\n        // this.visuals.microbeTrace.applyStyleFileSettings();\r\n        if (this.visuals.filesPlugin) {\r\n            this.visuals.filesPlugin.applyStyleFileSettings();\r\n        }\r\n\r\n        this.visuals.microbeTrace.homepageTabs.forEach(tab => {\r\n            if (tab.componentRef && tab.componentRef.instance.updateVisualization) {\r\n                tab.componentRef.instance.applyStyleFileSettings();\r\n            }\r\n        })\r\n\r\n        // TODO: See if this is needed\r\n        // Need session applied variable since this will break restoring full microbe trace file vs loading a style file\r\n        // if (!sessionApplied) {\r\n        // // Trigger global style updates\r\n        // $(\"#node-color-variable\").trigger(\"change\");\r\n        // $(\"#node-color-border\").trigger(\"change\");\r\n        // $(\"#link-color-variable\").trigger(\"change\");\r\n        // $(\"#selected-color\").trigger(\"change\");\r\n        // $(\"#background-color\").trigger(\"change\");\r\n\r\n        // // 2d Network Specific\r\n        // $('#node-radius-variable').trigger(\"change\");\r\n        // $('#node-symbol-variable').trigger(\"change\");\r\n        // $('#node-label-variable').trigger(\"change\");\r\n        // } else {\r\n        // sessionApplied = false;\r\n        // }\r\n    };\r\n\r\n    applyHIVTrace(hivtrace) {\r\n      console.log(\"Running applyHIVTrace\");\r\n        (window as any).context.commonService.resetData();\r\n        (window as any).context.commonService.session.meta.startTime = Date.now();\r\n        hivtrace[\"trace_results\"][\"Nodes\"].forEach(node => {\r\n          let newNode = {\r\n            _id: node.id,\r\n            origin: \"HIVTRACE Import\",\r\n          }\r\n          if (node.hasOwnProperty(\"patient_attributes\")){ \r\n            console.log(\"had patient_attributes\");\r\n            newNode = JSON.parse(JSON.stringify(node.patient_attributes));\r\n            Object.keys(\r\n                hivtrace[\"trace_results\"][\"Nodes\"][0][\"patient_attributes\"]\r\n            ).forEach(key => {\r\n                if (!(window as any).context.commonService.session.data.nodeFields.includes(key))\r\n                    (window as any).context.commonService.session.data.nodeFields.push(key);\r\n            });\r\n          }\r\n          (window as any).context.commonService.addNode(newNode, false);\r\n        });\r\n        (window as any).context.commonService.processData();\r\n        let n = hivtrace[\"trace_results\"][\"Edges\"].length;\r\n        let metric = (window as any).context.commonService.session.style.widgets['default-distance-metric'];\r\n        for (let i = 0; i < n; i++) {\r\n            let link = hivtrace[\"trace_results\"][\"Edges\"][i];\r\n            let newLink = {\r\n                source: \"\" + link.sequences[0],\r\n                target: \"\" + link.sequences[1],\r\n                origin: [\"HIVTRACE Import\"],\r\n                visible: true\r\n            };\r\n            newLink[metric] = parseFloat(link.length);\r\n            newLink[\"distance\"] = newLink[metric];\r\n            (window as any).context.commonService.addLink(newLink, false);\r\n        }\r\n        (window as any).context.commonService.session.data.linkFields.push(metric);\r\n        (window as any).context.commonService.runHamsters();\r\n    };\r\n\r\n    applyGHOST(ghost) {\r\n        (window as any).context.commonService.session = (window as any).context.commonService.sessionSkeleton();\r\n        (window as any).context.commonService.session.meta.startTime = Date.now();\r\n        ghost[\"samples\"].forEach(node => {\r\n            let newNode = JSON.parse(JSON.stringify(node));\r\n            newNode.origin = [\"GHOST Import\"];\r\n            newNode.genotypes = JSON.stringify(newNode.genotypes);\r\n            newNode._id = \"\" + newNode._id;\r\n            (window as any).context.commonService.addNode(newNode, false);\r\n        });\r\n        [\"genotypes\", \"group\", \"_id\", \"name\"].forEach(key => {\r\n            if (!(window as any).context.commonService.session.data.nodeFields.includes(key)) {\r\n                (window as any).context.commonService.session.data.nodeFields.push(key);\r\n            }\r\n        });\r\n        let links = ghost[\"links\"];\r\n        let n = links.length;\r\n        for (let i = 0; i < n; i++) {\r\n            let link = links[i];\r\n            let newLink = Object.assign({}, link, {\r\n                source: \"\" + link.source,\r\n                target: \"\" + link.target,\r\n                distance: parseFloat(link.dist),\r\n                origin: [\"GHOST Import\"],\r\n                visible: true\r\n            });\r\n            (window as any).context.commonService.addLink(newLink, false);\r\n        }\r\n        [\r\n            \"density\",\r\n            \"dist\",\r\n            \"shared\",\r\n            \"src_genotype\",\r\n            \"src_haps\",\r\n            \"tgt_genotype\",\r\n            \"tgt_haps\"\r\n        ].forEach(key => {\r\n            if (!(window as any).context.commonService.session.data.linkFields.includes(key))\r\n                (window as any).context.commonService.session.data.linkFields.push(key);\r\n        });\r\n        (window as any).context.commonService.runHamsters();\r\n    };\r\n\r\n    applyAuspice(auspice) {\r\n      return new Promise(resolve => {\r\n        const auspiceHandler = new AuspiceHandler((window as any).context.commonService);\r\n        const auspiceData = auspiceHandler.run(auspice);\r\n        resolve(auspiceData);\r\n      });\r\n    };\r\n\r\n    openAuspiceUrl(url) {\r\n      \r\n      return new Promise(resolve => {\r\n        let auspiceDataHolder = {};\r\n        this.http.get(url).subscribe((data: Object) => {\r\n          auspiceDataHolder = {\r\n            tree: data[\"tree\"],\r\n            meta: data[\"meta\"],\r\n            version: data[\"version\"],\r\n          };\r\n          // const auspiceHandler = new AuspiceHandler((window as any).context.commonService);\r\n          // const auspiceData = auspiceHandler.run(auspiceDataHolder);\r\n          resolve(auspiceDataHolder);\r\n        });\r\n      });\r\n      (window as any).context.commonService.updateNetwork();\r\n      (window as any).context.commonService.updateStatistics();\r\n    };\r\n\r\n    /**\r\n     * Decodes the given `x` using the utf-8 TextDecoder object.\r\n     * @param {ArrayBuffer} x - The data to be decoded.\r\n     * @returns {string} - The decoded string.\r\n     */\r\n    decode(x) {\r\n        return (window as any).context.commonService.decoder.decode(x);\r\n    };\r\n\r\n    /**\r\n     * Asynchronously parses fasta text on another thread to generate an array of nodes with id and seq\r\n     * @param {string} text fasta string\r\n     * @returns {Promise<Array>} A Promise that resolves to an array of nodes with id and seq.\r\n     */\r\n    parseFASTA(text): Promise<any> {\r\n      return new Promise(resolve => {\r\n        let computer: WorkerModule = new WorkerModule();\r\n        let response = computer.compute_parse_fastaWorker.postMessage(text);\r\n\r\n        computer.compute_parse_fastaWorker.onmessage().subscribe((response) => {\r\n          let nodes = JSON.parse((window as any).context.commonService.decode(new Uint8Array(response.data.nodes)));\r\n          if(this.debugMode) {\r\n            console.log(\"FASTA Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n          }\r\n          resolve(nodes);\r\n\r\n        });\r\n      });\r\n    };\r\n\r\n    /**\r\n     * Asynchronously parses csv matrix file content and adds nodes and links to session.data\r\n     * @param {string} file content from csv matrix file\r\n     * @returns {Promise} A Promise that resolves to an object with {numberOfNodesAdded, numberOfLinksAdded, totalNumberofNodes, totalNumberofLinks}\r\n     */\r\n    parseCSVMatrix(file) {\r\n        return new Promise((resolve) => {\r\n            let check = (window as any).context.commonService.session.files.length > 1;\r\n            const origin = [file.name];\r\n            let nn = 0,\r\n              nl = 0;        \r\n            let computer: WorkerModule = new WorkerModule();\r\n            computer.compute_parse_csv_matrixWorker.postMessage(file.contents);\r\n        \r\n            computer.compute_parse_csv_matrixWorker.onmessage = (response) => {\r\n              const data = JSON.parse(\r\n                (window as any).context.commonService.decode(new Uint8Array(response.data.data))\r\n              );\r\n              if(this.debugMode) {\r\n                console.log(\r\n                    'CSV Matrix Transit time: ',\r\n                    (Date.now() - response.data.start).toLocaleString(),\r\n                    'ms'\r\n                  );              \r\n                }\r\n             \r\n              const start = Date.now();\r\n              const nodes = data.nodes;\r\n              const tn = nodes.length;\r\n              for (let i = 0; i < tn; i++) {\r\n                nn += (window as any).context.commonService.addNode(\r\n                  {\r\n                    _id: (window as any).context.commonService.filterXSS(nodes[i]),\r\n                    origin: origin,\r\n                  },\r\n                  check\r\n                );\r\n              }\r\n              const links = data.links;\r\n              const tl = links.length;\r\n              for (let j = 0; j < tl; j++) {\r\n                // console.log('has distance is true: ', JSON.stringify(links[j]));\r\n                nl += (window as any).context.commonService.addLink(\r\n                  Object.assign(links[j], {\r\n                    origin: origin,\r\n                    hasDistance: true,\r\n                    distanceOrigin: origin,\r\n                  }),\r\n                  check\r\n                );\r\n              }\r\n\r\n              if(this.debugMode) {\r\n                console.log(\r\n                    'CSV Matrix Merge time: ',\r\n                    (Date.now() - start).toLocaleString(),\r\n                    'ms'\r\n                  );             \r\n                }\r\n  \r\n              resolve({ nn, nl, tn, tl });\r\n            };\r\n          });\r\n    };\r\n\r\n    /**\r\n     * XXXXX function not currently called XXXXX\r\n     * @param auspiceData \r\n     * @returns \r\n     */\r\n    auspiceCallBack(auspiceData) {\r\n        (window as any).context.commonService.clearData();\r\n        (window as any).context.commonService.session = (window as any).context.commonService.sessionSkeleton();\r\n        (window as any).context.commonService.session.meta.startTime = Date.now();\r\n        (window as any).context.commonService.session.data.tree = auspiceData['tree'];\r\n        (window as any).context.commonService.session.data.newickString = auspiceData['newick'];\r\n        let nodeCount = 0;\r\n        auspiceData['nodes'].forEach(node => {\r\n            if (!/NODE0*/.exec(node.id)) {\r\n            const nodeKeys = Object.keys(node);\r\n            nodeKeys.forEach( key => {\r\n                if ((window as any).context.commonService.session.data.nodeFields.indexOf(key) === -1) {\r\n                (window as any).context.commonService.session.data.nodeFields.push(key);\r\n                }\r\n                if (! node.hasOwnProperty('origin') ) {\r\n                node.origin = [];\r\n                }\r\n                nodeCount += (window as any).context.commonService.addNode(node, true);\r\n            });\r\n            }\r\n        });\r\n        let linkCount = 0;\r\n        auspiceData['links'].forEach(link => {\r\n            linkCount += (window as any).context.commonService.addLink(link, true);\r\n        });\r\n        (window as any).context.commonService.runHamsters();\r\n        // this.showMessage(` - Parsed ${nodeCount} New Nodes and ${linkCount} new Links from Auspice file.`);\r\n        this.processData();\r\n        return nodeCount;\r\n    };\r\n\r\n    /**\r\n     * Generates new sequences\r\n     * ported from https://github.com/CDCgov/SeqSpawnR/blob/91d5857dbda5998839a002fbecae0f494dca960a/R/SequenceSpawner.R\r\n     * @param {string} idPrefix - prefix to label generated sequences\r\n     * @param {number} count - number of sequences to generate\r\n     * @param {number} snps - number of snps to add to a new sequence is random value from 0 - snps\r\n     * @param {string} seed -reference sequence for generating new sequences \r\n     * @returns list of objects representings seq, each seq objects has {id: string, seq: string}\r\n     */\r\n    generateSeqs(idPrefix, count?, snps?, seed?) {\r\n        let start = Date.now();\r\n        if (!count) count = 1000;\r\n        if (!snps) snps = 100;\r\n        if (!seed) seed = (window as any).context.commonService.session.data.reference;\r\n\r\n        let sampleCodons = [\r\n            \"GCA\",\r\n            \"GCC\",\r\n            \"GCG\",\r\n            \"GCT\",\r\n            \"AAC\",\r\n            \"AAT\",\r\n            \"GAC\",\r\n            \"GAT\",\r\n            \"TGC\",\r\n            \"TGT\",\r\n            \"GAC\",\r\n            \"GAT\",\r\n            \"GAA\",\r\n            \"GAG\",\r\n            \"TTC\",\r\n            \"TTT\",\r\n            \"GGA\",\r\n            \"GGC\",\r\n            \"GGG\",\r\n            \"GGT\",\r\n            \"CAC\",\r\n            \"CAT\",\r\n            \"ATA\",\r\n            \"ATC\",\r\n            \"ATT\",\r\n            \"AAA\",\r\n            \"AAG\",\r\n            \"CTA\",\r\n            \"CTC\",\r\n            \"CTG\",\r\n            \"CTT\",\r\n            \"TTA\",\r\n            \"TTG\",\r\n            \"ATG\",\r\n            \"AAC\",\r\n            \"AAT\",\r\n            \"CCA\",\r\n            \"CCC\",\r\n            \"CCG\",\r\n            \"CCT\",\r\n            \"CAA\",\r\n            \"CAG\",\r\n            \"AGA\",\r\n            \"AGG\",\r\n            \"CGA\",\r\n            \"CGC\",\r\n            \"CGG\",\r\n            \"CGT\",\r\n            \"AGC\",\r\n            \"AGT\",\r\n            \"TCA\",\r\n            \"TCC\",\r\n            \"TCG\",\r\n            \"TCT\",\r\n            \"ACA\",\r\n            \"ACC\",\r\n            \"ACG\",\r\n            \"ACT\",\r\n            \"GTA\",\r\n            \"GTC\",\r\n            \"GTG\",\r\n            \"GTT\",\r\n            \"TGG\",\r\n            \"TAC\",\r\n            \"TAT\",\r\n            \"CAA\",\r\n            \"CAG\",\r\n            \"GAA\",\r\n            \"GAG\"\r\n        ];\r\n        let sampleSNPs = [\"A\", \"C\", \"G\", \"T\"];\r\n\r\n        let sample = (vec, nCodons) => {\r\n            let samples = [];\r\n            for (let x = 0; x < nCodons; x++) {\r\n                let idx = Math.floor((window as any).context.commonService.r01() * vec.length);\r\n                samples.push(vec[idx]);\r\n            }\r\n            return samples;\r\n        }\r\n\r\n        let seqs = [];\r\n\r\n        seqs.push({ id: idPrefix + \"0\", seq: seed });\r\n\r\n        while (seqs.length < count) {\r\n            // number codons to vary\r\n            let nCodons = Math.floor((window as any).context.commonService.r01() * 10) + 1;\r\n\r\n            // randomly select this many to check for existence\r\n            let randomCodonSet = sample(sampleCodons, nCodons).join(\"\");\r\n\r\n            // try again if not present\r\n            if (seqs[seqs.length - 1].seq.indexOf(randomCodonSet) == -1) continue;\r\n\r\n            // sequence to mutate\r\n            let oldseed = seqs[Math.floor((window as any).context.commonService.r01() * seqs.length)].seq;\r\n\r\n            // select codons to replace randomCodonSet\r\n            let replacementCodonSet = sample(sampleCodons, nCodons).join(\"\");\r\n\r\n            // replace codon set\r\n            let newseed = oldseed.replace(randomCodonSet, replacementCodonSet);\r\n\r\n            // add snp substitutions randomly across entire sequence\r\n            // - randomly sample addedSNP\r\n            // - randomly pick SNPS to replace\r\n            let addedSNPs = Math.floor((window as any).context.commonService.r01() * snps);\r\n            for (let j = 0; j < addedSNPs; j++) {\r\n                let randomSNP = sample(sampleSNPs, 1)[0];\r\n                let locOfSNP = Math.floor((window as any).context.commonService.r01() * seed.length);\r\n                newseed =\r\n                    newseed.substr(0, locOfSNP) + randomSNP + newseed.substr(locOfSNP + 1);\r\n            }\r\n\r\n            seqs.push({ id: idPrefix + \"\" + seqs.length, seq: newseed });\r\n        }\r\n        if(this.debugMode) {\r\n            console.log(\"Sequence spawn time:\", (Date.now() - start).toLocaleString(), 'ms');\r\n        }\r\n        return seqs;\r\n    };\r\n\r\n    align(params): Promise<void> {\r\n        return new Promise(resolve => {\r\n            if (params.aligner == \"none\") {\r\n                return resolve(params.nodes);\r\n            }\r\n            let n = params.nodes.length;\r\n            let referenceLength = params.reference.length;\r\n\r\n\r\n            let aligner: WorkerModule = new WorkerModule();\r\n            aligner.compute_align_swWorker.postMessage(params);\r\n\r\n\r\n            aligner.compute_align_swWorker.onmessage().subscribe((response) => {\r\n\r\n                let subset = JSON.parse((window as any).context.commonService.decode(new Uint8Array(response.data.nodes)));\r\n                console.log(\"Alignment transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n                let start = Date.now();\r\n                let minPadding = Infinity,\r\n                    d = null;\r\n                for (let i = 0; i < n; i++) {\r\n                    d = subset[i];\r\n                    if (!d._seq) d._seq = \"\";\r\n                    if (minPadding > d._padding) minPadding = d._padding;\r\n                }\r\n                for (let j = 0; j < n; j++) {\r\n                    d = subset[j];\r\n                    d._seq = \"-\".repeat(d._padding - minPadding) + d._seq;\r\n                    if (d._seq.length > referenceLength) {\r\n                        d._seq = d._seq.substring(0, referenceLength);\r\n                    } else {\r\n                        d._seq = d._seq.padEnd(referenceLength, \"-\");\r\n                    }\r\n                }\r\n                (window as any).context.commonService.session.data.nodeFields.push('_score');\r\n                (window as any).context.commonService.session.data.nodeFields.push('_padding');\r\n                (window as any).context.commonService.session.data.nodeFields.push('_cigar');\r\n                console.log(\"Alignment Padding time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n                resolve(subset);\r\n\r\n            });\r\n        });\r\n    };\r\n\r\n    computeConsensus(nodes = null): Promise<any> {\r\n\r\n\r\n        if (!nodes) nodes = this.session.data.nodes.filter(d => d.seq);\r\n\r\n        return new Promise(resolve => {\r\n\r\n            let computer: WorkerModule = new WorkerModule();\r\n\r\n            computer.compute_consensusWorker.postMessage({ data: nodes });\r\n\r\n            computer.compute_consensusWorker.onmessage().subscribe((response) => {\r\n\r\n                if(this.debugMode) {\r\n                    console.log(\"Consensus Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n                }\r\n                resolve((window as any).context.commonService.decode(new Uint8Array(response.data.consensus)));\r\n\r\n            });\r\n\r\n            //let computer: WorkerModule = new WorkerModule();\r\n            //let response = computer.compute_consensus({ data: nodes });\r\n\r\n\r\n            //console.log(\"Consensus Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n            //resolve(this.decode(new Uint8Array(response.data.consensus)));\r\n\r\n        });\r\n\r\n    };\r\n\r\n\r\n    computeAmbiguityCounts(): Promise<void> {\r\n        return new Promise(resolve => {\r\n            let nodes = (window as any).context.commonService.session.data.nodes;\r\n            let subset = nodes.filter(d => d.seq);\r\n            const subsetLength = subset.length;\r\n\r\n            let computer: WorkerModule = new WorkerModule();\r\n\r\n            computer.compute_ambiguity_countsWorker.postMessage(subset);\r\n\r\n            computer.compute_ambiguity_countsWorker.onmessage().subscribe((response) => {\r\n\r\n                console.log(\"Ambiguity Count Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n                let start = Date.now();\r\n                const dists = new Float32Array(response.data.counts);\r\n                for (let j = 0; j < subsetLength; j++) {\r\n                    nodes[subset[j].index]._ambiguity = dists[j];\r\n                }\r\n                (window as any).context.commonService.session.data.nodeFields.push('_ambiguity');\r\n                console.log(\"Ambiguity Count Merge time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n                resolve();\r\n\r\n            });\r\n\r\n            //let computer: WorkerModule = new WorkerModule();\r\n            //let response = computer.compute_ambiguity_counts(subset);\r\n\r\n\r\n            //console.log(\"Ambiguity Count Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n            //let start = Date.now();\r\n            //const dists = new Float32Array(response.data.counts);\r\n            //for (let j = 0; j < subsetLength; j++) {\r\n            //    nodes[subset[j].index]._ambiguity = dists[j];\r\n            //}\r\n            //this.session.data.nodeFields.push('_ambiguity');\r\n            //console.log(\"Ambiguity Count Merge time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n            //resolve();\r\n\r\n        });\r\n    };\r\n\r\n\r\n    computeConsensusDistances(): Promise<void> {\r\n\r\n        return new Promise(resolve => {\r\n            let start = Date.now();\r\n            let nodes = (window as any).context.commonService.session.data.nodes;\r\n            let nodesLength = nodes.length;\r\n            let subset = [];\r\n            for (let i = 0; i < nodesLength; i++) {\r\n                let node = nodes[i];\r\n                if (node.seq) {\r\n                    subset.push({\r\n                        index: i,\r\n                        seq: node.seq\r\n                    });\r\n                } else {\r\n                    subset.push({\r\n                        index: i,\r\n                        seq: \"\"\r\n                    });\r\n                }\r\n            }\r\n\r\n            let subsetLength = subset.length;\r\n            let computer: WorkerModule = new WorkerModule();\r\n\r\n            computer.compute_consensusWorker.postMessage({\r\n                data: {\r\n                    consensus: (window as any).context.commonService.session.data.consensus,\r\n                    subset: subset,\r\n                    start: start\r\n                }\r\n            });\r\n\r\n            computer.compute_consensusWorker.onmessage().subscribe((response) => {\r\n\r\n                let dists = new Uint16Array(response.data.dists);\r\n                console.log(\"Consensus Difference Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n                start = Date.now();\r\n                for (let j = 0; j < subsetLength; j++) {\r\n                    nodes[subset[j].index]._diff = dists[j];\r\n                }\r\n                (window as any).context.commonService.session.data.nodeFields.push('_diff');\r\n                console.log(\"Consensus Difference Merge time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n                resolve();\r\n\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Asychronously uses a worker to calculate snp or tn93 distances between each set of nodes and then add links\r\n     * @param subset an array of nodes\r\n     * @returns a promise that resolves to the number of new links added from this.addLink()\r\n     */\r\n    computeLinks(subset): Promise<any> {\r\n        return new Promise(resolve => {\r\n\r\n            let k = 0;\r\n\r\n            let computer: WorkerModule = new WorkerModule();\r\n\r\n            computer.compute_linksWorker.postMessage({\r\n                nodes: subset,\r\n                metric: (window as any).context.commonService.session.style.widgets['default-distance-metric'],\r\n                strategy: (window as any).context.commonService.session.style.widgets[\"ambiguity-resolution-strategy\"],\r\n                threshold: (window as any).context.commonService.session.style.widgets[\"ambiguity-threshold\"]\r\n            });\r\n\r\n            computer.compute_linksWorker.onmessage().subscribe((response) => {\r\n\r\n                let dists = (window as any).context.commonService.session.style.widgets['default-distance-metric'].toLowerCase() == 'snps' ?\r\n                    new Uint16Array(response.data.links) :\r\n                    new Float32Array(response.data.links);\r\n                    if(this.debugMode) {\r\n                        console.log(\"Links Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n                    }\r\n                let start = Date.now();\r\n                let check = (window as any).context.commonService.session.files.length > 1;\r\n                let n = subset.length;\r\n                let l = 0;\r\n                for (let i = 0; i < n; i++) {\r\n                    let sourceID = subset[i]._id;\r\n                    for (let j = 0; j < i; j++) {\r\n                        let targetID = subset[j]._id;\r\n                        k += (window as any).context.commonService.addLink({\r\n                            source: sourceID,\r\n                            target: targetID,\r\n                            distance: dists[l++],\r\n                            origin: ['Genetic Distance'],\r\n                            distanceOrigin: 'Genetic Distance',\r\n                            hasDistance: true,\r\n                            directed: false\r\n                        }, check);\r\n                    }\r\n                }\r\n                if(this.debugMode) {\r\n                    console.log(\"Links Merge time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n                }\r\n                resolve(k);\r\n            });\r\n        });\r\n    };\r\n\r\n\r\n    getDM(): Promise<any> {\r\n        let start = Date.now();\r\n        return new Promise(resolve => {\r\n            let dm : any = '';\r\n            if ((window as any).context.commonService.session.data.newick){\r\n                let treeObj = patristic.parseNewick((window as any).context.commonService.session.data.newick);\r\n                dm = treeObj.toMatrix();\r\n            } else {\r\n                let labels = (window as any).context.commonService.session.data.nodes.map(d => d._id);\r\n                labels = labels.sort();\r\n                let metric = (window as any).context.commonService.session.style.widgets['link-sort-variable'];\r\n                const n = labels.length;\r\n                dm = new Array(n);\r\n                let m = new Array(n);\r\n                for (let i = 0; i < n; i++) {\r\n                    dm[i] = new Array(n);\r\n                    dm[i][i] = 0;\r\n                    let source = labels[i];\r\n                    let row = (window as any).context.commonService.temp.matrix[source];\r\n                    if (!row) {\r\n                        console.error('Incompletely populated temp.matrix! Couldn\\'t find ' + source);\r\n                        continue;\r\n                    }\r\n                    for (let j = 0; j < i; j++) {\r\n                        let link = row[labels[j]];\r\n                        if (link) {\r\n                            dm[i][j] = dm[j][i] = link[metric];\r\n                        } else {\r\n                            dm[i][j] = dm[j][i] = null;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // console.log('matrixx: ',  JSON.stringify((window as any).context.commonService.temp.matrix));\r\n\r\n            if(this.debugMode) {\r\n                console.log(\"DM Compute time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n            }\r\n            resolve(dm);\r\n        });\r\n    };\r\n\r\n    computeTree(): Promise<any> {\r\n\r\n        if(this.debugMode) {\r\n            console.log('computing tree')\r\n        }\r\n        return new Promise(resolve => {\r\n\r\n          if ((window as any).context.commonService.treeObj) {\r\n            resolve((window as any).context.commonService.treeObj.toNewick());\r\n          } else if((window as any).context.commonService.session.data.newick){\r\n            resolve((window as any).context.commonService.session.data.newick);\r\n          } else {\r\n            let computer: WorkerModule = new WorkerModule();\r\n            (window as any).context.commonService.getDM().then(dm => {\r\n                computer.compute_treeWorker.postMessage({\r\n                    // labels: Object.keys((window as any).context.commonService.temp.matrix).sort(), <- This doesn't work because temp.matrix retains blank objects\r\n                    labels: (window as any).context.commonService.session.data.nodes.map(a => a._id),\r\n                    matrix: dm,\r\n                    round: (window as any).context.commonService.session.style.widgets[\"tree-round\"]\r\n                });\r\n\r\n\r\n                computer.compute_treeWorker.onmessage().subscribe((response) => {\r\n\r\n                  const treeObj = (window as any).context.commonService.decode(new Uint8Array(response.data.tree));\r\n\r\n                  const treeString = patristic.parseJSON(treeObj).toNewick();\r\n\r\n                  if(this.debugMode) {\r\n                    console.log('Tree Transit time: ', (Date.now() - response.data.start).toLocaleString(), 'ms');\r\n                  }\r\n                  resolve(treeString);\r\n\r\n              });\r\n\r\n            });\r\n          }\r\n        })\r\n    };\r\n\r\n\r\n    computeDirectionality(): Promise<void> {\r\n        return new Promise(resolve => {\r\n\r\n            let computer: WorkerModule = new WorkerModule();\r\n            computer.compute_directionalityWorker.postMessage({\r\n                links: (window as any).context.commonService.session.data.links,\r\n                tree: (window as any).context.commonService.temp.tree\r\n            });\r\n\r\n            computer.compute_directionalityWorker.onmessage().subscribe((response) => {\r\n\r\n                let flips = new Uint8Array(response.data.output);\r\n                if(this.debugMode) {\r\n                    console.log(\"Directionality Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n                }\r\n                let start = Date.now();\r\n                let n = flips.length;\r\n                for (let i = 0; i < n; i++) {\r\n                    if (flips[i]) {\r\n                        let fliplink = (window as any).context.commonService.session.data.links[i];\r\n                        let fliptemp = fliplink.source;\r\n                        fliplink.source = fliplink.target;\r\n                        fliplink.target = fliptemp;\r\n                        fliplink.directed = true;\r\n                    }\r\n                }\r\n                if(this.debugMode) {\r\n                    console.log(\"Directionality Integration time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n                }\r\n                resolve();\r\n\r\n            });\r\n\r\n        });\r\n    };\r\n\r\n    computeMST(): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n\r\n            let computer: WorkerModule = new WorkerModule();\r\n            computer.compute_mstWorker.postMessage({\r\n                links: (window as any).context.commonService.session.data.links,\r\n                matrix: (window as any).context.commonService.temp.matrix,\r\n                epsilon: (window as any).context.commonService.session.style.widgets[\"filtering-epsilon\"],\r\n                metric: (window as any).context.commonService.session.style.widgets['link-sort-variable']\r\n            });\r\n\r\n            computer.compute_mstWorker.onmessage().subscribe((response) => {\r\n            if (response.data == \"Error\") {\r\n              return reject(\"MST washed out\");\r\n            }\r\n            let output = new Uint8Array(response.data.links);\r\n            if(this.debugMode) {\r\n                console.log(\"MST Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n            }\r\n            const start = Date.now();\r\n            let links = (window as any).context.commonService.session.data.links;\r\n            const numLinks = links.length;\r\n            for (let i = 0; i < numLinks; i++) {\r\n              links[i].nn = output[i] ? true : false;\r\n            }\r\n            if(this.debugMode) {\r\n                console.log(\"MST Merge time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n            }\r\n            resolve();\r\n          });\r\n        });\r\n      };\r\n\r\n\r\n    computeNN(): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n\r\n            let computer: WorkerModule = new WorkerModule();\r\n            computer.compute_nnWorker.postMessage({\r\n                links: (window as any).context.commonService.session.data.links,\r\n                matrix: (window as any).context.commonService.temp.matrix,\r\n                epsilon: (window as any).context.commonService.session.style.widgets[\"filtering-epsilon\"],\r\n                metric: (window as any).context.commonService.session.style.widgets['link-sort-variable']\r\n            });\r\n\r\n            computer.compute_nnWorker.onmessage().subscribe((response) => {\r\n\r\n                if (response.data == \"Error\") {\r\n                    return reject(\"Nearest Neighbor washed out\");\r\n                }\r\n                let output = new Uint8Array(response.data.links);\r\n                if(this.debugMode) {\r\n                    console.log(\"NN Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n                }\r\n                const start = Date.now();\r\n                let links = (window as any).context.commonService.session.data.links;\r\n                const numLinks = links.length;\r\n                for (let i = 0; i < numLinks; i++) {\r\n                    links[i].nn = output[i] ? true : false;\r\n                }\r\n                if(this.debugMode) {\r\n                    console.log(\"NN Merge time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n                }\r\n                resolve();\r\n            });\r\n        });\r\n    };\r\n\r\n    computeTriangulation(): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n\r\n            const metric = (window as any).context.commonService.session.style.widgets['link-sort-variable'];\r\n            let computer: WorkerModule = new WorkerModule();\r\n            (window as any).context.commonService.getDM().then(dm => {\r\n                computer.compute_triangulationWorker.postMessage({\r\n                    matrix: dm\r\n                });\r\n\r\n                computer.compute_triangulationWorker.onmessage().subscribe((response) => {\r\n\r\n                    if (response.data == \"Error\") return reject(\"Triangulation washed out\");\r\n                    if(this.debugMode) {\r\n                        console.log(\"Triangulation Transit time: \", (Date.now() - response.data.start).toLocaleString(), \"ms\");\r\n                    }\r\n                    let start = Date.now();\r\n                    let matrix = JSON.parse((window as any).context.commonService.decode(new Uint8Array(response.data.matrix)));\r\n                    let labels = Object.keys((window as any).context.commonService.temp.matrix);\r\n                    const n = labels.length;\r\n                    for (let i = 0; i < n; i++) {\r\n                        let source = labels[i];\r\n                        let row = (window as any).context.commonService.temp.matrix[source];\r\n                        for (let j = 0; j < i; j++) {\r\n                            let target = labels[j];\r\n                            if (!row[target]) {\r\n                                (window as any).context.commonService.addLink({\r\n                                    source: source,\r\n                                    target: target,\r\n                                    origin: ['Triangulation'],\r\n                                    visible: false\r\n                                });\r\n                            }\r\n                            row[target][metric] = matrix[i][j];\r\n                        }\r\n                    }\r\n                    if(this.debugMode) {\r\n                        console.log(\"Triangulation Merge time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n                    }\r\n                    resolve();\r\n                })\r\n            });\r\n        });\r\n    };\r\n\r\n    async runHamsters() {\r\n\r\n        console.log('running hamsters');\r\n        if (!(window as any).context.commonService.session.style.widgets['triangulate-false']) (window as any).context.commonService.computeTriangulation();\r\n        (window as any).context.commonService.computeNN();\r\n        (window as any).context.commonService.computeTree();\r\n        if (!(window as any).context.commonService.session.style.widgets['infer-directionality-false']) (window as any).context.commonService.computeDirectionality();\r\n        (window as any).context.commonService.finishUp();\r\n    };\r\n\r\n    /**\r\n     * Sets node/link values to null when they aren't present. Check each field in nodeField and linkFields, and if the key includes 'date', sets any null or empty string\r\n     * value to the min date value found. Populates options for #search-field, #link-sort-variable, #node-color-variable, #link-color-variable, set value for #default-distance-metric.\r\n     * Next calls updateThresholdHistogram, tagClusters, setClusterVisibility, setLinkVisibilty, setNodeVisibility functions. Updates network statistic table.\r\n     * Launches default view.\r\n     */\r\n    async finishUp() {\r\n\r\n        clearTimeout((window as any).context.commonService.temp.messageTimeout);\r\n        // cycles through each node and link and if variable in nodeFields/linkFields not a key for the node/link, it is added with value of null\r\n        [\"node\", \"link\"].forEach(v => {\r\n            let n = (window as any).context.commonService.session.data[v + \"s\"].length;\r\n            let fields = (window as any).context.commonService.session.data[v + \"Fields\"];\r\n            for (let i = 0; i < n; i++) {\r\n                let d = (window as any).context.commonService.session.data[v + \"s\"][i];\r\n                fields.forEach(field => {\r\n                    if (!(field in d)) d[field] = null;\r\n                });\r\n            }\r\n        });\r\n\r\n        \r\n         // patch missing date fields to earliest date in the the data\r\n        let fields = (window as any).context.commonService.session.data[\"nodeFields\"];\r\n        let nodeSkeleton = (window as any).context.commonService.dataSkeleton();\r\n        let fieldsToCheck = fields.filter(f => !nodeSkeleton.nodeFields.includes(f) && f != '_ambiguity' && f != '_diff'); \r\n        let n = (window as any).context.commonService.session.data.nodes.length;\r\n        let k = fieldsToCheck.length;\r\n        // for each field in fieldsToCheck (fieldsToCheck are nodeFields that are not default from dataSkeleton() and also not '_ambiguity' and not '_diff' )\r\n        for (let j = 0; j < k; j++) {\r\n            let field = fieldsToCheck[j];\r\n            let times = [];\r\n            // for each node check if node[field] is valid time and if so push to times []\r\n            for (let i = 0; i < n; i++) {\r\n                let node = (window as any).context.commonService.session.data.nodes[i];\r\n                if (node[field] != null) {\r\n                    let time = moment(node[field]); \r\n                    if (time.isValid() && isNaN(node[field])) //#315\r\n                        times.push(time.toDate());\r\n                }\r\n            }\r\n\r\n            // If column has the word date in it, date expected to be in column \r\n            if (field.toLowerCase().includes(\"date\")){\r\n        \r\n                let minTime = Math.min(...times);\r\n                let minTimeString = new Date(minTime).toString();\r\n                // for each node d, if d[field] == null or empty string (\"\", \" \", \"  \" ...) set d[field] to minTimeString\r\n                (window as any).context.commonService.session.data.nodes.forEach(d => {\r\n                    if (d[field] == null || (d[field] && String(d[field]).trim() == \"\"))  {\r\n                        d[field] = minTimeString;\r\n                    } \r\n                });\r\n            }\r\n        };\r\n\r\n        // TODO:: See if this is needed\r\n        // this.foldMultiSelect();\r\n\r\n        $(\"#search-field\")\r\n            .html((window as any).context.commonService.session.data.nodeFields.map(field => '<option value=\"' + field + '\">' + (window as any).context.commonService.titleize(field) + \"</option>\").join(\"\\n\"))\r\n            .val((window as any).context.commonService.session.style.widgets[\"search-field\"]);\r\n        $(\"#search-form\").css(\"display\", \"flex\");\r\n        $(\"#link-sort-variable\")\r\n            .html((window as any).context.commonService.session.data.linkFields.map(field => '<option value=\"' + field + '\">' + (window as any).context.commonService.titleize(field) + \"</option>\").join(\"\\n\"))\r\n            .val((window as any).context.commonService.session.style.widgets[\"link-sort-variable\"]);\r\n        $(\"#node-color-variable\")\r\n            .html(\r\n                \"<option selected>None</option>\" +\r\n                (window as any).context.commonService.session.data.nodeFields.map(field => '<option value=\"' + field + '\">' + (window as any).context.commonService.titleize(field) + \"</option>\").join(\"\\n\"))\r\n            .val((window as any).context.commonService.session.style.widgets[\"node-color-variable\"]);\r\n        $(\"#default-distance-metric\")\r\n            .val((window as any).context.commonService.session.style.widgets[\"default-distance-metric\"]);\r\n        $(\"#link-color-variable\")\r\n        .html(\r\n            \"<option>None</option>\" +\r\n            (window as any).context.commonService.session.data.linkFields.map(field => '<option value=\"' + field + '\">' + (window as any).context.commonService.titleize(field) + \"</option>\").join(\"\\n\"))\r\n        .val((window as any).context.commonService.session.style.widgets[\"link-color-variable\"]);\r\n        try {\r\n            (window as any).context.commonService.updateThresholdHistogram();\r\n        } catch (error) {\r\n            console.error(error);\r\n            $(\"#loading-information-modal\").hide();\r\n            // abp.notify.error(\"Something went wrong! Please click here to start a new session and try again.\");\r\n            //.delay(0)\r\n            //.ondismiss(() => window.location.reload());\r\n        }\r\n\r\n        (window as any).context.commonService.setLinkVisibility(true);\r\n\r\n        $(\"#SettingsTab\").attr(\"data-target\", \"#global-settings-modal\");\r\n        (window as any).context.commonService.session.meta.loadTime = Date.now() - (window as any).context.commonService.session.meta.startTime;\r\n        console.log(\"Total load time:\", (window as any).context.commonService.session.meta.loadTime.toLocaleString(), \"ms\");\r\n\r\n        this.tagClusters().then(() => {\r\n            (window as any).context.commonService.setClusterVisibility(true);\r\n            (window as any).context.commonService.setLinkVisibility(true);\r\n            (window as any).context.commonService.setNodeVisibility(true);\r\n            [\"cluster\", \"link\", \"node\"].forEach(thing => $(document).trigger(thing + \"-visibility\"));// $window.trigger(thing + \"-visibility\"));\r\n            (window as any).context.commonService.updateStatistics();\r\n            $(\"#network-statistics-wrapper\").fadeIn();\r\n            // console.log\r\n        });\r\n\r\n        setTimeout(() => {\r\n            if(this.debugMode) {\r\n                console.log('launching view: ',(window as any).context.commonService.session.style.widgets['default-view']);\r\n            }\r\n            (window as any).context.commonService.launchView((window as any).context.commonService.session.style.widgets['default-view']);\r\n            //(window as any).context.commonService.launchView('Aggregate');\r\n            //setTimeout(() => { $('#overlay button').click()}, 100)\r\n            // currently loading all views isn't ready and is leading to bugs where default data is seeping in when new data is loaded\r\n            //delayFunction(10, loadOtherViews) \r\n            function convertName(s: string) {\r\n                // can't do alignment view yet;\r\n                if (s == 'geo_map') {\r\n                    return 'Map';\r\n                } else if (s == 'table') {\r\n                    return 'Table'\r\n                } else if (s == 'timeline') {\r\n                    return 'Epi Curve' \r\n                } else if (s == '2d_network') {\r\n                    return '2D Network'\r\n                } else if (s == 'sequences') {\r\n                    //return 'Alignment View';\r\n                    return false;\r\n                    // need to add crosstab as well and fix alignment view; they are not being added to cs.session.layout.content;\r\n                    // on another note it doesn't close all previous view when new data is added from overlay\r\n                } else if (s == 'phylogenetic_tree') {\r\n                    return 'Phylogenetic Tree'\r\n                } else {\r\n                    console.log(`view ${s} is not currently defined`);\r\n                    return false;\r\n                }\r\n            }\r\n            async function delayFunction(x, callback) {\r\n                await new Promise(resolve => setTimeout(resolve, x)).then(() => {\r\n                    callback();\r\n                })\r\n            }\r\n            async function loadOtherViews() {\r\n                (window as any).context.commonService.session.layout.content.forEach(async view => {\r\n                    let viewName = convertName(view.type)\r\n                    if (view.type == (window as any).context.commonService.session.style.widgets['default-view']) {\r\n                        return;\r\n                    } else if (viewName){\r\n                        (window as any).context.commonService.visuals.microbeTrace.Viewclick(viewName);\r\n                    }\r\n                    if (viewName == 'Epi Curve') {\r\n                        (window as any).context.commonService.visuals.epiCurve.viewActive = false;\r\n                    }\r\n                })\r\n                (window as any).context.commonService.visuals.microbeTrace.Viewclick(convertName( (window as any).context.commonService.session.style.widgets['default-view']))\r\n            }\r\n\r\n        }, 1000);\r\n        \r\n        /*if (localStorage.getItem(\"stash-auto\") == \"true\") {\r\n            this.temp.autostash = {\r\n                time: Date.now(),\r\n                interval: setInterval(() => {\r\n                    let newTime = Date.now();\r\n                    (window as any).context.commonService.localStorageService.setItem(\"stash-\" + newTime + \"-autostash\", JSON.stringify((window as any).context.commonService.session));\r\n                    (window as any).context.commonService.localStorageService.removeItem(\"stash-\" + (window as any).context.commonService.temp.autostash.time + \"-autostash\", (error) => {\r\n\r\n                      \r\n                        abp.notify.warn('Error while attempting to remove stash');\r\n\r\n                    });\r\n\r\n                    this.temp.autostash.time = newTime;\r\n                }, 60000)\r\n            };\r\n        }*/\r\n        $(\".hideForHIVTrace\").css(\"display\", \"flex\");\r\n\r\n    };\r\n\r\n    foldMultiSelect() {\r\n        this.foldRaces();\r\n        this.foldExposures();\r\n    }\r\n\r\n    foldRaces() {\r\n        if((window as any).context.commonService.session.data.nodeFields.find(x => x === \"Race\")){\r\n            return;\r\n        }\r\n\r\n        (window as any).context.commonService.session.data.nodeFields.push(\"Race\");\r\n        (window as any).context.commonService.session.data.nodeFields.push(\"RaceDetails\");\r\n\r\n        const races: { id: string, displayValue: string }[] = [\r\n            { id: \"RaceAsian\", displayValue: \"Asian\" },\r\n            { id: \"RaceAmericanIndian\", displayValue: \"American Indian\" },\r\n            { id: \"RaceBlack\", displayValue: \"Black\" },\r\n            { id: \"RaceWhite\", displayValue: \"White\" },\r\n            { id: \"RaceNativeHawaiian\", displayValue: \"Native Hawaiian\" }\r\n        ];\r\n\r\n        if ((window as any).context.commonService.session.data.nodes) {\r\n\r\n            (window as any).context.commonService.session.data.nodes.forEach(node => {\r\n                if (!node.Race) {\r\n\r\n                    let selectedRace: string = \"\";\r\n                    let raceDetails: string[] = [];\r\n\r\n                    races.forEach(race => {\r\n                        if (node[race.id] && node[race.id].toLowerCase() === \"true\") {\r\n                            \r\n                            raceDetails.push(race.displayValue);\r\n\r\n                            if (!selectedRace) {\r\n                                selectedRace = race.displayValue;\r\n                            } else {\r\n                                selectedRace = \"Mixed\";\r\n                            }\r\n                        }\r\n\r\n                        //Remove race properties\r\n                        delete node[race.id];\r\n                    });\r\n\r\n                    node.Race = selectedRace;\r\n                    node.RaceDetails = raceDetails.join(\" | \");\r\n                }\r\n            })\r\n        }\r\n\r\n        //Remove race fields from nodeFields\r\n        races.forEach(race=>{\r\n            (window as any).context.commonService.session.data.nodeFields = (window as any).context.commonService.session.data.nodeFields.filter(x=>x != race.id);\r\n        })\r\n\r\n    }\r\n\r\n    foldExposures(){\r\n        if((window as any).context.commonService.session.data.nodeFields.find(x => x === \"Exposure\")){\r\n            return;\r\n        }\r\n\r\n        (window as any).context.commonService.session.data.nodeFields.push(\"Exposure\");\r\n        (window as any).context.commonService.session.data.nodeFields.push(\"ExposureDetails\");\r\n\r\n        const exposures: { id: string, displayValue: string }[] = [\r\n            { id: \"ExposureInfoDomesticTraveled\", displayValue: \"Domestic Traveled\"},\r\n            { id: \"ExposureInfoInternationalTraveled\", displayValue: \"International Traveled\"},\r\n            { id: \"ExposureInfoCorrectionalFacility\", displayValue: \"Correctional Facility\"},\r\n            { id: \"ExposureInfoCovidAnimal\", displayValue: \"Covid Animal\"},\r\n            { id: \"ExposureInfoCruiseShipTraveled\", displayValue: \"Cruise Ship Traveled\"},\r\n            { id: \"ExposureInfoWorkplace\", displayValue: \"Workplace\"},\r\n            { id: \"ExposureInfoWorkplaceIsCriticalInfra\", displayValue: \"Workplace Is Critical Infra\"},\r\n            { id: \"ExposureInfoWorkplaceSetting\", displayValue: \"Workplace Setting\"},\r\n            { id: \"ExposureInfoAdultLivingFacility\", displayValue: \"Adult Living Facility\"},\r\n            { id: \"ExposureInfoSchool\", displayValue: \"School\"},\r\n            { id: \"ExposureInfoKnownCovid19ContactnCoVID\", displayValue: \"Known Covid19 Contact nCoVID\"}            \r\n        ];\r\n\r\n        if ((window as any).context.commonService.session.data.nodes) {\r\n\r\n            (window as any).context.commonService.session.data.nodes.forEach((node, index) => {\r\n                if (!node.Exposure) {\r\n\r\n                    let selectedRace: string = \"\";\r\n                    let exposureDetails: string[] = [];\r\n\r\n                    exposures.forEach(exposure => {\r\n                        if (exposure.id != \"ExposureInfoWorkplaceIsCriticalInfra\" && \r\n                            exposure.id != \"ExposureInfoWorkplaceSetting\" && \r\n                            node[exposure.id] && node[exposure.id].toLowerCase() === \"true\") {\r\n                            \r\n                            if(exposure.id === \"ExposureInfoWorkplace\"){\r\n                                exposureDetails.push(`${exposure.displayValue} {\"Is the workplace critical infrastructure\" : \"${(window as any).context.commonService.session.data.nodes[index].ExposureInfoWorkplaceIsCriticalInfra}\", \"Workplace Setting\" : \"${(window as any).context.commonService.session.data.nodes[index].ExposureInfoWorkplaceSetting}\"}`);\r\n                            }\r\n                            else{\r\n                                exposureDetails.push(exposure.displayValue);\r\n                            }\r\n\r\n                            if (!selectedRace) {\r\n                                selectedRace = exposure.displayValue;\r\n                            } else {\r\n                                selectedRace = \"Multiple\";\r\n                            }\r\n                        }\r\n\r\n                        //Remove exposure properties\r\n                        delete node[exposure.id];\r\n                    });\r\n\r\n                    node.Exposure = selectedRace;\r\n                    node.ExposureDetails = exposureDetails.join(\" | \");\r\n                }\r\n            })\r\n        }\r\n\r\n        //Remove exposure fields from nodeFields\r\n        exposures.forEach(exposure=>{\r\n            (window as any).context.commonService.session.data.nodeFields = (window as any).context.commonService.session.data.nodeFields.filter(x=>x != exposure.id);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Gets a list of all visible node objects\r\n     * @param {boolean} [copy=false] - optional boolean value to set if you want to deepcopy the nodes\r\n     * @returns a list of node objects\r\n     */    \r\n    getVisibleNodes(copy: any = false) {\r\n        let nodes = (window as any).context.commonService.session.data.nodeFilteredValues;\r\n        let n = nodes.length;\r\n        let out = [];\r\n        for (let i = 0; i < n; i++) {\r\n            let node = nodes[i];\r\n            if (node.visible) {\r\n                if (copy) {\r\n                    out.push(JSON.parse(JSON.stringify(node)));\r\n                } else {\r\n                    out.push(node);\r\n                }\r\n            }\r\n        }\r\n        return out;\r\n    };\r\n\r\n    /**\r\n     * Gets a list of all visible links objects; Similar to twoD.getVlinks(), and twoD.getLLinks()\r\n     * \r\n     * A link that has multiple origin is stored as a single object\r\n     * \r\n     * Each link's source and target are strings of the node _id\r\n     * @param {boolean} [copy=false] - optional boolean value to set if you want to deepcopy the links\r\n     * @returns a array of link objects;\r\n     */    \r\n    getVisibleLinks(copy: any = false) {\r\n        let links = (window as any).context.commonService.session.data.links;\r\n        let n = links.length;\r\n        let out = [],\r\n            link = null;\r\n        if (copy) {\r\n            for (let i = 0; i < n; i++) {\r\n                link = links[i];\r\n                if (link.visible) out.push(JSON.parse(JSON.stringify(link)));\r\n            }\r\n        } else {\r\n            for (let j = 0; j < n; j++) {\r\n                link = links[j];\r\n                if (link.visible) out.push(link);\r\n            }\r\n        }\r\n        console.log('get visible links: ', _.cloneDeep(out));\r\n        return out;\r\n    };\r\n\r\n    /**\r\n     * Gets a list of all visible cluster objects\r\n     * @param {boolean} [copy=false] - optional boolean value to set if you want to deepcopy the cluster\r\n     * @returns a list of cluster objects\r\n     */\r\n    getVisibleClusters(copy: any = false) {\r\n        let clusters = (window as any).context.commonService.session.data.clusters;\r\n        if(this.debugMode) {\r\n            console.log('get vis: ', clusters);\r\n        }\r\n        let n = clusters.length;\r\n        let out = [],\r\n            cluster = null;\r\n        if (copy) {\r\n            for (let i = 0; i < n; i++) {\r\n                cluster = clusters[i];\r\n                if (cluster.visible) out.push(JSON.parse(JSON.stringify(cluster)));\r\n            }\r\n        } else {\r\n            for (let j = 0; j < n; j++) {\r\n                cluster = clusters[j];\r\n                if (cluster.visible) out.push(cluster);\r\n            }\r\n        }\r\n        return out;\r\n    };\r\n\r\n    /**\r\n     * updates the network statistics table with number of visible nodes, visible links, clusters, and selected links\r\n     * @returns undefined\r\n     */\r\n    updateStatistics() {\r\n\r\n        if ($(\"#network-statistics-hide\").is(\":checked\")) return;\r\n        let vnodes = (window as any).context.commonService.getVisibleNodes();\r\n        let vlinks = (window as any).context.commonService.getVisibleLinks();\r\n        let linkCount = 0;\r\n        let clusterCount = 0;\r\n        if ((window as any).context.commonService.session.style.widgets[\"timeline-date-field\"] == 'None') {\r\n            linkCount = vlinks.length;\r\n            // const minSize = (window as any).context.commonService.session.style.widgets['cluster-minimum-size'];\r\n            clusterCount = (window as any).context.commonService.session.data.clusters.filter(\r\n              cluster => cluster.visible && cluster.nodes > 1).length;\r\n        } else {\r\n            let n = vlinks.length;\r\n            for (let i = 0; i < n; i++) {\r\n                let src = vnodes.find(d => d._id == vlinks[i].source || d.id == vlinks[i].source);\r\n                let tgt = vnodes.find(d => d._id == vlinks[i].target || d.id == vlinks[i].target);\r\n                if (src && tgt) linkCount++;\r\n            }\r\n            \r\n            n = vnodes.length;\r\n            let clusters = {};\r\n            for (let i = 0; i < n; i++) {\r\n                let id = vnodes[i].cluster;\r\n                if (clusters[id]) clusters[id]++;\r\n                else clusters[id] = 1;\r\n            }\r\n            clusterCount = (window as any).context.commonService.session.data.clusters.filter(cluster => clusters[cluster.id] && clusters[cluster.id]>2 && cluster.visible && cluster.nodes > 1).length;\r\n\r\n        }\r\n        let singletons = vnodes.filter(d => d.degree == 0).length;\r\n        $(\"#numberOfSelectedNodes\").text(vnodes.filter(d => d.selected).length.toLocaleString());\r\n        $(\"#numberOfNodes\").text(vnodes.length.toLocaleString());\r\n        $(\"#numberOfVisibleLinks\").text(linkCount.toLocaleString());\r\n        $(\"#numberOfSingletonNodes\").text(singletons.toLocaleString());\r\n        $(\"#numberOfDisjointComponents\").text(clusterCount);\r\n    };\r\n\r\n    /**\r\n\t * updates the functions that set the color and transparency of the nodes [commonService.temp.style.nodeColorMap() and commonService.temp.style.nodeAlphaMap()]\r\n\t * @returns {Object} where keys are the values to group (ie. subtype B,C,D...) and values are counts of the number of node for each key\r\n\t */\r\n    createNodeColorMap() {\r\n        let variable = (window as any).context.commonService.session.style.widgets[\"node-color-variable\"];\r\n        if (variable == \"None\") {\r\n            (window as any).context.commonService.temp.style.nodeColorMap = () => (window as any).context.commonService.session.style.widgets[\"node-color\"];\r\n            return [];\r\n        }\r\n\r\n        let nodeColors;\r\n\r\n        if((window as any).context.commonService.session.style.nodeColorsTable && (window as any).context.commonService.session.style.nodeColorsTable[variable]) {\r\n            nodeColors = [...(window as any).context.commonService.session.style.nodeColorsTable[variable]];\r\n        } else {\r\n            (window as any).context.commonService.session.style.nodeColorsTable = {};\r\n            (window as any).context.commonService.session.style.nodeColorsTableKeys = {};\r\n            nodeColors = (window as any).context.commonService.session.style.nodeColorsTable[variable] = [...(window as any).context.commonService.session.style.nodeColors];\r\n        }\r\n\r\n        // populates aggregates object where key is the value and the value is the count of number of nodes with that value\r\n        let aggregates = {};\r\n        let nodes = (window as any).context.commonService.session.data.nodes;\r\n        let n = nodes.length;\r\n        for (let i = 0; i < n; i++) {\r\n            let d = nodes[i];\r\n            let dv = d[variable];\r\n            if (dv in aggregates) {\r\n                if (!d.visible) continue;\r\n                aggregates[dv]++;\r\n            } else {\r\n                if (!d.visible) aggregates[dv] = 0;\r\n                else aggregates[dv] = 1;\r\n            }\r\n        }\r\n        \r\n        // adds more colors and alpha values when number of node options > number of colors/alphas\r\n        let values = Object.keys(aggregates);\r\n        if (values.length > (window as any).context.commonService.session.style.nodeColors.length) {\r\n            let colors = [];\r\n            let m = Math.ceil(values.length / (window as any).context.commonService.session.style.nodeColors.length);\r\n            while (m-- > 0) {\r\n                colors = colors.concat((window as any).context.commonService.session.style.nodeColors);\r\n            }\r\n            nodeColors = colors;\r\n            (window as any).context.commonService.session.style.nodeColors = colors;\r\n        }\r\n        if (!(window as any).context.commonService.session.style.nodeAlphas) (window as any).context.commonService.session.style.nodeAlphas = new Array(values.length).fill(1);\r\n        if (values.length > (window as any).context.commonService.session.style.nodeAlphas.length) {\r\n            (window as any).context.commonService.session.style.nodeAlphas = (window as any).context.commonService.session.style.nodeAlphas.concat(\r\n                new Array(values.length - (window as any).context.commonService.session.style.nodeAlphas.length).fill(1)\r\n            );\r\n        }\r\n\r\n\r\n        if(!(window as any).context.commonService.session.style.nodeColorsTableHistory) {\r\n            (window as any).context.commonService.session.style.nodeColorsTableHistory = {\r\n                \"null\" : \"#EAE553\"\r\n            };\r\n        }\r\n        let keys = Object.keys((window as any).context.commonService.session.style.nodeColorsTableHistory);\r\n\r\n        //Update Table History\r\n        values.forEach( (val, ind) => {\r\n\r\n        // Get index of value in history\r\n        let index = keys.findIndex(key => key === val);\r\n\r\n        //If found in history set previous color\r\n        if (index !== -1) {\r\n\r\n            // Update color of where value currently is\r\n            nodeColors[ind] = (window as any).context.commonService.session.style.nodeColorsTableHistory[val];\r\n\r\n        //If value not found in history, add it\r\n        } else {\r\n            (window as any).context.commonService.session.style.nodeColorsTableHistory[val] = nodeColors[ind];\r\n        }\r\n\r\n        if (val === \"null\"){\r\n            nodeColors[ind] = \"#EAE553\"\r\n        }\r\n\r\n        });\r\n\r\n        if ((window as any).context.commonService.session.style.widgets[\"node-timeline-variable\"] == 'None') {\r\n            (window as any).context.commonService.session.style.nodeColorsTableKeys[variable] = values;\r\n            (window as any).context.commonService.session.style.nodeColorsTable[variable] = nodeColors;\r\n        } else {\r\n        \r\n        // During timeline mode, user Pause and switch to a different Node varaible but nodeColorsTableKeys[variable] is not available\r\n        if(!(window as any).context.commonService.session.style.nodeColorsTableKeys[variable]) {\r\n            let aggregatesTL = {};\r\n            let nodesTL = (window as any).context.commonService.session.network.timelineNodes;\r\n            let n = nodesTL.length;\r\n            let nodeColorsTL = [...(window as any).context.commonService.session.style.nodeColors];\r\n            for (let i = 0; i < n; i++) {\r\n            let d = nodesTL[i];\r\n            if (!d.visible) continue;\r\n            let dv = d[variable];\r\n            if (dv in aggregatesTL) {\r\n                aggregatesTL[dv]++;\r\n            } else {\r\n                aggregatesTL[dv] = 1;\r\n            }\r\n            }\r\n            let valuesTL = Object.keys(aggregatesTL);\r\n            if (valuesTL.length > nodeColorsTL.length) {\r\n            let colors = [];\r\n            let m = Math.ceil(valuesTL.length / nodeColorsTL.length);\r\n            while (m-- > 0) {\r\n                colors = colors.concat(nodeColorsTL);\r\n            }\r\n            nodeColorsTL = colors;\r\n            }\r\n            (window as any).context.commonService.session.style.nodeColorsTableKeys[variable] = valuesTL;\r\n            (window as any).context.commonService.session.style.nodeColorsTable[variable] = nodeColorsTL;\r\n        }\r\n\r\n        let key;\r\n        let tempNodeColors=[];\r\n        for(let v of values) {\r\n            let table = (window as any).context.commonService.session.style.nodeColorsTableKeys[variable];\r\n            key = table.findIndex( k => k === v);\r\n            tempNodeColors.push(nodeColors[key]);\r\n        }\r\n\r\n        nodeColors = (window as any).context.commonService.temp.style.nodeColor = tempNodeColors; // temp node color maps saved only under timeline\r\n        (window as any).context.commonService.temp.style.nodeColorKeys = [...values];\r\n\r\n    }\r\n\r\n        // updates the function that defines which color and transparency value to use for each node\r\n        (window as any).context.commonService.temp.style.nodeColorMap = d3\r\n            .scaleOrdinal((window as any).context.commonService.session.style.nodeColors)\r\n            .domain(values);\r\n        (window as any).context.commonService.temp.style.nodeAlphaMap = d3\r\n            .scaleOrdinal((window as any).context.commonService.session.style.nodeAlphas)\r\n            .domain(values);\r\n        return aggregates;\r\n    };\r\n\r\n    /**\r\n\t * updates the functions that set the color and transparency of the links [commonService.temp.style.linkColorMap() and commonService.temp.style.linkAlphaMap()]\r\n\t * @returns {Object} where keys are the values to group (ie. origin A, origin B) and values are counts of the number of links for each key\r\n\t */\r\n    createLinkColorMap() {\r\n        let variable = (window as any).context.commonService.session.style.widgets[\"link-color-variable\"];\r\n        if(this.debugMode) {\r\n            console.log('link var: ', variable);\r\n        }\r\n        if (variable == \"None\") {\r\n            (window as any).context.commonService.temp.style.linkColorMap = () => (window as any).context.commonService.session.style.widgets[\"link-color\"];\r\n            (window as any).context.commonService.temp.style.linkAlphaMap = () => 1 - (window as any).context.commonService.session.style.widgets[\"link-opacity\"];\r\n            return [];\r\n        }\r\n\r\n        let linkColors;\r\n        if( (window as any).context.commonService.session.style.linkColorsTable && (window as any).context.commonService.session.style.linkColorsTable[variable]) {\r\n            linkColors =  (window as any).context.commonService.session.style.linkColorsTable[variable];\r\n        } else if (variable == 'source' || variable == 'target') {\r\n            (window as any).context.commonService.session.style.linkColorsTable = {};\r\n            (window as any).context.commonService.session.style.linkColorsTableKeys = {};\r\n            linkColors =  (window as any).context.commonService.session.style.linkColorsTable[variable] = [d3.schemeCategory10[0]].concat(d3.schemeCategory10.slice(2));\r\n            (window as any).context.commonService.session.style.linkColors = [d3.schemeCategory10[0]].concat(d3.schemeCategory10.slice(2));\r\n        } else {\r\n            (window as any).context.commonService.session.style.linkColorsTable = {};\r\n            (window as any).context.commonService.session.style.linkColorsTableKeys = {};\r\n            linkColors =  (window as any).context.commonService.session.style.linkColorsTable[variable] = d3.schemePaired;\r\n            (window as any).context.commonService.session.style.linkColors = d3.schemePaired;\r\n        }\r\n\r\n        let aggregates = {};\r\n        let multiLinkCount = 0; // Initialize Multi-Link count\r\n        let links = (window as any).context.commonService.getVisibleLinks();\r\n        let i = 0,\r\n            n = links.length,\r\n            l;\r\n\r\n        if (variable == \"origin\" || variable == \"Origin\") {\r\n            while (i < n) {\r\n                l = links[i++];\r\n                if (!l.visible) continue;\r\n\r\n                l.origin.forEach(o => {\r\n                    if (o in aggregates) {\r\n                        aggregates[o]++;\r\n                    } else {\r\n                        aggregates[o] = 1;\r\n                    }\r\n                });\r\n\r\n                // Count Multi-Links separately\r\n                if (l.origin.length == 2) {  \r\n                    multiLinkCount++;\r\n                }\r\n            }\r\n        } else {\r\n            while (i < n) {\r\n                l = links[i++];\r\n                if (!l.visible) continue;\r\n                let lv = l[variable];\r\n                if (lv in aggregates) {\r\n                    aggregates[lv]++;\r\n                } else {\r\n                    aggregates[lv] = 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Add Multi-Link to aggregates if it exists\r\n        if (multiLinkCount > 0) {\r\n            aggregates[\"Duo-Link\"] = multiLinkCount;\r\n        }\r\n\r\n        // Adjust counts for other links by subtracting Multi-Link count\r\n        Object.keys(aggregates).forEach(key => {\r\n            if (key !== \"Duo-Link\") {\r\n                aggregates[key] -= multiLinkCount; // Subtract Multi-Link count\r\n            }\r\n        });\r\n\r\n        // Ensure counts do not go below zero\r\n        Object.keys(aggregates).forEach(key => {\r\n            if (aggregates[key] < 0) {\r\n                aggregates[key] = 0;\r\n            }\r\n        });\r\n\r\n        let values = Object.keys(aggregates);\r\n        // adds more colors/alphas when they are less than length of values\r\n        if (values.length > this.session.style.linkColors.length) {\r\n            let colors = [];\r\n            let cycles = Math.ceil(values.length / (window as any).context.commonService.session.style.linkColors.length);\r\n            while (cycles-- > 0) colors = colors.concat((window as any).context.commonService.session.style.linkColors);\r\n            (window as any).context.commonService.session.style.linkColors = colors;\r\n            console.log('link colors: ', (window as any).context.commonService.session.style.linkColors);\r\n        }\r\n\r\n        if (!(window as any).context.commonService.session.style.linkAlphas) {\r\n            (window as any).context.commonService.session.style.linkAlphas = [1];\r\n        }\r\n        if (values.length > (window as any).context.commonService.session.style.linkAlphas.length) {\r\n            (window as any).context.commonService.session.style.linkAlphas = (window as any).context.commonService.session.style.linkAlphas.concat(\r\n                new Array(values.length - (window as any).context.commonService.session.style.linkAlphas.length).fill(1)\r\n            );\r\n        }\r\n\r\n        if ((window as any).context.commonService.session.style.widgets[\"node-timeline-variable\"] == 'None') {\r\n            (window as any).context.commonService.session.style.linkColorsTableKeys[variable] = values;\r\n            (window as any).context.commonService.session.style.linkColorsTable[variable] = linkColors;\r\n        } else {\r\n      \r\n            // During timeline mode, user Pause and switch to a different link varaible but linkColorsTableKeys[variable] is not available\r\n            if(! (window as any).context.commonService.session.style.linkColorsTableKeys[variable]) {\r\n              let aggregatesTL = {};\r\n              let linksTL =  (window as any).context.commonService.getVisibleLinks();\r\n              let linkColorsTL = [...(window as any).context.commonService.session.style.linkColors];\r\n              let i = 0,\r\n                n = linksTL.length,\r\n                l;\r\n              if (variable == \"origin\") {\r\n                while (i < n) {\r\n                  l = linksTL[i++];\r\n                  if (!l.visible) continue;\r\n                  let src =  (window as any).context.commonService.session.network.timelineNodes.find(dd => dd._id == l.source || dd.id == l.source);\r\n                  let tgt =  (window as any).context.commonService.session.network.timelineNodes.find(dd => dd._id == l.target || dd.id == l.target);\r\n                  if (src === undefined || src.visible === false) continue;\r\n                  if (tgt === undefined || tgt.visible === false) continue;\r\n                  l.origin.forEach(o => {\r\n                    if (o in aggregatesTL) {\r\n                      aggregatesTL[o]++;\r\n                    } else {\r\n                      aggregatesTL[o] = 1;\r\n                    }\r\n                  });\r\n                }\r\n              } else {\r\n                while (i < n) {\r\n                  l = linksTL[i++];\r\n                  if (!l.visible) continue;\r\n                  let src = (window as any).context.commonService.session.network.timelineNodes.find(dd => dd._id == l.source || dd.id == l.source);\r\n                  let tgt = (window as any).context.commonService.session.network.timelineNodes.find(dd => dd._id == l.target || dd.id == l.target);\r\n                  if (src === undefined || src.visible === false) continue;\r\n                  if (tgt === undefined || tgt.visible === false) continue;  \r\n                  let lv = l[variable];\r\n                  if (lv in aggregatesTL) {\r\n                    aggregatesTL[lv]++;\r\n                  } else {\r\n                    aggregatesTL[lv] = 1;\r\n                  }\r\n                }\r\n              }       \r\n              let valuesTL = Object.keys(aggregatesTL);      \r\n              if (valuesTL.length > linkColorsTL.length) {\r\n                let colors = [];\r\n                let cycles = Math.ceil(valuesTL.length / linkColorsTL.length);\r\n                while (cycles-- > 0) colors = colors.concat(linkColorsTL);\r\n                linkColorsTL = colors;\r\n              }\r\n              (window as any).context.commonService.session.style.linkColorsTableKeys[variable] = valuesTL;\r\n              (window as any).context.commonService.session.style.linkColorsTable[variable] = linkColorsTL;\r\n            }\r\n      \r\n            let key;\r\n            let tempLinkColors=[];\r\n            for(let v of values) {\r\n              let table = (window as any).context.commonService.session.style.linkColorsTableKeys[variable];\r\n              key = table.findIndex( k => k === v);\r\n              tempLinkColors.push(linkColors[key]);\r\n            }\r\n            linkColors = (window as any).context.commonService.temp.style.linkColor = tempLinkColors; // temp link color maps saved only under timeline\r\n            (window as any).context.commonService.temp.style.linkColorsKeys = [...values];\r\n          }\r\n\r\n        // updates the function that defines which color and transparency value to use for each link\r\n        (window as any).context.commonService.temp.style.linkColorMap = d3\r\n        .scaleOrdinal((window as any).context.commonService.session.style.linkColors)\r\n        .domain(values);\r\n        (window as any).context.commonService.temp.style.linkAlphaMap = d3\r\n            .scaleOrdinal((window as any).context.commonService.session.style.linkAlphas)\r\n            .domain(values);\r\n        return aggregates;\r\n    };\r\n    \r\n    /**\r\n\t * updates the functions that set the color and transparency of the polygons [commonService.temp.style.polygonColorMap() and commonService.temp.style.polygonAlphaMap()]\r\n\t * @returns {Object} where keys are the values to group (ie. subtype B,C,D...) and values are counts of the number of node for each key\r\n\t */\r\n    createPolygonColorMap = () => {\r\n        if (!(window as any).context.commonService.temp.polygonGroups || !(window as any).context.commonService.session.style.widgets['polygons-color-show']) {\r\n            (window as any).context.commonService.temp.style.polygonColorMap = () => (window as any).context.commonService.session.style.widgets['polygon-color'];\r\n            return [];\r\n        }\r\n    \r\n        let aggregates = {};\r\n        let groups = (window as any).context.commonService.temp.polygonGroups;\r\n\r\n        // groups array where key = value to group by; and values = [nodes] that share that value\r\n        // for group by subtype; keys are ['B', 'C', 'D']\r\n        groups.forEach(d => {\r\n            aggregates[d.key] = d.values.length;\r\n        });\r\n\r\n\r\n        let values = Object.keys(aggregates);\r\n    \r\n        if ((window as any).context.commonService.session.style.widgets['polygon-color-table-counts-sort'] == 'ASC')\r\n            values.sort(function(a, b) { return aggregates[a] - aggregates[b] });\r\n        else if ((window as any).context.commonService.session.style.widgets['polygon-color-table-counts-sort'] == 'DESC')\r\n            values.sort(function(a, b) { return aggregates[b] - aggregates[a] });\r\n        if ((window as any).context.commonService.session.style.widgets['polygon-color-table-name-sort'] == 'ASC')\r\n            values.sort(function(a, b) { return a as any - (b as any) });\r\n        else if ((window as any).context.commonService.session.style.widgets['polygon-color-table-name-sort'] == 'DESC')\r\n            values.sort(function(a, b) { return b as any - (a as any)});\r\n    \r\n        // adds more colors when number of polygons > number of colors\r\n        if (values.length > (window as any).context.commonService.session.style.polygonColors.length) {\r\n            let colors = [];\r\n            let m = Math.ceil(values.length / (window as any).context.commonService.session.style.polygonColors.length);\r\n            while (m-- > 0) {\r\n            colors = colors.concat((window as any).context.commonService.session.style.polygonColors);\r\n            }\r\n            (window as any).context.commonService.session.style.polygonColors = colors;\r\n        }\r\n\r\n        // adds more alpha values when number of polygons > number of alpha values\r\n        // alpha value are used for transparency\r\n        if(!(window as any).context.commonService.session.style.polygonAlphas) (window as any).context.commonService.session.style.polygonAlphas = new Array(values.length).fill(1);\r\n        if (values.length > (window as any).context.commonService.session.style.polygonAlphas.length) {\r\n            (window as any).context.commonService.session.style.polygonAlphas = (window as any).context.commonService.session.style.polygonAlphas.concat(\r\n            new Array(values.length - (window as any).context.commonService.session.style.polygonAlphas.length).fill(0.5)\r\n            );\r\n        }\r\n        if ((window as any).context.commonService.temp.style.polygonColorMap === undefined || (window as any).context.commonService.temp.style.polygonColorMap.domain === undefined)\r\n        \r\n        // updates the function that defines which color and transparency value to use for each polygon\r\n        (window as any).context.commonService.temp.style.polygonColorMap = d3\r\n            .scaleOrdinal(this.session.style['polygonColors'])\r\n            .domain(values);\r\n        if ((window as any).context.commonService.temp.style.polygonAlphaMap === undefined || (window as any).context.commonService.temp.style.polygonColorMap.domain === undefined)\r\n        (window as any).context.commonService.temp.style.polygonAlphaMap = d3\r\n            .scaleOrdinal((window as any).context.commonService.session.style.polygonAlphas)\r\n            .domain(values);\r\n            \r\n        return aggregates;\r\n    };\r\n\r\n    /**\r\n     * Set commonService.session and commonService.temp back to default values; However keeps previous values for commonService.temp.mapData, commonService.session.files,\r\n     * and commonService.session.meta\r\n     */\r\n    reset() {\r\n        //debugger;\r\n\r\n        // $(\"#network-statistics-hide\").parent().trigger(\"click\");\r\n        // $(\"#SettingsTab\").attr(\"data-target\", \"#sequence-controls-modal\");\r\n\r\n        const mapData = this.temp.mapData;\r\n        this.temp = this.tempSkeleton();\r\n        this.temp.mapData = mapData;\r\n\r\n        const files = (window as any).context.commonService.session.files;\r\n        const meta = (window as any).context.commonService.session.meta;\r\n\r\n        (window as any).context.commonService.session = (window as any).context.commonService.sessionSkeleton();\r\n\r\n        console.log('reset called');\r\n        (window as any).context.commonService.session.files = files;\r\n        (window as any).context.commonService.session.meta = meta;\r\n        //(window as any).context.commonService.layout.unbind(\"stateChanged\");\r\n\r\n        //this.layout.root.replaceChild(this.layout.root.contentItems[0], {\r\n        //    type: \"stack\",\r\n        //    content: []\r\n        //});\r\n        //this.session.layout.contentItems = [];\r\n        //this.launchView(\"files\");\r\n    };\r\n\r\n    /**\r\n     * Sets the following objects back to default values: commonService.temp.matrix, commonService.temp.tree, commonService.session.data, commonService.session.network,\r\n     * commonService.session.style.widgets. Filters 'Demo_outbreak_NodeList.csv' from files\r\n     */\r\n    resetData() {\r\n\r\n        console.log('launch reset');\r\n\r\n        const newTempSkeleton = this.tempSkeleton();\r\n\r\n        (window as any).context.commonService.temp.matrix = newTempSkeleton.matrix;\r\n        this.temp.trees = newTempSkeleton.trees;\r\n\r\n        console.log('session files1', JSON.stringify(this.visuals.microbeTrace.commonService.session.files));\r\n        console.log('session files2', JSON.stringify((window as any).context.commonService.session.files));\r\n\r\n\r\n        const files = (window as any).context.commonService.session.files.filter( obj => obj.name !== 'Demo_outbreak_NodeList.csv');\r\n        const meta = (window as any).context.commonService.session.meta;\r\n\r\n        console.log('session files3', JSON.stringify(this.visuals.microbeTrace.commonService.session.files));\r\n        console.log('session files4', JSON.stringify((window as any).context.commonService.session.files));\r\n\r\n\r\n\r\n        const newSessionSkeleton = this.sessionSkeleton();\r\n        this.session.data = newSessionSkeleton.data;\r\n        this.session.network = newSessionSkeleton.network;\r\n\r\n        (window as any).context.commonService.session.files = files;\r\n        (window as any).context.commonService.session.meta = meta;\r\n        (window as any).context.commonService.session.style.widgets = this.defaultWidgets();\r\n        \r\n\r\n        console.log('session data files: ', JSON.stringify(files));\r\n        console.log('session data matrix: ', JSON.stringify((window as any).context.commonService.temp.matrix));\r\n        console.log('session data nodes: ', JSON.stringify(this.session.data.nodes));\r\n        console.log('session data nodes common: ',  JSON.stringify((window as any).context.commonService.session.data.nodes));\r\n        // default values are 'tn93' and 0.015, so not sure if this if statement is every true\r\n        if ((window as any).context.commonService.session.style.widgets['default-distance-metric'] !== 'snps' &&\r\n          (window as any).context.commonService.session.style.widgets['link-threshold'] >= 1) {\r\n          (window as any).context.commonService.visuals.microbeTrace.SelectedLinkThresholdVariable = (window as any).context.commonService.session.style.widgets['link-threshold'];\r\n          (window as any).context.commonService.visuals.microbeTrace.onLinkThresholdChanged();\r\n        }\r\n    };\r\n\r\n    getJurisdictions(): Promise<JurisdictionItem[]>{\r\n        const path = `${this.appRootUrl()}assets/common/data/state_county_fips.csv`; // Refactor appRootUrl if necessary\r\n        return this.http.get(path, { responseType: 'text' }).toPromise()\r\n            .then(response => {\r\n                return Papa.parse<JurisdictionItem>(response, { header: true }).data;\r\n            })\r\n            .catch(error => {\r\n                console.error('Error fetching jurisdictions:', error);\r\n                throw error;\r\n            });\r\n\r\n        // let options : any = {\r\n        //     observe: \"response\",\r\n        //     responseType: \"blob\",\r\n        //     headers: new HttpHeaders({\r\n        //         \"Accept\": \"application/json\"\r\n        //     })\r\n        // };\r\n\r\n        // return this.http.request(\"get\", path/*, options_*/).pipe(map((fileContents:any)=>{\r\n        //     return Papa.parse(fileContents, {header: true}).data;\r\n        // }));\r\n        // $.get(path, response => {\r\n        //     (window as any).context.commonService.temp.mapData[name] = Papa.parse(response, { header: true }).data;\r\n        //     resolve((window as any).context.commonService.temp.mapData[name]);\r\n        // });\r\n    }\r\n\r\n    getMapData(type): Promise<any> {\r\n\r\n        return new Promise(resolve => {\r\n\r\n            let parts = type.split(\".\");\r\n            let name = parts[0],\r\n                format = parts[1];\r\n            if ((window as any).context.commonService.temp.mapData[name]) {\r\n                return resolve((window as any).context.commonService.temp.mapData[name]);\r\n            }\r\n\r\n            let path: string;\r\n\r\n\r\n            switch (name) {\r\n                case \"zipcodes\":\r\n\r\n                    if (format == \"csv\") {\r\n                        path = 'assets/common/data/zipcodes.csv';\r\n                        return this.http.get(path, { responseType: 'text' }).toPromise()\r\n                            .then(response => {\r\n                                this.temp.mapData[name] = Papa.parse(response, { header: true }).data;\r\n                                return this.temp.mapData[name];\r\n                            });\r\n                    }\r\n                    break;\r\n                case \"countries\":\r\n                    if (format == \"json\") {\r\n                        path = 'assets/common/data/countries.json';\r\n                        return this.http.get(path).toPromise()\r\n                            .then(response => {\r\n                                this.temp.mapData[name] = response;\r\n                                return this.temp.mapData[name];\r\n                            });\r\n                    }\r\n                    break;\r\n                case \"counties\":\r\n                    if (format == \"json\") {\r\n                        path = 'assets/common/data/counties.json';\r\n                        return this.http.get(path).toPromise()\r\n                            .then(response => {\r\n                                this.temp.mapData[name] = response;\r\n                                return this.temp.mapData[name];\r\n                            });\r\n                    }\r\n                    break;\r\n\r\n                case \"states\":\r\n                    if (format == \"json\") {\r\n                        // let path = /*(window as any).context.commonService.appRootUrl() +*/ 'assets/common/data/states.json';\r\n\r\n                        path = 'assets/common/data/states.json';\r\n                        return this.http.get(path).toPromise()\r\n                            .then(response => {\r\n                                this.temp.mapData[name] = response;\r\n                                return this.temp.mapData[name];\r\n                            });\r\n                    }\r\n                    break;\r\n\r\n                case \"land\":\r\n                    if (format == \"json\") {\r\n                        path = 'assets/common/data/land.json';\r\n\r\n                        return this.http.get(path).toPromise()\r\n                            .then(response => {\r\n                                (window as any).context.commonService.temp.mapData[name] = response;\r\n                                return this.temp.mapData[name];\r\n                            });\r\n\r\n                        // $.get(path, response => {\r\n                        //     resolve((window as any).context.commonService.temp.mapData[name]);\r\n                        // });\r\n                    }\r\n                    break;\r\n\r\n                case \"stars\":\r\n                    if (format == \"json\") {\r\n                        let path = /*(window as any).context.commonService.appRootUrl() +*/ 'assets/common/data/stars.json';\r\n\r\n                        return this.http.get(path).toPromise()\r\n                            .then(response => {\r\n                                (window as any).context.commonService.temp.mapData[name] = response;\r\n                                return this.temp.mapData[name];\r\n                            });\r\n\r\n                        // $.get(path, response => {\r\n                        //     (window as any).context.commonService.temp.mapData[name] = response;\r\n                        //     resolve((window as any).context.commonService.temp.mapData[name]);\r\n                        // });\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            //$.get(\"data/\" + type, response => {\r\n            //    debugger;\r\n            //    if (format == \"csv\") {\r\n            //        this.temp.mapData[name] = new Papa().parse(response, { header: true }).data;\r\n            //    }\r\n            //    if (format == \"json\") {\r\n            //        this.temp.mapData[name] = response;\r\n            //    }\r\n            //    resolve(this.temp.mapData[name]);\r\n            //});\r\n        });\r\n    };\r\n\r\n    /** \r\n     * XXXXX Not currently used; not sure future use XXXXX\r\n     * Predicts whether white or black is most contrasting color\r\n     * @param {string} hexcolor - hexcode representation of a color (ie. '#1e9d00')\r\n     * @returns {string} - for hex representation of color (white or black)\r\n     */\r\n    contrastColor(hexcolor) {\r\n        let r = parseInt(hexcolor.substr(1, 2), 16);\r\n        let g = parseInt(hexcolor.substr(3, 2), 16);\r\n        let b = parseInt(hexcolor.substr(5, 2), 16);\r\n        let yiq = r * 299 + g * 587 + b * 114;\r\n        return yiq >= 128000 ? \"#000000\" : \"#ffffff\";\r\n    };\r\n\r\n    /**\r\n    *  XXXXX Not currently being executed. It's in the codebase but hidden behind comments XXXXX\r\n    *\tReturns the last element of an array\r\n    * @param ra - an array (potentially could take other datatypes as well)\r\n    * @returns {any} the last element in an array\r\n    */\r\n    peek(ra) {\r\n        return ra[ra.length - 1];\r\n    };\r\n\r\n\r\n    launchView(view, callback: any = null) {\r\n\r\n        // this.srv.createNewComponent(this.srv.getRegisteredComponents()[1]);\r\n\r\n        (window as any).context.commonService.LoadViewEvent.emit(view);\r\n\r\n\r\n        // if (!this.temp.componentCache[view]) {\r\n        //    $.get(\"components/\" + view + \".html\", response => {\r\n        //        this.temp.componentCache[view] = response;\r\n        //        //This MUST NOT be replace by an arrow function!\r\n        //     //    this.srv.registerComponent(view, function (container, state) {\r\n        //     //        container.getElement().html(state.text);\r\n        //     //    });\r\n        //     //    this.srv.createNewComponent(this.srv.getRegisteredComponents()[2]);\r\n\r\n        //        if (callback) {\r\n        //            this.launchView(view, callback);\r\n        //        } else {\r\n        //            return this.launchView(view);\r\n        //        }\r\n        //    });\r\n        // } else {\r\n        // //    let contentItem = this.layout.contentItems.find(item => item.componentName == view);\r\n        // //    if (contentItem) {\r\n        // //        contentItem.parent.setActiveContentItem(contentItem);\r\n        // //    } else {\r\n        // //        let lastStack = this.peek(this.layout.root.contentItems[0].getItemsByType(\"stack\"));\r\n        // //        if (!lastStack) lastStack = this.layout.root.contentItems[0];\r\n        // //        lastStack.addChild({\r\n        // //            componentName: view,\r\n        // //            componentState: { text: this.temp.componentCache[view] },\r\n        // //            title: this.titleize(view),\r\n        // //            type: \"component\"\r\n        // //        });\r\n        // //        contentItem = this.peek(lastStack.contentItems);\r\n        // //        contentItem.on(\"itemDestroyed\", () => this.layout.contentItems.splice(this.layout.contentItems.findIndex(item => item === contentItem), 1));\r\n        // //        this.layout.contentItems.push(contentItem);\r\n        // //    }\r\n\r\n        // //    contentItem.element.find(\"select.nodeVariables\").html(\r\n        // //        \"<option>None</option>\" +\r\n        // //        this.session.data.nodeFields.map(field => '<option value=\"' + field + '\">' + this.titleize(field) + \"</option>\").join(\"\\n\")\r\n        // //    );\r\n        // //    contentItem.element.find(\"select.linkVariables\").html(\r\n        // //        \"<option>None</option>\" +\r\n        // //        this.session.data.linkFields.map(field => '<option value=\"' + field + '\">' + this.titleize(field) + \"</option>\").join(\"\\n\")\r\n        // //    );\r\n        // //    contentItem.element.find(\"select.mixedVariables\").html(\r\n        // //        \"<option>None</option>\" +\r\n        // //        this.session.data.linkFields.map(field => '<option value=\"links-' + field + '\">Links ' + this.titleize(field) + \"</option>\").join(\"\\n\") +\r\n        // //        this.session.data.nodeFields.map(field => '<option value=\"nodes-' + field + '\">Nodes ' + this.titleize(field) + \"</option>\").join(\"\\n\")\r\n        // //    );\r\n        // //    contentItem.element.find(\"select.branch-variables\").html(\r\n        // //        \"<option>None</option>\" +\r\n        // //        [\"id\", \"depth\", \"height\", \"length\", \"value\"].map(field => '<option value=\"' + field + '\">' + this.titleize(field) + \"</option>\").join(\"\\n\")\r\n        // //    );\r\n        // //    contentItem.element.find(\".launch-color-options\").click(() => {\r\n        // //        $(\"#style-tab\").show();\r\n        // //        setTimeout(() => $(\"#global-settings-modal\").show(), 250);\r\n        // //    });\r\n        // //    contentItem.element.find(\".modal-header\").on(\"mousedown\", function () {\r\n        // //        let body = $(\"body\");\r\n        // //        let parent = $(this).parent().parent().parent();\r\n        // //        body.on(\"mousemove\", e => {\r\n        // //            parent\r\n        // //                .css(\"top\", parseFloat(parent.css(\"top\")) + e.originalEvent.movementY + \"px\")\r\n        // //                .css(\"left\", parseFloat(parent.css(\"left\")) + e.originalEvent.movementX + \"px\");\r\n        // //        });\r\n        // //        body.one(\"mouseup\", () => body.off(\"mousemove\"));\r\n        // //    });\r\n        // //    if (navigator.onLine) contentItem.element.find(\".ifOnline\").show();\r\n        // //    for (let id in this.session.style.widgets) {\r\n        // //        let $id = $(\"#\" + id);\r\n        // //        if ($id.length > 0) {\r\n        // //            if (this.includes([\"radio\", \"checkbox\"], $id[0].tagName)) {\r\n        // //                if (this.session.style.widgets[id]) $id.click();\r\n        // //            } else {\r\n        // //                $id.val(this.session.style.widgets[id]);\r\n        // //            }\r\n        // //        }\r\n        // //    }\r\n        // //    if (callback) {\r\n        // //        callback(contentItem);\r\n        // //    } else {\r\n        // //        return contentItem;\r\n        // //    }\r\n        // }\r\n\r\n    };\r\n\r\n\r\n    //launchView(view, callback: any = null) {\r\n    //    if (!this.temp.componentCache[view]) {\r\n    //        $.get(\"components/\" + view + \".html\", response => {\r\n    //            this.temp.componentCache[view] = response;\r\n    //            //This MUST NOT be replace by an arrow function!\r\n    //            this.layout.registerComponent(view, function (container, state) {\r\n    //                container.getElement().html(state.text);\r\n    //            });\r\n    //            if (callback) {\r\n    //                this.launchView(view, callback);\r\n    //            } else {\r\n    //                return this.launchView(view);\r\n    //            }\r\n    //        });\r\n    //    } else {\r\n    //        let contentItem = this.layout.contentItems.find(item => item.componentName == view);\r\n    //        if (contentItem) {\r\n    //            contentItem.parent.setActiveContentItem(contentItem);\r\n    //        } else {\r\n    //            let lastStack = this.peek(this.layout.root.contentItems[0].getItemsByType(\"stack\"));\r\n    //            if (!lastStack) lastStack = this.layout.root.contentItems[0];\r\n    //            lastStack.addChild({\r\n    //                componentName: view,\r\n    //                componentState: { text: this.temp.componentCache[view] },\r\n    //                title: this.titleize(view),\r\n    //                type: \"component\"\r\n    //            });\r\n    //            contentItem = this.peek(lastStack.contentItems);\r\n    //            contentItem.on(\"itemDestroyed\", () => this.layout.contentItems.splice(this.layout.contentItems.findIndex(item => item === contentItem), 1));\r\n    //            this.layout.contentItems.push(contentItem);\r\n    //        }\r\n\r\n    //        contentItem.element.find(\"select.nodeVariables\").html(\r\n    //            \"<option>None</option>\" +\r\n    //            this.session.data.nodeFields.map(field => '<option value=\"' + field + '\">' + this.titleize(field) + \"</option>\").join(\"\\n\")\r\n    //        );\r\n    //        contentItem.element.find(\"select.linkVariables\").html(\r\n    //            \"<option>None</option>\" +\r\n    //            this.session.data.linkFields.map(field => '<option value=\"' + field + '\">' + this.titleize(field) + \"</option>\").join(\"\\n\")\r\n    //        );\r\n    //        contentItem.element.find(\"select.mixedVariables\").html(\r\n    //            \"<option>None</option>\" +\r\n    //            this.session.data.linkFields.map(field => '<option value=\"links-' + field + '\">Links ' + this.titleize(field) + \"</option>\").join(\"\\n\") +\r\n    //            this.session.data.nodeFields.map(field => '<option value=\"nodes-' + field + '\">Nodes ' + this.titleize(field) + \"</option>\").join(\"\\n\")\r\n    //        );\r\n    //        contentItem.element.find(\"select.branch-variables\").html(\r\n    //            \"<option>None</option>\" +\r\n    //            [\"id\", \"depth\", \"height\", \"length\", \"value\"].map(field => '<option value=\"' + field + '\">' + this.titleize(field) + \"</option>\").join(\"\\n\")\r\n    //        );\r\n    //        contentItem.element.find(\".launch-color-options\").click(() => {\r\n    //            $(\"#style-tab\").show();\r\n    //            setTimeout(() => $(\"#global-settings-modal\").show(), 250);\r\n    //        });\r\n    //        contentItem.element.find(\".modal-header\").on(\"mousedown\", function () {\r\n    //            let body = $(\"body\");\r\n    //            let parent = $(this).parent().parent().parent();\r\n    //            body.on(\"mousemove\", e => {\r\n    //                parent\r\n    //                    .css(\"top\", parseFloat(parent.css(\"top\")) + e.originalEvent.movementY + \"px\")\r\n    //                    .css(\"left\", parseFloat(parent.css(\"left\")) + e.originalEvent.movementX + \"px\");\r\n    //            });\r\n    //            body.one(\"mouseup\", () => body.off(\"mousemove\"));\r\n    //        });\r\n    //        if (navigator.onLine) contentItem.element.find(\".ifOnline\").show();\r\n    //        for (let id in this.session.style.widgets) {\r\n    //            let $id = $(\"#\" + id);\r\n    //            if ($id.length > 0) {\r\n    //                if (this.includes([\"radio\", \"checkbox\"], $id[0].tagName)) {\r\n    //                    if (this.session.style.widgets[id]) $id.click();\r\n    //                } else {\r\n    //                    $id.val(this.session.style.widgets[id]);\r\n    //                }\r\n    //            }\r\n    //        }\r\n    //        if (callback) {\r\n    //            callback(contentItem);\r\n    //        } else {\r\n    //            return contentItem;\r\n    //        }\r\n    //    }\r\n    //};\r\n\r\n\r\n\r\n    //cacheLayout(contentItem: any) {\r\n    //    if (this.includes([\"stack\", \"row\", \"column\"], contentItem.tagName)) {\r\n    //        return {\r\n    //            type: contentItem.tagName,\r\n    //            content: contentItem.contentItems.map(this.cacheLayout)\r\n    //        };\r\n    //    }\r\n    //    return { type: contentItem.componentName };\r\n    //};\r\n\r\n    //loadLayout(component, parent) {\r\n    //    if (!parent) {\r\n    //        parent = this.layout.root;\r\n    //        try {\r\n    //            parent.contentItems[0].remove();\r\n    //        } catch (e) { }\r\n    //    }\r\n    //    if (this.includes([\"stack\", \"row\", \"column\"], component.tagName)) {\r\n    //        parent.addChild({ type: component.type });\r\n    //        component.content.forEach(c => this.loadLayout(c, this.peek(parent.contentItems)));\r\n    //    } else {\r\n    //        this.launchView(component.type);\r\n    //    }\r\n    //};\r\n\r\n    /**\r\n     * Extracts the SVG from the DOM with CSS included. Used during exporting/saving a view as a SVG\r\n     * @param {HTMLElement} svgNode - HTML element in document such as document.getElementById('network') or document.getElementById('tidytree')\r\n     * @returns {string} String of SVG code for the element with CSS ie. <svg ...>\r\n     */\r\n    unparseSVG(svgNode): string {\r\n        svgNode.setAttribute(\"xlink\", \"http://www.w3.org/1999/xlink\");\r\n        let selectorTextArr = [];\r\n\r\n        // Add Parent element Id and Classes to the list\r\n        selectorTextArr.push(\"#\" + svgNode.id);\r\n        let nClasses = svgNode.classList.length;\r\n        for (let c = 0; c < nClasses; c++) {\r\n            if (!(window as any).context.commonService.includes(\".\" + svgNode.classList[c], selectorTextArr)) {\r\n                selectorTextArr.push(\".\" + svgNode.classList[c]);\r\n            }\r\n        }\r\n\r\n        // Add Children element Ids and Classes to the list\r\n        let nodes = svgNode.getElementsByTagName(\"*\");\r\n        let nNodes = nodes.length;\r\n        for (let i = 0; i < nNodes; i++) {\r\n            let id = nodes[i]._id;\r\n            if (!(window as any).context.commonService.includes(\"#\" + id, selectorTextArr)) {\r\n                selectorTextArr.push(\"#\" + id);\r\n            }\r\n            let classes = nodes[i].classList;\r\n            for (let d = 0; d < classes.length; d++) {\r\n                if (!(window as any).context.commonService.includes(\".\" + classes[d], selectorTextArr)) {\r\n                    selectorTextArr.push(\".\" + classes[d]);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Extract CSS Rules\r\n        let extractedCSSText = \"\";\r\n        let nStylesheets = document.styleSheets.length;\r\n        for (let j = 0; j < nStylesheets; j++) {\r\n            let s: any = document.styleSheets[j];\r\n            try {\r\n                if (!s.cssRules) continue;\r\n            } catch (e) {\r\n                if (e.name !== \"SecurityError\") throw e; // for Firefox\r\n                continue;\r\n            }\r\n            let cssRules = s.cssRules;\r\n            let nRules = cssRules.length;\r\n            for (let r = 0; r < nRules; r++) {\r\n                let rule = cssRules[r];\r\n                if (!rule.selectorText) continue;\r\n                if (rule.selectorText.includes(selectorTextArr)) {\r\n                    extractedCSSText += rule.cssText;\r\n                }\r\n            }\r\n        }\r\n\r\n        let styleElement = document.createElement(\"style\");\r\n        styleElement.setAttribute(\"type\", \"text/css\");\r\n        styleElement.innerHTML = extractedCSSText;\r\n        let refNode = svgNode.hasChildNodes() ? svgNode.children[0] : null;\r\n        svgNode.insertBefore(styleElement, refNode);\r\n        let serializer = new XMLSerializer();\r\n        return serializer.serializeToString(svgNode);\r\n    };\r\n\r\n    /**\r\n     * XXXXX currently not in use XXXXX\r\n     * @returns \r\n     */\r\n    exportHIVTRACE() {\r\n        let links = (window as any).context.commonService.session.data.links.filter(l => l.visible);\r\n        let geneticLinks = links.filter(l => l.origin.includes(\"Genetic Distance\"));\r\n        let sequences = new Set(\r\n            geneticLinks.map(l => l.source).concat(\r\n                geneticLinks.map(l => l.target))\r\n        ).size;\r\n        let pas = {};\r\n        (window as any).context.commonService.session.data.nodes.forEach(d => {\r\n            Object.keys(d).forEach(key => {\r\n                if (pas[key]) return;\r\n                pas[key] = {\r\n                    label: key,\r\n                    type: (window as any).context.commonService.titleize(typeof d[key])\r\n                };\r\n            });\r\n        });\r\n        return JSON.stringify(\r\n            {\r\n                trace_results: {\r\n                    \"Cluster sizes\": (window as any).context.commonService.session.data.clusters.map(c => c.size),\r\n                    Degrees: {\r\n                        Distribution: [],\r\n                        Model: \"Waring\",\r\n                        fitted: [],\r\n                        rho: 0,\r\n                        \"rho CI\": [-1, 1]\r\n                    },\r\n                    \"Directed Edges\": {\r\n                        Count: 0,\r\n                        \"Reasons for unresolved directions\": {\r\n                            \"Missing dates\": links.length\r\n                        }\r\n                    },\r\n                    \"Edge Stages\": {},\r\n                    Edges: links.map(l => ({\r\n                        attributes: [\"BULK\"],\r\n                        directed: false,\r\n                        length: l[(window as any).context.commonService.session.style.widgets[\"link-sort-variable\"]],\r\n                        removed: false,\r\n                        sequences: [l.source, l.target],\r\n                        source: (window as any).context.commonService.session.data.nodes.findIndex(d => d._id == l.source),\r\n                        support: 0,\r\n                        target: (window as any).context.commonService.session.data.nodes.findIndex(d => d._id == l.target)\r\n                    })),\r\n                    \"HIV Stages\": {\r\n                        \"A-1\": 0,\r\n                        \"A-2\": 0,\r\n                        \"A-3\": 0,\r\n                        Chronic: this.session.data.nodes.length,\r\n                        \"E-1\": 0,\r\n                        \"E-2\": 0,\r\n                        \"E-3\": 0\r\n                    },\r\n                    \"Multiple sequences\": {\r\n                        \"Followup, days\": null,\r\n                        \"Subjects with\": 0\r\n                    },\r\n                    \"Network Summary\": {\r\n                        Clusters: (window as any).context.commonService.session.data.clusters.length,\r\n                        Edges: links.length,\r\n                        Nodes: (window as any).context.commonService.session.data.nodes.length,\r\n                        \"Sequences used to make links\": sequences\r\n                    },\r\n                    Nodes: (window as any).context.commonService.session.data.nodes.map(d => ({\r\n                        attributes: [],\r\n                        baseline: null,\r\n                        cluster: d.cluster,\r\n                        edi: null,\r\n                        id: d._id,\r\n                        patient_attributes: d\r\n                    })),\r\n                    patient_attribute_schema: pas,\r\n                    Settings: {\r\n                        \"contaminant-ids\": [],\r\n                        contaminants: \"remove\",\r\n                        \"edge-filtering\": \"remove\",\r\n                        threshold: (window as any).context.commonService.session.style.widgets[\"link-threshold\"]\r\n                    }\r\n                }\r\n            },\r\n            null,\r\n            2\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Gives the size of a variable in MB\r\n     * @param thing \r\n     * @returns {string} Size of thing in MB as a string ('4MB')\r\n     */\r\n    size(thing): string {\r\n        if (!thing) thing = this.session;\r\n        return (JSON.stringify(thing).length / 1024 / 1024).toLocaleString() + 'MB';\r\n    };\r\n\r\n    /**\r\n     * Converts commonly used titles to a standard output; for less common titles nothing is changed\r\n     * @param {string} title \r\n     */\r\n    titleize(title: string): string {\r\n        let small = title.toLowerCase().replace(/_/g, \" \");\r\n        if (small == \"null\") return \"(Empty)\";\r\n        if (small == \"id\" || small == \" id\") return \"ID\";\r\n        if (small == \"tn93\") return \"TN93\";\r\n        if (small == \"snps\") return \"SNPs\";\r\n        if (small == \"2d network\") return \"2D Network\";\r\n        if (small == \"3d network\") return \"3D Network\";\r\n        if (small == \"geo map\") return \"Map\";\r\n        if (small == \"nn\") return \"Nearest Neighbor\";\r\n        return title;\r\n        return small.replace(/(?:^|\\s|-)\\S/g, c => c.toUpperCase());\r\n    };\r\n\r\n    /** \r\n     * Set up the clusters; new clusters are created as needed; node.cluster is set to cluster id.\r\n     * When a node is found that isn't in tempnodes, a cluster is created and a depth-first search is preformed.\r\n     * During DFS, nodes are added to tempnodes, the node.cluster is assigned and information in cluster is updated\r\n     */\r\n    tagClusters(): Promise<void> {\r\n        return new Promise<void>(resolve => {\r\n            let start = Date.now();\r\n            let clusters = (window as any).context.commonService.session.data.clusters = [];\r\n            let nodes = (window as any).context.commonService.session.data.nodes,\r\n                links = (window as any).context.commonService.session.data.links,\r\n                labels = nodes.map(d => d._id);\r\n            let numNodes = nodes.length,\r\n                numLinks = links.length;\r\n            let tempnodes = (window as any).context.commonService.temp.nodes = [];\r\n            let lsv = (window as any).context.commonService.session.style.widgets[\"link-sort-variable\"];\r\n\r\n            /**\r\n             * A function that performs a depth-first search.\r\n             * @param id - The ID of the node to start the search from.\r\n             * @param cluster - The cluster to search in.\r\n             * @returns {void}\r\n             */\r\n            let DFS = (id, cluster) => {\r\n                // if id is found in tempNode exit function\r\n                if (tempnodes.indexOf(id) >= 0) return;\r\n                // else add it, and continue DFS\r\n                tempnodes.push(id);\r\n                let node: any = {};\r\n                for (let i = 0; i < numNodes; i++) {\r\n                    let d = nodes[i];\r\n                    if (!d._id) {\r\n                        d._id = d.id;\r\n                    }\r\n                    if (d._id == id) {\r\n                        node = d;\r\n                        break;\r\n                    }\r\n                }\r\n                let clusterID = cluster.id;\r\n                node.cluster = clusterID;\r\n                cluster.nodes++;\r\n                let row = (window as any).context.commonService.temp.matrix[id];\r\n                if (!row) return;\r\n                for (let j = 0; j < numNodes; j++) {\r\n                    let l = row[labels[j]];\r\n                    if (!l) continue;\r\n                    if (!l.visible) continue;\r\n                    l.cluster = clusterID;\r\n                    cluster.links++;\r\n                    cluster.sum_distances += l[lsv];\r\n                    if (tempnodes.length == numNodes) return;\r\n                    // recursively call DFS on both source and target\r\n                    DFS(l.source, cluster);\r\n                    DFS(l.target, cluster);\r\n                }\r\n            }; // DFS function close\r\n\r\n            for (let k = 0; k < numNodes; k++) {\r\n                let d = nodes[k];\r\n                d.degree = 0;\r\n                let id = d._id;\r\n\r\n                // if id isn't in temp nodes, add new cluster and do DFS\r\n                if (tempnodes.indexOf(id) == -1) {\r\n\r\n                    let cluster = {\r\n                        id: clusters.length > 0 ? clusters.length : 0,\r\n                        nodes: 0,\r\n                        links: 0,\r\n                        sum_distances: 0,\r\n                        links_per_node: 0,\r\n                        mean_genetic_distance: undefined,\r\n                        visible: true\r\n                    };\r\n\r\n\r\n                    clusters.push(cluster);\r\n                    DFS(id, cluster);\r\n                    if (tempnodes.length == numNodes) break;\r\n                }\r\n            }\r\n            \r\n            if(this.debugMode) {\r\n                console.log(\"Cluster Tagging time:\", (Date.now() - start).toLocaleString(), \"ms\");\r\n            }\r\n\r\n            start = Date.now();\r\n            //This is O(N^3)\r\n            //TODO: Refactor using temp.matrix to get O(N^2)\r\n            for (let m = 0; m < numLinks; m++) {\r\n                let l = links[m];\r\n                if (!l.visible) continue;\r\n                let s = false,\r\n                    t = false;\r\n                for (let n = 0; n < numNodes; n++) {\r\n                    let node = nodes[n];\r\n                    if (l.source == node._id) {\r\n                        s = true;\r\n                        node.degree++;\r\n                    }\r\n                    if (l.target == node._id) {\r\n                        t = true;\r\n                        node.degree++;\r\n                    }\r\n                    if (s && t) break;\r\n                }\r\n            }\r\n            // console.log('clustersssss: ' , clusters);\r\n            clusters.forEach(c => {\r\n                c.links = c.links / 2;\r\n                c.links_per_node = c.links / c.nodes;\r\n                c.mean_genetic_distance = c.sum_distances / 2 / c.links;\r\n            });\r\n            if(this.debugMode) {\r\n                console.log(\"Degree Computation time:\", (Date.now() - start).toLocaleString(), \"ms\");\r\n            }\r\n            resolve();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Sets node visibility to true when it cluster is visible\r\n     * @param {boolean} silent - whether to trigger node-visibility event (True doesn't trigger, False does)\r\n     */\r\n    setNodeVisibility(silent) {\r\n        let start = Date.now();\r\n        let dateField = (window as any).context.commonService.session.style.widgets[\"timeline-date-field\"];\r\n        let nodes = (window as any).context.commonService.session.data.nodes,\r\n            clusters = (window as any).context.commonService.session.data.clusters;\r\n        let n = nodes.length;\r\n        for (let i = 0; i < n; i++) {\r\n            let node = nodes[i];\r\n\r\n            //if (node._id === \"NIMR_NG894803\") {\r\n            //    console.log('setting node vis: ', _.cloneDeep(node));\r\n            //}\r\n\r\n            node.visible = true;\r\n            let cluster = clusters[node.cluster];\r\n\r\n\r\n            //if (node._id === \"NIMR_NG894803\") {\r\n            //    console.log('setting node cluster: ', _.cloneDeep(cluster));\r\n            //}\r\n\r\n            if (cluster) {\r\n                // TODO: uncomment if something breaks since this was defaulted to visible\r\n                // cluster.visible = true;\r\n                // console.log('setting cluster vis: ', cluster);\r\n                // console.log('setting node vis: ', node.visible);\r\n                node.visible = node.visible && cluster.visible;\r\n            }\r\n            if (dateField != \"None\") {\r\n                node.visible = node.visible && moment((window as any).context.commonService.session.state.timeEnd).toDate() >= moment(node[dateField]).toDate();\r\n            }\r\n\r\n            if (node._id === \"NIMR_NG894803\") {\r\n                console.log('setting node vis 2: ', _.cloneDeep(node));\r\n            }\r\n        }\r\n        if (!silent) $(document).trigger(\"node-visibility\");\r\n\r\n        if(this.debugMode) {\r\n            console.log('session nodes: ', nodes.filter(n => n.visible));\r\n            console.log('session nodes length: ', nodes.filter(n => n.visible).length);\r\n            console.log(\"Node Visibility Setting time:\", (Date.now() - start).toLocaleString(), \"ms\");        \r\n        }\r\n       \r\n    };\r\n\r\n    /**\r\n     * Sets link visibility based on distance, link-threshold, nearestNeighbor setting, etc...\r\n     * @param {boolean} silent - whether to trigger link-visibility event (True doesn't trigger, False does)\r\n     * @param {boolean} [checkCluster=true] - defaults to true; whether to include cluster.visibility when setting link.visibility\r\n     */\r\n    setLinkVisibility(silent: boolean, checkCluster = true) {\r\n        let start = Date.now();\r\n        let metric = (window as any).context.commonService.session.style.widgets[\"link-sort-variable\"],\r\n            threshold = (window as any).context.commonService.session.style.widgets[\"link-threshold\"],\r\n            showNN = (window as any).context.commonService.session.style.widgets[\"link-show-nn\"];\r\n        let links = (window as any).context.commonService.session.data.links;\r\n        let clusters = (window as any).context.commonService.session.data.clusters;\r\n        let n = links.length;\r\n        if(this.debugMode) {\r\n            console.log(`Setting Link Visibility with ${metric} ${threshold} ${showNN}`);\r\n        }\r\n\r\n        \r\n\r\n        for (let i = 0; i < n; i++) {\r\n            \r\n\r\n            let link = links[i];\r\n\r\n            if((link.source === \"KF773429\" && link.target === \"KF773430\") || (link.source === \"KF773430\" && link.target === \"KF773429\")) {\r\n                console.log('setting link vis: ', _.cloneDeep(link));\r\n            }\r\n\r\n\r\n            let visible = true;\r\n            let overrideNN = false;\r\n\r\n            // Add back the distance origin if it was removed and the link has distance to it\r\n            if ( link.hasDistance && !link.origin.includes(link.distanceOrigin)) {\r\n                link.origin.push(link.distanceOrigin);\r\n            }\r\n\r\n            // No distance value\r\n            if (link[metric] == null) {\r\n\r\n                // If origin file exists for link outside of distance, keep visible\r\n                if (link.origin.filter(fileName => !fileName.includes(link.distanceOrigin)).length > 0) {\r\n                    // Set visible and origin to only show the from the file outside of Distance\r\n                    link.origin = link.origin.filter(fileName => !fileName.includes(link.distanceOrigin));\r\n                    overrideNN = true;\r\n                    visible = true;\r\n                } else {\r\n                    link.visible = false;\r\n                    continue;\r\n                }\r\n\r\n            } else {\r\n\r\n                if (link.hasDistance) {\r\n\r\n\r\n                    visible = link[metric] < threshold;\r\n\r\n\r\n                    if (!visible) {\r\n\r\n                        // Only need to get distance origin and override if there are other files using a distance metric, otherwise the else code block below would be executed since the link would not have distance\r\n                        if (\r\n                            link.origin.length > 1 &&\r\n                            link.origin.filter(fileName => {\r\n                            const hasAuspice = /[Aa]uspice/.test(fileName);\r\n                            const includesDistanceOrigin = fileName.includes(link.distanceOrigin);\r\n                            return fileName && !includesDistanceOrigin && !hasAuspice;\r\n                            }).length > 0\r\n                        ) {\r\n\r\n                            link.origin = link.origin.filter(fileName => {\r\n                            const hasAuspice = /[Aa]uspice/.test(fileName);\r\n                            const includesDistanceOrigin = fileName.includes(link.distanceOrigin);\r\n                            return fileName && !includesDistanceOrigin && !hasAuspice;\r\n                            });\r\n\r\n                            overrideNN = true;\r\n                            visible = true;\r\n                        } \r\n                        if (link.origin.length > 1) {\r\n                            link.origin = link.origin.filter(fileName => !fileName.includes(link.distanceOrigin));\r\n                            visible = true;\r\n                        }\r\n\r\n\r\n                        // If the origin array has an origin left after filtering out and its not the distance origin, then we need to show it\r\n                        if (link.origin[0] !== link.distanceOrigin) {\r\n                            visible = true;\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    visible = link[metric] <= threshold;\r\n\r\n                    if (!visible) {\r\n\r\n                    // Only need to get distance origin and override if there are other files using a distance metric, otherwise the else code block below would be executed since the link would not have distance\r\n                        if (\r\n                            link.origin.length > 1 &&\r\n                            link.origin.filter(fileName => {\r\n                            const hasAuspice = /[Aa]uspice/.test(fileName);\r\n                            const includesDistanceOrigin = fileName.includes(link.distanceOrigin);\r\n                            return fileName && !includesDistanceOrigin && !hasAuspice;\r\n                            }).length > 0\r\n                        ) {\r\n                            // Set visible and origin to only show the file outside of Distance\r\n                            link.origin = link.origin.filter(fileName => {\r\n                            const hasAuspice = /[Aa]uspice/.test(fileName);\r\n                            const includesDistanceOrigin = fileName.includes(link.distanceOrigin);\r\n                            return fileName && !includesDistanceOrigin && !hasAuspice;\r\n                            });\r\n                            overrideNN = true;\r\n                            visible = true;\r\n                        }\r\n                    }\r\n                } else {\r\n\r\n                    // If has no distance, then link should be visible and unnaffected by NN\r\n                    overrideNN = true;\r\n                    visible = true;\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n            if (visible && showNN && !overrideNN) {\r\n                visible = visible && link.nn;\r\n                // Keep link visible of not nearest neighbor, but still connected via an edge list\r\n                if (!visible && link.origin.filter(fileName => !fileName.includes(link.distanceOrigin)).length > 0) {\r\n                    link.origin = link.origin.filter(fileName => !fileName.includes(link.distanceOrigin));\r\n                    visible = true;\r\n                }\r\n            }\r\n\r\n            let cluster = clusters[link.cluster];\r\n            if (cluster && checkCluster) {\r\n\r\n                visible = visible && cluster.visible;\r\n            }\r\n\r\n            if(visible && link.origin.length > 1){\r\n                link.origin = (window as any).context.commonService.session.style.widgets['link-origin-array-order'];\r\n            }\r\n\r\n            link.visible = visible;\r\n\r\n        }\r\n\r\n        \r\n        if (!silent) $(document).trigger(\"link-visibility\");\r\n        if(this.debugMode) {\r\n            console.log(\"Link Visibility Setting time:\", (Date.now() - start).toLocaleString(), \"ms\");\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Set the visibility of each cluster based on if cluster size is greater than cluster-minimum-size\r\n     * @param {boolean} silent whether to trigger cluster-visibility event (True doesn't trigger, False does)\r\n     */\r\n    setClusterVisibility(silent: boolean) {\r\n        //let start = Date.now();\r\n        let min = (window as any).context.commonService.session.style.widgets[\"cluster-minimum-size\"];\r\n        let clusters = (window as any).context.commonService.session.data.clusters;\r\n        let n = clusters.length;\r\n        for (let i = 0; i < n; i++) {\r\n            let cluster = clusters[i];\r\n            // console.log('cluster nodes ', cluster);\r\n            cluster.visible = cluster.nodes >= min;\r\n        }\r\n        if (!silent) $(document).trigger(\"cluster-visibility\");//$window.trigger(\"cluster-visibility\");\r\n        // console.log(\"Cluster Visibility Setting time:\", (Date.now() - start).toLocaleString(), \"ms\");\r\n    };\r\n\r\n\r\n    updatePinNodes(copy: boolean) {\r\n        let nodes =  (window as any).context.commonService.session.network.nodes;\r\n        let n = nodes.length;\r\n        for (let i = 0; i < n; i++) {\r\n            let node = nodes[i]; \r\n            if (copy && node.fixed) node.preFixed = true;\r\n            if (!copy &&  (window as any).context.commonService.session.network.timelineNodes[i].preFixed) {\r\n                node.fixed = true;\r\n                node.fx = node.x;\r\n                node.fy = node.y;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @returns {any[]} Returns an array with a copy of each node object\r\n     */\r\n    getNetworkNodes = () => {\r\n        let nodes =  (window as any).context.commonService.session.network.nodes;\r\n        let n = nodes.length;\r\n        let out = [];\r\n          for (let i = 0; i < n; i++) {\r\n            let node = nodes[i];\r\n            out.push(JSON.parse(JSON.stringify(node)));\r\n          }\r\n        return out;\r\n      };\r\n\r\n\r\n    updateNetwork() {\r\n        (window as any).context.commonService.setLinkVisibility(true);\r\n        (window as any).context.commonService.tagClusters().then(() => {\r\n            (window as any).context.commonService.setClusterVisibility(true);\r\n            $(document).trigger(\"cluster-visibility\");\r\n            (window as any).context.commonService.setLinkVisibility(true);\r\n            (window as any).context.commonService.setNodeVisibility(true);\r\n            [\"cluster\", \"link\", \"node\"].forEach(thing => $(document).trigger(thing + \"-visibility\"));\r\n            (window as any).context.commonService.updateStatistics();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Creates and updates the threshold histogram that is found in global settings.\r\n     * Clicking on the histogram will update the link threshold\r\n     * @param [histogram] - optional parameter\r\n     */\r\n    updateThresholdHistogram(histogram?: any) {\r\n\r\n        let width = 260,\r\n        height = 48,\r\n        svg = null;\r\n\r\n        // Update histogram so that it can be altered outside of the main wrapper \r\n        if(histogram){\r\n            this.thresholdHistogram = histogram;\r\n        }\r\n        \r\n        svg = d3\r\n        .select(this.thresholdHistogram)\r\n        .html(null)\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height);\r\n\r\n        // add all link distances to data, find max and min distances\r\n        let lsv = this.session.style.widgets[\"link-sort-variable\"],\r\n            n = this.session.data.links.length,\r\n            max = Number.MIN_SAFE_INTEGER,\r\n            min = Number.MAX_SAFE_INTEGER,\r\n            data = Array(n),\r\n            dist = null;\r\n        for (let i = 0; i < n; i++) {\r\n            dist = parseFloat((window as any).context.commonService.session.data.links[i][lsv]);\r\n            data[i] = dist;\r\n            if (dist < min) min = dist;\r\n            if (dist > max) max = dist;\r\n        }\r\n        let range = max - min;\r\n        let ticks = 40;\r\n\r\n        let x = d3\r\n            .scaleLinear()\r\n            .domain([min, max])\r\n            .range([0, width]);\r\n\r\n        let bins = d3\r\n            .histogram()\r\n            .domain((x as any).domain())\r\n            .thresholds(x.ticks(ticks))(data);\r\n\r\n        let y = d3\r\n            .scaleLinear()\r\n            .domain([0, d3.max(bins, d => (d as any).length)])\r\n            .range([height, 0]);\r\n\r\n        let bar = svg\r\n            .selectAll(\".bar\")\r\n            .data(bins)\r\n            .enter()\r\n            .append(\"g\")\r\n            .attr(\"class\", \"bar\")\r\n            .attr(\"transform\", d => \"translate(\" + x(d.x0) + \",\" + y(d.length) + \")\");\r\n\r\n        bar\r\n            .append(\"rect\")\r\n            .attr(\"x\", 1)\r\n            .attr(\"width\", 6)\r\n            .attr(\"height\", d => height - y(d.length));\r\n\r\n        /**\r\n         * Uses the position on the histogram to set the link thresehold value\r\n         */\r\n        function updateThreshold() {\r\n            let xc = (d3 as any).mouse(svg.node())[0];\r\n            let decimalPlaces = ((window as any).context.commonService.session.style.widgets['default-distance-metric'].toLowerCase() === \"tn93\") ? 3 : 0;\r\n\r\n            (window as any).context.commonService.session.style.widgets[\"link-threshold\"] = (xc / width) * range * 1.05 + min;\r\n            $(\"#link-threshold\").val(parseFloat((window as any).context.commonService.session.style.widgets[\"link-threshold\"].toFixed(decimalPlaces)));\r\n\r\n            (window as any).context.commonService.visuals.microbeTrace.SelectedLinkThresholdVariable = parseFloat((window as any).context.commonService.session.style.widgets[\"link-threshold\"].toFixed(decimalPlaces));\r\n            (window as any).context.commonService.visuals.microbeTrace.onLinkThresholdChanged();\r\n        }\r\n\r\n        svg.on(\"click\", () => {\r\n            updateThreshold();\r\n            this.updateNetwork();\r\n        });\r\n\r\n        svg.on(\"mouseover\", () => {\r\n            let xc = (d3 as any).mouse(svg.node())[0];\r\n            $('#filtering-threshold').prop('title', \"Whats the maximum genetic distance you're willing to call a link? \" + (((window as any).context.commonService.session.style.widgets['default-distance-metric'].toLowerCase() === \"tn93\") ? ((xc / width) * range * 1.05 + min).toLocaleString() : Math.round(((xc / width) * range * 1.05 + min)).toLocaleString()));\r\n          });\r\n\r\n        svg.on(\"mousedown\", () => {\r\n            (d3 as any).event.preventDefault();\r\n            svg.on(\"mousemove\", updateThreshold);\r\n            svg.on(\"mouseup mouseleave\", () => {\r\n                (window as any).context.commonService.updateNetwork();\r\n                svg\r\n                    .on(\"mousemove\", null)\r\n                    .on(\"mouseup\", null)\r\n                    .on(\"mouseleave\", null);\r\n            });\r\n        });\r\n    };\r\n\r\n}\r\n\r\nexport interface JurisdictionItem{\r\n    jurisdiction_com_code: string | undefined;\r\n    jurisdiction_com_name: string | undefined;\r\n    subjurisdiction_code: string | undefined;\r\n    subjurisdiction_name: string | undefined;\r\n}\r\n","import { Injector, Component, Output, OnChanges, SimpleChange, EventEmitter, OnInit, Inject, ElementRef, ChangeDetectionStrategy } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { AppComponentBase } from '@shared/common/app-component-base';\r\nimport { AppUiCustomizationService } from '@shared/common/ui/app-ui-customization.service';\r\nimport { CommonService } from '../contactTraceCommonServices/common.service';\r\nimport * as XLSX from 'xlsx';\r\nimport * as Papa from 'papaparse';\r\nimport * as saveAs from 'file-saver';\r\nimport * as fileto from 'fileto';\r\nimport * as JSZip from 'jszip';\r\nimport { generateCanvas } from '../visualizationComponents/AlignmentViewComponent/generateAlignmentViewCanvas';\r\nimport * as tn93 from 'tn93';\r\nimport * as patristic from 'patristic';\r\nimport AuspiceHandler from '@app/helperClasses/auspiceHandler';\r\nimport * as _ from 'lodash';\r\nimport { MicrobeTraceNextVisuals } from '../microbe-trace-next-plugin-visuals';\r\nimport { EventEmitterService } from '@shared/utils/event-emitter.service';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { ComponentContainer } from 'golden-layout';\r\n// import { ComponentContainer } from 'golden-layout';\r\n// import { ConsoleReporter } from 'jasmine';\r\n\r\n\r\n@Component({\r\n  selector: 'FilesComponent',\r\n  templateUrl: './files-plugin.component.html',\r\n  styleUrls: ['./files-plugin.component.less'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\n\r\nexport class FilesComponent extends BaseComponentDirective implements OnInit {\r\n\r\n  @Output() LoadDefaultVisualizationEvent = new EventEmitter();\r\n\r\n\r\n  SelectedDefaultDistanceMetricVariable: string = \"tn93\";\r\n  SelectedAmbiguityResolutionStrategyVariable: string = \"AVERAGE\";\r\n  SelectedAmbiguityThresholdVariable: any = 0.015;\r\n  SelectedDefaultDistanceThresholdVariable: any = 0.015;\r\n  SelectedDefaultViewVariable: string = \"2D Network\";\r\n  SelectedGenerateNumberVariable: any = 100;\r\n\r\n  DirectionalityTypes: any = [\r\n    { label: 'Off', value: 'Off' },\r\n    { label: 'Inferred', value: 'Inferred' }\r\n  ];\r\n  SelectedDirectionalityTypeVariable: string = \"Off\";\r\n\r\n  TriangulationTypes: any = [\r\n    { label: 'Off', value: 'Off' },\r\n    { label: 'On', value: 'On' }\r\n  ];\r\n  SelectedTriangulationTypeVariable: string = \"Off\";\r\n\r\n  AutostashingTypes: any = [\r\n    { label: 'Off', value: 'Off' },\r\n    { label: 'On', value: 'On' }\r\n  ];\r\n  SelectedAutostashingTypeVariable: string = \"Off\";\r\n\r\n\r\n  AlignTypes: any = [\r\n    { label: 'None', value: 'None' },\r\n    { label: 'Smith-Waterman', value: 'Smith-Waterman' }\r\n  ];\r\n  SelectedAlignTypeVariable: string = \"None\";\r\n\r\n  isLoadingFiles: boolean = false;\r\n\r\n  ReferenceTypes: any = [\r\n    { label: 'LoadFrom FASTA', value: 'LoadFrom FASTA' },\r\n    { label: 'First Sequence', value: 'First Sequence' },\r\n    { label: 'Consensus', value: 'Consensus' }\r\n  ];\r\n  SelectedReferenceTypeVariable: string = \"LoadFrom FASTA\";\r\n\r\n  SelectedRefSeqFileLoadVariable: string = \"\";\r\n\r\n\r\n  RefSeqIDTypes: any = [\r\n\r\n  ];\r\n  SelectedRefSeqIDVariable: string = \"\";\r\n\r\n  SelectedAlignerMatchVariable: any = \"1\";\r\n  SelectedAlignerMismatchVariable: any = 1;\r\n  SelectedAlignerGapOVariable: any = 5;\r\n  SelectedAlignerGapEVariable: any = 2;\r\n\r\n  IsReferenceSourceSelected: boolean = false;\r\n  IsReferenceOptionsSelected: boolean = true;\r\n  SelectedAuditEmptyVariable: boolean = true;\r\n  SelectedAuditGapsVariable: boolean = true;\r\n  SelectedAuditRNAVariable: boolean = true;\r\n  SelectedAuditAminoAcidsVariable: boolean = true;\r\n  SelectedAuditCIGARVariable: boolean = true;\r\n  SelectedAuditMalformedVariable: boolean = true;\r\n\r\n  IsDataAvailable: boolean = false;\r\n  messages: any[];\r\n  displayFileSettings: boolean = false;\r\n  displaySequenceSettings: boolean = false;\r\n  displayloadingInformationModal: boolean = false;\r\n\r\n  nodeIds: { fileName: string; ids: string[] }[] = [];\r\n  edgeIds: { fileName: string; ids: { source: string; target: string }[] }[] = [];\r\n\r\n  uniqueNodes: string[] = [];\r\n  uniqueEdgeNodes: string[] = [];\r\n\r\n  private visuals: MicrobeTraceNextVisuals;\r\n\r\n  public title: string;\r\n  public id: string;\r\n\r\n  constructor(\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, elRef: ElementRef,\r\n    private eventEmitterService: EventEmitterService,\r\n    public commonService: CommonService) {\r\n\r\n    super(elRef.nativeElement);\r\n\r\n    // this.title = this.container.title;\r\n    this.id = this.container.parent.id;\r\n\r\n    // sets container.stateRequestEvent to a function that returns \"state is here\"\r\n    this.container.stateRequestEvent = () => this.handleContainerStateRequestEvent();\r\n    \r\n    const state = this.container.initialState;\r\n    // let color: string;\r\n    // if (state === undefined) {\r\n    //     color = ColorComponent.undefinedColor;\r\n    // } else {\r\n    //     if (typeof state !== 'string') {\r\n    //         color = 'IndianRed';\r\n    //     } else {\r\n    //         color = state;\r\n    //     }\r\n    // }\r\n\r\n    this.visuals = commonService.visuals;\r\n    this.visuals.filesPlugin = this;\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.RefSeqIDTypes.push(\r\n      { label: 'Pol', value: this.visuals.microbeTrace.commonService.HXB2.substr(2000, 2100) });\r\n\r\n    this.RefSeqIDTypes.push(\r\n      { label: 'Complete', value: this.visuals.microbeTrace.commonService.HXB2 });\r\n\r\n\r\n    this.SelectedDefaultDistanceThresholdVariable = this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable;\r\n    this.SelectedDefaultDistanceMetricVariable = this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedDistanceMetricVariable;\r\n    this.visuals.microbeTrace.commonService.LoadViewEvent.subscribe((v) => { this.loadDefaultVisualization(v); });\r\n    this.visuals.microbeTrace.commonService.session.data.reference = this.visuals.microbeTrace.commonService.HXB2.substr(2000, 2100);\r\n\r\n    if (this.eventEmitterService.subsVar==undefined) {    \r\n      this.eventEmitterService.subsVar = this.eventEmitterService.    \r\n        invokeFirstComponentFunction.subscribe((name:string) => {    \r\n          this.processFile();    \r\n        });    \r\n    }  \r\n\r\n    // TODO: the rest of ngOnInit can be revised to take advantage of angular features\r\n    $('.alignConfigRow').hide();\r\n\r\n    $('#align-sw').parent().on('click', () => {\r\n\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['align-sw'] = true;\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['align-none'] = false;\r\n      $('.alignConfigRow, #reference-file-row').slideDown();\r\n      $('#alignment-preview').slideUp(function () {\r\n\r\n        //debugger;\r\n\r\n        $(this).empty().show();\r\n      });\r\n    });\r\n\r\n    $('#align-none').parent().on('click', () => {\r\n\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['align-sw'] = false;\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['align-none'] = true;\r\n      $('.alignConfigRow, #reference-file-row').slideUp();\r\n      $('#alignment-preview').slideUp(function () {\r\n\r\n        //debugger;\r\n\r\n        $(this).empty().show();\r\n      });\r\n    });\r\n\r\n    $('#reference-source-file').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['reference-source-file'] = true;\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['reference-source-first'] = false;\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['reference-source-consensus'] = false;\r\n      this.visuals.microbeTrace.commonService.session.data.reference = $('#refSeqID').val().toString();\r\n\r\n      //debugger;\r\n\r\n      if (!this.visuals.microbeTrace.commonService.session.style.widgets['align-none']) $('#reference-file-row').slideDown();\r\n    });\r\n\r\n    $('#reference-source-first').parent().on('click', () => {\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['reference-source-file'] = false;\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['reference-source-first'] = true;\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['reference-source-consensus'] = false;\r\n      $('#reference-file-row').slideUp();\r\n    });\r\n\r\n    $('#reference-source-consensus').parent().on('click', () => {\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['reference-source-file'] = false;\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['reference-source-first'] = false;\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['reference-source-consensus'] = true;\r\n      $('#reference-file-row').slideUp();\r\n    });\r\n\r\n    $('#reference-file-row').hide();\r\n\r\n    $('#refSeqFileLoad').on('change', () => {\r\n\r\n      //debugger;\r\n\r\n      const file = this.visuals.microbeTrace.commonService.session.files[0];   //this.files[0];\r\n      let reader = new FileReader();\r\n      reader.onloadend = (e: any) => {\r\n        if (e.target.readyState === FileReader.DONE) {\r\n          this.visuals.microbeTrace.commonService.parseFASTA(e.target.result).then(nodes => {\r\n            $('#refSeqID')\r\n              .html(nodes.map((d, i) => `\r\n                                <option value=\"${this.visuals.microbeTrace.commonService.filterXSS(d.seq)}\" ${i === 0 ? \"selected\" : \"\"}>${this.visuals.microbeTrace.commonService.filterXSS(d.id)}</option>\r\n                              `))\r\n              .trigger('change');\r\n          });\r\n          $('label[for=\"refSeqFileLoad\"]').text(this.visuals.microbeTrace.commonService.filterXSS(file.name));\r\n        }\r\n      };\r\n      reader.readAsText(file);\r\n    });\r\n\r\n    $('#refSeqID').html(`\r\n          <option value=\"${this.visuals.microbeTrace.commonService.HXB2.substr(2000, 2100)}\" selected>Pol</option>\r\n          <option value=\"${this.visuals.microbeTrace.commonService.HXB2}\">Complete</option>\r\n        `).on('change', (e) => {\r\n\r\n          //debugger;\r\n          this.visuals.microbeTrace.commonService.session.data.reference = e.data;// this.value;\r\n\r\n        });\r\n\r\n    $('#alignment-preview').on('click', () => {\r\n      this.readFastas().then(data => {\r\n        if (this.visuals.microbeTrace.commonService.session.style.widgets['reference-source-first']) {\r\n\r\n          //debugger;\r\n\r\n          this.visuals.microbeTrace.commonService.session.data.reference = \"\"; //nodes[0].seq;\r\n        }\r\n        if (this.visuals.microbeTrace.commonService.session.style.widgets['reference-source-consensus']) {\r\n          this.visuals.microbeTrace.commonService.computeConsensus().then(consensus => this.visuals.microbeTrace.commonService.session.data.reference = consensus);\r\n        }\r\n        this.updatePreview(data);\r\n      });\r\n    });\r\n\r\n    let auditBlock = $('#audited-sequences');\r\n\r\n    const logAudit = (parentContext, id, type) => {\r\n      let match = auditBlock.find(`[data-id=\"${id}\"]`);\r\n      let button = $(`<button class=\"btn btn-warning btn-sm audit-exclude\" data-id=\"${id}\">Exclude</button>`).on('click', function () {\r\n        let thi$ = $(this);\r\n        const id = thi$.data('id');\r\n        if (thi$.text() === 'Exclude') {\r\n          parentContext.commonService.session.data.nodeExclusions.push(id);\r\n          thi$.removeClass('btn-warning').addClass('btn-success').text('Include');\r\n        } else {\r\n          parentContext.commonService.session.data.nodeExclusions.splice(parentContext.commonService.session.data.nodeExclusions.indexOf(id), 1);\r\n          thi$.removeClass('btn-success').addClass('btn-warning').text('Exclude');\r\n        }\r\n      });\r\n      let row = $(`<div class=\"alert alert-warning w-100 d-flex justify-content-between\" role=\"alert\"><span>${id} appears to be ${type}.</span></div>`);\r\n      row.append(button);\r\n      auditBlock.append(row);\r\n    };\r\n\r\n    $('#audit-launcher').on('click', () => {\r\n      this.readFastas().then(data => {\r\n        const start = Date.now();\r\n        const isGaps = /^-+$/;\r\n        const isRNA = /^[ACGURYMKWSBDHVN-]+$/;\r\n        const isAA = /^[ARNDCQEGHILKMFPSTWYVBZN]+$/;\r\n        const isDNA = /^[ACGTRYMKWSBDHVN-]+$/;\r\n        const isCIGAR = /^[0-9MIDNSHP=X]+$/;\r\n        const isMalformed = /[^ACGTURYMKWSBDHVNQEILFPZX0-9-]+/;\r\n        const checkEmpty = $('#audit-empty').is(':checked');\r\n        const checkGaps = $('#audit-gaps').is(':checked');\r\n        const checkRNA = $('#audit-RNA').is(':checked');\r\n        const checkAA = $('#audit-amino-acids').is(':checked');\r\n        const checkCIGAR = $('#audit-CIGAR').is(':checked');\r\n        const checkMalformed = $('#audit-malformed').is(':checked');\r\n        let any = false;\r\n        data.forEach(d => {\r\n          const seq = d.seq, id = d.id;\r\n          if (checkEmpty && seq === '') logAudit(this, id, 'empty');\r\n          if (checkGaps && isGaps.test(seq)) logAudit(this, id, 'all gaps')\r\n          if (checkRNA && isRNA.test(seq) && !isGaps.test(seq)) logAudit(this, id, 'RNA');\r\n          if (checkAA && isAA.test(seq) && !isDNA.test(seq)) logAudit(this, id, 'amino acids');\r\n          if (checkCIGAR && isCIGAR.test(seq)) logAudit(this, id, 'a CIGAR');\r\n          if (checkMalformed && isMalformed.test(seq)) logAudit(this, id, 'malformed');\r\n        });\r\n        console.log('Sequence Auditing time:', (Date.now() - start).toLocaleString(), 'ms');\r\n      });\r\n    });\r\n\r\n    $('#audit-toggle-all').on('click', () => {\r\n      $('.audit-exclude').trigger('click');\r\n    });\r\n\r\n    $('#default-distance-metric').change((e) => {\r\n\r\n      //debugger;\r\n\r\n      const lsv = e.data ? e.data : 'tn93';\r\n      this.visuals.microbeTrace.commonService.localStorageService.setItem('default-distance-metric', lsv);\r\n      $('#default-distance-metric').val(lsv);\r\n      console.log(lsv);\r\n      if (lsv.toLowerCase() === 'snps') {\r\n        $('#ambiguities-row').slideUp();\r\n        $('#default-distance-threshold, #link-threshold')\r\n          .attr('step', 1)\r\n          .val(7);\r\n        this.visuals.microbeTrace.commonService.session.style.widgets[\"link-threshold\"] = 7;\r\n        this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = 7;\r\n        console.log('default-distance-metric change file-plugin.component.ts snps');\r\n        this.visuals.microbeTrace.onLinkThresholdChanged();\r\n      } else {\r\n        $('#ambiguities-row').slideDown();\r\n        $('#default-distance-threshold, #link-threshold')\r\n          .attr('step', 0.001)\r\n          .val(0.015);\r\n        this.visuals.microbeTrace.commonService.session.style.widgets[\"link-threshold\"] = 0.015;\r\n        this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = 0.015;\r\n        console.log('default-distance-metric change file-plugin.component.ts tn93');\r\n        this.visuals.microbeTrace.onLinkThresholdChanged();\r\n      }\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['default-distance-metric'] = lsv;\r\n      this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedDefaultDistanceMetricVariable = lsv;\r\n    });\r\n\r\n    let cachedLSV = \"\";\r\n    this.visuals.microbeTrace.commonService.localStorageService.getItem('default-distance-metric', (result) => {\r\n      cachedLSV = result;\r\n\r\n      if (cachedLSV) {\r\n        $('#default-distance-metric').val(cachedLSV).trigger('change');\r\n      }\r\n    });\r\n\r\n\r\n\r\n    $('#ambiguity-resolution-strategy').on('change', (e) => {\r\n\r\n      //debugger;\r\n\r\n      const v = e.data; //this.value;\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['ambiguity-resolution-strategy'] = v;\r\n      if (v === 'HIVTRACE-G') {\r\n        $('#ambiguity-threshold-row').slideDown();\r\n      } else {\r\n        $('#ambiguity-threshold-row').slideUp();\r\n      }\r\n    }).change();\r\n\r\n    $('#ambiguity-threshold').on('change', (e) => {\r\n\r\n      //debugger;\r\n\r\n      const v = e.data; //this.value;\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['ambiguity-threshold'] = v;\r\n    });\r\n\r\n    let cachedView = \"\";\r\n    this.visuals.microbeTrace.commonService.localStorageService.getItem('default-view', (result) => {\r\n      cachedView = result;\r\n    });\r\n\r\n    $('#default-view')\r\n      .on('change', (e) => {\r\n\r\n        //debugger;\r\n\r\n        const v = e.data;// this.value;\r\n        this.visuals.microbeTrace.commonService.localStorageService.setItem('default-view', v);\r\n        this.visuals.microbeTrace.commonService.session.style.widgets['default-view'] = v;\r\n        this.visuals.microbeTrace.commonService.session.layout.content[0].type = v;\r\n      })\r\n      .val(cachedView ? cachedView : this.visuals.microbeTrace.commonService.session.style.widgets['default-view'])\r\n      .trigger('change');\r\n\r\n    //$('#generate-sequences').on('click', () => {\r\n    //    $('#file-prompt').remove();\r\n    //    $('#launch').prop('disabled', false).focus();\r\n    //    this.processFile(new File([Papa.unparse(this.visuals.microbeTrace.commonService.generateSeqs('gen-' + this.visuals.microbeTrace.commonService.session.meta.readyTime + '-', parseFloat($('#generate-number').val().toString()), 20))], 'generatedNodes.csv'));\r\n    //});\r\n\r\n    $('#infer-directionality-false').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['infer-directionality-false'] = true;\r\n    });\r\n\r\n    $('#infer-directionality').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['infer-directionality-false'] = false;\r\n    });\r\n\r\n    $('#triangulate-false').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['triangulate-false'] = true;\r\n    });\r\n\r\n    $('#triangulate').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['triangulate-false'] = false;\r\n    });\r\n\r\n    $('#stash-auto-yes').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      this.visuals.microbeTrace.commonService.localStorageService.setItem('stash-auto', 'true');\r\n    });\r\n\r\n    if (localStorage.getItem('stash-auto') === 'true') {\r\n      $('#stash-auto-yes').parent().trigger('click');\r\n    }\r\n\r\n    $('#stash-auto-no').parent().on('click', () => {\r\n\r\n      //debugger;\r\n\r\n      if (this.visuals.microbeTrace.commonService.temp.autostash) clearInterval(this.visuals.microbeTrace.commonService.temp.autostash.interval);\r\n      this.visuals.microbeTrace.commonService.localStorageService.setItem('stash-auto', 'false');\r\n    });\r\n\r\n    if(this.commonService.session.network.launched){\r\n      $('#launch').text('Update');\r\n    }\r\n\r\n    // $.getJSON(\"../assets/outbreak.microbetrace\", (window as any).context.commonService.applySession);\r\n    // Use this when building production (.ie gh-pages branch)\r\n    if(!this.commonService.session.network.initialLoad && this.visuals.microbeTrace.auspiceUrlVal === null) {\r\n      console.log('launching outbreak');\r\n      $.getJSON(\"outbreaknorm.microbetrace\", (window as any).context.commonService.applySession);   \r\n      this.commonService.session.network.launched = true; \r\n      this.commonService.session.network.initialLoad = true; \r\n      // if(this.commonService.session.files && this.commonService.session.files.length > 0) {\r\n      //   for(let i = 0; i < this.commonService.session.files.length; i++) {\r\n      //     this.addToTable(this.commonService.session.files[i]);\r\n      //   }\r\n      // }   \r\n    }\r\n\r\n    setTimeout(() => {\r\n      this.populateTable();\r\n  }, 2000);\r\n\r\n    // console.log('session: ', this.commonService?.session?.files, this.commonService.session.files.length);\r\n  }\r\n\r\n  /**\r\n   * For each file in commonService.session.files, addToTable(file)\r\n   */\r\n  public populateTable() {  \r\n    const fileTableRows = $(\".file-table-row\");\r\n    fileTableRows.slideUp(() => fileTableRows.remove());\r\n\r\n    // Give some time before adding to table\r\n    setTimeout(() => {\r\n      let files = _.cloneDeep(this.commonService.session.files);\r\n      if(files && files.length > 0) {\r\n        for(let i = 0; i < files.length; i++) {\r\n          this.addToTable(files[i]);\r\n        }\r\n      }  }, 500);\r\n\r\n  }\r\n  \r\n  /**\r\n   * Toggles the value of multiple variables associated with sequence setting audit including:\r\n   * SelectedAuditEmptyVariable, SelectedAuditGapsVariable, SelectedAuditRNAVariable, \r\n   * SelectedAuditAminoAcidsVariable, SelectedAuditCIGARVariable, SelectedAuditMalformedVariable\r\n   */\r\n  toglleAll() {\r\n\r\n    this.SelectedAuditEmptyVariable = !this.SelectedAuditEmptyVariable;\r\n    this.SelectedAuditGapsVariable = !this.SelectedAuditGapsVariable;\r\n    this.SelectedAuditRNAVariable = !this.SelectedAuditRNAVariable;\r\n    this.SelectedAuditAminoAcidsVariable = !this.SelectedAuditAminoAcidsVariable;\r\n    this.SelectedAuditCIGARVariable = !this.SelectedAuditCIGARVariable;\r\n    this.SelectedAuditMalformedVariable = !this.SelectedAuditMalformedVariable;\r\n  }\r\n\r\n  /**\r\n   * XXXXX\r\n   */\r\n  run() {\r\n\r\n  }\r\n\r\n  /**\r\n   * Updates isDataAvaible variable based on if any nodes under commonService.session.data\r\n   * \r\n   * XXXXX not used XXXXX\r\n   */\r\n  InitView() {\r\n    this.IsDataAvailable = (this.visuals.microbeTrace.commonService.session.data.nodes.length === 0 ? false : true);\r\n  }\r\n\r\n  /**\r\n   * @returns {string} \"state is here\"\r\n   */\r\n  handleContainerStateRequestEvent(): string | undefined {\r\n    return \"state is here\";\r\n  }\r\n\r\n  /**\r\n   * Updated default-view widget and localStorageService\r\n   */\r\n  changeDefaultView(e) {\r\n    const v = e.target.selectedOptions[0].innerText;\r\n    this.visuals.microbeTrace.commonService.localStorageService.setItem('default-view', v);\r\n    this.visuals.microbeTrace.commonService.session.style.widgets['default-view'] = v;\r\n    this.visuals.microbeTrace.commonService.session.layout.content[0].type = v;\r\n  }\r\n\r\n  /**\r\n   * Opens/Closes the settings window\r\n   */\r\n  openSettings() {\r\n    this.displayFileSettings = !this.displayFileSettings;\r\n  }\r\n\r\n  openExport() {\r\n\r\n  }\r\n\r\n  openCenter() {\r\n\r\n  }\r\n\r\n  //openPinAllNodes() {\r\n\r\n\r\n  //}\r\n\r\n  openRefreshScreen() {\r\n\r\n  }\r\n\r\n  openSelectDataSetScreen() {\r\n\r\n  }\r\n\r\n  /**\r\n   * Opens/Closes Sequence Controls modal/dialog box\r\n   */\r\n  showSequenceSettings() {\r\n    this.displaySequenceSettings = !this.displaySequenceSettings;\r\n  }\r\n\r\n  /**\r\n   * Sets commonService.session.messages and this.messages to empty arrays []. Clears and closes loading-information modal.\r\n   * Emits a LoadDefaultVisualizationEvent.\r\n   * @param e \r\n   */\r\n  loadDefaultVisualization(e: string) {\r\n\r\n    setTimeout(() => {\r\n\r\n      this.visuals.microbeTrace.commonService.session.messages = [];\r\n      this.messages = [];\r\n      $('#loading-information').html('');\r\n      $('#launch').prop('disabled', false).focus();\r\n\r\n      this.displayloadingInformationModal = false;\r\n\r\n    }, 1000);\r\n\r\n    this.LoadDefaultVisualizationEvent.emit(e);\r\n  }\r\n\r\n  /**\r\n   * Adds msg to this.messages and commonService.session.messages. \r\n   * Updates messages on loading-information modal based on commonService.session.message\r\n   * @param {string} msg message to add to messages arrays \r\n   */\r\n  showMessage(msg: string) {\r\n\r\n    this.messages.push(msg);\r\n    this.visuals.microbeTrace.commonService.session.messages.push(msg);\r\n    $('#loading-information').html(this.visuals.microbeTrace.commonService.session.messages.join('<br>'));\r\n  }\r\n\r\n  /**\r\n   * Resets the value of session.data, temp.trees if previously launched (or more if not previously launched). Retains the values of following \r\n   * widgets: link-threshold, default-distance-metric, ambiguity-resolution-strategy, and default view.\r\n   * Calls creatLaunchSequences to process the data files loaded.\r\n   */\r\n  launchClick() {\r\n\r\n    console.log(this.displayloadingInformationModal);\r\n    this.visuals.microbeTrace.commonService.updateLegacyNodeSymbols();\r\n    const thresholdOnLaunch = this.visuals.microbeTrace.commonService.session.style.widgets[\"link-threshold\"];\r\n    const metricOnLaunch = this.visuals.microbeTrace.commonService.session.style.widgets[\"default-distance-metric\"];\r\n    const ambiguityOnLaunch = this.visuals.microbeTrace.commonService.session.style.widgets[\"ambiguity-resolution-strategy\"];\r\n    const viewOnLaunch = this.visuals.microbeTrace.commonService.session.style.widgets[\"default-view\"];\r\n\r\n\r\n    console.log('launch click');\r\n    if( this.commonService.session.network.launched) {\r\n      console.log('launch click launched ', this.commonService.session.network.launched);\r\n      this.visuals.microbeTrace.commonService.session.data = this.visuals.microbeTrace.commonService.sessionSkeleton().data;\r\n      const newTempSkeleton = this.visuals.microbeTrace.commonService.tempSkeleton();\r\n      this.visuals.microbeTrace.commonService.temp.trees = newTempSkeleton.trees;\r\n      $('#launch').text('Update');\r\n      this.visuals.twoD.isLoading = true;\r\n    }\r\n    else if (!this.commonService.session.network.launched) {\r\n      console.log('launch click not launched ', this.commonService.session.network.launched);\r\n\r\n      this.visuals.microbeTrace.commonService.resetData();\r\n      this.visuals.microbeTrace.commonService.session.network.launched = true;\r\n    }\r\n\r\n    this.visuals.microbeTrace.commonService.session.style.widgets[\"link-threshold\"] = thresholdOnLaunch;\r\n    this.visuals.microbeTrace.commonService.session.style.widgets[\"default-distance-metric\"] = metricOnLaunch;\r\n    this.visuals.microbeTrace.commonService.session.style.widgets[\"ambiguity-resolution-strategy\"] = ambiguityOnLaunch;\r\n    this.visuals.microbeTrace.commonService.session.style.widgets[\"default-view\"] = viewOnLaunch;\r\n\r\n    this.visuals.microbeTrace.commonService.session.messages = [];\r\n    this.messages = [];\r\n\r\n    console.log('session files', this.visuals.microbeTrace.commonService.session.files);\r\n\r\n    this.displayloadingInformationModal = true;\r\n\r\n    this.showMessage(\"Starting...\");\r\n\r\n    setTimeout(() => {\r\n      // Process the data files loaded.\r\n      this.creatLaunchSequences();\r\n    }, 1000);\r\n  }\r\n\r\n  /**\r\n   * Processes all files in following order (auspice, newick, matrix, link, node, fasta).\r\n   * Adds/Updates nodes and links. After processing all files, calls processData.\r\n   */\r\n  creatLaunchSequences() {\r\n    this.visuals.microbeTrace.commonService.session.meta.startTime = Date.now();\r\n    $('#launch').prop('disabled', true);\r\n\r\n    $('#loading-information').html('');\r\n    console.log(this.displayloadingInformationModal);\r\n    this.visuals.microbeTrace.commonService.temp.messageTimeout = setTimeout(() => {\r\n      $('#loadCancelButton').slideDown();\r\n      // abp.notify.warn('If you stare long enough, you can reverse the DNA Molecule\\'s spin direction');\r\n    }, 20000);\r\n    const nFiles = this.visuals.microbeTrace.commonService.session.files.length - 1;\r\n    const check = nFiles > 0;\r\n\r\n    // sorts files based on hierarchy\r\n    const hierarchy = ['auspice', 'newick', 'matrix', 'link', 'node', 'fasta'];\r\n    this.visuals.microbeTrace.commonService.session.files.sort((a, b) => hierarchy.indexOf(a.format) - hierarchy.indexOf(b.format));\r\n\r\n\r\n    this.visuals.microbeTrace.commonService.session.meta.anySequences = this.visuals.microbeTrace.commonService.session.files.some(file => (file.format === \"fasta\") || (file.format === \"node\" && file.field2 !== \"None\"));\r\n\r\n    this.visuals.microbeTrace.commonService.session.files.forEach((file, fileNum) => {\r\n      const start = Date.now();\r\n      const origin = [file.name];\r\n      if (file.format === 'auspice') {\r\n        this.showMessage(`Parsing ${file.name} as Auspice...`);\r\n        // this.visuals.microbeTrace.commonService.localStorageService.setItem('default-view', 'phylogenetic-tree');\r\n        // this.visuals.microbeTrace.commonService.localStorageService.setItem('default-distance-metric', 'SNPs');\r\n        this.visuals.microbeTrace.commonService.applyAuspice(file.contents).then(auspiceData => {\r\n          this.visuals.microbeTrace.commonService.clearData();\r\n          this.visuals.microbeTrace.commonService.session = this.visuals.microbeTrace.commonService.sessionSkeleton();\r\n\r\n          console.log(auspiceData[\"tree\"][\"children\"][0]);\r\n          // This is a bizarre line, but I need to check if the div values are more or less than one. The first one is always zero, so we need to go to the second one\r\n          if(auspiceData[\"tree\"][\"children\"][0][\"data\"][\"div\"] > 0 && auspiceData[\"tree\"][\"children\"][0][\"data\"][\"div\"] < 1){\r\n            this.visuals.microbeTrace.commonService.session.style.widgets['default-distance-metric'] = 'tn93';\r\n            this.visuals.microbeTrace.metric = 'tn93';\r\n            this.SelectedDefaultDistanceMetricVariable = 'tn93';\r\n            this.onDistanceMetricChange('tn93');\r\n            this.visuals.microbeTrace.SelectedDistanceMetricVariable = 'tn93';\r\n            this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedDistanceMetricVariable = 'tn93';\r\n            $('#default-distance-metric').val('tn93').trigger('change');\r\n            console.log(this.displayloadingInformationModal);\r\n            $('#default-distance-threshold', '#link-threshold').attr('step', 1).val(0.015).trigger('change');\r\n            this.visuals.microbeTrace.commonService.session.style.widgets['link-threshold'] = 0.015;\r\n            this.SelectedDefaultDistanceThresholdVariable = '0.015';\r\n            this.onLinkThresholdChange('0.015');\r\n            this.visuals.microbeTrace.SelectedLinkThresholdVariable = '0.015';\r\n            this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = 0.015;\r\n          } else {\r\n            this.visuals.microbeTrace.commonService.session.style.widgets['default-distance-metric'] = 'snps';\r\n            this.visuals.microbeTrace.metric = 'snps';\r\n            this.SelectedDefaultDistanceMetricVariable = 'snps';\r\n            this.onDistanceMetricChange('snps');\r\n            this.visuals.microbeTrace.SelectedDistanceMetricVariable = 'snps';\r\n            this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedDistanceMetricVariable = 'snps';\r\n            $('#default-distance-metric').val('SNPs').trigger('change');\r\n            $('#default-distance-threshold', '#link-threshold').attr('step', 1).val(7).trigger('change');\r\n            this.visuals.microbeTrace.commonService.session.style.widgets['link-threshold'] = 7;\r\n            this.SelectedDefaultDistanceThresholdVariable = '7';\r\n            this.onLinkThresholdChange('7');\r\n            this.visuals.microbeTrace.SelectedLinkThresholdVariable = '7';\r\n            this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = 7;\r\n          }\r\n          this.visuals.microbeTrace.commonService.session.meta.startTime = Date.now();\r\n          this.visuals.microbeTrace.commonService.session.data.tree = auspiceData['tree'];\r\n          this.visuals.microbeTrace.commonService.session.data.newickString = auspiceData['newick'];\r\n          let nodeCount = 0;\r\n          const nodeRegex = /^NODE_[0-9]{7}$/i;\r\n          auspiceData['nodes'].forEach(node => {\r\n            if (!nodeRegex.test(node.id) && node.id !== 'wrapper') {\r\n              const nodeKeys = Object.keys(node);\r\n              nodeKeys.forEach( key => {\r\n                if (this.visuals.microbeTrace.commonService.session.data.nodeFields.indexOf(key) === -1) {\r\n                  this.visuals.microbeTrace.commonService.session.data.nodeFields.push(key);\r\n                }\r\n                if (! node.hasOwnProperty('origin') ) {\r\n                  node.origin = [];\r\n                }\r\n                nodeCount += this.visuals.microbeTrace.commonService.addNode(node, true);\r\n              });\r\n            }\r\n          });\r\n          let linkCount = 0;\r\n          auspiceData['links'].forEach(link => {\r\n            linkCount += this.visuals.microbeTrace.commonService.addLink(link, true);\r\n          });\r\n\r\n          this.visuals.microbeTrace.commonService.runHamsters();\r\n          this.showMessage(` - Parsed ${nodeCount} New Nodes and ${linkCount} new Links from Auspice file.`);\r\n          if (fileNum === nFiles) this.processData();\r\n          return nodeCount;\r\n        });\r\n        this.visuals.microbeTrace.commonService.updateNetwork();\r\n        this.visuals.microbeTrace.commonService.updateStatistics();\r\n        if(this.commonService.debugMode) {\r\n          console.log(this.visuals.microbeTrace.commonService.session);\r\n        }\r\n      } else if (file.format === 'fasta') {\r\n\r\n        this.showMessage(`Parsing ${file.name} as FASTA...`);\r\n        let newNodes = 0;\r\n        this.visuals.microbeTrace.commonService.parseFASTA(file.contents).then(seqs => {\r\n          const n = seqs.length;\r\n          for (let i = 0; i < n; i++) {\r\n            let node = seqs[i];\r\n            if (!node) continue;\r\n            newNodes += this.visuals.microbeTrace.commonService.addNode({\r\n              _id: this.visuals.microbeTrace.commonService.filterXSS(node.id),\r\n              seq: this.visuals.microbeTrace.commonService.filterXSS(node.seq),\r\n              origin: origin\r\n            }, check);\r\n          }\r\n\r\n          console.log('FASTA Merge time:', (Date.now() - start).toLocaleString(), 'ms');\r\n          this.showMessage(` - Parsed ${newNodes} New, ${seqs.length} Total Nodes from FASTA.`);\r\n          if (fileNum === nFiles) this.processData();\r\n        });\r\n\r\n      } else if (file.format === 'link') {\r\n\r\n        this.showMessage(`Parsing ${file.name} as Link List...`);\r\n        let l = 0;\r\n\r\n        let sources = [];\r\n        let targets = [];\r\n\r\n        /**\r\n         * Processes and then adds link. updates value of l\r\n         * @param {object} link \r\n         */\r\n        let forEachLink = link => {\r\n          const keys = Object.keys(link);\r\n          const n = keys.length;\r\n          let safeLink = {};\r\n          // for each key in link object\r\n          for (let i = 0; i < n; i++) {\r\n            let key = this.visuals.microbeTrace.commonService.filterXSS(keys[i]);\r\n            // console.log('key is: ',key);\r\n\r\n            if(key === \"distance\") {\r\n              // console.log('key is distance');\r\n              link[key] = parseFloat(link[key]);\r\n            } else if (key === 'origin') {\r\n              // related to zenhub#810: link list csv was exported from table view and unable to be loaded correctly; this code create a new linkField when it runs into field called origin \r\n              link['originColumnFromFile'] = link['origin'].split('\\n')\r\n              safeLink['originColumnFromFile'] = link['originColumnFromFile'];\r\n              link['origin'] = origin;\r\n\r\n              if (!this.visuals.microbeTrace.commonService.includes(this.visuals.microbeTrace.commonService.session.data.linkFields, 'originColumnFromFile')) {\r\n                this.visuals.microbeTrace.commonService.session.data.linkFields.push('originColumnFromFile');\r\n              }\r\n            }\r\n            \r\n            safeLink[key] = link[key];\r\n            // console.log('safelink key is: ',safeLink[key]);\r\n            // console.log('safelink is: x',safeLink);\r\n\r\n            if (!this.visuals.microbeTrace.commonService.includes(this.visuals.microbeTrace.commonService.session.data.linkFields, key)) {\r\n              this.visuals.microbeTrace.commonService.session.data.linkFields.push(key);\r\n            }\r\n          }\r\n\r\n          let src = '' + safeLink[file.field1];\r\n          let tgt = '' + safeLink[file.field2];\r\n\r\n          sources.push(src);\r\n          targets.push(tgt);\r\n\r\n          let srcIndex = targets.findIndex(t => t == src);\r\n          let tgtIndex = sources.findIndex(s => s == tgt);\r\n\r\n          // console.log(\"safe link is: \",safeLink);\r\n\r\n          // Link is the same -> bidirectional\r\n          if(srcIndex != -1 && tgtIndex != -1) {\r\n              \r\n            // console.log('link same');\r\n            // Set distance if distance set (field 3)\r\n            l += this.visuals.microbeTrace.commonService.addLink(Object.assign({\r\n               source: '' + safeLink[file.field1],\r\n               target: '' + safeLink[file.field2],\r\n               origin: origin,\r\n               visible: true,\r\n               directed : file.field3 == 'None' ? true : false,\r\n               bidirectional: file.field3 == 'None' ? true : false,\r\n               distance: file.field3 == 'None' ? 0 : parseFloat(safeLink[file.field3]),\r\n               hasDistance : file.field3 == 'None' ? false : true,\r\n               distanceOrigin: file.field3 == 'None' ? '' : file.name\r\n             }, safeLink), check);\r\n\r\n         } else {\r\n\r\n          // console.log(\"distance is: \", file.field3 != 'distance' ? 0 : parseFloat(safeLink[file.field3]))\r\n          // TODO uncomment when testing adding new link\r\n          //  console.log('adding 2: ', _.cloneDeep(Object.assign({\r\n          //         source: '' + safeLink[file.field1],\r\n          //         target: '' + safeLink[file.field2],\r\n          //         origin: origin,\r\n          //         visible: true,\r\n          //         directed : file.field3 != 'distance' ? true : false,\r\n          //         bidirectional: file.field3 != 'distance' ? true : false,\r\n          //         distance: file.field3 != 'distance' ? 0 : parseFloat(safeLink[file.field3]),\r\n          //         hasDistance : file.field3 != 'distance' ? false : true,\r\n          //         distanceOrigin: file.field3 != 'distance' ? '' : file.name\r\n          //       }, safeLink)));\r\n\r\n           l += this.visuals.microbeTrace.commonService.addLink(Object.assign({\r\n               source: '' + safeLink[file.field1],\r\n               target: '' + safeLink[file.field2],\r\n               origin: origin,\r\n               visible: true,\r\n               directed : file.field3 == 'None' ? true : false,\r\n               distance: file.field3 == 'None' ? 0 : parseFloat(safeLink[file.field3]),\r\n               hasDistance : file.field3 == 'None' ? false : true,\r\n               distanceOrigin: file.field3 == 'None' ? '' : file.name\r\n             }, safeLink), check);\r\n         }  \r\n\r\n        //  console.log('matrixx1: ',  JSON.stringify((window as any).context.commonService.temp.matrix));\r\n\r\n\r\n        };\r\n\r\n        if (file.extension === 'xls' || file.extension === 'xlsx') {\r\n\r\n          let workbook = XLSX.read(file.contents, { type: 'array' });\r\n          let data = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]]);\r\n          data.map(forEachLink);\r\n          this.showMessage(` - Parsed ${l} New, ${data.length} Total Links from Link Excel Table.`);\r\n          let n = 0, t = 0;\r\n          let nodeIDs = [];\r\n          const k = data.length;\r\n          // for each line or excel file, check if node exist, if not add it\r\n          for (let i = 0; i < k; i++) {\r\n            const l = data[i];\r\n            const f1 = l[file.field1];\r\n            if (nodeIDs.indexOf(f1) === -1) {\r\n              t++;\r\n              nodeIDs.push(f1);\r\n              n += this.visuals.microbeTrace.commonService.addNode({\r\n                _id: '' + f1,\r\n                origin: origin\r\n              }, true);\r\n            }\r\n            const f2 = l[file.field2];\r\n            if (nodeIDs.indexOf(f2) === -1) {\r\n              t++;\r\n              nodeIDs.push(f2);\r\n              n += this.visuals.microbeTrace.commonService.addNode({\r\n                _id: '' + f2,\r\n                origin: origin\r\n              }, true);\r\n            }\r\n          }\r\n\r\n          console.log('Link Excel Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n          this.showMessage(` - Parsed ${n} New, ${t} Total Nodes from Link Excel Table.`);\r\n          if (fileNum === nFiles) this.processData();\r\n\r\n        } else if (file.extension === 'json') {\r\n            const results = JSON.parse(file.contents);\r\n            if (!results || results.length === 0) return;\r\n\r\n            let data = results;\r\n            data.map(forEachLink);\r\n            this.showMessage(` - Parsed ${l} New, ${data.length} Total Links from Link JSON.`);\r\n            if (data.length > 0)\r\n              Object.keys(data[0]).forEach(key => {\r\n                const safeKey = this.visuals.microbeTrace.commonService.filterXSS(key);\r\n\r\n                if (!this.visuals.microbeTrace.commonService.includes(this.visuals.microbeTrace.commonService.session.data.linkFields, safeKey)) {\r\n                  this.visuals.microbeTrace.commonService.session.data.linkFields.push(safeKey);\r\n                }\r\n              });\r\n            let newNodes = 0, totalNodes = 0;\r\n            const n = data.length;\r\n            let nodeIDs = [];\r\n            // for each object in json, check if node exist, if not add it\r\n            for (let i = 0; i < n; i++) {\r\n\r\n              const l = data[i];\r\n              const f1 = l[file.field1];\r\n              if (nodeIDs.indexOf(f1) === -1) {\r\n                totalNodes++;\r\n                newNodes += this.visuals.microbeTrace.commonService.addNode({\r\n                  _id: '' + f1,\r\n                  origin: origin\r\n                }, true);\r\n              }\r\n              const f2 = l[file.field2];\r\n              if (nodeIDs.indexOf(f2) === -1) {\r\n                totalNodes++;\r\n                newNodes += this.visuals.microbeTrace.commonService.addNode({\r\n                  _id: '' + f2,\r\n                  origin: origin\r\n                }, true);\r\n              }\r\n            }\r\n\r\n            console.log('Link JSON Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n            this.showMessage(` - Parsed ${newNodes} New, ${totalNodes} Total Nodes from Link JSON.`);\r\n            if (fileNum === nFiles) this.processData();\r\n          } else {\r\n\r\n            Papa.parse(file.contents, {\r\n              header: true,\r\n              dynamicTyping: true,\r\n              skipEmptyLines: true,\r\n              complete: results => {\r\n                let data = results.data;\r\n                data.map(forEachLink);\r\n                this.showMessage(` - Parsed ${l} New, ${data.length} Total Links from Link CSV.`);\r\n                results.meta.fields.forEach(key => {\r\n                  const safeKey = this.visuals.microbeTrace.commonService.filterXSS(key);\r\n\r\n                  if (!this.visuals.microbeTrace.commonService.includes(this.visuals.microbeTrace.commonService.session.data.linkFields, safeKey)) {\r\n                    this.visuals.microbeTrace.commonService.session.data.linkFields.push(safeKey);\r\n                  }\r\n                });\r\n                let newNodes = 0, totalNodes = 0;\r\n                const n = data.length;\r\n                let nodeIDs = [];\r\n                for (let i = 0; i < n; i++) {\r\n                  const l = data[i];\r\n                  const f1 = l[file.field1];\r\n                  if (nodeIDs.indexOf(f1) === -1) {\r\n                    totalNodes++;\r\n                    newNodes += this.visuals.microbeTrace.commonService.addNode({\r\n                      _id: '' + f1,\r\n                      origin: origin\r\n                    }, true);\r\n                  }\r\n                  const f2 = l[file.field2];\r\n                  if (nodeIDs.indexOf(f2) === -1) {\r\n                    totalNodes++;\r\n                    newNodes += this.visuals.microbeTrace.commonService.addNode({\r\n                      _id: '' + f2,\r\n                      origin: origin\r\n                    }, true);\r\n                  }\r\n                }\r\n\r\n                console.log('Link CSV Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n                this.showMessage(` - Parsed ${newNodes} New, ${totalNodes} Total Nodes from Link CSV.`);\r\n                if (fileNum === nFiles) this.processData();\r\n              }\r\n            });\r\n          }\r\n      } else if (file.format === 'node') {\r\n\r\n        this.showMessage(`Parsing ${file.name} as Node List...`);\r\n        if(this.commonService.debugMode) {\r\n          console.log(file.field1);\r\n        }\r\n\r\n        let m = 0, n = 0;\r\n\r\n        if (file.extension === 'xls' || file.extension === 'xlsx') {\r\n\r\n          let workbook = XLSX.read(file.contents, { type: 'array' });\r\n          let data = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]]);\r\n          data.forEach(node => {\r\n            let safeNode = {\r\n              _id: this.visuals.microbeTrace.commonService.filterXSS('' + node[file.field1]),\r\n              seq: (file.field2 === 'None') ? '' : this.visuals.microbeTrace.commonService.filterXSS(node[file.field2]),\r\n              origin: origin\r\n            };\r\n            Object.keys(node).forEach(key => {\r\n              let safeKey = this.visuals.microbeTrace.commonService.filterXSS(key);\r\n              if (!this.visuals.microbeTrace.commonService.includes(this.visuals.microbeTrace.commonService.session.data.nodeFields, safeKey)) {\r\n                this.visuals.microbeTrace.commonService.session.data.nodeFields.push(safeKey);\r\n              }\r\n              safeNode[safeKey] = this.visuals.microbeTrace.commonService.filterXSS(node[key]);\r\n            });\r\n            m += this.visuals.microbeTrace.commonService.addNode(safeNode, check);\r\n          });\r\n\r\n          console.log('Node Excel Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n          this.showMessage(` - Parsed ${m} New, ${n} Total Nodes from Node Excel Table.`);\r\n          if (fileNum === nFiles) this.processData();\r\n\r\n        } else\r\n          if (file.extension === 'json') {\r\n            const results = JSON.parse(file.contents);\r\n            if (!results || results.length === 0) return;\r\n            results.forEach(data => {\r\n\r\n              let node = data;//data[0]             \r\n\r\n              if (node[file.field1] && node[file.field1].toString().trim()) {\r\n\r\n                let safeNode = {\r\n                  _id: this.visuals.microbeTrace.commonService.filterXSS('' + node[file.field1]),\r\n                  seq: (file.field2 === 'None') ? '' : this.visuals.microbeTrace.commonService.filterXSS(node[file.field2]),\r\n                  origin: origin\r\n                };\r\n\r\n                Object.keys(node).forEach(key => {\r\n                  let safeKey = this.visuals.microbeTrace.commonService.filterXSS(key);\r\n                  if (!this.visuals.microbeTrace.commonService.includes(this.visuals.microbeTrace.commonService.session.data.nodeFields, safeKey)) {\r\n                    this.visuals.microbeTrace.commonService.session.data.nodeFields.push(safeKey);\r\n                  }\r\n                  safeNode[safeKey] = this.visuals.microbeTrace.commonService.filterXSS(node[key]);\r\n                });\r\n                m += this.visuals.microbeTrace.commonService.addNode(safeNode, check);\r\n              }\r\n            })\r\n\r\n            console.log('Node JSON Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n            this.showMessage(` - Parsed ${m} New, ${n} Total Nodes from Node JSON.`);\r\n\r\n            if (fileNum === nFiles) this.processData();\r\n\r\n          } else {\r\n\r\n            Papa.parse(file.contents, {\r\n              header: true,\r\n              dynamicTyping: true,\r\n              skipEmptyLines: true,\r\n              step: data => {\r\n\r\n                let node = data.data;\r\n\r\n                if (node[file.field1] && node[file.field1].toString().trim()) {\r\n\r\n                  let safeNode = {\r\n                    _id: this.visuals.microbeTrace.commonService.filterXSS('' + node[file.field1]),\r\n                    seq: (file.field2 === 'None') ? '' : this.visuals.microbeTrace.commonService.filterXSS(node[file.field2]),\r\n                    origin: origin\r\n                  };\r\n\r\n                  Object.keys(node).forEach(key => {\r\n                    let safeKey = this.visuals.microbeTrace.commonService.filterXSS(key);\r\n                    if (!this.visuals.microbeTrace.commonService.includes(this.visuals.microbeTrace.commonService.session.data.nodeFields, safeKey)) {\r\n                      this.visuals.microbeTrace.commonService.session.data.nodeFields.push(safeKey);\r\n                    }\r\n                    safeNode[safeKey] = this.visuals.microbeTrace.commonService.filterXSS(node[key]);\r\n                  });\r\n                  m += this.visuals.microbeTrace.commonService.addNode(safeNode, check);\r\n                }\r\n              },\r\n              complete: () => {\r\n\r\n                console.log('Node CSV Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n                this.showMessage(` - Parsed ${m} New, ${n} Total Nodes from Node CSV.`);\r\n\r\n                if (fileNum === nFiles) this.processData();\r\n              }\r\n            });\r\n          }\r\n\r\n      } else if (file.format === 'matrix') {\r\n\r\n        this.showMessage(`Parsing ${file.name} as Distance Matrix...`);\r\n\r\n        if (file.extension === 'xls' || file.extension === 'xlsx') {\r\n\r\n          let workbook = XLSX.read(file.contents, { type: 'array' });\r\n          let data = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]], { header: 1 });\r\n          let nodeIDs = [], nn = 0, nl = 0;\r\n          data.forEach((row: any, i) => {\r\n            if (i === 0) {\r\n              nodeIDs = row;\r\n              nodeIDs.forEach((cell, k) => {\r\n                if (k > 0) {\r\n                  nn += this.visuals.microbeTrace.commonService.addNode({\r\n                    _id: this.visuals.microbeTrace.commonService.filterXSS('' + cell),\r\n                    origin: origin\r\n                  }, check);\r\n                }\r\n              });\r\n            } else {\r\n              const source = this.visuals.microbeTrace.commonService.filterXSS('' + row[0]);\r\n              row.forEach((cell, j) => {\r\n                if (j === 0) return;\r\n                const target = this.visuals.microbeTrace.commonService.filterXSS('' + nodeIDs[j]);\r\n                if (source === target) return;\r\n                nl += this.visuals.microbeTrace.commonService.addLink({\r\n                  source: source,\r\n                  target: target,\r\n                  origin: origin,\r\n                  distance: parseFloat(cell),\r\n                  directed: false,\r\n                  hasDistance: true,\r\n                  distanceOrigin: file.name\r\n                }, check);\r\n              });\r\n            }\r\n          });\r\n\r\n          console.log('Distance Matrix Excel Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n          this.showMessage(` - Parsed ${nn} New, ${data.length - 1} Total Nodes from Excel Distance Matrix.`);\r\n          this.showMessage(` - Parsed ${nl} New, ${((data.length - 1) ** 2 - (data.length - 1)) / 2} Total Links from Excel Distance Matrix.`);\r\n          if (fileNum === nFiles) this.processData();\r\n\r\n        } else {\r\n\r\n          this.visuals.microbeTrace.commonService.parseCSVMatrix(file).then((o: any) => {\r\n            this.showMessage(` - Parsed ${o.nn} New, ${o.tn} Total Nodes from Distance Matrix.`);\r\n            this.showMessage(` - Parsed ${o.nl} New, ${o.tl} Total Links from Distance Matrix.`);\r\n            if (fileNum === nFiles) this.processData();\r\n          });\r\n        }\r\n\r\n      } else { // if(file.format === 'newick'){\r\n\r\n        this.visuals.microbeTrace.commonService.resetData();\r\n        let links = 0;\r\n        let newLinks = 0;\r\n        let newNodes = 0;\r\n        this.visuals.microbeTrace.commonService.session.data.newickString = file.contents;\r\n        const tree = patristic.parseNewick(file.contents);\r\n        let m = tree.toMatrix(), matrix = m.matrix, labels = m.ids.map(this.visuals.microbeTrace.commonService.filterXSS), n = labels.length;\r\n        for (let i = 0; i < n; i++) {\r\n          const source = labels[i];\r\n          newNodes += this.visuals.microbeTrace.commonService.addNode({\r\n            _id: source,\r\n            origin: origin\r\n          }, check);\r\n          for (let j = 0; j < i; j++) {\r\n            newLinks += this.visuals.microbeTrace.commonService.addLink({\r\n              source: source,\r\n              target: labels[j],\r\n              origin: origin,\r\n              distance: parseFloat(matrix[i][j]),\r\n              distanceOrigin: file.name,\r\n              hasDistance: true\r\n            }, check);\r\n            links++;\r\n          }\r\n        }\r\n        console.log('Newick Tree Parse time:', (Date.now() - start).toLocaleString(), 'ms');\r\n        this.showMessage(` - Parsed ${newNodes} New, ${n} Total Nodes from Newick Tree.`);\r\n        this.showMessage(` - Parsed ${newLinks} New, ${links} Total Links from Newick Tree.`);\r\n        if (fileNum === nFiles) this.processData();\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * Adds links for nodes with no edge?\r\n   * Then calls processSequence\r\n   */\r\n  processData() {\r\n    let nodes = this.visuals.microbeTrace.commonService.session.data.nodes;\r\n    if(this.commonService.debugMode) {\r\n      console.log(nodes);\r\n    }\r\n    this.visuals.microbeTrace.commonService.session.data.nodeFilteredValues = nodes;\r\n    //Add links for nodes with no edges\r\n    this.uniqueNodes.forEach(x => {\r\n      this.visuals.microbeTrace.commonService.addLink(Object.assign({\r\n        source: '' + x,\r\n        target: '' + x,\r\n        origin: origin,\r\n        visible: true,\r\n        distance: 0,\r\n      }, 'generated'));\r\n    });\r\n\r\n    this.processSequence()\r\n  }\r\n\r\n  /**\r\n   * If sequences are present, processes them by aligning if needed, computing consensus, consensus distances, ambiguity counts, and then links\r\n   */\r\n  async processSequence() {\r\n\r\n    if (!this.visuals.microbeTrace.commonService.session.meta.anySequences) return this.visuals.microbeTrace.commonService.runHamsters();\r\n    this.visuals.microbeTrace.commonService.session.data.nodeFields.push('seq');\r\n    let subset = [];\r\n    let nodes = this.visuals.microbeTrace.commonService.session.data.nodes;\r\n    const n = nodes.length;\r\n    const gapString = '-'.repeat(this.visuals.microbeTrace.commonService.session.data.reference.length);\r\n    for (let i = 0; i < n; i++) {\r\n      const d = nodes[i];\r\n      if (!d.seq) {\r\n        d.seq = gapString;\r\n      } else {\r\n        subset.push(d);\r\n      }\r\n    }\r\n    if (this.visuals.microbeTrace.commonService.session.style.widgets['align-sw']) {\r\n      this.showMessage('Aligning Sequences...');\r\n      let output = await (this.visuals.microbeTrace.commonService.session as any).align({\r\n        reference: this.visuals.microbeTrace.commonService.session.data.reference,\r\n        isLocal: $('#localAlign').is(':checked'),\r\n        match: [$('#alignerMatch').val(), $('#alignerMismatch').val()].map(parseFloat),\r\n        gap: [$('#alignerGapO').val(), $('#alignerGapE').val()].map(parseFloat),\r\n        nodes: subset\r\n      });\r\n      const start = Date.now();\r\n      const m = subset.length;\r\n      for (let j = 0; j < m; j++) {\r\n        Object.assign(subset[j], output[j]);\r\n      }\r\n      console.log(\"Alignment Merge time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n    }\r\n    const start = Date.now();\r\n    for (let k = 0; k < n; k++) {\r\n      let node = nodes[k];\r\n      node['_seqInt'] = tn93.toInts(node['seq']);\r\n    }\r\n    console.log(\"Integer Sequence Translation time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n\r\n    (this.visuals.microbeTrace.commonService.session.data as any).consensus = await this.visuals.microbeTrace.commonService.computeConsensus();\r\n    await this.visuals.microbeTrace.commonService.computeConsensusDistances();\r\n    subset.sort((a, b) => a['_diff'] - b['_diff']);\r\n    if (this.visuals.microbeTrace.commonService.session.style.widgets['ambiguity-resolution-strategy']) {\r\n      await this.visuals.microbeTrace.commonService.computeAmbiguityCounts();\r\n    }\r\n    this.showMessage('Computing Links based on Genomic Proximity...');\r\n    const k = await this.visuals.microbeTrace.commonService.computeLinks(subset);\r\n    this.showMessage(` - Found ${k} New Links from Genomic Proximity`);\r\n    this.visuals.microbeTrace.commonService.runHamsters();\r\n\r\n\r\n    this.showMessage(\"Finishing...\");\r\n\r\n  };\r\n\r\n  /**\r\n   * XXXXX not currently used; if implemented in future switch open parameter to boolean XXXXX\r\n   * @param open 0 or 1\r\n   */\r\n  accordianToggle( open : Number) {\r\n\r\n    if(open){\r\n      $(\".m-content\").css(\"overflow-y\", \"auto\");\r\n    } else {\r\n      $(\".m-content\").css(\"overflow-y\", \"hidden\");\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * When a new file/files are add, each one if processed by processFile\r\n   * @param files \r\n   */\r\n  processFiles(files?: FileList) {\r\n    this.isLoadingFiles = true;\r\n\r\n    if (Array.from(files).length > 0) {\r\n\r\n      Array.from(files).map(file => {\r\n        if(this.commonService.debugMode) {\r\n          console.log('files: ', file);\r\n        }\r\n        this.processFile(file);\r\n      });\r\n    }\r\n\r\n    this.isLoadingFiles = false;\r\n\r\n    setTimeout(() => {\r\n      this.isLoadingFiles = false;\r\n\r\n    }, 2000);\r\n  };\r\n\r\n  /**\r\n   * Gets file extension and calls appropriate function to load info into MicrobeTrace.\r\n   * For example, for json files commonService.processJSON is used.\r\n   * Adds file to commonService.session.files and adds file to table with this.addToTable\r\n   * \r\n   * XXXXX Currrently unable to load zip files XXXXX\r\n   * @returns \r\n   */\r\n  processFile(rawfile?) {\r\n    if(!rawfile) {\r\n      rawfile = this.visuals.microbeTrace.commonService.session.files[0];\r\n    }\r\n\r\n    if(this.commonService.debugMode) {\r\n      console.log('raw file: ', rawfile);\r\n    }\r\n\r\n\r\n    $('#loading-information').html('');\r\n\r\n    const extension = rawfile.name.split('.').pop().toLowerCase();\r\n    if (extension === 'zip') {\r\n      //debugger;\r\n      // let new_zip = new JSZip();\r\n      // new_zip\r\n      //     .loadAsync(rawfile)\r\n      //     .then(zip => {\r\n      //         zip.forEach((relativePath, zipEntry) => {\r\n      //             zipEntry.async(\"text\").then(c => {\r\n      //                 this.visuals.microbeTrace.commonService.processJSON(c, zipEntry.name.split('.').pop())\r\n      //             });\r\n      //         });\r\n      //     });\r\n      return;\r\n    }\r\n\r\n    if (extension === 'microbetrace' || extension === 'hivtrace') {\r\n      //debugger;\r\n      let reader = new FileReader();\r\n      reader.onloadend = out => this.visuals.microbeTrace.commonService.processJSON(out.target, extension);\r\n      reader.readAsText(rawfile, 'UTF-8');\r\n      return;\r\n    }\r\n    if (extension === 'svg') {\r\n      //debugger;\r\n      let reader = new FileReader();\r\n      reader.onloadend = out => this.visuals.microbeTrace.commonService.processSVG(out.target);\r\n      reader.readAsText(rawfile, 'UTF-8');\r\n      return;\r\n    }\r\n    if (extension === 'json') {\r\n      const fileName = this.visuals.microbeTrace.commonService.filterXSS(rawfile.name);\r\n      let reader = new FileReader();\r\n      reader.onloadend = (out) => {\r\n        const output = JSON.parse(out.target['result'] as string);\r\n        console.log(output);\r\n        if (output.meta && output.tree) {\r\n          const auspiceFile = { contents: output, name: fileName, extension: extension};\r\n          this.visuals.microbeTrace.commonService.session.files.push(auspiceFile);\r\n          this.addToTable(auspiceFile);\r\n          // this.visuals.microbeTrace.commonService.temp.auspiceOutput = output;\r\n        } else {\r\n          this.visuals.microbeTrace.commonService.processJSON(out.target, extension);\r\n        }\r\n      };\r\n      reader.readAsText(rawfile, 'UTF-8');\r\n      return;\r\n    }\r\n\r\n    fileto.promise(rawfile, (extension === 'xlsx' || extension === 'xls') ? 'ArrayBuffer' : 'Text').then(file => {\r\n      //debugger;\r\n      file.name = this.visuals.microbeTrace.commonService.filterXSS(file.name);\r\n      file.extension = file.name.split('.').pop().toLowerCase();\r\n      this.visuals.microbeTrace.commonService.session.files.push(file);\r\n      this.addToTable(file);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Removes all files from commonService.session.files, sets this.nodeIds and this.edgeIds to empty arrays [].\r\n   * Calls nodeEdgeCheck\r\n   */\r\n  removeAllFiles() {\r\n    const fileTableRows = $(\".file-table-row\");\r\n    fileTableRows.slideUp(() => fileTableRows.remove());\r\n\r\n    this.commonService.session.files.forEach(file => {\r\n      this.removeFile(file.name, false);\r\n    })\r\n    this.visuals.microbeTrace.commonService.session.files = [];\r\n    this.nodeIds = [];\r\n    this.edgeIds = [];\r\n\r\n    this.nodeEdgeCheck();\r\n  }\r\n\r\n  /**\r\n   * Gets information from file about extension, file type, and header and uses that information to addTableTile for file-table\r\n   */\r\n  addToTable(file) {\r\n    if(this.commonService.debugMode) {\r\n      console.log(file);\r\n    }\r\n\r\n    //debugger;\r\n    const extension = file.extension ? file.extension : this.visuals.microbeTrace.commonService.filterXSS(file.name).split('.').pop().toLowerCase();\r\n    const isFasta = extension.indexOf('fas') > -1;\r\n    const isNewick = extension.indexOf('nwk') > -1 || extension.indexOf('newick') > -1;\r\n    const isXL = (extension === 'xlsx' || extension === 'xls');\r\n    const isJSON = (extension === 'json');\r\n    const isAuspice = (extension === 'json' && file.contents.meta && file.contents.tree);\r\n    const isNode = this.visuals.microbeTrace.commonService.includes(file.name.toLowerCase(), 'node') || (file.format && file.format.toLowerCase() === 'node');\r\n    if (isXL) {\r\n      let workbook = XLSX.read(file.contents, { type: 'array' });\r\n      let data = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]]);\r\n      let headers = [];\r\n      data.forEach(row => {\r\n        Object.keys(row).forEach(key => {\r\n          const safeKey = this.visuals.microbeTrace.commonService.filterXSS(key);\r\n          if (!this.visuals.microbeTrace.commonService.includes(headers, safeKey)) headers.push(safeKey);\r\n        });\r\n      });\r\n      addTableTile(headers, this);\r\n    } else if (isJSON) {\r\n        let data = [];\r\n        console.log('This is a JSON file');\r\n        if ( (typeof file.contents) === 'string') {\r\n          data = JSON.parse(file.contents);\r\n        } else {\r\n          console.log(file);\r\n          data = [file.contents];\r\n        }\r\n\r\n        addTableTile(Object.keys(data[0]).map(this.visuals.microbeTrace.commonService.filterXSS), this);\r\n\r\n        if (!isFasta && !isNewick && isNode) {\r\n          this.loadNodes(file.name, data, true);\r\n        }\r\n        if (!isFasta && !isNewick && !isNode) {\r\n          this.loadEdges(file.name, data, true);\r\n        }\r\n\r\n        this.nodeEdgeCheck();\r\n\r\n    } else if (isFasta) {\r\n      //let that = this;\r\n      this.commonService.parseFASTA(file.contents).then((output) => {\r\n        addTableTile([\"id\", \"seq\"], this);\r\n\r\n        this.nodeEdgeCheck();\r\n        })\r\n    } else {\r\n      Papa.parse(file.contents, {\r\n        header: true,\r\n        skipEmptyLines: true,\r\n        complete: output => {\r\n          addTableTile(output.meta.fields.map(this.visuals.microbeTrace.commonService.filterXSS), this);\r\n\r\n          if (!isFasta && !isNewick && isNode) {\r\n            this.loadNodes(file.name, output, false);\r\n          }\r\n          if (!isFasta && !isNewick && !isNode) {\r\n            this.loadEdges(file.name, output, false);\r\n          }\r\n\r\n          this.nodeEdgeCheck();\r\n        }\r\n      });\r\n    }\r\n\r\n    //For the love of all that's good...\r\n    //TODO: Rewrite this as a [Web Component](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements) or [something](https://reactjs.org/docs/react-component.html) or something.\r\n    /**\r\n     * Adds a file-table-row for the file.\r\n     */\r\n    function addTableTile(headers, context) {\r\n\r\n\r\n      let parentContext = context;\r\n      let root = $('<div class=\"file-table-row\" style=\"position: relative; z-index: 1;margin-bottom: 24px;\"></div>').data('filename', file.name);\r\n      let fnamerow = $('<div class=\"row w-100\"></div>');\r\n      $('<div class=\"file-name col\"></div>')\r\n        .append($('<a href=\"javascript:void(0);\" class=\"far flaticon-delete-1 align-middle p-1\" title=\"Remove this file\"></a>').on('click', () => {\r\n          parentContext.commonService.session.files.splice(parentContext.commonService.session.files.findIndex(f => f.name === file.name), 1);\r\n          context.visuals.filesPlugin.removeFile(file.name);\r\n          $('#launch').prop('disabled', false).focus();\r\n          $('#launch').text('Update');\r\n          root.slideUp(() => root.remove());\r\n        }))\r\n        .append($('<a href=\"javascript:void(0);\" class=\"far flaticon2-download-1 align-middle p-1\" title=\"Resave this file\"></a>').on('click', () => {\r\n          saveAs(new Blob([file.contents], { type: file.type || 'text' }), file.name);\r\n        }))\r\n        .append('<span class=\"p-1\">' + file.name + '</span>')\r\n        .append(`\r\n                    <div class=\"btn-group btn-group-toggle btn-group-sm float-right\" data-toggle=\"buttons\">\r\n                      <label class=\"btn btn-light${!isFasta && !isNewick && !isNode && !isAuspice ? ' active' : ''}\">\r\n                        <input type=\"radio\" name=\"options-${file.name}\" data-type=\"link\" autocomplete=\"off\"${!isFasta && !isNewick && !isNode ? ' checked' : ''}>Link\r\n                      </label>\r\n                      <label class=\"btn btn-light${!isFasta && !isNewick && isNode ? ' active' : ''}\">\r\n                        <input type=\"radio\" name=\"options-${file.name}\" data-type=\"node\" autocomplete=\"off\"${!isFasta && !isNewick && isNode ? ' checked' : ''}>Node\r\n                      </label>\r\n                      <label class=\"btn btn-light\">\r\n                        <input type=\"radio\" name=\"options-${file.name}\" data-type=\"matrix\" autocomplete=\"off\">Matrix\r\n                      </label>\r\n                      <label class=\"btn btn-light${isFasta ? ' active' : ''}\">\r\n                        <input type=\"radio\" name=\"options-${file.name}\" data-type=\"fasta\" autocomplete=\"off\"${isFasta ? ' checked' : ''}>FASTA\r\n                      </label>\r\n                      <label class=\"btn btn-light${isNewick ? ' active' : ''}\">\r\n                        <input type=\"radio\" name=\"options-${file.name}\" data-type=\"newick\" autocomplete=\"off\"${isNewick ? ' checked' : ''}>Newick\r\n                      </label>\r\n                      <label class=\"btn btn-light${isAuspice ? ' active' : ''}\">\r\n                        <input type=\"radio\" name=\"options-${file.name}\" data-type=\"auspice\" autocomplete=\"off\"${isAuspice ? ' checked' : ''}>Auspice\r\n                      </label>\r\n                    </div>`).appendTo(fnamerow);\r\n\r\n      fnamerow.appendTo(root);\r\n      let optionsrow = $('<div class=\"row w-100\"></div>');\r\n      let options = '<option>None</option>' + headers.map(h => `<option value=\"${h}\">${parentContext.commonService.titleize(h)}</option>`).join('\\n');\r\n      optionsrow.append(`\r\n                  <div class='col-4 '${isFasta || isNewick ? ' style=\"display: none;\"' : ''} data-file='${file.name}'>\r\n                    <label for=\"file-${file.name}-field-1\">${isNode ? 'ID' : 'Source'}</label>\r\n                    <select id=\"file-${file.name}-field-1\" class=\"form-control form-control-sm\">${options}</select>\r\n                  </div>\r\n                  <div class='col-4 '${isFasta || isNewick ? ' style=\"display: none;\"' : ''} data-file='${file.name}'>\r\n                    <label for=\"file-${file.name}-field-2\">${isNode ? 'Sequence' : 'Target'}</label>\r\n                    <select id=\"file-${file.name}-field-2\" class=\"form-control form-control-sm\">${options}</select>\r\n                  </div>\r\n                  <div class='col-4 '${isFasta || isNewick ? ' style=\"display: none;\"' : ''} data-file='${file.name}'>\r\n                    <label for=\"file-${file.name}-field-3\">Distance</label>\r\n                    <select id=\"file-${file.name}-field-3\" class=\"form-control form-control-sm\">${options}</select>\r\n                  </div>`);\r\n\r\n      optionsrow.appendTo(root);\r\n\r\n      function matchHeaders(type) {\r\n\r\n        const these = $(`[data-file='${file.name}'] select`);\r\n        const a = type === 'node' ? ['ID', 'Id', 'id'] : ['SOURCE', 'Source', 'source'],\r\n          b = type === 'node' ? ['SEQUENCE', 'SEQ', 'Sequence', 'sequence', 'seq'] : ['TARGET', 'Target', 'target'],\r\n          c = ['length', 'Length', 'distance', 'Distance', 'snps', 'SNPs', 'tn93', 'TN93'];\r\n        [a, b, c].forEach((list, i) => {\r\n          $(these.get(i)).val(\"None\");\r\n          list.forEach(title => {\r\n            if (parentContext.commonService.includes(headers, title)) $(these.get(i)).val(title);\r\n          });\r\n          if ($(these.get(i)).val() === 'None' &&\r\n            !(i === 1 && type === 'node') && //If Node Sequence...\r\n            !(i === 2 && type === 'link')) { //...or Link distance...\r\n            //...don't match to a variable in the dataset, leave them as \"None\".\r\n            $(these.get(i)).val(headers[i]);\r\n            //Everything else, just guess the next ordinal column.\r\n          }\r\n        });\r\n      }\r\n\r\n      root.appendTo('#file-table');\r\n      matchHeaders($(`[name=\"options-${file.name}\"]:checked`).data('type'));\r\n\r\n      function refit(e: any = null) {\r\n        const type = $(e ? e.target : `[name=\"options-${file.name}\"]:checked`).data('type'),\r\n          these = $(`[data-file='${file.name}']`),\r\n          first = $(these.get(0)),\r\n          second = $(these.get(1)),\r\n          third = $(these.get(2));\r\n        if (type === 'node') {\r\n          first.slideDown().find('label').text('ID');\r\n          second.slideDown().find('label').text('Sequence');\r\n          third.slideUp();\r\n          matchHeaders(type);\r\n        } else if (type === 'link') {\r\n          first.slideDown().find('label').text('Source');\r\n          second.slideDown().find('label').text('Target');\r\n          third.slideDown();\r\n          matchHeaders(type);\r\n        } else {\r\n          these.slideUp();\r\n        }\r\n        parentContext.updateMetadata(file);\r\n\r\n        $('#launch').prop('disabled', false).focus();\r\n      };\r\n\r\n      const fileTable = document.getElementById('file-table');\r\n      const selectElements = fileTable.querySelectorAll('select');\r\n\r\n      for (let i = 0; i < selectElements.length; i++) {\r\n        selectElements[i].addEventListener('change', (event) => {\r\n          // Handle change event here\r\n          parentContext.updateMetadata(file);\r\n        });\r\n      }\r\n\r\n      $(`[name=\"options-${file.name}\"]`).on(\"change\", refit);\r\n      refit();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Updates commonService.session.files info, such as field1, field2 ...etc, based on value user selects\r\n   */\r\n  updateMetadata(file) {\r\n    $('#file-panel .file-table-row').each((i, el) => {\r\n      const $el = $(el);\r\n      const fname = $el.data('filename');\r\n      const selects = $el.find('select');\r\n      const f = this.visuals.microbeTrace.commonService.session.files.find(file => file.name === fname);\r\n      console.log(f);\r\n      if (f) {\r\n        f.format = $el.find('input[type=\"radio\"]:checked').data('type');\r\n        f.field1 = selects.get(0).value;\r\n        f.field2 = selects.get(1).value;\r\n        f.field3 = selects.get(2).value;\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * Populates this.nodeIds\r\n   */\r\n  loadNodes(fileName: any, output: any, isJson: boolean) {\r\n    if (isJson) {\r\n      const data: any[] = output;\r\n      const firstField = Object.keys(data[0])[0];\r\n      if (this.nodeIds.find(x => x.fileName === fileName)) {\r\n        let currentNodeId = this.nodeIds.find(x => x.fileName === fileName)\r\n        currentNodeId.ids = output.map((x: any) => x[firstField])\r\n      } else {\r\n        this.nodeIds.push(\r\n          {\r\n            fileName: fileName, ids: output.map((x: any) => ('' + x[firstField]))\r\n          });\r\n      }\r\n\r\n    }\r\n    else {\r\n      if (this.nodeIds.find(x => x.fileName === fileName)) {\r\n        let currentNodeId = this.nodeIds.find(x => x.fileName === fileName)\r\n        currentNodeId.ids = output.data.map((x: any) => x[output.meta.fields[0]])\r\n      } else {\r\n        this.nodeIds.push(\r\n          {\r\n            fileName: fileName, ids: output.data.map((x: any) => ('' + x[output.meta.fields[0]]))\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Populated this.edgeIds\r\n   */\r\n  loadEdges(fileName: any, output: any, isJson: boolean) {\r\n    if (isJson) {\r\n      const data: any[] = output;\r\n      const fields = Object.keys(data[0]);\r\n      if (this.edgeIds.find(x => x.fileName === fileName)) {\r\n        let currentEdgeId = this.edgeIds.find(x => x.fileName === fileName)\r\n        currentEdgeId.ids = output.map((x: any) => ({\r\n          source: '' + x[fields[0]],\r\n          target: '' + x[fields[1]]\r\n        }))\r\n      } else {\r\n        this.edgeIds.push({\r\n          fileName: fileName,\r\n          ids: output.map((x: any) => ({\r\n            source: '' + x[fields[0]],\r\n            target: '' + x[fields[1]]\r\n          }))\r\n        })\r\n\r\n      }\r\n\r\n    }\r\n    else {\r\n      if (this.edgeIds.find(x => x.fileName === fileName)) {\r\n        let currentEdgeId = this.edgeIds.find(x => x.fileName === fileName)\r\n        currentEdgeId.ids = output.data.map((x: any) => ({\r\n          source: '' + x[output.meta.fields[0]],\r\n          target: '' + x[output.meta.fields[1]]\r\n        }))\r\n      } else {\r\n        this.edgeIds.push({\r\n          fileName: fileName,\r\n          ids: output.data.map((x: any) => ({\r\n            source: '' + x[output.meta.fields[0]],\r\n            target: '' + x[output.meta.fields[1]]\r\n          }))\r\n        })\r\n\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Updates this.uniqueEdgeNodes and this.uniqueNodes\r\n   */\r\n  nodeEdgeCheck() {\r\n    // populated with a string[] of unique node ids\r\n    let allNodesListNodes: string[] = [];\r\n    this.nodeIds.forEach(x => {\r\n      x.ids.forEach(y => allNodesListNodes.push(y));\r\n    });\r\n    allNodesListNodes = _.uniq(allNodesListNodes);\r\n\r\n    // populated with a string[] of unique node ids that have a link/edge\r\n    let allEdgeListNodes: string[] = [];\r\n    this.edgeIds.forEach(x => x.ids.forEach(y => {\r\n      allEdgeListNodes.push(y.source);\r\n      allEdgeListNodes.push(y.target);\r\n    }));\r\n    allEdgeListNodes = _.uniq(allEdgeListNodes);\r\n\r\n    this.uniqueEdgeNodes = allEdgeListNodes.filter(x => x && !allNodesListNodes.some(y=>y==x));\r\n    this.uniqueNodes = allNodesListNodes.filter(x => x && !this.uniqueEdgeNodes.some(y=>y==x));\r\n  }\r\n\r\n  /**\r\n   * Removes elements of this.nodeIds and this.edgeIds where the fileName == fileName and then calls nodeEdgeCheck to update uniqueEdgeNodes and uniqueNodes\r\n   * @param fileName \r\n   */\r\n  removeFile(fileName, runNodeEdgeCheck=true) {\r\n    this.nodeIds = this.nodeIds.filter(x => x.fileName != fileName);\r\n    this.edgeIds = this.edgeIds.filter(x => x.fileName != fileName);\r\n    if (runNodeEdgeCheck) this.nodeEdgeCheck();\r\n  }\r\n\r\n  /**\r\n   * Async function that reads sequencing data from fasta files or from csv/excel files with sequence data\r\n   * \r\n   * @returns An array of sequencing objects [{id, seq},]\r\n   */\r\n  async readFastas() {\r\n    const fastas = this.visuals.microbeTrace.commonService.session.files.filter(f => this.visuals.microbeTrace.commonService.includes(f.extension, 'fas'));\r\n    const nodeFilesWithSeqs = this.visuals.microbeTrace.commonService.session.files.filter(f => f.format === \"node\" && f.field2 != \"None\" && f.field2 != \"\");\r\n    if (fastas.length === 0 && nodeFilesWithSeqs.length === 0) return [];\r\n    let data = [];\r\n    for (let i = 0; i < fastas.length; i++) {\r\n      let fasta = fastas[i];\r\n      let nodes = await this.visuals.microbeTrace.commonService.parseFASTA(fasta.contents);\r\n      data = data.concat(nodes);\r\n    }\r\n    \r\n    for(let j = 0; j < nodeFilesWithSeqs.length; j++){\r\n      if (nodeFilesWithSeqs[j].extension == \"csv\") {\r\n        let csv = nodeFilesWithSeqs[j];\r\n        let seqLabel = csv['field2']\r\n          await Papa.parse(csv.contents, {\r\n            header: true,\r\n            skipEmptyLines: true,\r\n            complete: output => {\r\n              output.data.forEach((node) => {\r\n                if (node[seqLabel] != '' || node[seqLabel] != undefined || node[seqLabel] != null ) {\r\n                  data = data.concat({\r\n                    'id': node.id,\r\n                    'seq': node[seqLabel]\r\n                  })\r\n                }\r\n              })\r\n            }})\r\n      // TODO: Cannot presently preview sequences in Node XLSX tables.\r\n      } else {\r\n        let file = nodeFilesWithSeqs[j]\r\n        let seqLabel = file['field2']\r\n        let workbook = XLSX.read(file.contents, { type: 'array' });\r\n        let dataJSON = XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[0]]);\r\n        let headers = [];\r\n        dataJSON.forEach(row => {\r\n          Object.keys(row).forEach(key => {\r\n            const safeKey = this.visuals.microbeTrace.commonService.filterXSS(key);\r\n            if (!this.visuals.microbeTrace.commonService.includes(headers, safeKey)) headers.push(safeKey);\r\n          });\r\n          if ( row[seqLabel] != '' || row[seqLabel] != undefined || row[seqLabel] != null ) {\r\n            data = data.concat({\r\n              'id': row['id'],\r\n              'seq': row[seqLabel]\r\n            })  \r\n          }\r\n        });\r\n          //addTableTile(headers, this);\r\n      }\r\n    }\r\n    return data;\r\n  }\r\n\r\n  async updatePreview(data?) {\r\n    if (!data) {\r\n      data = await this.readFastas();\r\n    }\r\n    $('#alignment-preview').empty().append('<div class=\"spinner-border\" role=\"status\"><span class=\"sr-only\">Loading...</span></div>');\r\n    if ($('#align-sw').is(':checked')) {\r\n      data = await this.visuals.microbeTrace.commonService.align({\r\n        nodes: data,\r\n        reference: this.visuals.microbeTrace.commonService.session.data.reference,\r\n        match: [parseFloat($('#alignerMatch').val().toString()), -parseFloat($('#alignerMismatch').val().toString())],\r\n        gap: [-parseFloat($('#alignerGapO').val().toString()), -parseFloat($('#alignerGapE').val().toString())]\r\n      })\r\n    }\r\n    generateCanvas(data.map(obj => obj.seq.toUpperCase()), {}).then(function(canvas: HTMLCanvasElement) { \r\n      $('#alignment-preview').empty().append(canvas); })\r\n  }\r\n\r\n\r\n  /**\r\n   * Updates SelectedDefaultDistanceThresholdVariable, microbeTrace.SelectedLinkThresholdVariable, and link-threshold widget values.\r\n   * Then calls microbeTrace.onLinkThresholdChanged clusters, nodes, and links as well as visualizations and statistics\r\n   * @param {string} e string representation of link threshold such as '7'\r\n   */\r\n  onLinkThresholdChange = (e) => {\r\n    if(this.commonService.debugMode) {\r\n      console.log('changing link threshold');\r\n    }\r\n    this.SelectedDefaultDistanceThresholdVariable = parseFloat(e);\r\n    this.visuals.microbeTrace.SelectedLinkThresholdVariable = parseFloat(e);\r\n    this.visuals.microbeTrace.commonService.session.style.widgets['link-threshold'] = parseFloat(e);\r\n    this.visuals.microbeTrace.onLinkThresholdChanged();\r\n  }\r\n\r\n  /**\r\n   * Updates this.SelectedDefaultDistanceMetricVariable, microbeTrace.SelectedDistanceMetricVariable, and default-distance-metric widget.\r\n   * Updates link-threshold variable to default values and updates clusters, nodes, links as well as visualizations and statitistics\r\n   * @param {string} e such as 'snps' \r\n   */\r\n  onDistanceMetricChange = (e) => {\r\n    if(this.commonService.debugMode) {\r\n      console.log('distance ch:', e);\r\n    }\r\n    this.SelectedDefaultDistanceMetricVariable = e;\r\n    if (e.toLowerCase() === 'snps') {\r\n      if(this.commonService.debugMode) {\r\n        console.log(\"saw snps\");\r\n      }\r\n      $('#default-distance-threshold, #link-threshold')\r\n        .attr('step', 1)\r\n        .val(7)\r\n        .trigger('change');\r\n\r\n        $(\"#ambiguities-row\").slideUp();\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['default-distance-metric'] = 'snps';\r\n      this.visuals.microbeTrace.SelectedDistanceMetricVariable = 'snps';\r\n      this.visuals.microbeTrace.onDistanceMetricChanged();\r\n      this.onLinkThresholdChange('7');\r\n    } else {\r\n      $('#default-distance-threshold, #link-threshold')\r\n        .attr('step', 0.001)\r\n        .val(0.015)\r\n        .trigger('change');\r\n        $(\"#ambiguities-row\").slideDown();\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['default-distance-metric'] = 'tn93';\r\n      this.visuals.microbeTrace.SelectedDistanceMetricVariable = 'tn93';\r\n      this.visuals.microbeTrace.onDistanceMetricChanged();\r\n      this.onLinkThresholdChange('0.015');\r\n    }\r\n  }\r\n\r\n  onAmbiguityStrategyChanged() {\r\n    this.commonService.session.style.widgets['ambiguity-resolution-strategy'] = this.SelectedAmbiguityResolutionStrategyVariable;\r\n  }\r\n\r\n  onAmbiguityThresholdChanged() {\r\n    this.commonService.session.style.widgets['ambiguity-threshold'] = this.SelectedAmbiguityThresholdVariable;\r\n  }\r\n\r\n  generateSequences() {\r\n    $('#file-prompt').remove();\r\n    $('#launch').prop('disabled', false).focus();\r\n    this.processFile(new File([Papa.unparse(this.commonService.generateSeqs('gen-' + this.visuals.microbeTrace.commonService.session.meta.readyTime + '-', this.SelectedGenerateNumberVariable, 20))], 'generatedNodes.csv'));\r\n  }\r\n\r\n  applyStyleFileSettings() {\r\n    if (this.SelectedDefaultDistanceMetricVariable != this.commonService.session.style.widgets['default-distance-metric']){\r\n      this.SelectedDefaultDistanceMetricVariable = this.commonService.session.style.widgets['default-distance-metric'].toLowerCase();\r\n    }\r\n\r\n    if (this.SelectedAmbiguityResolutionStrategyVariable != this.commonService.session.style.widgets['ambiguity-resolution-strategy']){\r\n        this.SelectedAmbiguityResolutionStrategyVariable = this.commonService.session.style.widgets['ambiguity-resolution-strategy'];\r\n    }\r\n\r\n    if (this.SelectedAmbiguityThresholdVariable = this.commonService.session.style.widgets['ambiguity-threshold']) {\r\n      this.SelectedAmbiguityThresholdVariable = this.commonService.session.style.widgets['ambiguity-threshold'];\r\n    }\r\n\r\n    if (this.SelectedDefaultDistanceThresholdVariable != this.commonService.session.style.widgets['link-threshold']){\r\n        this.SelectedDefaultDistanceThresholdVariable = this.commonService.session.style.widgets['link-threshold'];\r\n    }\r\n\r\n    if (this.SelectedDefaultViewVariable != this.commonService.session.style.widgets['default-view']){\r\n      this.SelectedDefaultViewVariable = this.commonService.session.style.widgets['default-view'];\r\n    }\r\n  }\r\n}\r\n\r\nexport namespace FilesComponent {\r\n  export const componentTypeName = 'Files';\r\n}\r\n","import { ComponentFactoryResolver, Injectable, Injector, StaticProvider, Type } from '@angular/core';\r\nimport { ComponentContainer, JsonValue } from \"golden-layout\";\r\nimport { BaseComponentDirective } from './base-component.directive';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GoldenLayoutComponentService {\r\n  private _componentTypeMap = new Map<string, Type<BaseComponentDirective>>()\r\n\r\n  constructor(private componentFactoryResolver: ComponentFactoryResolver) { }\r\n\r\n  /**\r\n   * Adds a new element with a specified key and value to the Map (_componentTypeMap). If an element with the same key already exists, the element will be updated.\r\n   * It doesn't make new view, just registers the view/component with goldenLayout map (_componentTypeMap).\r\n   */\r\n  registerComponentType(name: string, componentType: Type<BaseComponentDirective>) {\r\n    this._componentTypeMap.set(name, componentType);\r\n  }\r\n\r\n  /**\r\n   * XXXXX Never called in codebase XXXXX\r\n   * @returns an array of registered components\r\n   */\r\n  getRegisteredComponentTypeNames(): string[] {\r\n    const count = this._componentTypeMap.size;\r\n    const result = new Array<string>(count);\r\n    let idx = 0;\r\n    for (let [key, value] of this._componentTypeMap) {\r\n      result[idx++] = key;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  createComponent(componentTypeJsonValue: JsonValue, container: ComponentContainer) {\r\n    const componentType = this._componentTypeMap.get(componentTypeJsonValue as string);\r\n    if (componentType === undefined) {\r\n      throw new Error('Unknown component type')\r\n    } else {\r\n      const provider: StaticProvider = { provide: BaseComponentDirective.GoldenLayoutContainerInjectionToken, useValue: container };\r\n      const injector = Injector.create({\r\n        providers: [provider]\r\n      });\r\n      const componentFactoryRef = this.componentFactoryResolver.resolveComponentFactory<BaseComponentDirective>(componentType);\r\n      return componentFactoryRef.create(injector);\r\n    }\r\n  }\r\n}\r\n","import { ApplicationRef, Component, ComponentRef, ElementRef, EmbeddedViewRef, EventEmitter, OnDestroy, Output, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport {\r\n  ComponentContainer, GoldenLayout,\r\n  LogicalZIndex,\r\n  ResolvedComponentItemConfig\r\n} from \"golden-layout\";\r\nimport { BaseComponentDirective } from './base-component.directive';\r\nimport { GoldenLayoutComponentService } from './golden-layout-component.service';\r\nimport { FilesComponent } from './filesComponent/files-plugin.component';\r\nimport { MapComponent } from './visualizationComponents/MapComponent/map-plugin.component';\r\nimport { PhylogeneticComponent } from './visualizationComponents/PhylogeneticComponent/phylogenetic-plugin.component';\r\nimport { TimelineComponent } from './visualizationComponents/TimelineComponent/timeline-component.component';\r\nimport { TableComponent } from './visualizationComponents/TableComponent/table-plugin-component';\r\nimport { TwoDComponent } from './visualizationComponents/TwoDComponent/twoD-plugin.component';\r\nimport { AlignmentViewComponent } from './visualizationComponents/AlignmentViewComponent/alignment-view-plugin-component';\r\nimport { CrosstabComponent } from './visualizationComponents/CrosstabComponent/crosstab-plugin.component';\r\nimport { AggregateComponent } from './visualizationComponents/AggregateComponent/aggregate.component';\r\nimport { GanttComponent } from './visualizationComponents/GanttComponent/gantt-plugin.component';\r\nimport { HeatmapComponent } from './visualizationComponents/HeatmapComponent/heatmap.component';\r\nimport { BubbleComponent } from './visualizationComponents/BubbleComponent/bubble.component';\r\n\r\n@Component({\r\n  selector: 'app-golden-layout-host',\r\n  template: '<ng-template #componentViewContainer></ng-template>',\r\n  styles: [`\r\n    :host {\r\n      height: 100%;\r\n      width: 100%;\r\n      padding: 0;\r\n      display: block;\r\n      position: relative;\r\n    }\r\n    `,\r\n  ],\r\n})\r\nexport class GoldenLayoutHostComponent implements OnDestroy {\r\n  private _goldenLayout: GoldenLayout;\r\n  private _goldenLayoutElement: HTMLElement;\r\n  private _virtualActive = true;\r\n  private _viewContainerRefActive = true;\r\n  private _componentRefMap = new Map<ComponentContainer, ComponentRef<BaseComponentDirective>>();\r\n  private _goldenLayoutBoundingClientRect: DOMRect = new DOMRect();\r\n\r\n  private _goldenLayoutBindComponentEventListener =\r\n    (container: ComponentContainer, itemConfig: ResolvedComponentItemConfig) => this.handleBindComponentEvent(container, itemConfig);\r\n  private _goldenLayoutUnbindComponentEventListener =\r\n    (container: ComponentContainer) => this.handleUnbindComponentEvent(container);\r\n\r\n  @ViewChild('componentViewContainer', { read: ViewContainerRef, static: true }) private _componentViewContainerRef: ViewContainerRef;\r\n  \r\n  @Output() TabRemovedEvent = new EventEmitter();\r\n\r\n  @Output() TabChangedEvent = new EventEmitter();\r\n\r\n  get goldenLayout() { return this._goldenLayout; }\r\n  get virtualActive() { return this._virtualActive; }\r\n  get viewContainerRefActive() { return this._viewContainerRefActive; }\r\n  get isGoldenLayoutSubWindow() { return this._goldenLayout.isSubWindow; }\r\n\r\n  constructor(private _appRef: ApplicationRef,\r\n    private _elRef: ElementRef<HTMLElement>,\r\n    private goldenLayoutComponentService: GoldenLayoutComponentService,\r\n  ) {\r\n    this._goldenLayoutElement = this._elRef.nativeElement;\r\n\r\n    this.goldenLayoutComponentService.registerComponentType(FilesComponent.componentTypeName, FilesComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(TwoDComponent.componentTypeName, TwoDComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(TableComponent.componentTypeName, TableComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(MapComponent.componentTypeName, MapComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(PhylogeneticComponent.componentTypeName, PhylogeneticComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(TimelineComponent.componentTypeName, TimelineComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(AlignmentViewComponent.componentTypeName, AlignmentViewComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(CrosstabComponent.componentTypeName, CrosstabComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(AggregateComponent.componentTypeName, AggregateComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(GanttComponent.componentTypeName, GanttComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(HeatmapComponent.componentTypeName, HeatmapComponent);\r\n    this.goldenLayoutComponentService.registerComponentType(BubbleComponent.componentTypeName, BubbleComponent);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._goldenLayout.destroy();\r\n  }\r\n\r\n  initialise() {\r\n\r\n    this._goldenLayout = new GoldenLayout(\r\n      this._goldenLayoutElement,\r\n      this._goldenLayoutBindComponentEventListener,\r\n      this._goldenLayoutUnbindComponentEventListener,\r\n    );\r\n    this._goldenLayout.resizeWithContainerAutomatically = true;\r\n    this._goldenLayout.beforeVirtualRectingEvent = (count) => this.handleBeforeVirtualRectingEvent(count);\r\n\r\n    if (this._goldenLayout.isSubWindow) {\r\n      this._goldenLayout.checkAddDefaultPopinButton();\r\n    }\r\n\r\n    // Add the activeContentItemChanged event listener\r\n    this._goldenLayout.on('activeContentItemChanged', contentItem => {\r\n      this.handleActiveTabChange(contentItem);\r\n    });\r\n\r\n    this.setViewContainerRefActive(true);\r\n\r\n  }\r\n\r\n  setVirtualActive(value: boolean) {\r\n    this._goldenLayout.clear();\r\n    this._virtualActive = value;\r\n    if (!this._virtualActive) {\r\n      this._viewContainerRefActive = false;\r\n    }\r\n  }\r\n\r\n  setViewContainerRefActive(value: boolean) {\r\n    this._goldenLayout.clear();\r\n    if (value && !this.virtualActive) {\r\n      throw new Error('ViewContainerRef active only possible if VirtualActive');\r\n    }\r\n    this._viewContainerRefActive = value;\r\n  }\r\n\r\n  setSize(width: number, height: number) {\r\n    this._goldenLayout.setSize(width, height)\r\n  }\r\n\r\n  getComponentRef(container: ComponentContainer) {\r\n    return this._componentRefMap.get(container);\r\n  }\r\n\r\n  public focusComponent(componentId: string) : ComponentContainer {\r\n\r\n    const container = Array.from(this._componentRefMap.keys()).find(\r\n      (container) => container.componentType?.toString() === componentId\r\n    ) as ComponentContainer;\r\n  \r\n    if (container) {\r\n      const componentItem = container.parent;\r\n      this._goldenLayout.focusComponent(componentItem);\r\n    }\r\n\r\n    return container;\r\n\r\n  }\r\n\r\n  private handleBindComponentEvent(container: ComponentContainer, itemConfig: ResolvedComponentItemConfig): ComponentContainer.BindableComponent {\r\n    const componentType = itemConfig.componentType;\r\n    const componentRef = this.goldenLayoutComponentService.createComponent(componentType, container);\r\n    const component = componentRef.instance;\r\n\r\n    this._componentRefMap.set(container, componentRef);\r\n\r\n    if (this._virtualActive) {\r\n      container.virtualRectingRequiredEvent = (container, width, height) => this.handleContainerVirtualRectingRequiredEvent(container, width, height);\r\n      container.virtualVisibilityChangeRequiredEvent = (container, visible) => this.handleContainerVisibilityChangeRequiredEvent(container, visible);\r\n      container.virtualZIndexChangeRequiredEvent = (container, logicalZIndex, defaultZIndex) => this.handleContainerVirtualZIndexChangeRequiredEvent(container, logicalZIndex, defaultZIndex);\r\n\r\n      if (this._viewContainerRefActive) {\r\n        this._componentViewContainerRef.insert(componentRef.hostView);\r\n      } else {\r\n        this._appRef.attachView(componentRef.hostView);\r\n        const componentRootElement = component.rootHtmlElement;\r\n        this._goldenLayoutElement.appendChild(componentRootElement);\r\n      }\r\n    } else {\r\n      this._appRef.attachView(componentRef.hostView);\r\n      const domElem = (componentRef.hostView as EmbeddedViewRef<unknown>).rootNodes[0] as HTMLElement;\r\n      container.element.appendChild(domElem);\r\n    }\r\n\r\n    return {\r\n      component,\r\n      virtual: this._virtualActive,\r\n    }\r\n  }\r\n\r\n  private handleUnbindComponentEvent(container: ComponentContainer) {\r\n    const componentRef = this._componentRefMap.get(container);\r\n    if (componentRef === undefined) {\r\n      throw new Error('Could not unbind component. Container not found');\r\n    }\r\n    this._componentRefMap.delete(container);\r\n\r\n    const hostView = componentRef.hostView;\r\n\r\n    if (container.virtual) {\r\n      if (this._viewContainerRefActive) {\r\n        const viewRefIndex = this._componentViewContainerRef.indexOf(hostView);\r\n        if (viewRefIndex < 0) {\r\n          throw new Error('Could not unbind component. ViewRef not found');\r\n        }\r\n        this._componentViewContainerRef.remove(viewRefIndex);\r\n      } else {\r\n        const component = componentRef.instance;\r\n        const componentRootElement = component.rootHtmlElement;\r\n        this._goldenLayoutElement.removeChild(componentRootElement);\r\n        this._appRef.detachView(hostView);\r\n      }\r\n    } else {\r\n      const component = componentRef.instance;\r\n      const componentRootElement = component.rootHtmlElement;\r\n      container.element.removeChild(componentRootElement);\r\n      this._appRef.detachView(hostView);\r\n    }\r\n\r\n    if (container.componentType !== undefined){\r\n      this.TabRemovedEvent.emit(container.componentType.toString());\r\n    }\r\n\r\n    componentRef.destroy();\r\n  }\r\n\r\n  private handleBeforeVirtualRectingEvent(count: number) {\r\n    this._goldenLayoutBoundingClientRect = this._goldenLayoutElement.getBoundingClientRect();\r\n  }\r\n\r\n  private handleContainerVirtualRectingRequiredEvent(container: ComponentContainer, width: number, height: number) {\r\n    const containerBoundingClientRect = container.element.getBoundingClientRect();\r\n    const left = containerBoundingClientRect.left - this._goldenLayoutBoundingClientRect.left;\r\n    const top = containerBoundingClientRect.top - this._goldenLayoutBoundingClientRect.top;\r\n\r\n    const componentRef = this._componentRefMap.get(container);\r\n    if (componentRef === undefined) {\r\n        throw new Error('handleContainerVirtualRectingRequiredEvent: ComponentRef not found');\r\n    }\r\n    const component = componentRef.instance;\r\n    component.setPositionAndSize(left, top, width, height);\r\n  }\r\n\r\n  public removeComponent(componentId: string) {\r\n    const container = Array.from(this._componentRefMap.keys()).find(\r\n      (container) => container.componentType?.toString() === componentId\r\n    ) as ComponentContainer;\r\n  \r\n    if (container) {\r\n      const componentItem = container.parent;\r\n      if (componentItem && componentItem.parent) {\r\n        componentItem.parent.removeChild(componentItem);\r\n      }\r\n    } else {\r\n      throw new Error('Component not found for the provided id');\r\n    }\r\n  }\r\n\r\n  private handleContainerVisibilityChangeRequiredEvent(container: ComponentContainer, visible: boolean) {\r\n    const componentRef = this._componentRefMap.get(container);\r\n    if (componentRef === undefined) {\r\n        throw new Error('handleContainerVisibilityChangeRequiredEvent: ComponentRef not found');\r\n    }\r\n    const component = componentRef.instance;\r\n    component.setVisibility(visible);\r\n  }\r\n\r\n  private handleContainerVirtualZIndexChangeRequiredEvent(container: ComponentContainer, logicalZIndex: LogicalZIndex, defaultZIndex: string) {\r\n    const componentRef = this._componentRefMap.get(container);\r\n    if (componentRef === undefined) {\r\n        throw new Error('handleContainerVirtualZIndexChangeRequiredEvent: ComponentRef not found');\r\n    }\r\n    const component = componentRef.instance;\r\n    component.setZIndex(defaultZIndex);\r\n  }\r\n\r\n  private handleActiveTabChange(contentItem: any) {\r\n    this.TabChangedEvent.emit(contentItem._title);\r\n  }\r\n}\r\n\r\n\r\n","import { CommonService } from '../contactTraceCommonServices/common.service';\r\nimport * as patristic from 'patristic';\r\n\r\nexport default class AuspiceHandler {\r\n\r\n  private strainSymbol = Symbol('strain');\r\n  private NODE_VISIBLE = 2;              // included on tree and map\r\n  private invalidStrings = ['unknown', '?', 'nan', 'na', 'n/a', '', 'unassigned'];\r\n  private nodeList = [];\r\n  private linkList = [];\r\n\r\n  constructor(public commonService: CommonService) {\r\n    this.commonService = commonService;\r\n  }\r\n\r\n  public recurseChildren = (tree) => {\r\n    if (!tree.children) {\r\n      const node = this.makeNode(tree);\r\n      this.nodeList.push(node);\r\n      const branch = new patristic.Branch(node);\r\n      return branch;\r\n    } else {\r\n      const rootNode = this.makeNode(tree);\r\n      this.nodeList.push(rootNode);\r\n      const newTree = new patristic.Branch(rootNode);\r\n      for (const child of tree.children) {\r\n        const node = this.recurseChildren(child);\r\n        newTree.addChild(node);\r\n      }\r\n      return newTree;\r\n    }\r\n  }\r\n\r\n  public makeNode = (tree) => {\r\n    const node: any = {};\r\n    node.id = tree.name;\r\n    node._id = tree.name;\r\n    if (tree.hasOwnProperty('branch_attrs') &&\r\n        tree.branch_attrs.hasOwnProperty('mutations') &&\r\n        tree.branch_attrs.mutations.hasOwnProperty('nuc'))  {\r\n      node.mutations = tree.branch_attrs.mutations.nuc;\r\n    }\r\n    for (const attribute of Object.keys(tree.node_attrs)) {\r\n      if (attribute !== 'div') {\r\n        node[attribute] = tree.node_attrs[attribute].value;\r\n      } else {\r\n        node[attribute] = tree.node_attrs[attribute];\r\n      }\r\n    }\r\n    return node;\r\n  }\r\n\r\n  public combineMutations = (tree) => {\r\n    const leaves = tree.getLeaves();\r\n    for (const leaf of leaves) {\r\n      let mutHolder = [];\r\n      for (const ancestor of leaf.getAncestors(true)) {\r\n        const nodeIndex = this.nodeList.findIndex( x => x.id === ancestor.id);\r\n        const nodeHolder = this.nodeList[nodeIndex];\r\n        if (nodeHolder.hasOwnProperty('mutations')) {\r\n          mutHolder = mutHolder.concat(nodeHolder.mutations);\r\n        }\r\n      }\r\n      leaf.data.mutations = mutHolder;\r\n    }\r\n    return tree;\r\n  }\r\n\r\n  public parseAuspice = (auspiceTree) => {\r\n    console.log(auspiceTree);\r\n    return this.recurseChildren(auspiceTree.tree);\r\n  }\r\n\r\n\r\n  public treeToNewick = (tree, temporal, internalNodeNames = false, nodeAnnotation = (node) => '') => {\r\n    const getXVal = temporal ? (n) => this.getTraitFromNode(n, 'num_date') : this.getDivFromNode;\r\n\r\n    function recurse(node, parentX) {\r\n      if (node.hasOwnProperty('children')) {\r\n        const childSubtrees = node.children.map((child) => {\r\n          const subtree = recurse(child, getXVal(node));\r\n          return subtree;\r\n        });\r\n        return `(${childSubtrees.filter((t) => !!t).join(',')})` +\r\n          `${internalNodeNames ? node.name : ''}${nodeAnnotation(node)}:${getXVal(node) - parentX}`;\r\n      }\r\n      /* terminal node */\r\n      const leaf = `${node.name}${nodeAnnotation(node)}:${getXVal(node) - parentX}`;\r\n      return leaf;\r\n    }\r\n\r\n    const rootNode = tree;\r\n    const rootXVal = getXVal(rootNode);\r\n    return recurse(rootNode, rootXVal) + ';';\r\n  }\r\n\r\n\r\n  public getTraitFromNode = (node, trait, {entropy = false, confidence = false}= {}) => {\r\n    if (!node.node_attrs) return undefined;\r\n\r\n    if (!entropy && !confidence) {\r\n      if (!node.node_attrs[trait]) {\r\n        if (trait === this.strainSymbol) return node.name;\r\n        return undefined;\r\n      }\r\n      const value = node.node_attrs[trait].value;\r\n      if (!this.isValueValid(value)) return undefined;\r\n      return value;\r\n    } else if (entropy) {\r\n      if (node.node_attrs[trait]) return node.node_attrs[trait].entropy;\r\n      return undefined;\r\n    } else if (confidence) {\r\n      if (node.node_attrs[trait]) return node.node_attrs[trait].confidence;\r\n      return undefined;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  public getDivFromNode = (node) => {\r\n    /* see comment at top of this file */\r\n    if (node.node_attrs && node.node_attrs.div !== undefined) {\r\n      return node.node_attrs.div;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  public isValueValid = (value) => {\r\n    if (!['number', 'boolean', 'string'].includes(typeof value)) {\r\n      return false;\r\n    }\r\n    if (typeof value === 'string' && this.invalidStrings.includes(value.toLowerCase())) {\r\n      return false; // checks against list of invalid strings\r\n    }\r\n    // booleans, valid strings & numbers are valid.\r\n    return true;\r\n  }\r\n\r\n  public makeLinksFromMatrix = (matrix) => {\r\n    const linkList = [];\r\n    for (let i = 0; i < matrix.ids.length - 1; i++) {\r\n      for (let j = i + 1; j < matrix.ids.length; j++) {\r\n        const link = {\r\n          source: matrix.ids[i],\r\n          target: matrix.ids[j],\r\n          distance: matrix.matrix[i][j],\r\n          hasDistance: true,\r\n          distanceOrigin: 'Auspice',\r\n        };\r\n        linkList.push(link);\r\n      }\r\n    }\r\n    this.linkList = linkList;\r\n  }\r\n\r\n  public addLatLong = (nodes, metadata) => {\r\n    const newNodes = [];\r\n    for (const node of nodes) {\r\n      if (metadata.hasOwnProperty('geo_resolutions')) {\r\n        for (let i=0; i<metadata.geo_resolutions.length; i++) {\r\n          const deme = node[metadata.geo_resolutions[i].key];\r\n          if (deme) {\r\n            node.latitude = metadata.geo_resolutions[i].demes[deme].latitude;\r\n            node.longtude = metadata.geo_resolutions[i].demes[deme].longitude;\r\n          }\r\n        }\r\n      }\r\n      newNodes.push(node);\r\n    }\r\n    return newNodes;\r\n  }\r\n\r\n\r\n  public run = (jsonObj) => {\r\n    const newickString =  this.treeToNewick(jsonObj.tree, false, true);\r\n    const fullTree = this.parseAuspice(jsonObj);\r\n    const distanceMatrix = patristic.parseNewick(newickString).toMatrix();\r\n    const updatedTree = this.combineMutations(fullTree);\r\n    this.makeLinksFromMatrix(distanceMatrix);\r\n    const bareNewickString =  this.treeToNewick(jsonObj.tree, false, false);\r\n    this.nodeList = this.addLatLong(this.nodeList, jsonObj.meta);\r\n    return { nodes: this.nodeList, links: this.linkList, tree: updatedTree, newick: bareNewickString};\r\n  }\r\n\r\n}\r\n","import { Iterator } from \"./interfaces\";\r\n\r\nexport class ColorIterator implements Iterator<string> {\r\n    private colors: string[] = [\r\n        \"#000000\", \"#1CE6FF\", \"#FF34FF\", \"#FF4A46\", \"#008941\", \"#006FA6\", \"#A30059\",\r\n        \"#FFDBE5\", \"#7A4900\", \"#0000A6\", \"#63FFAC\", \"#B79762\", \"#004D43\", \"#8FB0FF\", \"#997D87\",\r\n        \"#5A0007\", \"#809693\", \"#FEFFE6\", \"#1B4400\", \"#4FC601\", \"#3B5DFF\", \"#4A3B53\", \"#FF2F80\",\r\n        \"#61615A\", \"#BA0900\", \"#6B7900\", \"#00C2A0\", \"#FFAA92\", \"#FF90C9\", \"#B903AA\", \"#D16100\",\r\n        \"#DDEFFF\", \"#000035\", \"#7B4F4B\", \"#A1C299\", \"#300018\", \"#0AA6D8\", \"#013349\", \"#00846F\",\r\n        \"#372101\", \"#FFB500\", \"#C2FFED\", \"#A079BF\", \"#CC0744\", \"#C0B9B2\", \"#C2FF99\", \"#001E09\",\r\n        \"#00489C\", \"#6F0062\", \"#0CBD66\", \"#EEC3FF\", \"#456D75\", \"#B77B68\", \"#7A87A1\", \"#788D66\",\r\n        \"#885578\", \"#FAD09F\", \"#FF8A9A\", \"#D157A0\", \"#BEC459\", \"#456648\", \"#0086ED\", \"#886F4C\",\r\n        \r\n        \"#34362D\", \"#B4A8BD\", \"#00A6AA\", \"#452C2C\", \"#636375\", \"#A3C8C9\", \"#FF913F\", \"#938A81\",\r\n        \"#575329\", \"#00FECF\", \"#B05B6F\", \"#8CD0FF\", \"#3B9700\", \"#04F757\", \"#C8A1A1\", \"#1E6E00\",\r\n        \"#7900D7\", \"#A77500\", \"#6367A9\", \"#A05837\", \"#6B002C\", \"#772600\", \"#D790FF\", \"#9B9700\",\r\n        \"#549E79\", \"#FFF69F\", \"#201625\", \"#72418F\", \"#BC23FF\", \"#99ADC0\", \"#3A2465\", \"#922329\",\r\n        \"#5B4534\", \"#FDE8DC\", \"#404E55\", \"#0089A3\", \"#CB7E98\", \"#A4E804\", \"#324E72\", \"#6A3A4C\",\r\n        \"#83AB58\", \"#001C1E\", \"#D1F7CE\", \"#004B28\", \"#C8D0F6\", \"#A3A489\", \"#806C66\", \"#222800\",\r\n        \"#BF5650\", \"#E83000\", \"#66796D\", \"#DA007C\", \"#FF1A59\", \"#8ADBB4\", \"#1E0200\", \"#5B4E51\",\r\n        \"#C895C5\", \"#320033\", \"#FF6832\", \"#66E1D3\", \"#CFCDAC\", \"#D0AC94\", \"#7ED379\", \"#012C58\",\r\n        \r\n        \"#7A7BFF\", \"#D68E01\", \"#353339\", \"#78AFA1\", \"#FEB2C6\", \"#75797C\", \"#837393\", \"#943A4D\",\r\n        \"#B5F4FF\", \"#D2DCD5\", \"#9556BD\", \"#6A714A\", \"#001325\", \"#02525F\", \"#0AA3F7\", \"#E98176\",\r\n        \"#DBD5DD\", \"#5EBCD1\", \"#3D4F44\", \"#7E6405\", \"#02684E\", \"#962B75\", \"#8D8546\", \"#9695C5\",\r\n        \"#E773CE\", \"#D86A78\", \"#3E89BE\", \"#CA834E\", \"#518A87\", \"#5B113C\", \"#55813B\", \"#E704C4\",\r\n        \"#00005F\", \"#A97399\", \"#4B8160\", \"#59738A\", \"#FF5DA7\", \"#F7C9BF\", \"#643127\", \"#513A01\",\r\n        \"#6B94AA\", \"#51A058\", \"#A45B02\", \"#1D1702\", \"#E20027\", \"#E7AB63\", \"#4C6001\", \"#9C6966\",\r\n        \"#64547B\", \"#97979E\", \"#006A66\", \"#391406\", \"#F4D749\", \"#0045D2\", \"#006C31\", \"#DDB6D0\",\r\n        \"#7C6571\", \"#9FB2A4\", \"#00D891\", \"#15A08A\", \"#BC65E9\", \"#FFFFFE\", \"#C6DC99\", \"#203B3C\",\r\n\r\n        \"#671190\", \"#6B3A64\", \"#F5E1FF\", \"#FFA0F2\", \"#CCAA35\", \"#374527\", \"#8BB400\", \"#797868\",\r\n        \"#C6005A\", \"#3B000A\", \"#C86240\", \"#29607C\", \"#402334\", \"#7D5A44\", \"#CCB87C\", \"#B88183\",\r\n        \"#AA5199\", \"#B5D6C3\", \"#A38469\", \"#9F94F0\", \"#A74571\", \"#B894A6\", \"#71BB8C\", \"#00B433\",\r\n        \"#789EC9\", \"#6D80BA\", \"#953F00\", \"#5EFF03\", \"#E4FFFC\", \"#1BE177\", \"#BCB1E5\", \"#76912F\",\r\n        \"#003109\", \"#0060CD\", \"#D20096\", \"#895563\", \"#29201D\", \"#5B3213\", \"#A76F42\", \"#89412E\",\r\n        \"#1A3A2A\", \"#494B5A\", \"#A88C85\", \"#F4ABAA\", \"#A3F3AB\", \"#00C6C8\", \"#EA8B66\", \"#958A9F\",\r\n        \"#BDC9D2\", \"#9FA064\", \"#BE4700\", \"#658188\", \"#83A485\", \"#453C23\", \"#47675D\", \"#3A3F00\",\r\n        \"#061203\", \"#DFFB71\", \"#868E7E\", \"#98D058\", \"#6C8F7D\", \"#D7BFC2\", \"#3C3E6E\", \"#D83D66\",\r\n        \r\n        \"#2F5D9B\", \"#6C5E46\", \"#D25B88\", \"#5B656C\", \"#00B57F\", \"#545C46\", \"#866097\", \"#365D25\",\r\n        \"#252F99\", \"#00CCFF\", \"#674E60\", \"#FC009C\", \"#92896B\"\r\n    ];\r\n\r\n    /**\r\n     * Stores the current traversal position. An iterator may have a lot of\r\n     * other fields for storing iteration state, especially when it is supposed\r\n     * to work with a particular kind of collection.\r\n     */\r\n    private position: number = 0;\r\n\r\n\r\n    constructor() {\r\n    }\r\n\r\n    public current(): string {\r\n        return this.colors[this.position];\r\n    }\r\n\r\n    public key(): number {\r\n        return this.position;\r\n    }\r\n\r\n    public next(): string {\r\n        const item = this.colors[this.position];\r\n        this.position += 1;\r\n        if(this.position === this.colors.length) this.position = 0;\r\n        return item;\r\n    }\r\n\r\n    public valid(): boolean {\r\n        return this.position < this.colors.length;\r\n    }\r\n\r\n    public reset(): void {\r\n        this.position = 0;\r\n    }\r\n}","\r\nexport class CustomShapes {\r\n\r\n    public shapes : {};\r\n    \r\n    constructor() {\r\n\r\n       this.shapes  = {\r\n            \"symbolDiamondAlt\" : this.diamondAlt,\r\n            \"symbolDiamondSquare\" : this.diamondSquare,\r\n            \"symbolHexagon\" : this.hexagon,\r\n            \"symbolHexagonAlt\" : this.hexagonAlt,\r\n            \"symbolOctagon\" : this.octogon,\r\n            \"symbolOctagonAlt\" : this.octagonAlt,\r\n            \"symbolPentagon\" : this.pentagon,\r\n            \"symbolTriangleLeft\" : this.triangleLeft,\r\n            \"symbolTriangleRight\" : this.triangleRight,\r\n            \"symbolTriangleDown\" : this.triangleDown,\r\n            \"symbolX\" : this.x\r\n        }\r\n        \r\n    }\r\n\r\n    private diamondAlt = {\r\n        draw: function(context, size) {\r\n\r\n            var tan30 = Math.sqrt(1 / 3);\r\n            var tan30_2 = tan30 * 2;\r\n\r\n            var x = Math.sqrt(size / tan30_2);\r\n            var y = x * tan30;\r\n        \r\n            context.moveTo(0, -y);\r\n            context.lineTo(x, 0);\r\n            context.lineTo(0, y);\r\n            context.lineTo(-x, 0);\r\n        \r\n            context.closePath();\r\n        }\r\n    };\r\n\r\n    private  diamondSquare = {\r\n        draw: function(context, size) {\r\n\r\n          var w = Math.sqrt(size);\r\n          var d = w / 2 * Math.sqrt(2);\r\n      \r\n          context.moveTo(0, -d);\r\n          context.lineTo(d, 0);\r\n          context.lineTo(0, d);\r\n          context.lineTo(-d, 0);\r\n      \r\n          context.closePath();\r\n\r\n        }\r\n    };\r\n\r\n    private hexagon = {\r\n        draw: function(context, size) {\r\n\r\n            function sideLength(area) {\r\n\r\n                var num = 2 * area;\r\n                var denom = 3 * Math.sqrt(3);\r\n                return Math.sqrt(num / denom);\r\n        \r\n            }\r\n\r\n            function rotatePoint(x, y, theta) {\r\n        \r\n                return [\r\n                  Math.cos(theta) * x + -Math.sin(theta) * y, // x\r\n                  Math.sin(theta) * x + Math.cos(theta) * y,  // y\r\n                ];\r\n        \r\n            }\r\n\r\n            var tau = 2 * Math.PI;\r\n            var s = sideLength(size);\r\n            var R = s;\r\n\r\n            context.moveTo.apply(context, rotatePoint(R, 0, tau/12));\r\n\r\n            for (var i = 0; i < 6; ++i) {\r\n\r\n                var a = tau * i / 6;\r\n                var x = Math.cos(a) * R;\r\n                var y = Math.sin(a) * R;\r\n\r\n                context.lineTo.apply(context, rotatePoint(x, y, tau/12));\r\n            \r\n            }\r\n\r\n            context.closePath();\r\n\r\n        }\r\n    }\r\n\r\n    shape : {}\r\n\r\n    private hexagonAlt = {\r\n        draw: function(context, size) {\r\n\r\n            function sideLength(area) {\r\n\r\n                var num = 2 * area;\r\n                var denom = 3 * Math.sqrt(3);\r\n                return Math.sqrt(num / denom);\r\n        \r\n            }\r\n\r\n            function rotatePoint(x, y, theta) {\r\n        \r\n                return [\r\n                  Math.cos(theta) * x + -Math.sin(theta) * y, // x\r\n                  Math.sin(theta) * x + Math.cos(theta) * y,  // y\r\n                ];\r\n        \r\n            }\r\n\r\n            var tau = 2 * Math.PI;\r\n            var s = sideLength(size);\r\n            var R = s;\r\n\r\n            context.moveTo.apply(context, rotatePoint(R, 0, tau));\r\n\r\n            for (var i = 0; i < 6; ++i) {\r\n\r\n                var a = tau * i / 6;\r\n                var x = Math.cos(a) * R;\r\n                var y = Math.sin(a) * R;\r\n\r\n                context.lineTo.apply(context, rotatePoint(x, y, tau));\r\n            \r\n            }\r\n\r\n            context.closePath();\r\n\r\n        }\r\n    }\r\n\r\n    private octogon = {\r\n        draw(context, size) {\r\n\r\n            var circumradiusCoeff = 1/2 * Math.sqrt(4 + 2 * Math.sqrt(2)); // ~ 1.3065629648763766\r\n\r\n            function circumradius(side) { return side * circumradiusCoeff; }\r\n\r\n            function sideLength(area) {\r\n                var num = area * (1 - Math.sqrt(2));\r\n                var denom = 2;\r\n                return Math.sqrt(-1 * num / denom);\r\n            }\r\n\r\n            function rotatePoint(x, y, theta) {\r\n        \r\n                return [\r\n                  Math.cos(theta) * x + -Math.sin(theta) * y, // x\r\n                  Math.sin(theta) * x + Math.cos(theta) * y,  // y\r\n                ];\r\n        \r\n            }\r\n\r\n            var tau = 2 * Math.PI;\r\n            var s = sideLength(size);\r\n            var R = circumradius(s);\r\n        \r\n            context.moveTo.apply(context, rotatePoint(R, 0, 0));\r\n        \r\n            for (var i = 0; i < 8; ++i) {\r\n              var a = tau * i / 8;\r\n              var x = Math.cos(a) * R;\r\n              var y = Math.sin(a) * R;\r\n        \r\n              context.lineTo.apply(context, rotatePoint(x, y, 0));\r\n            }\r\n        \r\n            context.closePath();\r\n\r\n          }\r\n    }\r\n\r\n    private octagonAlt = {\r\n        draw(context, size) {\r\n\r\n            var circumradiusCoeff = 1/2 * Math.sqrt(4 + 2 * Math.sqrt(2)); // ~ 1.3065629648763766\r\n\r\n            function circumradius(side) { return side * circumradiusCoeff; }\r\n\r\n            function sideLength(area) {\r\n                var num = area * (1 - Math.sqrt(2));\r\n                var denom = 2;\r\n                return Math.sqrt(-1 * num / denom);\r\n            }\r\n\r\n            function rotatePoint(x, y, theta) {\r\n        \r\n                return [\r\n                  Math.cos(theta) * x + -Math.sin(theta) * y, // x\r\n                  Math.sin(theta) * x + Math.cos(theta) * y,  // y\r\n                ];\r\n        \r\n            }\r\n\r\n            var tau = 2 * Math.PI;\r\n            var s = sideLength(size);\r\n            var R = circumradius(s);\r\n        \r\n            context.moveTo.apply(context, rotatePoint(R, 0, tau/16));\r\n        \r\n            for (var i = 0; i < 8; ++i) {\r\n              var a = tau * i / 8;\r\n              var x = Math.cos(a) * R;\r\n              var y = Math.sin(a) * R;\r\n        \r\n              context.lineTo.apply(context, rotatePoint(x, y, tau/16));\r\n            }\r\n        \r\n            context.closePath();\r\n\r\n          }\r\n    }\r\n\r\n    private pentagon = {\r\n        draw: function(context, size) {\r\n\r\n            var circumradiusCoeff = 1/10 * Math.sqrt(50 + 10 * Math.sqrt(5)); // ~ 0.85065080835204\r\n\r\n            function circumradius(side) { return side * circumradiusCoeff; }\r\n\r\n            function sideLength(area) {\r\n                var num = 4 * area;\r\n                var denom = Math.sqrt(5 * (5 + 2 * Math.sqrt(5))); // ~ 6.881909602355868\r\n              \r\n                return Math.sqrt(num / denom);\r\n            }\r\n\r\n            function rotatePoint(x, y, theta) {\r\n        \r\n                return [\r\n                  Math.cos(theta) * x + -Math.sin(theta) * y, // x\r\n                  Math.sin(theta) * x + Math.cos(theta) * y,  // y\r\n                ];\r\n        \r\n            }\r\n              \r\n            var tau = 2 * Math.PI;\r\n            var s = sideLength(size);\r\n            var R = circumradius(s);\r\n            var theta = -tau / 4; // Rotate 1/4 turn back so the shape is oriented with a point upward.\r\n        \r\n            context.moveTo.apply(context, rotatePoint(R, 0, theta));\r\n        \r\n            for (var i = 0; i < 5; ++i) {\r\n                var a = tau * i / 5;\r\n                var x = Math.cos(a) * R;\r\n                var y = Math.sin(a) * R;\r\n        \r\n                context.lineTo.apply(context, rotatePoint(x, y, theta));\r\n            }\r\n        \r\n            context.closePath();\r\n\r\n            }\r\n    };\r\n\r\n    private triangleDown = {\r\n        draw: function(context, size) {\r\n\r\n            var y = -Math.sqrt(size / (Math.sqrt(3) * 3));\r\n            context.moveTo(0, -y * 2);\r\n            context.lineTo(-Math.sqrt(3) * y, y);\r\n            context.lineTo(Math.sqrt(3) * y, y);\r\n            context.closePath();\r\n\r\n        }\r\n    };\r\n\r\n    private triangleLeft = {\r\n        draw: function(context, size) {\r\n\r\n            var x = -Math.sqrt(size / (Math.sqrt(3) * 3));\r\n            context.moveTo(x * 2, 0);\r\n            context.lineTo(-x, -Math.sqrt(3) * x);\r\n            context.lineTo(-x, Math.sqrt(3) * x);\r\n            context.closePath();\r\n\r\n        }\r\n    };\r\n\r\n    private triangleRight = {\r\n        draw: function(context, size) {\r\n\r\n            var x = -Math.sqrt(size / (Math.sqrt(3) * 3));\r\n            context.moveTo(-x * 2, 0);\r\n            context.lineTo(x, -Math.sqrt(3) * x);\r\n            context.lineTo(x, Math.sqrt(3) * x);\r\n            context.closePath();\r\n\r\n        }\r\n    };\r\n\r\n    private x = {\r\n        draw: function(context, size) {\r\n\r\n            function rotatePoint(x, y, theta) {\r\n        \r\n                return [\r\n                  Math.cos(theta) * x + -Math.sin(theta) * y, // x\r\n                  Math.sin(theta) * x + Math.cos(theta) * y,  // y\r\n                ];\r\n        \r\n            }\r\n\r\n            var tau = 2 * Math.PI;\r\n            var r = Math.sqrt(size / 5) / 2;\r\n            var theta = tau / 8;\r\n        \r\n            // Use the same construction points as `symbolCross` and rotate 1/8 turn.\r\n            var points = [\r\n                rotatePoint(-3 * r, -r, theta),\r\n                rotatePoint(-r, -r, theta),\r\n                rotatePoint(-r, -3 * r, theta),\r\n                rotatePoint(r, -3 * r, theta),\r\n                rotatePoint(r, -r, theta),\r\n                rotatePoint(3 * r, -r, theta),\r\n                rotatePoint(3 * r, r, theta),\r\n                rotatePoint(r, r, theta),\r\n                rotatePoint(r, 3 * r, theta),\r\n                rotatePoint(-r, 3 * r, theta),\r\n                rotatePoint(-r, r, theta),\r\n                rotatePoint(-3 * r, r, theta)\r\n            ];\r\n        \r\n            context.moveTo.apply(context, points.pop());\r\n            \r\n            for (var i = 0; i < points.length; i++) {\r\n              context.lineTo.apply(context, points[i]);\r\n            }\r\n        \r\n            context.closePath();\r\n        }\r\n    }\r\n\r\n\r\n}","export class DialogSettings {\r\n    public isVisible: boolean = false;\r\n\r\n    public top: number = 200;\r\n    public left: number = 450;\r\n\r\n    // Link Color\r\n    public linkTop: number = 200;\r\n    public linkLeft: string = \"bottom-left\";\r\n\r\n    // Map settings\r\n    public mapRight: string = \"bottom-right\";\r\n\r\n    // Node Color\r\n    public nodeTop: number = 400;\r\n    public nodeLeft: string = \"left\";\r\n\r\n    // Node Shape\r\n    public shapeTop: number = 700;\r\n    public shapeRight: string = \"bottom-right\";\r\n\r\n    // Polygon Color\r\n    public polygonRight: string = \"right\";\r\n\r\n    public polygonTop: number = 200;\r\n    public polygonLeft: number = 950;\r\n\r\n    private dialogControlId: string;\r\n\r\n    private stateBeforeExport: {\r\n        isVisible: boolean,\r\n        top?: number,\r\n        left?: number\r\n    };\r\n\r\n    constructor(\r\n        dialogControlId: string,\r\n        isVisible: boolean\r\n    ) {\r\n        this.dialogControlId = dialogControlId;\r\n        this.isVisible = isVisible;\r\n    }\r\n\r\n    private getDialogControl(): Element {\r\n        return document.querySelector(this.dialogControlId);\r\n    }\r\n\r\n    private getDomRect(): DOMRect | ClientRect {\r\n        const dialogControl = this.getDialogControl();\r\n\r\n        return dialogControl.children[0].getBoundingClientRect();\r\n    }\r\n\r\n    public onShow() {\r\n        this.isVisible = true;\r\n    }\r\n\r\n    public onHide() {\r\n        this.isVisible = false;\r\n    }\r\n\r\n    setStateBeforeExport() {\r\n        this.stateBeforeExport = {\r\n            isVisible: this.isVisible,\r\n            top: undefined,\r\n            left: undefined\r\n        }\r\n\r\n        if (this.isVisible) {\r\n            // sometimes getDomRect throws an error, need to revisit when we decide to revisit saving the locations of tables on show/hide\r\n            try {\r\n                const domRect = this.getDomRect();\r\n\r\n                this.stateBeforeExport.top = domRect.top;\r\n                this.stateBeforeExport.left = domRect.left;\r\n            } catch {\r\n                this.stateBeforeExport.top = 100;\r\n                this.stateBeforeExport.left = 100;  \r\n            }\r\n        }\r\n\r\n        this.isVisible = false;\r\n    }\r\n\r\n    restoreStateAfterExport() {\r\n        this.isVisible = this.stateBeforeExport.isVisible;\r\n        this.top = this.stateBeforeExport.top;\r\n        this.left = this.stateBeforeExport.left;\r\n    }\r\n\r\n\r\n    setVisibility(isVisible: boolean) {\r\n        if(isVisible && this.top === 0 && this.left === 0){\r\n            this.top = window.innerHeight / 2 - 300;\r\n            this.left = window.innerWidth / 2;\r\n        }\r\n        else if(isVisible && this.stateBeforeExport){\r\n            this.restoreStateAfterExport();\r\n        }\r\n        else if(!isVisible){\r\n            this.setStateBeforeExport();\r\n        }\r\n\r\n        this.isVisible = isVisible;\r\n        \r\n        // this section causes the network settings dialog box (at least on 2D network) to minimize so that only top headings to be displayed. Removed (12/5/23) because it causes unwanted behavior\r\n        /*\r\n        if(isVisible){\r\n            const dialog = document.querySelector('#network-settings-pane');\r\n            const tabset = dialog.querySelector('.tab-container');\r\n    \r\n            if(tabset){\r\n                const tabs: Array<Element> = Array.from(tabset.querySelectorAll('.m-tabs__item'));\r\n                \r\n                for(let tab of tabs){\r\n                    tab.classList.remove('active');\r\n                }\r\n                \r\n            }\r\n        }\r\n        */\r\n    }\r\n}","import { Observable, Subject } from 'rxjs';\r\n\r\n\r\n\r\n\r\nexport class InlineWorker {\r\n\r\n    private readonly worker: Worker;\r\n    private onMessage = new Subject<MessageEvent>();\r\n    private onError = new Subject<ErrorEvent>();\r\n    \r\n\r\n\r\n    constructor(func) {\r\n        \r\n        const WORKER_ENABLED = !!(Worker);\r\n\r\n        if (WORKER_ENABLED) {\r\n            let urls = [\"https://raw.githubusercontent.com/CDCgov/patristic/master/dist/patristic.js\",\r\n            \"https://raw.githubusercontent.com/CDCgov/tn93.js/master/dist/tn93.js\",\r\n            \"https://raw.githubusercontent.com/CDCgov/bioseq-js/master/dist/bioseq.js\"];\r\n            let functionBody = \"\";\r\n            for (let i=0; i<urls.length; i++){\r\n                let request = new XMLHttpRequest();\r\n                request.open(\"GET\", urls[i], false);\r\n                request.send(null);\r\n                let returnValue = request.responseText;\r\n                if (i === 0){\r\n                    let start = returnValue.indexOf(\"const version = \\\"0.5.7\\\";\");\r\n                    let finish = returnValue.indexOf(\"exports.Branch = Branch;\");\r\n                    functionBody += returnValue.substring(start, finish);\r\n\r\n                }\r\n                else if (i === 1){\r\n                    let start = returnValue.indexOf(\"\\n\");\r\n                    let finish = returnValue.indexOf(\"if(typeof exports !== 'undefined'){\");\r\n                    functionBody += returnValue.substring(start + 1, finish);\r\n                }\r\n                else if (i === 2){\r\n                    let start = returnValue.indexOf(\"var bioseq\");\r\n                    let finish = returnValue.indexOf(\"return bioseq\");\r\n                    functionBody += returnValue.substring(start, finish);\r\n                }\r\n                else {\r\n                    functionBody += returnValue;\r\n                }\r\n                \r\n                // functionBody += returnValue;\r\n                functionBody += \"\\n\";\r\n            }\r\n            functionBody += func.toString().replace(/^[^{]*{\\s*/, '').replace(/\\s*}[^}]*$/, '');\r\n\r\n            this.worker = new Worker(URL.createObjectURL(\r\n                new Blob([functionBody], { type: 'text/javascript' })\r\n            ));\r\n\r\n            this.worker.onmessage = (data) => {\r\n                this.onMessage.next(data);\r\n            };\r\n\r\n            this.worker.onerror = (data) => {\r\n                this.onError.next(data);\r\n            };\r\n\r\n        } else {\r\n            throw new Error('WebWorker is not enabled');\r\n        }\r\n    }\r\n\r\n    postMessage(data) {       \r\n        this.worker.postMessage(data);\r\n    }\r\n\r\n    onmessage(): Observable<MessageEvent> {\r\n        \r\n        return this.onMessage.asObservable();\r\n    }\r\n\r\n    onerror(): Observable<ErrorEvent> {\r\n        \r\n        return this.onError.asObservable();\r\n    }\r\n\r\n    terminate() {\r\n       \r\n        if (this.worker) {\r\n            this.worker.terminate();\r\n        }\r\n    }\r\n\r\n}","import { Injectable } from \"@angular/core\";\r\n\r\nimport { MicrobeTraceNextHomeComponent } from \"./microbe-trace-next-plugin.component\";\r\nimport { FilesComponent } from \"./filesComponent/files-plugin.component\";\r\nimport { TwoDComponent } from \"./visualizationComponents/TwoDComponent/twoD-plugin.component\";\r\nimport { MapComponent } from \"./visualizationComponents/MapComponent/map-plugin.component\";\r\nimport { TableComponent } from \"./visualizationComponents/TableComponent/table-plugin-component\";\r\nimport { PhylogeneticComponent } from \"./visualizationComponents/PhylogeneticComponent/phylogenetic-plugin.component\";\r\nimport { TimelineComponent } from \"./visualizationComponents/TimelineComponent/timeline-component.component\";\r\nimport { AlignmentViewComponent } from \"./visualizationComponents/AlignmentViewComponent/alignment-view-plugin-component\";\r\nimport { CrosstabComponent } from \"./visualizationComponents/CrosstabComponent/crosstab-plugin.component\";\r\nimport { AggregateComponent } from \"./visualizationComponents/AggregateComponent/aggregate.component\";\r\nimport { GanttComponent } from \"./visualizationComponents/GanttComponent/gantt-plugin.component\";\r\nimport { HeatmapComponent } from \"./visualizationComponents/HeatmapComponent/heatmap.component\";\r\nimport { BubbleComponent } from \"./visualizationComponents/BubbleComponent/bubble.component\";\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class MicrobeTraceNextVisuals {\r\n    public microbeTrace: MicrobeTraceNextHomeComponent;\r\n    public filesPlugin: FilesComponent;\r\n    public twoD: TwoDComponent;\r\n    public gisMap: MapComponent;\r\n    public tableComp: TableComponent;\r\n    public epiCurve: TimelineComponent;\r\n    public phylogenetic: PhylogeneticComponent;\r\n    public alignment: AlignmentViewComponent;\r\n    public crossTab: CrosstabComponent;\r\n    public aggregate: AggregateComponent;\r\n    public gantt: GanttComponent;\r\n    public heatmap: HeatmapComponent;\r\n    public bubble: BubbleComponent;\r\n}\r\n","import { ChangeDetectionStrategy, Component, OnInit, Injector, ViewChild, ViewChildren, AfterViewInit, ComponentRef, ViewContainerRef, QueryList, ElementRef, Output, EventEmitter, ChangeDetectorRef, OnDestroy, ViewEncapsulation, Renderer2 } from '@angular/core';\r\nimport { CommonService } from './contactTraceCommonServices/common.service';\r\nimport { TwoDComponent } from './visualizationComponents/TwoDComponent/twoD-plugin.component';\r\nimport { TableComponent } from './visualizationComponents/TableComponent/table-plugin-component';\r\nimport { MapComponent } from './visualizationComponents/MapComponent/map-plugin.component';\r\nimport { PhylogeneticComponent } from './visualizationComponents/PhylogeneticComponent/phylogenetic-plugin.component';\r\nimport * as d3 from 'd3';\r\n\r\nimport { AppComponentBase } from '@shared/common/app-component-base';\r\nimport { SelectItem, TreeNode } from 'primeng/api';\r\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\r\nimport { AppSessionService } from '@shared/common/session/app-session.service';\r\nimport { DialogSettings } from './helperClasses/dialogSettings';\r\nimport * as saveAs from 'file-saver';\r\nimport { StashObjects, HomePageTabItem } from './helperClasses/interfaces';\r\nimport { Observable, forkJoin } from 'rxjs';\r\nimport { MicrobeTraceNextVisuals } from './microbe-trace-next-plugin-visuals';\r\nimport { EventEmitterService } from '@shared/utils/event-emitter.service';\r\n// import * as moment from 'moment';\r\nimport moment from 'moment';\r\nimport { GoldenLayoutComponentService } from './golden-layout-component.service';\r\nimport { Tabulator } from 'tabulator-tables';\r\nimport { Subscription } from 'rxjs';\r\nimport { GoldenLayoutHostComponent } from './golden-layout-host.component';\r\nimport * as Papa from 'papaparse';\r\nimport JSZip from 'jszip';\r\n\r\n\r\n@Component({\r\n    changeDetection: ChangeDetectionStrategy.Default,\r\n    selector: 'contact-trace',\r\n    encapsulation: ViewEncapsulation.None,\r\n    templateUrl: './microbe-trace-next-plugin.component.html',\r\n    styleUrls: ['./microbe-trace-next-plugin.component.less']\r\n})\r\n\r\nexport class MicrobeTraceNextHomeComponent extends AppComponentBase implements AfterViewInit, OnInit, OnDestroy {\r\n\r\n\r\n    // recommit original code\r\n    @ViewChild('stashes') stashes: ElementRef;\r\n\r\n    @ViewChild('goldenLayoutHost') _goldenLayoutHostComponent: GoldenLayoutHostComponent;\r\n\r\n    @ViewChild('linkThresholdSparkline') linkThresholdSparkline: ElementRef;\r\n\r\n\r\n    public metric: string = \"tn93\";\r\n    public ambiguity: string = \"Average\";\r\n    public launchView: string = \"2D Network\";\r\n    public threshold: string = \"0.015\";\r\n\r\n    widgets: object; \r\n    elem: any;\r\n    showSettings: boolean = false;\r\n    showExport: boolean = false;\r\n    showCenter: boolean = false;\r\n    showPinAllNodes: boolean = false;\r\n    showRefresh: boolean = false;\r\n    showButtonGroup: boolean = false;\r\n    showSorting: boolean = false;\r\n\r\n\r\n    downloadedBlocks: string[] = [];\r\n    ledgerOptions: TreeNode[] = [];\r\n    ledgerOptionSelected: any[] = [];\r\n    ledgerOptionSelectedFlag: boolean = true;\r\n    selectedItemsLabel = 'Choose';\r\n\r\n    dataSetView: SelectItem[];\r\n    dataSetViewSelected: string;\r\n    tabSet: any;\r\n    filedata: any;\r\n    fileExtension: string;\r\n    activeTabIndex: any;\r\n    displayHelp: boolean = false;\r\n    displayAbout: boolean = false;\r\n    displayStashDialog: boolean = false;\r\n    displayUrlDialog: boolean = false;\r\n    displayMTDialog: boolean = false;\r\n    displayRecallStashDialog: boolean = false;\r\n    displayLedgerLoaderDialog: boolean = false;\r\n    version: string = '2.0';\r\n    auspiceUrlVal: string|null = '';\r\n\r\n    saveFileName: string = '';\r\n    saveByCluster: boolean = false;\r\n    saveFileTypeOptions = [\r\n        { label: 'session', value: 'session'},\r\n        { label: 'style', value: 'style'}\r\n    ];\r\n    selectedSaveFileType: string = 'session';\r\n\r\n    searchField: string = '';\r\n    searchText: string = '';\r\n\r\n    private subscription: Subscription;\r\n\r\n    // posts: BlockchainProofHashDto[] = new Array<BlockchainProofHashDto>();\r\n    // Blockchaindata: BlockchainProofHashDto = new BlockchainProofHashDto();\r\n    date: Date;\r\n    // Inputdownloadblock: DownloadFilteredBlockDto = new DownloadFilteredBlockDto();\r\n    Filepath: SafeResourceUrl;\r\n\r\n    BlockChainLedgerNodeList: any[] = [];\r\n    BlockChainLedgerEdgeList: any[] = [];\r\n\r\n\r\n\r\n    FieldList: SelectItem[] = [];\r\n    ToolTipFieldList: SelectItem[] = [];\r\n\r\n    PruneWityTypes: any = [\r\n        { label: 'None', value: 'None' },\r\n        { label: 'Nearest Neighbor', value: 'Nearest Neighbor' }\r\n    ];\r\n    SelectedPruneWityTypesVariable: string = 'None';\r\n    SelectedEpsilonValue: string;\r\n\r\n\r\n    SelectedClusterMinimumSizeVariable: any = 0;\r\n    SelectedLinkSortVariable: string = 'Distance';\r\n    SelectedLinkThresholdVariable: any = parseFloat(this.threshold);\r\n    SelectedDistanceMetricVariable = this.metric;\r\n\r\n    RevealTypes: any = [\r\n        { label: 'Everything', value: 'Everything' }\r\n    ];\r\n    SelectedRevealTypesVariable: string = 'Everything';\r\n\r\n\r\n    StatisticsTypes: any = [\r\n        { label: 'Show', value: 'Show' }, \r\n      { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedStatisticsTypesVariable: string = 'Show';\r\n\r\n    SelectedColorNodesByVariable: string = 'None';\r\n    SelectedNodeColorVariable: string = '#1f77b4';\r\n    SelectedLinkColorVariable: string = '#1f77b4';\r\n    SelectedColorLinksByVariable: string = 'origin';\r\n\r\n    SelectedTimelineVariable: string = 'None';\r\n    timelineSpeed: number = 200;\r\n\r\n\r\n    LinkColorTableTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedLinkColorTableTypesVariable: string = 'Hide';\r\n\r\n    NodeColorTableTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedNodeColorTableTypesVariable: string = 'Hide';\r\n\r\n\r\n    SelectedColorVariable: string = '#ff8300';\r\n    SelectedBackgroundColorVariable: string = '#ffffff';\r\n    SelectedApplyStyleVariable: string = '';\r\n\r\n\r\n    activeTabNdx = null;\r\n    ShowGlobalSettingsLinkColorTable: boolean = false;\r\n    ShowGlobalSettingsNodeColorTable: boolean = false;\r\n    roles: Array<string> = new Array<string>();\r\n\r\n    ShowGlobalSettingsSettingsPane: boolean = false;\r\n    GlobalSettingsDialogSettings: DialogSettings;\r\n    GlobalSettingsLinkColorDialogSettings: DialogSettings;\r\n    GlobalSettingsNodeColorDialogSettings: DialogSettings;\r\n\r\n    cachedGlobalSettingsVisibility: boolean = false;\r\n    cachedGlobalSettingsLinkColorVisibility: boolean = false;\r\n    cachedGlobalSettingsNodeColorVisibility: boolean = false;\r\n\r\n    cmpRef: ComponentRef<any>;\r\n\r\n    public playBtnText: string = \"Play\";\r\n\r\n    public handle: any;\r\n    \r\n    public label: any;\r\n\r\n    public xAttribute: any;\r\n\r\n    public handleDateFormat: any;\r\n\r\n    public currentTimelineValue: any;\r\n\r\n    public currentTimelineTargetValue: any;\r\n\r\n    private previousTab: string = '';\r\n\r\n    private visuals: MicrobeTraceNextVisuals;\r\n\r\n    private bpaaSPayloadWrappers: BpaaSPayloadWrapper[] = [];\r\n\r\n    @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n\r\n    // @ViewChild(TabView) tabView: TabView;\r\n    @ViewChild('dataSet') dataSet: Selection;\r\n    @ViewChildren('placeholder', { read: ViewContainerRef }) targets: QueryList<ViewContainerRef>\r\n    @ViewChild('ledgerloader') spinnerElement: ElementRef;\r\n    @ViewChild('ledgerloadDiv') spinnerDivElement: ElementRef;\r\n    @ViewChild('globalSettingsTab') globalSettingsTab: any;\r\n\r\n\r\n    // @ViewChild('pinbutton') pinBtn: ElementRef<HTMLElement>;\r\n    @ViewChild('pinbutton') pinBtn: ElementRef<HTMLElement>;\r\n\r\n\r\n\r\n    public HideThisForNow: boolean = false;\r\n\r\n    files: any[] = [];\r\n\r\n    homepageTabs: HomePageTabItem[] = [];\r\n    currentUrl: string;\r\n    // homepageTabs: HomePageTabItem[] = [\r\n    //     {\r\n    //         label: 'Files',\r\n    //         templateRef: null,\r\n    //         tabTitle: 'Files',\r\n    //         isActive: true,\r\n    //         componentRef: null\r\n    //     }\r\n    // ];\r\n\r\n    constructor(\r\n        injector: Injector,\r\n        public commonService: CommonService,\r\n        private goldenLayoutComponentService: GoldenLayoutComponentService,\r\n        public domSanitizer: DomSanitizer,\r\n        private cdref: ChangeDetectorRef,\r\n        private el: ElementRef, \r\n        private renderer: Renderer2,\r\n        private eventEmitterService: EventEmitterService,\r\n    ) {\r\n\r\n\r\n        super(injector);\r\n\r\n        this.visuals = commonService.visuals;\r\n        this.visuals.microbeTrace = this;\r\n        this.widgets = this.commonService.session.style.widgets\r\n\r\n        this.appSession = injector.get(AppSessionService);\r\n\r\n        this.activeTabIndex = 0;\r\n\r\n        this.dataSetView = [];\r\n        this.dataSetView.push({ label: 'Nodes', value: 'Node' });\r\n        this.dataSetView.push({ label: 'Links', value: 'Link' });\r\n        this.dataSetView.push({ label: 'Clusters', value: 'Cluster' });\r\n\r\n        this.dataSetViewSelected = \"Node\";\r\n\r\n        this.currentUrl = window.location.href;\r\n\r\n        // setTimeout(() => {\r\n        //     srv.createNewComponent(srv.getRegisteredComponents()[0]);\r\n        //   }, 1000);\r\n\r\n        //   setTimeout(() => {\r\n        //     srv.createNewComponent(srv.getRegisteredComponents()[0]);\r\n        //   }, 10000);\r\n    }\r\n\r\n    getElementById(id: string): HTMLElement | null {\r\n        const element = this.el.nativeElement.querySelector(`#${id}`);\r\n        return element;\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n        const params = new URLSearchParams(window.location.search);\r\n        this.auspiceUrlVal = params.get('url');\r\n        if(this.commonService.debugMode) {\r\n            console.log(this.auspiceUrlVal);\r\n        }\r\n        this.getGlobalSettingsData();\r\n\r\n        this.elem = document.documentElement;\r\n\r\n        if (!this.GlobalSettingsDialogSettings) {\r\n            this.GlobalSettingsDialogSettings = new DialogSettings('#global-settings-modal', false);\r\n        }\r\n        if (!this.GlobalSettingsLinkColorDialogSettings) {\r\n            this.GlobalSettingsLinkColorDialogSettings = new DialogSettings('#global-settings-link-color-table', false);\r\n        }\r\n        if (!this.GlobalSettingsNodeColorDialogSettings) {\r\n            this.GlobalSettingsNodeColorDialogSettings = new DialogSettings('#global-settings-node-color-table', false);\r\n        }\r\n\r\n        this.SelectedPruneWityTypesVariable = this.commonService.GlobalSettingsModel.SelectedPruneWityTypesVariable;\r\n\r\n        //debugger;\r\n        this.SelectedClusterMinimumSizeVariable = this.commonService.GlobalSettingsModel.SelectedClusterMinimumSizeVariable;\r\n        this.SelectedLinkSortVariable = this.commonService.GlobalSettingsModel.SelectedLinkSortVariable;\r\n        this.SelectedLinkThresholdVariable = this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable;\r\n        this.threshold = this.SelectedLinkThresholdVariable;\r\n        this.commonService.session.style.widgets['link-threshold'] = this.SelectedLinkThresholdVariable;\r\n        this.SelectedRevealTypesVariable = this.commonService.GlobalSettingsModel.SelectedRevealTypesVariable;\r\n        this.SelectedStatisticsTypesVariable = this.commonService.GlobalSettingsModel.SelectedStatisticsTypesVariable;\r\n\r\n        this.SelectedColorNodesByVariable = this.commonService.GlobalSettingsModel.SelectedColorNodesByVariable;\r\n        this.SelectedNodeColorVariable = this.commonService.session.style.widgets['node-color'];\r\n        this.SelectedColorLinksByVariable = this.commonService.GlobalSettingsModel.SelectedColorLinksByVariable;\r\n\r\n        this.SelectedTimelineVariable = this.commonService.session.style.widgets['node-timeline-variable'];\r\n        this.SelectedColorVariable = this.commonService.session.style.widgets['selected-color'];\r\n\r\n        this.SelectedLinkColorTableTypesVariable = this.commonService.GlobalSettingsModel.SelectedLinkColorTableTypesVariable;\r\n        this.SelectedApplyStyleVariable = this.commonService.GlobalSettingsModel.SelectedApplyStyleVariable;\r\n\r\n        this.commonService.updateThresholdHistogram();\r\n\r\n        if(this.commonService.debugMode) {\r\n            console.log(\"global settings: \", this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable);\r\n            console.log(\"SelectedLinkThresholdVariable: \", this.SelectedLinkThresholdVariable);\r\n        }\r\n        \r\n\r\n         // Update distance metric in cashe\r\n         let cachedLSV = \"\";\r\n         let cachedView = \"\";\r\n\r\n        this.commonService.localStorageService.getItem('default-distance-metric', (err, result) => {\r\n            // Run this code once the value has been\r\n            // loaded from the offline store.\r\n            cachedLSV = result;\r\n        });\r\n\r\n        this.commonService.localStorageService.getItem('default-view', (err, result) => {\r\n            cachedView = result;\r\n        });\r\n\r\n        let that = this;\r\n\r\n        $( document ).on( \"link-visibility\", function( ) {\r\n            that.generateNodeLinkTable(\"#link-color-table\");\r\n        });\r\n\r\n        $( document ).on('node-visibility', function () {\r\n            that.generateNodeColorTable('#node-color-table'); \r\n        })\r\n\r\n        setTimeout(() => {\r\n            $('#top-toolbar').fadeTo(\"slow\", 1);\r\n            // TODO:: uncommentback when done Subscribe for files subscription\r\n            // this.homepageTabs[0].componentRef = this.goldenLayout.componentInstances[0];\r\n        }, 1000);\r\n        setTimeout(() => {\r\n            if (cachedLSV) {\r\n                if (cachedLSV === 'snps') {\r\n                   this.metric = 'snps';\r\n                   this.threshold = '7';\r\n                   $('#ambiguities-menu').hide();\r\n                } else {\r\n                   this.metric = 'tn93';\r\n                   this.threshold = '0.015';\r\n                }\r\n\r\n               this.SelectedLinkThresholdVariable = parseFloat(this.threshold);\r\n               this.SelectedDistanceMetricVariable = this.metric;\r\n               this.commonService.session.style.widgets['default-distance-metric'] = this.metric;\r\n               this.commonService.session.style.widgets['link-threshold'] = parseFloat(this.threshold);\r\n               this.onLinkThresholdChanged();\r\n            }\r\n\r\n            if (cachedView) {\r\n                // this.updateLaunchView(cachedView);\r\n            }\r\n\r\n            $(\"#welcome-title\").animate({\r\n                marginTop: '-30px',\r\n                opacity: '1'\r\n            }, 1000);\r\n        }, 2000);\r\n        setTimeout(() => {\r\n            $(\"#welcome-description\").animate({\r\n                marginTop: '0px',\r\n                opacity: '1'\r\n            }, 1000);\r\n\r\n        }, 3000);\r\n        setTimeout(() => {\r\n            $('#visualwrapper').fadeTo(\"slow\", 1);\r\n            $('#add-data-container').fadeTo(\"slow\", 1);\r\n            $('#onload-container').fadeTo(\"slow\", 1);\r\n            $('#tool-btn-container').fadeTo(\"slow\", 1);\r\n\r\n        }, 5000);\r\n           \r\n    }\r\n\r\n    addComponent( component: string ) {\r\n\r\n        // const componentType = this._selectedRegisteredComponentTypeName;\r\n        const goldenLayoutComponent = this._goldenLayoutHostComponent.goldenLayout.newComponent(component);\r\n\r\n        const componentRef = this._goldenLayoutHostComponent.getComponentRef(goldenLayoutComponent.container);\r\n        \r\n        this.addTab(component, component + this.activeTabIndex, this.activeTabIndex, componentRef);\r\n        \r\n        \r\n        setTimeout(() => {\r\n          \r\n            // this.goldenLayout.componentInstances[this.goldenLayout.componentInstances.length - 1].DisplayGlobalSettingsDialogEvent.subscribe((v) => { this.DisplayGlobalSettingsDialog(v) });\r\n\r\n            this.setActiveTabProperties();\r\n            this.loadSettings();\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * Removes a component from this.homepageTabs\r\n     * @param component name of the component to be removed\r\n     */\r\n    public removeComponent( component: string ) {\r\n        this.homepageTabs = this.homepageTabs.filter((tab) => {\r\n            return tab.label !== component;\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * Delete file from files list\r\n     * @param index (File index)\r\n     */\r\n    deleteFile(index: number) {\r\n        this.files.splice(index, 1);\r\n    }\r\n\r\n    /**\r\n     * Uses search-field, search-whole-word, search-case-sensitive widgets, and searchText variable to search each node and select all nodes that meet current criteria.\r\n     * Also populates search-results list, and sets function that selects the node for when an option in the list is selected.\r\n     */\r\n    public onSearch() {\r\n        let nodes = this.commonService.session.data.nodes;\r\n        const n = nodes.length;\r\n\r\n        let v = this.searchText;\r\n        const val = v;\r\n\r\n        if (v == \"\") {\r\n          $('#search-results').html(\"\").hide();\r\n          for(let i = 0; i < n; i++){\r\n            nodes[i].selected = false;\r\n          }\r\n        } else {\r\n          $('#search-results').html(\"\").hide();\r\n          const field = this.commonService.session.style.widgets[\"search-field\"];\r\n          \r\n          let dataSet = new Set();\r\n          for(let i = 0; i < n; i++){\r\n            let node = nodes[i];\r\n            if (node[field]) {\r\n  \r\n                let fieldData = node[field].toString(); // Convert the data to string\r\n                // matches anything that is not a digit, letter, whitespace or one of following char < > & and replaces with corresponding HTML entity number\r\n                const encodedField = fieldData.replace(/[\\u00A0-\\u9999<>\\&]/g, function(i) {\r\n                  return '&#'+i.charCodeAt(0)+';';\r\n                });\r\n                dataSet.add(`${encodedField}`);\r\n            }\r\n          }\r\n          let dataArray = Array.from(dataSet).sort() as string[];\r\n          //#298\r\n          if (this.commonService.session.style.widgets[\"search-whole-word\"])  v = '\\\\b' + v + '\\\\b';\r\n          let vre: RegExp;\r\n          if (this.commonService.session.style.widgets[\"search-case-sensitive\"])  vre = new RegExp(v);\r\n          else  vre = new RegExp(v, 'i');\r\n  \r\n          dataArray.forEach(element => {\r\n            if ((element as any).match(vre)) {\r\n                let $li = $('<li/>')\r\n                    .html(element as string)\r\n                    .attr('data-value', element as string);\r\n                $('#search-results').append($li).show();\r\n              }\r\n          });\r\n\r\n        let that = this;\r\n          \r\n        // on click of an option from the search list, the node is selected\r\n          $('.autocomplete-wrapper li').on('click', function() {\r\n            let ac_v = $(this).attr('data-value');\r\n            const ac_val = ac_v;\r\n            let ac_vre: RegExp;\r\n            $('#search').val(ac_v);\r\n            $('#search-results').html(\"\").hide();\r\n          \r\n            if (that.commonService.session.style.widgets[\"search-whole-word\"])  ac_v = '\\\\b' + ac_v + '\\\\b';\r\n            if (that.commonService.session.style.widgets[\"search-case-sensitive\"])  ac_vre = new RegExp(ac_v);\r\n            else ac_vre = new RegExp(ac_v, 'i');\r\n  \r\n            for(let i = 0; i < n; i++){\r\n\r\n              let node = nodes[i];\r\n\r\n              if (!node[field]) {\r\n                node.selected = false;\r\n              }\r\n              if (typeof node[field] == \"string\") {\r\n                node.selected = ac_vre.test(node[field]);\r\n              }\r\n              if (typeof node[field] == \"number\") {\r\n                node.selected = (node[field] + \"\" == ac_val);\r\n              }\r\n\r\n            }\r\n\r\n            $(document).trigger(\"node-selected\");\r\n\r\n          });\r\n  \r\n          let firstSelected = false;\r\n\r\n          // selects that meets current search criteria\r\n          for(let i = 0; i < n; i++){\r\n  \r\n            if(!firstSelected){\r\n                let node = nodes[i];\r\n\r\n                if (!node[field]) {\r\n                  node.selected = false;\r\n                }\r\n                if (typeof node[field] == \"string\") {\r\n                  node.selected = vre.test(node[field]);\r\n                  firstSelected = true;\r\n                }\r\n                if (typeof node[field] == \"number\") {\r\n                  node.selected = (node[field] + \"\" == val);\r\n                  firstSelected = true;\r\n                }\r\n            } else {\r\n                break;\r\n            }\r\n            \r\n          }\r\n  \r\n          if (!nodes.some(node => node.selected)) console.log('no matches');\r\n        }\r\n\r\n        $(document).trigger(\"node-selected\");\r\n    }\r\n\r\n    /**\r\n     * Updates search-field widget (with variable to search in) can updates search\r\n     */\r\n    public onSearchFieldChange(ev) {\r\n        this.commonService.session.style.widgets[\"search-field\"] = ev;\r\n        this.onSearch();\r\n    }\r\n\r\n    /**\r\n     * Updates search-whole-word widget can updates search\r\n     */\r\n    public onWholeWordChange() {\r\n        this.commonService.session.style.widgets[\"search-whole-word\"] = !this.commonService.session.style.widgets[\"search-whole-word\"];\r\n        this.onSearch();\r\n    }\r\n\r\n    /**\r\n     * Updates search-case-sensitive widget can updates search\r\n     */\r\n    public onCaseSensitiveChange() {\r\n        this.commonService.session.style.widgets[\"search-case-sensitive\"] = !this.commonService.session.style.widgets[\"search-case-sensitive\"];\r\n        this.onSearch();\r\n    }\r\n\r\n\r\n    /**\r\n     * Convert Files list to normal array list\r\n     * @param files (Files List)\r\n     */\r\n    prepareFilesLists($event) {\r\n\r\n        if(this.commonService.debugMode) {\r\n            console.log(\"Trying to prepare files\");\r\n        }\r\n        // this.commonService.resetData();\r\n        this.commonService.session.files.forEach(file => {\r\n            this.visuals.filesPlugin.removeFile(file.name, false);\r\n          })\r\n        this.commonService.session.files = [];\r\n        if (!this.commonService.session.style.widgets) {\r\n            this.commonService.session.style.widgets = this.commonService.defaultWidgets();\r\n        }\r\n\r\n        if(this.commonService.debugMode) {\r\n          console.log('threshold: ', this.commonService.session.style.widgets['link-threshold']);\r\n        }\r\n        // this.loadSettings();\r\n \r\n        // this.homepageTabs[1].isActive = false;\r\n        this.homepageTabs[0].isActive = true;\r\n        $('#overlay').fadeOut();\r\n        $('.ui-tabview-nav').fadeTo(\"slow\", 1);\r\n        $('.m-portlet').fadeTo(\"slow\", 1);\r\n        this.showExport = false;\r\n        this.showCenter = false;\r\n        this.showPinAllNodes = false;\r\n        this.showRefresh = false;\r\n        this.showButtonGroup = false;\r\n        this.showSorting = false;\r\n\r\n        // Remove the default tab\r\n        this._removeGlView('2D Network');\r\n\r\n        if(this.commonService.debugMode) {\r\n            console.log('homepage tabs1: ', this.homepageTabs);\r\n        }\r\n\r\n        this.getfileContent($event);\r\n    }\r\n\r\n    /**\r\n     * Updates metric based on selection\r\n     * @param value - metric selected\r\n     */\r\n     public updateMetric( value: string ) : void {\r\n        this.metric = value;\r\n        if(this.commonService.debugMode) {\r\n            console.log('updating metric: ', this.metric);\r\n        }\r\n\r\n        if (this.metric.toLowerCase() === \"snps\") {\r\n            //Hide Ambiguities\r\n            $('#ambiguities-menu').hide();\r\n            this.threshold = \"7\";\r\n            this.commonService.session.style.widgets[\"link-threshold\"] = 7;\r\n        } else {\r\n\r\n            $('#ambiguities-menu').show();\r\n            this.threshold = \"0.015\";\r\n            this.commonService.session.style.widgets[\"link-threshold\"] = 0.015;\r\n        }\r\n\r\n        // Update distance metric in style\r\n        this.commonService.session.style.widgets['default-distance-metric'] = this.metric.toLocaleLowerCase();\r\n        this.commonService.localStorageService.setItem('default-distance-metric', this.metric.toLocaleLowerCase());\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates ambiguity based on selection and store in style widgets\r\n     * @param value - ambiguity selected\r\n     */\r\n     public updateAmbiguity( value: string ) : void {\r\n        this.ambiguity = value;\r\n        this.commonService.session.style.widgets['ambiguity-resolution-strategy'] = this.ambiguity.toLocaleUpperCase();\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates launch view based on selection\r\n     * @param value - view selected\r\n     */\r\n     public updateLaunchView( value: string ) : void {\r\n        this.launchView = value;\r\n\r\n        this.commonService.localStorageService.setItem('default-view', this.launchView);\r\n        this.commonService.session.style.widgets['default-view'] = this.launchView;\r\n        this.commonService.session.layout.content[0].type = this.launchView;\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates threshold based on selection and stores in style widget\r\n     */\r\n     public updateThreshold(ev : any) : void {\r\n        this.threshold = ev.target.value;\r\n        if(this.commonService.debugMode) {\r\n            console.log('threshold: ', this.threshold);\r\n        }\r\n        this.SelectedLinkThresholdVariable = this.threshold;\r\n        this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = this.SelectedLinkThresholdVariable;\r\n        if(this.commonService.debugMode) {\r\n            console.log('loading settingss1: ', this.visuals.microbeTrace.commonService.session.style.widgets[\"link-threshold\"]);\r\n        }\r\n        this.visuals.microbeTrace.commonService.session.style.widgets[\"link-threshold\"] = Number(this.threshold);\r\n    }\r\n\r\n    /**\r\n     * Handler for recall btn\r\n     * Opens recall window\r\n     * @param {void}\r\n     */\r\n     public recallClicked() : void {\r\n    }\r\n\r\n    /**\r\n     * Handler for continue btn\r\n     * Opens recall window\r\n     * @param {void}\r\n     */\r\n     public continueClicked() : void {\r\n        // this._removeGlView('Files');\r\n        $('#overlay').fadeOut(\"slow\");\r\n        $('.ui-tabview-nav').fadeTo(\"slow\", 1);\r\n        $('.m-portlet').fadeTo(\"slow\", 1);\r\n    }\r\n\r\n    /**\r\n     * Updates background-color widget and then updates background color on twoD network (or any element with #network)\r\n     */\r\n    onBackgroundChanged() {\r\n        this.visuals.microbeTrace.commonService.session.style.widgets['background-color'] = this.visuals.microbeTrace.SelectedBackgroundColorVariable;\r\n\r\n        if ($('div.unovis-single-container > svg:first-of-type') != undefined) {\r\n            $('div.unovis-single-container > svg:first-of-type').css('background-color', this.SelectedBackgroundColorVariable);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Updates GlobalSetingModel variable and cluster-minimum-size widget. Removes and adds clusters when needed\r\n     * \r\n     * XXXXX bug: when minimum cluster size is set to 9 in test dataset, the smallest cluster disappears as expected. When set to 8 it doesn't reappear. Have to \r\n     * value to 1 to get the small cluster to appear. Then even though the small clusters has links, the nodes within it are treated as different cluster (node color by cluster)\r\n     * and network statistics table; however link color by cluster treats them as one cluster. When you set cluster size to 2, the problem resolves. XXXXX\r\n     */\r\n    onMinimumClusterSizeChanged() {\r\n\r\n        this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedClusterMinimumSizeVariable = this.visuals.microbeTrace.SelectedClusterMinimumSizeVariable;\r\n\r\n        let val = parseInt(this.visuals.microbeTrace.SelectedClusterMinimumSizeVariable);\r\n\r\n        this.visuals.microbeTrace.commonService.session.style.widgets[\"cluster-minimum-size\"] = val;\r\n\r\n        // this.visuals.microbeTrace.commonService.setClusterVisibility(true);\r\n        // this.visuals.microbeTrace.commonService.setLinkVisibility(true);\r\n        // this.visuals.microbeTrace.commonService.setNodeVisibility(true);\r\n\r\n        // this.visuals.microbeTrace.updatedVisualization();\r\n\r\n        // this.visuals.microbeTrace.commonService.updateStatistics();\r\n\r\n        this.visuals.microbeTrace.commonService.setLinkVisibility(true);\r\n        this.visuals.microbeTrace.commonService.tagClusters().then(() => {\r\n            this.visuals.microbeTrace.commonService.setClusterVisibility(true);\r\n            this.visuals.microbeTrace.commonService.setNodeVisibility(true);\r\n            this.visuals.microbeTrace.commonService.setLinkVisibility(true);\r\n          [\"cluster\", \"link\", \"node\"].forEach(thing => {\r\n            $(document).trigger(thing + \"-visibility\");\r\n          });\r\n          this.visuals.microbeTrace.commonService.updateStatistics();\r\n          this.visuals.microbeTrace.updatedVisualization();\r\n\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates GlobalSettingsModel variable and link-sort-variable widget. Updates link threshold histogram and then updates network\r\n     */\r\n    onLinkSortChanged() {\r\n        this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedLinkSortVariable = this.visuals.microbeTrace.SelectedLinkSortVariable;\r\n\r\n        this.visuals.microbeTrace.commonService.session.style.widgets[\"link-sort-variable\"] = this.visuals.microbeTrace.SelectedLinkSortVariable;\r\n        this.visuals.microbeTrace.commonService.updateThresholdHistogram();\r\n        this.visuals.microbeTrace.commonService.updateNetwork();\r\n    }\r\n\r\n    /**\r\n     * Reads the file and applies the style to MicrobeTrace session.style\r\n     * \r\n     */\r\n    public onApplyStyle( file: any ){\r\n        $('.custom-file-label').text(this.SelectedApplyStyleVariable.substring(12))\r\n        let reader = new FileReader();\r\n        reader.onload = e => {\r\n            this.commonService.applyStyle(JSON.parse((e as any).target.result)); \r\n        }\r\n        reader.readAsText(file.target.files[0]);\r\n    }\r\n\r\n    applyStyleFileSettings() {\r\n        this.widgets = (window as any).context.commonService.session.style.widgets;\r\n\r\n        if (this.SelectedClusterMinimumSizeVariable != this.widgets['cluster-minimum-size']){\r\n            this.SelectedClusterMinimumSizeVariable = this.widgets['cluster-minimum-size'];\r\n            this.onMinimumClusterSizeChanged();\r\n            // not triggering render clus-vis correctly, may be relate to bug with onMinimumClusterSizeChanged()\r\n        }\r\n\r\n        if (this.SelectedColorNodesByVariable != this.widgets['node-color-variable']){\r\n            this.SelectedColorNodesByVariable = this.widgets['node-color-variable'];\r\n            this.getGlobalSettingsData();\r\n            this.onColorNodesByChanged();\r\n        }\r\n        \r\n        if (this.SelectedColorLinksByVariable != this.widgets['link-color-variable']){\r\n            this.SelectedColorLinksByVariable = this.widgets['link-color-variable'];\r\n            this.onColorLinksByChanged();\r\n        }\r\n\r\n        if (this.SelectedBackgroundColorVariable != this.widgets['background-color']){\r\n            this.SelectedBackgroundColorVariable = this.widgets['background-color'];\r\n            this.onBackgroundChanged();\r\n        }\r\n    }\r\n\r\n    onEpsilonValueChange() {\r\n        this.visuals.microbeTrace.commonService.session.style.widgets[\"mst-computed\"] =false;\r\n        this.onPruneWithTypesChanged(); \r\n    }\r\n\r\n    onPruneWithTypesChanged() {\r\n\r\n        this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedPruneWityTypesVariable = this.visuals.microbeTrace.SelectedPruneWityTypesVariable;\r\n\r\n        //debugger;\r\n\r\n        if (this.visuals.microbeTrace.SelectedPruneWityTypesVariable == \"None\") {\r\n            $('#filtering-epsilon-row').slideUp();\r\n            this.visuals.microbeTrace.commonService.session.style.widgets[\"link-show-nn\"] = false;\r\n            this.visuals.microbeTrace.commonService.updateNetwork();\r\n\r\n            this.visuals.microbeTrace.updatedVisualization();\r\n        }\r\n        else {\r\n            this.SelectedEpsilonValue = Math.pow(10, this.widgets['filtering-epsilon']).toPrecision(3);\r\n            (window as any).context.commonService.session.style.widgets[\"filtering-epsilon\"] = this.widgets['filtering-epsilon'];\r\n            this.visuals.microbeTrace.commonService.session.style.widgets[\"link-show-nn\"] = true;\r\n            $('#filtering-epsilon-row').slideDown();\r\n\r\n            if(!this.visuals.microbeTrace.commonService.session.style.widgets[\"mst-computed\"]) {\r\n                this.visuals.microbeTrace.commonService.computeMST().then(() => {\r\n                    this.visuals.microbeTrace.commonService.updateNetwork();\r\n                    this.visuals.microbeTrace.updatedVisualization();\r\n                    if ('tableComp' in this.commonService.visuals) {\r\n                        if (this.commonService.visuals.tableComp.dataSetViewSelected == 'Link') {\r\n                            this.commonService.visuals.tableComp.openSelectDataSetScreen({value: 'Link'});\r\n                        }\r\n                    }\r\n                });\r\n                this.visuals.microbeTrace.commonService.session.style.widgets[\"mst-computed\"] = true;\r\n                console.log('updated compute:' , this.visuals.microbeTrace.commonService.session.style.widgets[\"mst-computed\"]);\r\n                return;\r\n            } else {\r\n\r\n                this.visuals.microbeTrace.commonService.updateNetwork();\r\n\r\n            }\r\n\r\n            this.visuals.microbeTrace.updatedVisualization();\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    onLinkColorTableChanged() {\r\n\r\n        this.commonService.GlobalSettingsModel.SelectedLinkColorTableTypesVariable = this.SelectedLinkColorTableTypesVariable;\r\n\r\n        if (this.SelectedLinkColorTableTypesVariable == \"Hide\") {\r\n            this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n        }\r\n        else {\r\n            this.onColorLinksByChanged();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates this.commonService.GlobalSettingsModel.SelectedNodeColorTableTypesVariable and \r\n     * then hides the node color table or calls onColorNodesByChanged\r\n     */\r\n    onNodeColorTableChanged() {\r\n\r\n        if(this.commonService.debugMode) {\r\n            console.log('node color changed: ', this.SelectedNodeColorTableTypesVariable);\r\n        }\r\n        this.commonService.GlobalSettingsModel.SelectedNodeColorTableTypesVariable = this.SelectedNodeColorTableTypesVariable;\r\n\r\n        if (this.SelectedNodeColorTableTypesVariable == \"Hide\") {\r\n            this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n        }\r\n        else {\r\n            this.onColorNodesByChanged();         \r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param table 'node' | 'link'\r\n     * @returns boolean of whether the table should be visible based on the table and which view is active\r\n     * This is just one factor to determine whether to show or hide table, also color by variable and show/hide state\r\n     */\r\n    checkActiveView(table: string) {\r\n        if (table == 'node') {\r\n            for (let view in this.commonService.visuals) {\r\n                if (['twoD', 'gisMap', 'phylogenetic'].includes(view) && this.commonService.visuals[view].viewActive) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        } else if (table == 'link') {\r\n            for (let view in this.commonService.visuals) {\r\n                if (['twoD', 'gisMap'].includes(view) && this.commonService.visuals[view].viewActive) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    onShowStatisticsChanged() {\r\n\r\n\r\n        if (this.SelectedStatisticsTypesVariable === \"Show\"){\r\n            this.visuals.microbeTrace.commonService.updateStatistics();\r\n            $(\"#network-statistics-wrapper\").fadeIn();\r\n        } else {\r\n            this.visuals.microbeTrace.commonService.updateStatistics();\r\n            $(\"#network-statistics-wrapper\").fadeOut();\r\n        }\r\n  \r\n\r\n        this.commonService.GlobalSettingsModel.SelectedStatisticsTypesVariable = this.SelectedStatisticsTypesVariable;\r\n\r\n\r\n        // if (this.homepageTabs[this.activeTabNdx].label == \"2D Network\") {\r\n        //     this.homepageTabs[this.visuals.microbeTrace.activeTabNdx].componentRef.enableSettings();\r\n        // }\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates node-color widget and published node color to each view to update them. Only relevant when color nodes by = None\r\n     */\r\n    onNodeColorChanged() {\r\n        let variable = this.SelectedNodeColorVariable;\r\n        this.commonService.session.style.widgets[\"node-color\"] = variable;\r\n\r\n        this.publishUpdateNodeColors();\r\n    }\r\n\r\n    /**\r\n     * calls updateNodeColors() for each view\r\n     */\r\n    publishUpdateNodeColors() {\r\n        this.homepageTabs.forEach(tab => {\r\n            if (tab.componentRef &&\r\n                tab.componentRef.instance.updateNodeColors) {\r\n                tab.componentRef.instance.updateNodeColors();\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Updates visualization for each view that is available\r\n     */\r\n    publishUpdateVisualization() {\r\n        this.homepageTabs.forEach(tab => {\r\n            if (tab.componentRef &&\r\n                tab.componentRef.instance.updateVisualization) {\r\n                tab.componentRef.instance.updateVisualization();\r\n            }\r\n        })\r\n    }\r\n\r\n    publishUpdateLinkColor() {\r\n        this.homepageTabs.forEach(tab => {\r\n            if (tab.componentRef &&\r\n                tab.componentRef.instance.updateLinkColor) {\r\n                tab.componentRef.instance.updateLinkColor();\r\n            }\r\n        })\r\n    }\r\n\r\n    public onLinkColorChanged() : void {\r\n\r\n\r\n        this.commonService.session.style.widgets[\"link-color\"] = this.SelectedLinkColorVariable;\r\n\r\n        this.publishUpdateLinkColor();\r\n\r\n    }\r\n\r\n    onColorLinksByChanged() {\r\n\r\n        this.visuals.microbeTrace.SelectedColorLinksByVariable = this.visuals.microbeTrace.SelectedColorLinksByVariable;\r\n\r\n        this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedColorLinksByVariable = this.visuals.microbeTrace.SelectedColorLinksByVariable;\r\n\r\n        if (!this.GlobalSettingsLinkColorDialogSettings.isVisible) {\r\n\r\n            if (this.SelectedColorLinksByVariable != \"None\" && this.checkActiveView('link')) {\r\n                this.SelectedLinkColorTableTypesVariable = \"Show\";\r\n                this.GlobalSettingsLinkColorDialogSettings.setVisibility(true);\r\n                this.cachedGlobalSettingsLinkColorVisibility = this.GlobalSettingsLinkColorDialogSettings.isVisible;\r\n                \r\n                this.cdref.detectChanges();\r\n            }\r\n        }\r\n\r\n        this.visuals.microbeTrace.commonService.GlobalSettingsModel.SelectedColorLinksByVariable = this.visuals.microbeTrace.SelectedColorLinksByVariable;\r\n        this.visuals.microbeTrace.commonService.session.style.widgets['link-color-variable'] = this.visuals.microbeTrace.SelectedColorLinksByVariable;\r\n\r\n\r\n        if (this.SelectedColorLinksByVariable != \"None\") {\r\n\r\n            this.generateNodeLinkTable(\"#link-color-table\");\r\n\r\n            $('#link-color-value-row').slideUp();\r\n\r\n            //If hidden by default, unhide to perform slide up and down\r\n            if(!this.ShowGlobalSettingsLinkColorTable){\r\n                const element = this.el.nativeElement.querySelector('#link-color-table');\r\n                this.commonService.setLinkTableElement(element);\r\n                this.ShowGlobalSettingsLinkColorTable = true;\r\n            } else {\r\n                $('#link-color-table-row').slideDown();\r\n            }\r\n\r\n            this.publishUpdateLinkColor();\r\n        }\r\n        else {\r\n            $('#link-color-table').empty();\r\n            $('#link-color-value-row').slideDown();\r\n            $('#link-color-table-row').slideUp();\r\n            this.SelectedLinkColorTableTypesVariable='Hide';\r\n            this.onLinkColorTableChanged();\r\n\r\n            this.publishUpdateLinkColor();\r\n\r\n        }\r\n    }\r\n\r\n    generateNodeLinkTable(tableId: string, isEditable: boolean = true) {\r\n        let linkColorTable = $(tableId)\r\n        .empty()\r\n        .append(\r\n            \"<tr>\" +\r\n            (\"<th class='p-1 table-header-row'><div class='header-content'><span contenteditable>Link \" + this.commonService.titleize(this.SelectedColorLinksByVariable) + \"</span><a class='sort-button' style='cursor: pointer'></a></div></th>\") +\r\n            `<th class='table-header-row tableCount' ${ this.widgets['link-color-table-counts'] ? \"\" : \"style='display: none'\"}><div class='header-content'><span contenteditable>Count</span><a class='sort-button' style='cursor: pointer'></a></div></th>` +\r\n            `<th class='table-header-row tableFrequency' ${ this.widgets['link-color-table-frequencies'] ? \"\" : \"style='display: none'\"}><div class='header-content'><span contenteditable>Frequency</span><a class='sort-button' style='cursor: pointer'></a></div></th>` +\r\n            \"<th>Color</th>\" +\r\n            \"</tr>\"\r\n        );\r\n\r\n        if (!this.visuals.microbeTrace.commonService.session.style.linkValueNames)\r\n            this.visuals.microbeTrace.commonService.session.style.linkValueNames = {};\r\n            \r\n        let aggregates = this.visuals.microbeTrace.commonService.createLinkColorMap();\r\n        console.log('link aggregates: ', aggregates);\r\n        let vlinks = this.visuals.microbeTrace.commonService.getVisibleLinks();\r\n        let aggregateValues = Object.keys(aggregates);\r\n\r\n        const disabled: string = isEditable ? '' : 'disabled';\r\n\r\n        aggregateValues.forEach((value, i) => {\r\n\r\n            if (aggregates[value] == 0) {\r\n                return;\r\n            }\r\n            console.log('link color aggregates value: ', aggregates[value]);\r\n            console.log('link color value: ', value);\r\n            console.log('link color map: ', this.visuals.microbeTrace.commonService.temp.style.linkColorMap);\r\n            console.log('link color map value: ', this.visuals.microbeTrace.commonService.temp.style.linkColorMap(value));\r\n\r\n            // Grab color of link from session\r\n            const color = this.visuals.microbeTrace.commonService.temp.style.linkColorMap(value);\r\n\r\n            // Create color input element with color value and assign id to retrieve new value on change\r\n            let colorinput = $(`<input type=\"color\" value=\"${color}\" ${disabled}>`)\r\n                .on(\"change\", e => {\r\n\r\n                    // Need to get value from id since \"this\" keyword is used by angular\r\n                    // Update that value at the index in the color table\r\n                    (this.visuals.microbeTrace.commonService.session.style.linkColors as any).splice(i, 1,e.target['value']);\r\n\r\n                    // Generate new color map with updated table\r\n                    this.visuals.microbeTrace.commonService.temp.style.linkColorMap = d3\r\n                        .scaleOrdinal(this.visuals.microbeTrace.commonService.session.style.linkColors)\r\n                        .domain(aggregateValues);\r\n\r\n\r\n                    // Call the updateLinkColor method in the active tab\r\n                    this.visuals.microbeTrace.homepageTabs[this.activeTabIndex].componentRef.instance.updateLinkColor();\r\n\r\n                });\r\n\r\n            let alphainput = $(`<a class=\"transparency-symbol\"></a>`)\r\n                .on(\"click\", e => {\r\n\r\n                    $(\"#color-transparency-wrapper\").css({\r\n                        top: e.clientY + 129,\r\n                        left: e.clientX,\r\n                        display: \"block\"\r\n                    });\r\n\r\n                    $(\"#color-transparency\")\r\n                        .val(this.visuals.microbeTrace.commonService.session.style.linkAlphas[i])\r\n                        .on(\"change\", (f) => {\r\n\r\n                            // Update table with new alpha value\r\n                            // Need to get value from id since \"this\" keyword is used by angular\r\n                            this.visuals.microbeTrace.commonService.session.style.linkAlphas.splice(i, 1, parseFloat((f.target['value'] as string)));\r\n                            this.visuals.microbeTrace.commonService.temp.style.linkAlphaMap = d3\r\n                                .scaleOrdinal(this.visuals.microbeTrace.commonService.session.style.linkAlphas)\r\n                                .domain(aggregateValues);\r\n                            $(\"#color-transparency-wrapper\").fadeOut();\r\n\r\n                            this.visuals.microbeTrace.homepageTabs[this.activeTabIndex].componentRef.instance.updateLinkColor();\r\n                            // this.goldenLayout.componentInstances[1].updateLinkColor();\r\n\r\n                        });\r\n                });\r\n\r\n            let row = $(\r\n                \"<tr>\" +\r\n                \"<td data-value='\" + value + \"'>\" +\r\n                (this.visuals.microbeTrace.commonService.session.style.linkValueNames[value] ? this.visuals.microbeTrace.commonService.session.style.linkValueNames[value] : this.commonService.titleize(\"\" + value)) +\r\n                \"</td>\" +\r\n                `<td class='tableCount' ${ this.widgets['link-color-table-counts'] ? \"\" : \"style='display: none'\"}>` + aggregates[value] + \"</td>\" +\r\n                `<td class='tableFrequency' ${ this.widgets['link-color-table-frequencies'] ? \"\" : \"style='display: none'\"}>` + (aggregates[value] / vlinks.length).toLocaleString() + \"</td>\" +\r\n                \"</tr>\"\r\n            );\r\n\r\n            const nonEditCell = `<td style=\"background-color:${color}\"></td>`;\r\n\r\n            if (isEditable) {\r\n                row.append($(\"<td></td>\").append(colorinput).append(alphainput));\r\n            } else {\r\n                row.append(nonEditCell);\r\n            }\r\n\r\n            linkColorTable.append(row);\r\n        });\r\n\r\n        if (isEditable) {\r\n            linkColorTable\r\n                .find(\"td\")\r\n                .on(\"dblclick\", function () {\r\n                    $(this).attr(\"contenteditable\", \"true\").focus();\r\n                })\r\n                .on(\"focusout\", () => {\r\n                    let $this = $(this);\r\n                    $this.attr(\"contenteditable\", \"false\");\r\n\r\n                    this.visuals.microbeTrace.commonService.session.style.linkValueNames[$this.data(\"value\")] = $this.text();\r\n\r\n                });\r\n        }\r\n\r\n        let isAscending = true;  // add this line before the click event handler\r\n        this.updateCountFreqTable('link-color')\r\n        $('#linkColorTableSettings').on('mouseleave', () => $('#linkColorTableSettings').delay(500).css('display', 'none'));\r\n\r\n        $(tableId).on('click', '.sort-button', function() {\r\n            let table = $(this).parents('table').eq(0);\r\n            let rows = table.find('tr:gt(0)').toArray().sort(comparer($(this).parent().parent().index()));\r\n            isAscending = !isAscending;  // replace 'this.asc' with 'isAscending'\r\n            if (!isAscending){rows = rows.reverse();}\r\n            for (let i = 0; i < rows.length; i++){\r\n                table.append(rows[i]);\r\n            }\r\n        });\r\n        \r\n        \r\n        function comparer(index) {\r\n            return function(a, b) {\r\n                let valA = getCellValue(a, index), valB = getCellValue(b, index);\r\n                if(this.commonService.debugMode) {\r\n                    console.log(`Comparing: ${valA} and ${valB}`);  // New line\r\n                }\r\n                return !isNaN(Number(valA)) && !isNaN(Number(valB)) ? Number(valA) - Number(valB) : valA.toString().localeCompare(valB);\r\n            }\r\n        }\r\n        \r\n        function getCellValue(row, index){ \r\n            let value = $(row).children('td').eq(index).text();\r\n            if(this.commonService.debugMode) {\r\n                console.log(`Cell value: ${value}`);  // New line\r\n            }\r\n            return value;\r\n        }        \r\n     }\r\n\r\n    public onTimelineChanged(e) : void {\r\n        this.SelectedTimelineVariable = e;\r\n        if(this.commonService.debugMode) {\r\n            console.log('timeline changed: ', e);\r\n        }\r\n        d3.select('#global-timeline svg').remove();\r\n        clearInterval(this.visuals.microbeTrace.commonService.session.timeline);\r\n        let variable = e;  \r\n        let loadingJsonFile = this.visuals.microbeTrace.commonService.session.style.widgets[\"node-timeline-variable\"] == variable;\r\n        if (this.visuals.microbeTrace.commonService.session.style.widgets[\"node-timeline-variable\"] != 'None' && !loadingJsonFile) {\r\n            // change timeline variable when end time not reaching target time - redraw netwrok to start fresh\r\n            if (moment(this.visuals.microbeTrace.commonService.session.state.timeEnd).toDate() < moment(this.visuals.microbeTrace.commonService.session.state.timeTarget).toDate()) {\r\n                this.visuals.microbeTrace.commonService.session.state.timeEnd = this.visuals.microbeTrace.commonService.session.state.timeTarget;\r\n            this.visuals.microbeTrace.commonService.setNodeVisibility(false);\r\n            this.visuals.microbeTrace.commonService.setLinkVisibility(false);\r\n            this.visuals.microbeTrace.commonService.updateStatistics();\r\n            }\r\n        }\r\n        this.visuals.microbeTrace.commonService.session.style.widgets[\"node-timeline-variable\"] = variable;\r\n        this.commonService.createNodeColorMap();\r\n        if (variable == \"None\") {\r\n            $(\"#global-timeline-field\").empty();\r\n            this.visuals.microbeTrace.commonService.session.style.widgets[\"timeline-date-field\"] = 'None'  \r\n            $(\"#global-timeline-wrapper\").fadeOut();\r\n            $('#pinbutton').prop(\"disabled\", false);\r\n            if(!this.visuals.microbeTrace.commonService.session.network.timelinePinned) {\r\n            $('#pinbutton').trigger('click');\r\n            //this.visuals.microbeTrace.commonService.updatePinNodes(false);\r\n            }\r\n            this.visuals.microbeTrace.commonService.session.network.timelineNodes = [];\r\n            this.visuals.microbeTrace.commonService.setNodeVisibility(false);\r\n            this.visuals.microbeTrace.commonService.setLinkVisibility(false);\r\n            this.visuals.microbeTrace.commonService.updateStatistics();\r\n            return;\r\n        }\r\n\r\n        // need to check and ensure bubble nodes are sorted by this variable, then rerender/recalculate bubbles position\r\n        if ('bubble' in this.visuals) {\r\n            this.visuals.bubble.sortData(variable);\r\n        }\r\n\r\n        console.log('timeline variable: ', variable);\r\n        if(!this.visuals.microbeTrace.commonService.temp.style.nodeColor) $(\"#node-color-variable\").trigger(\"change\");\r\n\r\n        // let el: HTMLElement = this.pinBtn.nativeElement;\r\n        // console.log('pin : ', el);\r\n        // if (!$('#pinbutton').prop('disabled')){\r\n        //     if (!loadingJsonFile) {\r\n        //         this.visuals.microbeTrace.commonService.session.network.timelinePinned = this.visuals.microbeTrace.commonService.session.network.allPinned;\r\n        //     if(!this.visuals.microbeTrace.commonService.session.network.allPinned) {\r\n        //         this.visuals.microbeTrace.commonService.updatePinNodes(true);\r\n        //         this.openPinAllNodes(1);\r\n        //     }\r\n        //     this.visuals.microbeTrace.commonService.session.network.timelineNodes = this.visuals.microbeTrace.commonService.getNetworkNodes();\r\n        //     }\r\n        //     $('#pinbutton').prop(\"disabled\", true);\r\n        // }\r\n\r\n        if (!loadingJsonFile) {\r\n            this.visuals.microbeTrace.commonService.session.network.timelinePinned = this.visuals.microbeTrace.commonService.session.network.allPinned;\r\n            this.visuals.microbeTrace.commonService.session.network.timelineNodes = this.visuals.microbeTrace.commonService.getNetworkNodes();\r\n        }\r\n        let globalTimelineField =  (this.visuals.microbeTrace.commonService.session.style.overwrite && variable == this.visuals.microbeTrace.commonService.session.style.overwrite['globalTimelineFieldVariable'] ? this.visuals.microbeTrace.commonService.session.style.overwrite['globalTimelineField'] : this.visuals.microbeTrace.commonService.titleize(variable));\r\n        const encodedGlobalTimelineField = globalTimelineField.replace(/[\\u00A0-\\u9999<>\\&]/g, function(i) {\r\n            return '&#'+i.charCodeAt(0)+';';\r\n        });\r\n        $(\"#global-timeline-field\").html(encodedGlobalTimelineField);   \r\n        var formatDateIntoYear = d3.timeFormat(\"%Y\");\r\n        var formatDateIntoMonthYear = d3.timeFormat(\"%b %y\");\r\n        var formatDateIntoMonth = d3.timeFormat(\"%b\");\r\n        var formatDateMonthYear = d3.timeFormat(\"%b %Y\");\r\n        var formatDateDateMonth = d3.timeFormat(\"%b %_d\");\r\n\r\n        let timeDomainStart, timeDomainEnd;\r\n        let field = variable;\r\n        let times = [],\r\n        vnodes = JSON.parse(JSON.stringify(this.visuals.microbeTrace.commonService.session.data.nodes));\r\n        vnodes.forEach(d => {\r\n            let time = moment(d[field]); \r\n            console.log('time moment: ', time);\r\n            if (time.isValid()) {\r\n                console.log('time moment value: ', d[field]);\r\n                d[field] = time.toDate();\r\n                times.push(d[field]);\r\n            } else {\r\n                console.log('time moment not value: ', d[field]);\r\n\r\n                d[field] = null;\r\n            }\r\n        });\r\n        if (times.length < 2) {\r\n            times = [new Date(2000, 1, 1), new Date()];\r\n        }\r\n        timeDomainStart = Math.min(...times);\r\n        timeDomainEnd = Math.max(...times);\r\n\r\n        var days = moment(timeDomainEnd).diff(moment(timeDomainStart), 'days');\r\n        var tickDateFormat = d => {\r\n            if (days<184) return formatDateDateMonth(d);\r\n            else if (days<367) return formatDateIntoMonth(d);\r\n            else if (days<367*5) return formatDateIntoMonthYear(d);\r\n            else return formatDateIntoYear(d);\t\t\r\n        }\r\n        this.handleDateFormat = d => {\r\n            if (days<367) return formatDateDateMonth(d);\r\n            else return formatDateMonthYear(d);\t\t\r\n        }\r\n        let startDate = timeDomainStart;\r\n        let endDate = timeDomainEnd;\r\n        var margin = {top:50, right:50, bottom:0, left:50},\r\n            width = ($('#visualwrapper').width() * 4 / 5) - margin.left - margin.right,\r\n            height = 200 - margin.top - margin.bottom;\r\n        console.log('time network width: ', $('#visualwrapper').width());\r\n        console.log('time width: ', width);\r\n        var svgTimeline = d3.select(\"#global-timeline\")\r\n            .append(\"svg\")\r\n            .attr(\"width\", width + margin.left + margin.right)\r\n            .attr(\"height\", 120);  \r\n\r\n            ////////// slider //////////\r\n        this.currentTimelineValue = 0;\r\n        this.currentTimelineTargetValue = width;\r\n        this.visuals.microbeTrace.commonService.session.state.timeStart = startDate;\r\n\r\n        let that = this;\r\n        var playButton = d3.select(\"#timeline-play-button\");\r\n        if (playButton.text() == \"Pause\") playButton.text(\"Play\");\r\n        this.xAttribute = d3.scaleTime()\r\n            .domain([startDate, endDate])\r\n            .range([0, this.currentTimelineTargetValue])\r\n            .clamp(true)\r\n            .nice();\r\n        var slider = svgTimeline.append(\"g\")\r\n            .attr(\"class\", \"slider\")\r\n            .attr(\"transform\", \"translate(30,\" + height/2 + \")\");\r\n        \r\n            console.log('attribute: ', this.xAttribute.range());\r\n            console.log('attributex: ', this.xAttribute.range()[0]);\r\n\r\n        slider.append(\"line\")\r\n            .attr(\"class\", \"track\")\r\n            .attr(\"x1\", this.xAttribute.range()[0])\r\n            .attr(\"x2\", this.xAttribute.range()[1])\r\n            .attr(\"stroke\", \"#ddd\")  // Ensure this is a visible color\r\n            .attr(\"stroke-width\", \"10px\")  // Ensure this is a sufficient width\r\n            // Pre D3\r\n            // .select(function() { return this.parentNode.appendChild(this.cloneNode(true)); })\r\n            //.each(function() { this.parentNode.appendChild(this.cloneNode(true)); })\r\n        slider.append('line')\r\n            .attr(\"class\", \"track-inset\")\r\n            .attr(\"x1\", this.xAttribute.range()[0])\r\n            .attr(\"x2\", this.xAttribute.range()[1])\r\n            .attr(\"stroke\", \"#ddd\")  // Ensure this is a visible color\r\n            .attr(\"stroke-width\", \"10px\")  // Ensure this is a sufficient width\r\n            //.each(function() { this.parentNode.appendChild(this.cloneNode(true)); })\r\n        slider.append('line')\r\n            // Pre D3\r\n            // .select(function() { return this.parentNode.appendChild(this.cloneNode(true)); })\r\n            .attr(\"class\", \"track-overlay\")\r\n            .attr(\"x1\", this.xAttribute.range()[0])\r\n            .attr(\"x2\", this.xAttribute.range()[1])\r\n            .attr(\"stroke\", \"#ddd\")  // Ensure this is a visible color\r\n            .attr(\"stroke-width\", \"10px\")  // Ensure this is a sufficient width\r\n            .call(d3.drag()\r\n                .on(\"start.interrupt\", function() { slider.interrupt(); })\r\n                .on(\"start drag\", function() {\r\n                    that.currentTimelineValue = (d3 as any).event.x;\r\n                    that.update(that.xAttribute.invert(that.currentTimelineValue));\r\n                    if (that.playBtnText == \"Pause\") {\r\n                        that.playBtnText = \"Play\";\r\n                    clearInterval(that.visuals.microbeTrace.commonService.session.timeline);\r\n                    }\r\n                })\r\n            );\r\n        slider.insert(\"g\", \".track-overlay\")\r\n            .attr(\"class\", \"ticks\")\r\n            .attr(\"transform\", \"translate(0,\" + 18 + \")\")\r\n            .selectAll(\"text\")\r\n            .data(this.xAttribute.ticks(12))\r\n            .enter()\r\n            .append(\"text\")\r\n            .attr(\"x\", this.xAttribute)\r\n            .attr(\"y\", 10)\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .text(function(d) { return tickDateFormat(d); });\r\n\r\n\r\n        this.label = slider.append(\"text\")  \r\n            .attr(\"class\", \"label\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .text(this.handleDateFormat(startDate))\r\n            .attr(\"transform\", \"translate(25,\" + (-20) + \")\")\r\n\r\n            this.handle = slider.insert(\"circle\", \".track-overlay\")\r\n            .attr(\"class\", \"handle\")\r\n            .attr(\"r\", 9);\r\n\r\n        this.visuals.microbeTrace.commonService.session.style.widgets[\"timeline-date-field\"] = field;\r\n        this.visuals.microbeTrace.commonService.session.state.timeStart = startDate;\r\n        this.visuals.microbeTrace.commonService.session.state.timeTarget = this.xAttribute.invert(this.currentTimelineTargetValue);\r\n        if (loadingJsonFile && moment(this.visuals.microbeTrace.commonService.session.state.timeEnd).toDate() < moment(this.visuals.microbeTrace.commonService.session.state.timeTarget).toDate()) {\r\n            let t = moment(this.visuals.microbeTrace.commonService.session.state.timeEnd).toDate();\r\n            this.currentTimelineTargetValue = this.xAttribute(t);\r\n            this.handle.attr(\"cx\", this.xAttribute(t));\r\n            this.label\r\n            .attr(\"x\", this.xAttribute(t))\r\n            .text(this.handleDateFormat(t));\r\n        }\r\n        $(\"#global-timeline-wrapper\").fadeIn();\r\n       \r\n    }\r\n\r\n    public playTimeline() : void {\r\n\r\n            if (this.playBtnText == \"Pause\") {\r\n                this.playBtnText = \"Play\";\r\n                clearInterval(this.visuals.microbeTrace.commonService.session.timeline);\r\n            } else {\r\n                this.playBtnText = \"Pause\";\r\n                this.visuals.microbeTrace.commonService.session.timeline = setInterval(this.step, this.timelineSpeed, this);\r\n            }\r\n\r\n    }\r\n\r\n    update(h) {\r\n\r\n        this.handle.attr(\"cx\", this.xAttribute(h));\r\n        this.label\r\n        .attr(\"x\", this.xAttribute(h))\r\n        .text(this.handleDateFormat(h));\r\n        this.visuals.microbeTrace.commonService.session.state.timeEnd = h;\r\n        this.visuals.microbeTrace.commonService.setNodeVisibility(false);\r\n        this.visuals.microbeTrace.commonService.setLinkVisibility(false);\r\n        this.visuals.microbeTrace.commonService.updateStatistics();\r\n  }\r\n\r\n    step(that : any) { \r\n        that.update(that.xAttribute.invert(that.currentTimelineValue));\r\n        if (that.currentTimelineValue > that.currentTimelineTargetValue) { \r\n            that.currentTimelineValue = 0;\r\n            clearInterval(that.visuals.microbeTrace.commonService.session.timeline);\r\n            that.playBtnText = \"Play\";\r\n            return;\r\n        }\r\n        that.currentTimelineValue = that.currentTimelineValue + (that.currentTimelineTargetValue/151);\r\n\r\n    }\r\n\r\n    showNodeColorTable() {\r\n        if (this.SelectedNodeColorTableTypesVariable !=' Show') {\r\n            this.SelectedNodeColorTableTypesVariable='Show';\r\n            this.onNodeColorTableChanged();\r\n        };\r\n    }\r\n\r\n    hideNodeColorTable() {\r\n        if (this.SelectedNodeColorTableTypesVariable != 'Hide') {\r\n           this.SelectedNodeColorTableTypesVariable='Hide';\r\n           this.onNodeColorTableChanged()\r\n        }\r\n    }\r\n\r\n    showLinkColorTable() {\r\n        if (this.SelectedLinkColorTableTypesVariable !=' Show') {\r\n            this.SelectedLinkColorTableTypesVariable='Show';\r\n            this.onLinkColorTableChanged();\r\n        }\r\n    }\r\n\r\n    hideLinkColorTable() {\r\n        if (this.SelectedLinkColorTableTypesVariable != 'Hide') {\r\n           this.SelectedLinkColorTableTypesVariable='Hide';\r\n           this.onLinkColorTableChanged()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called when SelectedColorNodesByVariable (keeps track of what variable to use to color nodes by) is changed.\r\n     */\r\n    onColorNodesByChanged() {\r\n\r\n        this.commonService.GlobalSettingsModel.SelectedColorNodesByVariable = this.SelectedColorNodesByVariable;\r\n\r\n\r\n        if (!this.GlobalSettingsNodeColorDialogSettings.isVisible) {\r\n\r\n            if (this.SelectedColorNodesByVariable != \"None\" && this.checkActiveView('node')) {\r\n                this.SelectedNodeColorTableTypesVariable = 'Show';\r\n                this.GlobalSettingsNodeColorDialogSettings.setVisibility(true);\r\n                this.cachedGlobalSettingsNodeColorVisibility = this.GlobalSettingsNodeColorDialogSettings.isVisible;\r\n                let prevColorNodesByVariable = this.SelectedColorNodesByVariable;\r\n\r\n                // this detect changes leads to SelectedColorNodesByVariable being set to default value when loading MT files that have both 2D and map view\r\n                this.cdref.detectChanges();\r\n                if (prevColorNodesByVariable != this.SelectedColorNodesByVariable) this.SelectedColorNodesByVariable = prevColorNodesByVariable;\r\n            }\r\n        }\r\n\r\n        this.commonService.session.style.widgets[\"node-color-variable\"] = this.SelectedColorNodesByVariable;\r\n\r\n\r\n        if (this.SelectedColorNodesByVariable !== \"None\") {\r\n\r\n            this.generateNodeColorTable(\"#node-color-table\");\r\n            \r\n            $('#node-color-value-row').slideUp();\r\n\r\n            //If hidden by default, unhide to perform slide up and down\r\n            if(!this.ShowGlobalSettingsNodeColorTable){\r\n                const element = this.el.nativeElement.querySelector('#node-color-table');\r\n                this.commonService.setNodeTableElement(element);\r\n                this.ShowGlobalSettingsNodeColorTable = true;\r\n            } else {\r\n                $('#node-color-table-row').slideDown();\r\n            }\r\n\r\n            this.visuals.microbeTrace.publishUpdateNodeColors();\r\n\r\n        // if color nodes by equals None, then hide node color table\r\n        } else {\r\n            $('#node-color-table').empty();\r\n            $('#node-color-value-row').slideDown();\r\n            $('#node-color-table-row').slideUp();\r\n            this.SelectedNodeColorTableTypesVariable='Hide';\r\n            this.onNodeColorTableChanged();\r\n            \r\n            this.visuals.microbeTrace.publishUpdateNodeColors();\r\n        }\r\n    }\r\n\r\n    generateNodeColorTable(tableId: string, isEditable: boolean = true) {\r\n        let nodeColorTable = $(tableId)\r\n        .empty()\r\n        .append(\r\n            \"<tr>\" +\r\n            \"<th class='p-1 table-header-row'><div class='header-content'><span contenteditable>Node \" + this.commonService.titleize(this.SelectedColorNodesByVariable) + \"</span><a class='sort-button' style='cursor: pointer'></a></div></th>\" +\r\n            `<th class='table-header-row tableCount' ${ this.widgets['node-color-table-counts'] ? \"\" : \"style='display: none'\"}><div class='header-content'><span contenteditable>Count</span><a class='sort-button' style='cursor: pointer'></a></div></th>` +\r\n            `<th class='table-header-row tableFrequency' ${ this.widgets['node-color-table-frequencies'] ? \"\": \"style='display: none'\"}><div class='header-content'><span contenteditable>Frequency</span><a class='sort-button' style='cursor: pointer'></a></div></th>` +\r\n            \"<th>Color</th>\" +\r\n            \"</tr>\"\r\n        );\r\n\r\n\r\n        if (!this.commonService.session.style.nodeValueNames)\r\n            this.commonService.session.style.nodeValueNames = {};\r\n\r\n\r\n        let aggregates = this.commonService.createNodeColorMap();\r\n\r\n        let vnodes = this.commonService.getVisibleNodes();\r\n\r\n        let aggregateValues = Object.keys(aggregates);\r\n\r\n        const disabled = isEditable ? '' : 'disabled';\r\n\r\n        aggregateValues.forEach((value, i) => {\r\n            if (aggregates[value] < 1) return;\r\n\r\n            const color = this.visuals.microbeTrace.commonService.temp.style.nodeColorMap(value);\r\n\r\n            let colorinput = $(`<input type=\"color\" value=\"${color}\" ${disabled}>`)\r\n                .on(\"change\", e => {\r\n\r\n\r\n                    if(this.commonService.debugMode) {\r\n                        console.log('color: ', this.SelectedColorNodesByVariable);\r\n                        console.log('color2: ',  this.visuals.microbeTrace.commonService.session.style.nodeColorsTableKeys);                    \r\n                    }\r\n \r\n                    let key = this.visuals.microbeTrace.commonService.session.style.nodeColorsTableKeys[this.SelectedColorNodesByVariable].findIndex( k => k === value);\r\n                    this.visuals.microbeTrace.commonService.session.style.nodeColorsTable[this.SelectedColorNodesByVariable].splice(key, 1, e);\r\n\r\n                    // Update history with new color\r\n                    this.visuals.microbeTrace.commonService.session.style.nodeColorsTableHistory[this.visuals.microbeTrace.commonService.session.style.nodeColorsTableKeys[this.SelectedColorNodesByVariable][key]] = e;\r\n\r\n                  \r\n\r\n                    //if (this.visuals.microbeTrace.commonService.session.style.widgets[\"node-timeline-variable\"] == 'None') {\r\n                          // Update table with new alpha value\r\n                        // Need to get value from id since \"this\" keyword is used by angular\r\n                        this.visuals.microbeTrace.commonService.session.style.nodeColors.splice(i, 1, e.target['value']);\r\n                        this.visuals.microbeTrace.commonService.temp.style.nodeColorMap = d3\r\n                            .scaleOrdinal(this.visuals.microbeTrace.commonService.session.style.nodeColors)\r\n                            .domain(aggregateValues);\r\n                        // temp.style.nodeColorMap = d3\r\n                            // .scaleOrdinal(session.style.nodeColorsTable[variable])\r\n                            // .domain(session.style.nodeColorsTableKeys[variable]);\r\n                        //} else {\r\n                            //let temKey = this.visuals.microbeTrace.commonService.temp.style.nodeColorKeys.findIndex( k => k === value);\r\n                            //this.visuals.microbeTrace.commonService.temp.style.nodeColor.splice(temKey, 1, e);\r\n                            //this.visuals.microbeTrace.commonService.temp.style.nodeColorMap = d3\r\n                                //.scaleOrdinal(this.visuals.microbeTrace.commonService.temp.style.nodeColor)\r\n                                //.domain(this.visuals.microbeTrace.commonService.temp.style.nodeColorKeys);\r\n                        //}\r\n\r\n                    this.visuals.microbeTrace.publishUpdateNodeColors();\r\n\r\n                });\r\n\r\n            let alphainput = $(`<a class=\"transparency-symbol\"></a>`).on(\"click\", e => {\r\n\r\n                $(\"#color-transparency-wrapper\").css({\r\n                    top: e.clientY + 129,\r\n                    left: e.clientX,\r\n                    display: \"block\"\r\n                });\r\n\r\n                $(\"#color-transparency\")\r\n                    .val(this.visuals.microbeTrace.commonService.session.style.nodeAlphas[i])\r\n                    .one(\"change\", f => {\r\n\r\n                        // Update table with new alpha value\r\n                        // Need to get value from id since \"this\" keyword is used by angular\r\n                        this.visuals.microbeTrace.commonService.session.style.nodeAlphas.splice(i, 1, parseFloat(f.target['value'] as string));\r\n\r\n                        this.visuals.microbeTrace.commonService.temp.style.nodeAlphaMap = d3\r\n                            .scaleOrdinal(this.visuals.microbeTrace.commonService.session.style.nodeAlphas)\r\n                            .domain(aggregateValues);\r\n\r\n                        this.visuals.microbeTrace.publishUpdateNodeColors();\r\n\r\n                        $(\"#color-transparency-wrapper\").fadeOut();\r\n\r\n                    });\r\n            });\r\n\r\n            const nonEditCell = `<td style=\"background-color:${color}\"></td>`;\r\n\r\n            let cell = $(\"<td></td>\")\r\n                .append(colorinput)\r\n                .append(alphainput);\r\n\r\n            let row = $(\r\n                \"<tr>\" +\r\n                \"<td class='rowName' data-value='\" + value + \"'>\" +\r\n                (this.visuals.microbeTrace.commonService.session.style.nodeValueNames[value] ? this.visuals.microbeTrace.commonService.session.style.nodeValueNames[value] : this.visuals.microbeTrace.commonService.titleize(\"\" + value)) +\r\n                \"</td>\" +\r\n                `<td class='tableCount' ${ this.widgets['node-color-table-counts'] ? \"\" : \"style='display: none'\"}>` + aggregates[value] + \"</td>\" +\r\n                `<td class='tableFrequency' ${ this.widgets['node-color-table-frequencies'] ? \"\": \"style='display: none'\"}>` + (aggregates[value] / vnodes.length).toLocaleString() + \"</td>\" +\r\n                \"</tr>\"\r\n            ).append(isEditable ? cell : nonEditCell);\r\n\r\n            nodeColorTable.append(row);\r\n        });\r\n\r\n        if (isEditable) {\r\n            nodeColorTable\r\n                .find(\"td.rowName\")\r\n                .on(\"dblclick\", function () {\r\n                    $(this).attr(\"contenteditable\", \"true\").focus();\r\n                })\r\n                .on(\"focusout\", () => {\r\n\r\n                    let $this = $(this);\r\n                    $this.attr(\"contenteditable\", \"false\");\r\n\r\n                    //this.visuals.microbeTrace.commonService.session.style.nodeValueNames[$this.data(\"value\")] = $this.find(\"input\").value;\r\n\r\n                });\r\n        }\r\n\r\n        this.updateCountFreqTable('node-color');\r\n        $('#nodeColorTableSettings').on('mouseleave', () => $('#nodeColorTableSettings').delay(500).css('display', 'none'));\r\n        \r\n        $(tableId).on('click', '.sort-button', function() {\r\n            let table = $(this).parents('table').eq(0);\r\n            let rows = table.find('tr:gt(0)').toArray().sort(comparer($(this).parent().parent().index()));\r\n            this.asc = !this.asc; // using property 'asc' on DOM object instead of jQuery data function\r\n            if (!this.asc){rows = rows.reverse();}\r\n            for (let i = 0; i < rows.length; i++){table.append(rows[i]);}\r\n        });\r\n        \r\n        function comparer(index) {\r\n            return function(a, b) {\r\n                let valA = getCellValue(a, index), valB = getCellValue(b, index);\r\n                return !isNaN(Number(valA)) && !isNaN(Number(valB)) ? Number(valA) - Number(valB) : valA.toString().localeCompare(valB);\r\n            }\r\n        }\r\n        \r\n        function getCellValue(row, index){ return $(row).children('td').eq(index).text() }\r\n\r\n    }\r\n\r\n    /**\r\n     * Toggles the setting menu for node-color or link-color table. This menu allow users to show/hide counts and/or frequencies\r\n     * @param tableName 'node-color' or 'link-color'\r\n     */\r\n    toggleColorTableSettings(tableName: string) {\r\n        let settingsPane;\r\n        if (tableName == 'node-color') {\r\n            settingsPane = $('#nodeColorTableSettings')\r\n        } else if (tableName == 'link-color') {\r\n            settingsPane = $('#linkColorTableSettings')\r\n        } else {\r\n            return;\r\n        }\r\n        \r\n        if (settingsPane.css('display') == 'none') {\r\n            settingsPane.css('display', 'block')\r\n        } else {\r\n            settingsPane.css('display', 'none')\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates the appropriate widget value and then updates the node-color or link-color table\r\n     * @param table 'node-color' or 'link-color'\r\n     * @param column 'tableCouts' or 'tableFreq' \r\n     */\r\n    toggleColorTableColumns(table: string, column: string) {\r\n        if (table == 'node-color' && column == 'tableCounts') {\r\n            this.widgets['node-color-table-counts'] = !this.widgets['node-color-table-counts'];\r\n        } else if (table == 'node-color' && column == 'tableFreq') {\r\n            this.widgets['node-color-table-frequencies'] = !this.widgets['node-color-table-frequencies'];\r\n        } else if (table == 'link-color' && column == 'tableCounts') {\r\n            this.widgets['link-color-table-counts'] = !this.widgets['link-color-table-counts']\r\n        } else if (table == 'link-color' && column == 'tableFreq') {\r\n            this.widgets['link-color-table-frequencies'] = !this.widgets['link-color-table-frequencies']\r\n        } else {\r\n            return;\r\n        }\r\n\r\n        this.updateCountFreqTable(table);\r\n    }\r\n\r\n    /**\r\n     * Updates the node-color-table or link-color-table based on value of widgets; it doesn't recalculate anything; just shows/hide columns\r\n     * @param tableName 'node-color' or 'link-color'\r\n     */\r\n    updateCountFreqTable(tableName) {\r\n        let tableReferenceName, showCount, showFreq;\r\n        if (tableName == 'node-color') {\r\n            tableReferenceName = '#global-settings-node-color-table';\r\n            showCount = this.widgets['node-color-table-counts'];\r\n            showFreq = this.widgets['node-color-table-frequencies'];\r\n        } else if (tableName == 'link-color') {\r\n            tableReferenceName = '#global-settings-link-color-table';\r\n            showCount = this.widgets['link-color-table-counts'];\r\n            showFreq = this.widgets['link-color-table-frequencies'];\r\n        }\r\n        let countColumn = $(tableReferenceName + ' .tableCount');\r\n        let freqColumn = $(tableReferenceName + ' .tableFrequency');\r\n        (showCount) ? countColumn.slideDown() : countColumn.slideUp();\r\n        (showFreq) ? freqColumn.slideDown() : freqColumn.slideUp();\r\n    }\r\n\r\n    /**\r\n     * Updated link-threshold widget and this.threshold variable. Sets mst-computed widget to false.\r\n     * Updates clusters and cluster visibility, link visibility, and node visibility. Finallys updates\r\n     * visualizations and stastistics\r\n     */\r\n    onLinkThresholdChanged() {\r\n        //debugger;\r\n\r\n        this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = this.SelectedLinkThresholdVariable;\r\n        this.commonService.session.style.widgets[\"link-threshold\"] = parseFloat(this.SelectedLinkThresholdVariable);\r\n        this.threshold = this.SelectedLinkThresholdVariable;\r\n\r\n        let minClust = $(\"#cluster-minimum-size\").val();\r\n        \r\n\r\n        // Unset MST construction since links might have been changed\r\n        this.commonService.session.style.widgets[\"mst-computed\"] = false;\r\n\r\n        if (minClust !== \"1\" ){\r\n            if(this.commonService.debugMode) {\r\n                console.log('reseting min clust'); \r\n            }\r\n            $(\"#cluster-minimum-size\").val(\"1\");\r\n            $(\"#cluster-minimum-size\").trigger(\"change\");\r\n            $(\"#cluster-minimum-size\").val(minClust);\r\n            $(\"#cluster-minimum-size\").trigger(\"change\");\r\n        } \r\n\r\n        this.commonService.setLinkVisibility(false, false);\r\n        this.commonService.tagClusters().then(() => {\r\n            this.visuals.microbeTrace.commonService.setClusterVisibility(true);\r\n            // $(document).trigger(\"cluster-visibility\");\r\n\r\n            //To catch links that should be filtered out based on cluster size:\r\n            this.visuals.microbeTrace.commonService.setLinkVisibility(true);\r\n            this.visuals.microbeTrace.commonService.setNodeVisibility(true);\r\n\r\n            //Because the network isn't robust to the order in which these operations\r\n            //take place, we just do them all silently and then react as though we did\r\n            //them each after all of them are already done.\r\n\r\n            [\"cluster\", \"link\", \"node\"].forEach(thing => $(document).trigger(thing + \"-visibility\"));\r\n\r\n\r\n            this.updatedVisualization();\r\n\r\n            this.commonService.updateStatistics();\r\n\r\n\r\n        });\r\n\r\n    }\r\n\r\n    revealClicked() : void {\r\n\r\n        $(\"#cluster-minimum-size\").val(1);\r\n        this.visuals.microbeTrace.commonService.session.style.widgets[\"cluster-minimum-size\"] = 1;\r\n        $(\"#filtering-wrapper\").slideDown();\r\n        this.visuals.microbeTrace.commonService.setClusterVisibility(true);\r\n       \r\n        this.visuals.microbeTrace.commonService.setNodeVisibility(true);\r\n         //To catch links that should be filtered out based on cluster size:\r\n         this.visuals.microbeTrace.commonService.setLinkVisibility(true);\r\n        //Because the network isn't robust to the order in which these operations\r\n        //take place, we just do them all silently and then react as though we did\r\n        //them each after all of them are already done.\r\n\r\n        this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.isVisible = true;\r\n        this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.isVisible = true;\r\n\r\n        this.visuals.microbeTrace.updatedVisualization();\r\n\r\n        this.visuals.microbeTrace.commonService.updateStatistics();\r\n\r\n    };\r\n\r\n\r\n    updateGlobalSettingsModel() {\r\n\r\n        this.commonService.GlobalSettingsModel.SelectedRevealTypesVariable = this.SelectedRevealTypesVariable;\r\n\r\n\r\n\r\n        this.SelectedDistanceMetricVariable = this.commonService.session.style.widgets['default-distance-metric'];\r\n        this.commonService.GlobalSettingsModel.SelectedNodeColorVariable = this.SelectedNodeColorVariable;\r\n        this.commonService.session.style.widgets['node-color'] = this.SelectedNodeColorVariable;\r\n        this.commonService.session.style.widgets['link-color'] = this.SelectedLinkColorVariable;\r\n        this.commonService.session.style.widgets['link-threshold'] = this.SelectedLinkThresholdVariable;\r\n        this.commonService.session.style.widgets['node-color-variable'] = this.SelectedColorNodesByVariable;\r\n        //this.commonService.session.style.widgets['node-color-variable'] = this.SelectedNodeColorVariable;\r\n\r\n        // TODO: Removed, see if this is still necessary\r\n        // this.commonService.session.style.widgets['link-tooltip-variable'] = this.SelectedColorLinksByVariable;\r\n\r\n\r\n        this.commonService.GlobalSettingsModel.SelectedColorVariable = this.SelectedColorVariable;\r\n        this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable = this.SelectedLinkThresholdVariable;\r\n        this.commonService.GlobalSettingsModel.SelectedDistanceMetricVariable = this.SelectedDistanceMetricVariable;\r\n        this.commonService.session.style.widgets['selected-color'] = this.SelectedColorVariable;\r\n        this.commonService.session.style.widgets['selected-node-stroke-color'] = this.SelectedColorVariable;\r\n        if (this.commonService.visuals.phylogenetic) {\r\n          this.commonService.visuals.phylogenetic.updateNodeColors();\r\n        }\r\n\r\n\r\n        this.commonService.GlobalSettingsModel.SelectedBackgroundColorVariable = this.SelectedBackgroundColorVariable;\r\n        this.commonService.session.style.widgets['background-color'] = this.SelectedBackgroundColorVariable;\r\n\r\n\r\n        this.commonService.GlobalSettingsModel.SelectedApplyStyleVariable = this.SelectedApplyStyleVariable;\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * this.visuals.microbeTrace.publishUpdateVisualization()\r\n     * \r\n     * XXXXX may need to be updated or trimmed (switch statement has no functionality) XXXXX\r\n     */\r\n    updatedVisualization() {\r\n\r\n        this.visuals.microbeTrace.publishUpdateVisualization();\r\n\r\n        // console.log('active tab ind: ', this.homepageTabs,this.homepageTabs[this.activeTabIndex]);\r\n\r\n        if (!this.homepageTabs[this.activeTabIndex]) return;\r\n\r\n        switch (this.homepageTabs[this.activeTabIndex].label) {\r\n            case \"2D Network\":\r\n\r\n                // this.goldenLayout.componentInstances[this.activeTabIndex].render(false);\r\n                break;\r\n\r\n\r\n            case \"PhylogeneticTree\":\r\n\r\n\r\n                break;\r\n\r\n            case \"Table\":\r\n\r\n\r\n                break;\r\n\r\n            case \"Map\":\r\n\r\n\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    getGlobalSettingsData() {\r\n        this.FieldList = [];\r\n\r\n        this.FieldList.push({ label: \"None\", value: \"None\" });\r\n        this.commonService.session.data['nodeFields'].map((d, i) => {\r\n            \r\n            this.FieldList.push(\r\n                {\r\n                    label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                    value: d\r\n                });\r\n\r\n        });\r\n\r\n\r\n        this.ToolTipFieldList = [];\r\n\r\n        this.ToolTipFieldList.push({ label: \"None\", value: \"None\" });\r\n        this.commonService.session.data['linkFields'].map((d, i) => {\r\n\r\n            this.ToolTipFieldList.push(\r\n                {\r\n                    label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                    value: d\r\n                });\r\n\r\n        });\r\n\r\n\r\n        this.SelectedLinkSortVariable = this.commonService.GlobalSettingsModel.SelectedLinkSortVariable;\r\n        this.commonService.updateThresholdHistogram();\r\n\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * XXXXX no current use or functionality XXXXX \r\n     */\r\n    getUserRoles() {\r\n\r\n        // this._userService.getUserForEdit(this.appSession.userId).subscribe(userResult => {\r\n\r\n        //     this.user = userResult.user;\r\n\r\n        //     userResult.roles.map(x => {\r\n\r\n        //         if (x.isAssigned === true) {\r\n        //             this.roles.push(x.roleName);\r\n        //         }\r\n        //     });\r\n\r\n        // });\r\n    }\r\n\r\n\r\n    /**\r\n     * XXXXX move XXXXX\r\n     */\r\n    ngAfterViewInit() {\r\n\r\n        // let factory = this.cfr.resolveComponentFactory(FilesComponent);\r\n        // this.cmpRef = this.targets.first.createComponent(factory);\r\n        setTimeout(() => {\r\n            this._goldenLayoutHostComponent.initialise();\r\n            \r\n            // headerHeight (tab) is updated so that goldenLayout knows what the css is set to. \r\n            (window as any).context.commonService.visuals.microbeTrace._goldenLayoutHostComponent._goldenLayout.layoutConfig.dimensions.headerHeight = 36;\r\n            this.addComponent('Files');\r\n\r\n          if (this.auspiceUrlVal) {\r\n            if(this.commonService.debugMode) {\r\n                console.log(\"Trying to open URL\");\r\n            }\r\n            this.DisplayUrlDialog(\"Open\");\r\n            this.continueClicked();\r\n            this.displayUrlDialog = false;\r\n            //this.displayMTDialog = true;\r\n            // this.DisplayMTDialog(\"Open\");\r\n            /**\r\n            this.commonService.openAuspiceUrl(this.auspiceUrlVal)\r\n            .then( (out) => {\r\n            if (out['meta'] && out['tree']) {\r\n              const auspiceFile = { contents: out, name: this.getAuspiceName(this.auspiceUrlVal), extension: 'json'};\r\n              this.commonService.session.files.push(auspiceFile);\r\n              this.prepareFilesLists(auspiceFile);\r\n              console.log(out);\r\n            //   console.log(this.homepageTabs[0].componentRef);\r\n                // this.goldenLayout.componentInstances[0].addToTable(auspiceFile);\r\n              this.homepageTabs[0].componentRef.addToTable(auspiceFile);\r\n              this.homepageTabs[0].isActive = true;\r\n            } else {\r\n              console.log(\"This isn't a valid Auspice JSON file\");\r\n            }\r\n            });\r\n            */\r\n          }\r\n          if(this.commonService.debugMode) {\r\n            console.log('golden comp ref: ', this.homepageTabs[0].componentRef.instance);\r\n        }\r\n        this.subscription = this.homepageTabs[0].componentRef.instance.LoadDefaultVisualizationEvent.subscribe((v) => {\r\n            if(this.commonService.debugMode) {\r\n                console.log('loading default1: ', v);\r\n            }\r\n            this.loadDefaultVisualization(v);\r\n            this.publishLoadNewData();\r\n            this.getGlobalSettingsData();\r\n        });\r\n\r\n        this._goldenLayoutHostComponent.TabRemovedEvent.subscribe((v) => {\r\n            // this.loadSettings();\r\n            this.removeComponent(v);\r\n        });\r\n\r\n        this._goldenLayoutHostComponent.TabChangedEvent.subscribe((v) => {\r\n            if (v === \"Files\" || v === \"Epi Curve\" || v === \"Alignment View\" || v === \"Table\" || v === \"Crosstab\" || v === \"Aggregate\" || v === \"Heatmap\" || v === \"Gantt Chart\") {\r\n                this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n                this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n            } else {\r\n                if (this.SelectedColorNodesByVariable == 'None') {\r\n                    this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n                } else {\r\n                    this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n                    this.GlobalSettingsNodeColorDialogSettings.setVisibility(true);  \r\n                }\r\n                if (this.SelectedColorLinksByVariable == 'None' || v === \"Phylogenetic Tree\" || v == 'Bubble') {\r\n                    this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n                } else {\r\n                    this.GlobalSettingsLinkColorDialogSettings.setVisibility(true);\r\n                }\r\n            }\r\n            if (this.GlobalSettingsNodeColorDialogSettings.isVisible && this.SelectedNodeColorTableTypesVariable == 'Hide') {\r\n                this.SelectedNodeColorTableTypesVariable = 'Show';\r\n            } else if (!this.GlobalSettingsNodeColorDialogSettings.isVisible && this.SelectedNodeColorTableTypesVariable == 'Show') {\r\n                this.SelectedNodeColorTableTypesVariable = 'Hide';\r\n            }\r\n            if (this.GlobalSettingsLinkColorDialogSettings.isVisible && this.SelectedLinkColorTableTypesVariable == 'Hide') {\r\n                this.SelectedLinkColorTableTypesVariable = 'Show';\r\n            } else if (!this.GlobalSettingsLinkColorDialogSettings.isVisible && this.SelectedLinkColorTableTypesVariable == 'Show') {\r\n                this.SelectedLinkColorTableTypesVariable = 'Hide';\r\n            }\r\n        });\r\n        }, 0);\r\n        \r\n\r\n        // this.setActiveTabProperties();\r\n\r\n        // this.cdref.detectChanges();\r\n    }\r\n\r\n\r\n    getLedgerData() {\r\n\r\n        // this.ledgerOptions = [];\r\n        // this.ledgerOptionSelected = [];\r\n        // this.ledgerOptionSelectedFlag = true;\r\n\r\n        // this.showSpinner();\r\n\r\n        // this.posts = new Array<BlockchainProofHashDto>();\r\n        // this.Blockchaindata = new BlockchainProofHashDto();\r\n\r\n\r\n        // this.keenService.getAllBlockchainsByTenantID().subscribe((resA: BlockchainProofHashDto[]) => {\r\n        //     this.posts = resA.filter(x => x.ledgerName.toLowerCase() === 'ContactTrace'.toLowerCase());\r\n\r\n        //     let ok2Exit = false;\r\n\r\n        //     let getBlockByLedgerIdObservable: Observable<GetAllBlockByBlockchainLedgerIDDto[]>[] = [];\r\n\r\n        //     for (let i = 0; i < this.posts.length; i++) {\r\n        //         this.posts[i].blockdata = [];\r\n        //         this.date = new Date(parseInt(this.posts[i].lastUpdated.substring(6, 26)));\r\n        //         this.posts[i].lastUpdated = this.date.toString();\r\n        //         this.Blockchaindata = this.posts[i];\r\n\r\n        //         getBlockByLedgerIdObservable.push(this.keenService.getAllBlockByBlockchainLedgerID(\r\n        //             this.Blockchaindata.ledgerName,\r\n        //             this.Blockchaindata.blockChainProofHashCode,\r\n        //             this.Blockchaindata.tenantID,\r\n        //             this.Blockchaindata.userID));\r\n\r\n        //     }\r\n\r\n        //     forkJoin(getBlockByLedgerIdObservable).subscribe(results => {\r\n        //         results.forEach((data: GetAllBlockByBlockchainLedgerIDDto[], index: number) => {\r\n        //             this.posts[index].blockdata = data;\r\n\r\n        //             for (let j = 0; j < this.posts[index].blockdata.length; j++) {\r\n\r\n        //                 this.date = new Date(parseInt(this.posts[index].blockdata[j].blockUpdatedDate.substring(6, 26)));\r\n        //                 this.posts[index].blockdata[j].blockUpdatedDate = this.date.toString();\r\n        //             }\r\n\r\n        //             if (index == this.posts.length - 1) {\r\n        //                 ok2Exit = true;\r\n\r\n        //                 this.loadLedgerOptions();\r\n        //             }\r\n        //         })\r\n        //     },\r\n        //         error => {\r\n        //             console.log(\"error retrieving posts.\");\r\n        //         },\r\n        //         () => {\r\n\r\n        //         });\r\n\r\n        // })\r\n\r\n    }\r\n\r\n    downloadSelectedBlocks() {\r\n\r\n        if (this.ledgerOptionSelected == undefined)\r\n            return;\r\n\r\n        /*/\r\n         * Clear all data previously loaded so that we can re-create new outputs.\r\n        /*/\r\n        const homepageTabs = this.homepageTabs;\r\n        this.commonService.resetData();\r\n        this.homepageTabs = homepageTabs;\r\n\r\n        this.downloadedBlocks = [];\r\n\r\n        this.ledgerOptionSelected.forEach((block, i) => {\r\n\r\n            if (block.data) {\r\n                if (this.downloadedBlocks.findIndex(x => x == block.data.blockName) == -1) {\r\n                    this.downloadedBlocks.push(block.data.blockName);\r\n                    const isNodeList: boolean = block.label.includes('nodelist');\r\n                    // this.downloadLedgerBlock(block.data, block.data.ledgerName, isNodeList)\r\n                }\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    private _removeGlView(view : string) {\r\n        console.log(`Removing ${view}`);\r\n        this._goldenLayoutHostComponent.removeComponent(view);\r\n        this.removeComponent(view);\r\n    }\r\n\r\n\r\n    convertToCSV(objArray) {\r\n\r\n        let tmpArray = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;\r\n        let str = '';\r\n        let headerLoaded = false;\r\n        let line = '';\r\n\r\n\r\n        for (var i = 0; i < tmpArray.length; i++) {\r\n            line = '';\r\n\r\n            if (headerLoaded == false) {\r\n                for (let index1 in tmpArray[i]) {\r\n                    if (line != '') line = line.toString() + ','\r\n\r\n                    line = line.toString() + index1.toString().replace(/\\r/g, '').replace(/\\n/g, '').trim();\r\n                }\r\n\r\n                str = str.toString() + line.toString() + '\\r\\n';\r\n\r\n                headerLoaded = true;\r\n            }\r\n            line = '';\r\n\r\n            for (let index2 in tmpArray[i]) {\r\n                if (line != '') line = line.toString() + ','\r\n\r\n                line = line.toString() + tmpArray[i][index2].toString();\r\n            }\r\n\r\n            if (line != \"\") {\r\n                str = str.toString() + line.toString().replace(/\\r/g, '').replace(/\\r/g, '').trim() + (i == tmpArray.length - 1 ? '' : '\\r\\n');\r\n            }\r\n        }\r\n\r\n        return str;\r\n    }\r\n\r\n    // downloadLedgerBlock(item: DownloadFilteredBlockDto, ledgerId, isNodeList: boolean): void {\r\n    //     const filteredWrappers = this.bpaaSPayloadWrappers.filter(x => x.BlockName &&  x.BlockName.toLowerCase() === item.blockName.toLowerCase());\r\n\r\n    //     const detailRows = _.flatten(filteredWrappers.map(x => x.BpaaSPayload.Data))\r\n\r\n    //     let blob: any = new Blob([JSON.stringify(detailRows)], { type: 'text/plain' });\r\n    //     blob.lastModifiedDate = new Date();\r\n    //     blob.name = (item.blockName + \".json\");\r\n\r\n\r\n    //     var file: File = <File>blob;\r\n\r\n    //     this.getSinglefileContent(file);\r\n\r\n    //     abp.notify.success(\"Ledger block successfully downloaded.\");\r\n    //     this.hideSpinner();\r\n\r\n    // }\r\n\r\n    officialInstance () {\r\n        const prodVal = RegExp(/https:\\/\\/microbetrace.cdc.gov\\/MicrobeTrace/);\r\n        const devVal = RegExp(/https:\\/\\/cdcgov.github.io\\/MicrobeTrace/);\r\n        if (prodVal.test(this.currentUrl) || devVal.test(this.currentUrl)) {\r\n            return true;\r\n        } else {\r\n            const el: HTMLElement | null = this.getElementById(\"overlay\");\r\n            if (el) el.style.top = `${$('#url-warning-div').height()}px`;\r\n            return false;\r\n        }\r\n    }\r\n\r\n    getHeight() {\r\n        let timelineHeight = this.commonService.session.style.widgets[\"timeline-date-field\"] == 'None' ? 0 : 150\r\n        if (this.officialInstance()) {\r\n            return window.innerHeight - 64 - 6 - timelineHeight;\r\n        } else {\r\n            let warningHeight = $('#url-warning-div').height()\r\n            return window.innerHeight - 64 - 6 - warningHeight - timelineHeight;\r\n        }\r\n    }\r\n\r\n    showSpinner() {\r\n        this.spinnerDivElement.nativeElement.style.display = \"block\";\r\n        this.spinnerElement.nativeElement.style.display = \"block\";\r\n    }\r\n\r\n    hideSpinner() {\r\n        this.spinnerDivElement.nativeElement.style.display = \"none\";\r\n        this.spinnerElement.nativeElement.style.display = \"none\";\r\n    }\r\n\r\n\r\n    public loadLedgerOptions() {\r\n\r\n        this.BlockChainLedgerNodeList = [];\r\n        this.BlockChainLedgerEdgeList = [];\r\n        this.ledgerOptions = [];\r\n\r\n        // let postCount = this.posts.length;\r\n        let loadedAny: boolean = false;\r\n        // let observableFilterBlocks: { post: BlockchainProofHashDto, ob: Observable<OutputDownloadFilteredBlock> }[] = [];\r\n\r\n        const endLoadBadly = () => {\r\n            this.hideSpinner();\r\n            // abp.notify.warn(\"Your role(s) do not allow access to a ledger.  See your administrator to grant you roles to access a ledger.\");\r\n        }\r\n\r\n        const endLoadNoData = () => {\r\n            this.hideSpinner();\r\n            // abp.notify.warn(\"No data was loaded\");\r\n        }\r\n    }\r\n\r\n    public loadDefaultVisualization(e: string) {\r\n\r\n        e = e.replace(\"_\", \" \");\r\n\r\n        if (e === \"2d network\"){\r\n            e = \"2D Network\";\r\n        }\r\n\r\n        this.resetLayout();\r\n\r\n        setTimeout(() => {\r\n            if (this.homepageTabs.findIndex(x => x.label == e) === -1) {\r\n                this.Viewclick(e);\r\n            }\r\n        }, 500);\r\n        \r\n    }\r\n\r\n    public resetLayout() {\r\n    \r\n        this.homepageTabs.forEach( tab => {\r\n            if (tab.label !== \"Files\") {\r\n                console.group('removing: ', tab.label);\r\n                this._removeGlView(tab.label);\r\n            }\r\n        });\r\n\r\n        this.activeTabIndex = 0;\r\n    }\r\n\r\n    public getfileContent(fileList: FileList) {\r\n\r\n        this.GlobalSettingsDialogSettings.setVisibility(false);\r\n        this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n        this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n\r\n        if(this.commonService.debugMode) {\r\n            console.log('process files::');\r\n        }\r\n        // TODO: unccomment back when updated\r\n        // this.srv.removeTab(0,1);\r\n        //remove last homepage tab\r\n        // this.homepageTabs.splice(this.homepageTabs.length - 1, 1);\r\n        // console.log('homepagetabs: ', this.homepageTabs);\r\n        // this.goldenLayout.componentInstances[0].processFiles(fileList)\r\n\r\n        this.homepageTabs.map(x => {\r\n            if (x.label === \"Files\") {\r\n                if (x.componentRef != null) {\r\n                    this.subscription.unsubscribe();\r\n                    this.subscription = this.homepageTabs[0].componentRef.instance.LoadDefaultVisualizationEvent.subscribe((v) => {\r\n                        if(this.commonService.debugMode) {\r\n                            console.log('loading default2: ', v);\r\n                        }\r\n                        // this.loadSettings();\r\n                        this.loadDefaultVisualization(v);\r\n                        this.publishLoadNewData();\r\n                    });\r\n                    x.componentRef.instance.processFiles(fileList);\r\n\r\n                    // ensure files table is populated after processing\r\n                    setTimeout(() => {\r\n                        x.componentRef.instance.populateTable();\r\n                    }, 1000);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public getSinglefileContent(file: File) {\r\n\r\n        // this.goldenLayout.componentInstances[0].processFile(file);\r\n\r\n        this.homepageTabs.map(x => {\r\n            if (x.label === \"Files\") {\r\n                if (x.componentRef != null) {\r\n                    x.componentRef.processFile(file);\r\n                    //TODO does this need instance?\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public onPanelHide($event) {\r\n        console.log($event);\r\n    }\r\n\r\n    public onClickChildOptionContainer($event) {\r\n\r\n    }\r\n\r\n    public onClickChildOptionChecbox($event) {\r\n\r\n    }\r\n\r\n    public onChangeChildOptionCheckbox($event) {\r\n\r\n    }\r\n\r\n    DisplayHelp() {\r\n        window.open(\"https://github.com/CDCgov/MicrobeTrace/wiki\");\r\n    }\r\n\r\n    DisplayAbout() {\r\n        this.displayAbout = !this.displayAbout;\r\n    }\r\n\r\n\r\n    DisplayLedgerLoaderDialog(ledgerLoaderAction: string = \"\") {\r\n        switch (ledgerLoaderAction) {\r\n            case \"Load\": {\r\n                this.downloadSelectedBlocks();\r\n                break;\r\n            }\r\n            default: {\r\n                this.getLedgerData();\r\n            }\r\n        }\r\n\r\n        this.ToggleDisplayLedgerLoaderDialog();\r\n\r\n    }\r\n\r\n    ToggleDisplayLedgerLoaderDialog() {\r\n        this.displayLedgerLoaderDialog = !this.displayLedgerLoaderDialog;\r\n    }\r\n\r\n    clusterSaveClick() {\r\n\r\n    }\r\n\r\n    DisplayStashDialog(saveStash: string) {\r\n        switch (saveStash) {\r\n            case \"Save\": {\r\n\r\n                if (this.selectedSaveFileType == 'style') {\r\n                    let data = JSON.stringify(this.commonService.session.style);\r\n                    let blob = new Blob([data], { type: \"application/json;charset=utf-8\" });\r\n                    saveAs(blob, this.saveFileName+'.style')\r\n                    return;\r\n                }\r\n\r\n                let zip = new JSZip();\r\n\r\n                const lightTabs: HomePageTabItem[] = this.homepageTabs.map(x => {\r\n                    return {\r\n                        label: x.label,\r\n                        tabTitle: x.tabTitle,\r\n                        isActive: x.isActive,\r\n                        componentRef: undefined,\r\n                        templateRef: undefined\r\n                    }\r\n                });\r\n\r\n                if(this.saveByCluster){\r\n                    let clusterNodeList = [];\r\n                    let clusterLinkList = [];\r\n                    let singletonNodeList = [];\r\n                    let dyadNodeList = [];\r\n                    let dyadEdgeList = [];\r\n                    let nodes = this.commonService.session.data.nodes;\r\n                    let links = this.commonService.session.data.links;\r\n\r\n                    this.commonService.session.data.clusters.forEach(cluster => {\r\n\r\n                    let clusterNodes = nodes.filter(node => node.cluster === cluster.id);\r\n\r\n                    let clusterLinks = links.filter(link => link.cluster === cluster.id);\r\n\r\n                    // We have a singleton - all singletons go into one file\r\n                    if(clusterNodes.length == 1){\r\n                        singletonNodeList.push(clusterNodes[0]);\r\n                    // We have a dyad - all dyads go into one file\r\n                    } else if (clusterNodes.length == 2) {\r\n                        // Add both nodes\r\n                        dyadNodeList.push(clusterNodes[0]);\r\n                        dyadNodeList.push(clusterNodes[1]);\r\n                        // Add the single link\r\n                        dyadEdgeList.push(clusterLinks[0]);\r\n                    // We have a cluster\r\n                    } else {\r\n                        // Add array object of nodes with matching cluster\r\n                        clusterNodeList.push(clusterNodes);\r\n\r\n                        // Add array object of links with matching cluster\r\n                        clusterLinkList.push(clusterLinks);\r\n                    }\r\n\r\n                    });\r\n\r\n                    let singletonFolder = null;\r\n                    let dyadFolder = null;\r\n\r\n                    for (var i = 0; i < this.commonService.session.data.clusters.length; i++) {\r\n\r\n                    let currentCluster = this.commonService.session.data.clusters[i];\r\n\r\n                    let cluster = clusterNodeList.filter(nodeList => nodeList[0].cluster == currentCluster.id);\r\n\r\n                    // Check if cluster is in clusterNodesList\r\n                    if(cluster.length > 0){\r\n\r\n                        // Create cluster folder\r\n                        var clusterFolder = zip.folder(\"cluster-\" + cluster[0][0].cluster);\r\n                    \r\n                        // If node and edge lists exists, add them to the current folder\r\n                        let clusterNode = clusterNodeList.filter(NodeList => NodeList[0].cluster == currentCluster.id);\r\n\r\n                        if(clusterNode) {\r\n\r\n                        let blob = new Blob([Papa.unparse(cluster[0])], {type: 'text/csv;charset=utf-8'});\r\n                        clusterFolder.file( \"nodeList_cluster_\" + cluster[0][0].cluster + \".csv\", blob);\r\n\r\n                        // Now get link list of cluster\r\n                        let clusterLink = clusterLinkList.filter(LinkList => LinkList[0].cluster == currentCluster.id);\r\n\r\n                        if(clusterLink) {\r\n                            let blob = new Blob([Papa.unparse(clusterLink[0])], {type: 'text/csv;charset=utf-8'});\r\n                            clusterFolder.file(\"edgeList_cluster_\" + cluster[0][0].cluster + \".csv\", blob);\r\n                        }\r\n                        }\r\n                    }\r\n                    }\r\n\r\n                    if(dyadNodeList.length > 0){\r\n                        dyadFolder = zip.folder(\"dyads\");\r\n                        // Add all dyads in one shot\r\n                        let nodesBlob = new Blob([Papa.unparse(dyadNodeList)], {type: 'text/csv;charset=utf-8'});\r\n                        dyadFolder.file(\"nodeList_cluster.csv\", nodesBlob);\r\n                        let edgesBlob = new Blob([Papa.unparse(dyadEdgeList)], {type: 'text/csv;charset=utf-8'});\r\n                        dyadFolder.file(\"edgeList_cluster.csv\", edgesBlob);\r\n                      }\r\n                \r\n                      if (singletonNodeList.length > 0) {\r\n                        singletonFolder = zip.folder(\"singletons\");\r\n                        // Add all singletons in one shot\r\n                        let blob = new Blob([Papa.unparse(singletonNodeList)], {type: 'text/csv;charset=utf-8'});\r\n                        singletonFolder.file(\"nodeList_cluster.csv\", blob);\r\n                      }\r\n                        \r\n                      let that = this;\r\n                      // generate zip repsetnation in memory\r\n                      zip.generateAsync({type:\"blob\"}).then(function(content) {\r\n                          // see FileSaver.js\r\n                          saveAs(content, `${that.saveFileName}.zip`);\r\n                      });\r\n                } else {\r\n                    const stash: StashObjects = {\r\n                        session: this.visuals.microbeTrace.commonService.session,\r\n                        tabs: lightTabs\r\n                    };\r\n\r\n                    let that = this;\r\n\r\n                    if ($(\"#save-file-compress\").is(\":checked\")) {\r\n                        let zip = new JSZip();\r\n                        zip.file(`${that.saveFileName}.microbetrace`, new Blob([JSON.stringify(stash)], { type: \"application/json;charset=utf-8\" }));\r\n                        zip.generateAsync({\r\n                            type: \"blob\",\r\n                            compression: \"DEFLATE\",\r\n                            compressionOptions: {\r\n                                level: 9\r\n                            }\r\n                        })\r\n                        .then(content => saveAs(content, `${that.saveFileName}.zip`));\r\n                    } else {\r\n                        const blob = new Blob([JSON.stringify(stash)], { type: \"application/json;charset=utf-8\" });\r\n                        saveAs(blob, `${this.saveFileName}.microbetrace`);\r\n                    }\r\n    \r\n                   \r\n                }\r\n\r\n\r\n                \r\n                break;\r\n            }\r\n            case \"Cancel\": {\r\n\r\n                break;\r\n            }\r\n        }\r\n        this.displayStashDialog = !this.displayStashDialog;\r\n    }\r\n\r\n    getAuspiceName(url: string) {\r\n      const split = url.split('=');\r\n      console.log(split);\r\n      const nameParts = split.length>1 ? split[1].split('/') : split[0].split('/');\r\n      return nameParts.join('_');\r\n      return 'auspice_import_via_url';\r\n    }\r\n\r\n    DisplayUrlDialog(saveUrl: string) {\r\n      switch (saveUrl) {\r\n        case 'Open': {\r\n          const auspiceUrl = this.auspiceUrlVal;\r\n          this.commonService.openAuspiceUrl(auspiceUrl)\r\n          .then( (out) => {\r\n            if (out['meta'] && out['tree']) {\r\n              console.log(this);\r\n              this.homepageTabs[0].componentRef.instance.removeAllFiles();\r\n              this.visuals.microbeTrace.commonService.clearData();\r\n              const auspiceFile = { contents: out, name: this.getAuspiceName(auspiceUrl), extension: 'json'};\r\n              this.visuals.microbeTrace.commonService.session.files.push(auspiceFile);\r\n              this.homepageTabs[0].componentRef.instance.addToTable(auspiceFile);\r\n            //   console.log(this.homepageTabs[0].componentRef);\r\n                // this.goldenLayout.componentInstances[0].addToTable(auspiceFile);\r\n              //this.homepageTabs[0].componentRef.addToTable(auspiceFile);\r\n              this.homepageTabs[0].isActive = true;\r\n              console.log(\"Trying to launch\");\r\n              this.homepageTabs[0].componentRef.instance.launchClick();\r\n              $('#overlay').fadeOut();\r\n              $('.ui-tabview-nav').fadeTo(\"slow\", 1);\r\n              $('.m-portlet').fadeTo(\"slow\", 1);\r\n            }\r\n          });\r\n          break;\r\n        }\r\n        case 'Cancel': {\r\n            break;\r\n        }\r\n      }\r\n      this.displayUrlDialog = !this.displayUrlDialog;\r\n      if (this.displayUrlDialog){\r\n        console.log(this.displayUrlDialog);\r\n        this.continueClicked();\r\n      }\r\n    }\r\n\r\n    DisplayMTDialog(saveUrl: string) {\r\n      switch (saveUrl) {\r\n        case 'Open': {\r\n          const auspiceUrl = this.auspiceUrlVal;\r\n          break;\r\n        }\r\n        case 'Cancel': {\r\n            break;\r\n        }\r\n      }\r\n      this.displayMTDialog = !this.displayMTDialog;\r\n    }\r\n\r\n    ResetTabs() {\r\n        const home = this.homepageTabs.find(x => x.label === \"Files\");\r\n        home.isActive = true;\r\n        this.homepageTabs = this.homepageTabs.filter(x => home === x);\r\n        this.homepageTabs = [home];\r\n\r\n        this.activeTabIndex = 0;\r\n    }\r\n\r\n    NewSession() {\r\n        this.visuals.filesPlugin.removeAllFiles();\r\n\r\n        this.ResetTabs();\r\n\r\n        this.commonService.reset();\r\n\r\n        this.onReloadScreen();\r\n    }\r\n\r\n    OpenStashFiles(stashFile: FileList) {\r\n        // console.log(stashFile);\r\n\r\n        const files: File[] = Array.from(stashFile);\r\n        \r\n        if (files.length > 0) {\r\n\r\n            const extension = files[0].name.split('.').pop().toLowerCase();\r\n\r\n            let reader = new FileReader();\r\n            reader.onloadend = out => {\r\n                if (out && out.target) {\r\n                    this.OpenStash((<any>out.target).result);\r\n                }\r\n            }\r\n            reader.readAsText(files[0], 'UTF-8');\r\n        }\r\n    }\r\n\r\n    OpenStash(sessionData: string) {\r\n        if (sessionData) {\r\n            const sessionObject: StashObjects = JSON.parse(sessionData);\r\n            if (sessionObject) {\r\n\r\n                //ResetFiles\r\n                this.visuals.filesPlugin.removeAllFiles();\r\n\r\n                this.visuals.microbeTrace.commonService.session = sessionObject.session;\r\n\r\n                //Reset Tabs\r\n                this.ResetTabs();\r\n\r\n                //Load Tabs\r\n                for (let index = 1; index < sessionObject.tabs.length; ++index) {\r\n                    if (this.homepageTabs.find(x => x.label === sessionObject.tabs[index].label) === undefined) {\r\n                        this.addTab(sessionObject.tabs[index].label, sessionObject.tabs[index].label + index, index, false);\r\n                    }\r\n                }\r\n\r\n                if (sessionObject.session.files) {\r\n                    sessionObject.session.files.forEach(file => {\r\n                        this.visuals.filesPlugin.addToTable(file);\r\n                    })\r\n                }\r\n\r\n                this.homepageTabs[0].isActive = true;\r\n    \r\n                this.loadSettings();\r\n            }\r\n        }\r\n    }\r\n\r\n    DisplayRecallStashDialog(recallStash: string) {\r\n        switch (recallStash) {\r\n            case \"Recall\": {\r\n                // this._userService.getUserForEdit(this.appSession.userId).subscribe(userResult => {\r\n                //     const email: string = userResult.user.emailAddress;\r\n                //     this.visuals.microbeTrace.commonService.localStorageService.getItem(\"stash-\" + email, (err, sessionData) => {\r\n                //         if (sessionData) {\r\n                //             const sessionObject: StashObjects = JSON.parse(sessionData);\r\n                //             if (sessionObject) {\r\n                //                 this.visuals.microbeTrace.commonService.session = sessionObject.session;\r\n\r\n                //                 //Load Tabs\r\n                //                 sessionObject.tabs.forEach(loadedTab => {\r\n                //                     if (this.homepageTabs.find(x => x.label === loadedTab.label) === undefined) {\r\n                //                         this.Viewclick(loadedTab.label);\r\n                //                     }\r\n                //                 })\r\n\r\n                //                 this.loadSettings();\r\n\r\n                //                 this.homepageTabs.forEach(tab => {\r\n                //                     if (tab.componentRef &&\r\n                //                         tab.componentRef.instance.onRecallSession) {\r\n                //                         tab.componentRef.instance.onRecallSession();\r\n                //                     }\r\n                //                 })\r\n\r\n                //             }\r\n                //         }\r\n                //     });\r\n\r\n                // });\r\n\r\n                break;\r\n            }\r\n            case \"Cancel\": {\r\n\r\n                break;\r\n            }\r\n            case \"Delete\": {\r\n\r\n                break;\r\n            }\r\n        }\r\n        this.displayRecallStashDialog = !this.displayRecallStashDialog;\r\n    }\r\n\r\n    FileClick(actionName: any) {\r\n        switch (actionName) {\r\n            case \"New Session\": {\r\n                this.NewSession();\r\n                break;\r\n            }\r\n            case \"Stash Session\": {\r\n                this.stashSession();\r\n                break;\r\n            }\r\n            case \"Recall Session\": {\r\n                // this.DisplayRecallStashDialog(\"Cancel\");\r\n                this.displayRecallStashDialog = true;\r\n                this.updateTable();\r\n                break;\r\n            }\r\n            case \"Save Session\": {\r\n                this.DisplayStashDialog(\"Cancel\");\r\n                break;\r\n            }\r\n            case \"Open URL\": {\r\n              this.DisplayUrlDialog(\"Cancel\");\r\n              break;\r\n            }\r\n            case \"Add Data\": {\r\n                \r\n                // If files tab exists, go to it\r\n                if(this.homepageTabs.length > 1 && this.homepageTabs.findIndex(x => x.label === \"Files\") !== -1) {\r\n                    this._goldenLayoutHostComponent.focusComponent(\"Files\");\r\n                } else {\r\n                    this.addComponent('Files');\r\n                }\r\n\r\n                // this.commonService.launchView(\"files\");\r\n                // this.activeTabIndex = 0;\r\n\r\n                // this.homepageTabs.map(x => {\r\n\r\n                //     x.isActive = (x.tabTitle == \"Files\") ? true :false;\r\n                // });\r\n        \r\n                // this.tabView.tabs.map(x => {\r\n        \r\n                //     x.selected = false;\r\n                // });\r\n\r\n                // this.tabView.tabs[0].selected = true;\r\n\r\n                // this.setActiveTabProperties();\r\n\r\n                // this.setActiveTabProperties();\r\n                // this.DisplayLedgerLoaderDialog();\r\n                break;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    SettingsClick(actionName: any) {\r\n        switch (actionName) {\r\n            case \"Global Settings\": {\r\n                this.DisplayGlobalSettingsDialog();\r\n                break;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    stashSession() {\r\n        console.log('sesssion: ', this.commonService.session);\r\n        this.commonService.localStorageService.setItem(\r\n            \"stash-\" + Date.now() + \"-\" + $(\"#stash-name\").val(),\r\n            JSON.stringify(this.commonService.session)\r\n          )\r\n    }\r\n\r\n    public table;\r\n    \r\n    updateTable() {\r\n        \r\n        this.table = new Tabulator(this.stashes.nativeElement, {\r\n            height: \"100%\",\r\n            layout: \"fitData\",\r\n            selectable: 1,\r\n            columns: [\r\n              { title: \"Name\", field: \"name\" },\r\n              { title: \"Date\", field: \"date\", align: \"right\", sorter: \"date\" }\r\n            ]\r\n          });\r\n        let rows = [];\r\n        this.commonService.localStorageService.keys().then(keys => {\r\n          keys.forEach(k => {\r\n            if (k.substring(0, 5) !== \"stash\") return;\r\n            rows.push({\r\n              fullname: k,\r\n              name: k.substring(20),\r\n              date: new Date(parseFloat(k.substring(6, 19))).toISOString()\r\n            });\r\n          });\r\n          this.table.setData(rows);\r\n        });\r\n      }\r\n\r\n    // $(\"#recall-load-stash\").on(\"click\", () => {\r\n    //     let key = table.getSelectedData()[0].fullname;\r\n    //     localforage.getItem(key).then(json => {\r\n    //       MT.applySession(JSON.parse(json));\r\n    //       $(\"#session-recall-modal\").modal(\"hide\");\r\n    //     });\r\n    //   });\r\n\r\n    Viewclick(viewName: string) {\r\n\r\n        if(this.commonService.debugMode) {\r\n             console.log('viewClick: ', viewName);\r\n            console.log(this.commonService.session.style.widgets['link-threshold']);\r\n            console.log('homepage tabs1: ' , this.homepageTabs);\r\n        }\r\n       \r\n\r\n        if (viewName == \"2d network\") {\r\n            viewName = \"2D Network\";\r\n        }\r\n\r\n        let tabNdx = this.homepageTabs.findIndex(x => x.label == viewName);\r\n\r\n        /*/\r\n         * Don't allow duplicate tabs to get added.\r\n        /*/\r\n        if (tabNdx == -1) {\r\n\r\n            this.activeTabIndex = this.activeTabIndex + 1;\r\n            this.addComponent(viewName);\r\n\r\n        }\r\n        else {\r\n            \r\n            const container = this._goldenLayoutHostComponent.focusComponent(viewName);\r\n\r\n            const instance = this._goldenLayoutHostComponent.getComponentRef(container).instance as any;\r\n\r\n             //Load global settings changes if changed in another view\r\n            if (instance.loadSettings) {        \r\n                instance.loadSettings();\r\n                if (this.metric === 'snps'){\r\n                    this.commonService.session.style.widgets['default-distance-metric'] = 'snps';\r\n                    this.commonService.session.style.widgets['link-threshold'] = parseInt(this.threshold);\r\n                    this.onLinkThresholdChanged();\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    DisplayGlobalSettingsDialog(activeTab = \"Styling\") {\r\n\r\n        console.log(this.visuals.microbeTrace.commonService.session.style.widgets['default-distance-metric']);\r\n        this.visuals.microbeTrace.getGlobalSettingsData();\r\n\r\n        this.visuals.microbeTrace.GlobalSettingsDialogSettings.setVisibility(true);\r\n        this.cachedGlobalSettingsVisibility = this.GlobalSettingsDialogSettings.isVisible;\r\n\r\n        this.visuals.microbeTrace.commonService.updateThresholdHistogram(this.linkThresholdSparkline.nativeElement);\r\n\r\n        this.globalSettingsTab.tabs[activeTab === \"Styling\" ? 1 : 0].active = true;\r\n    }\r\n\r\n\r\n    WindowClick(actionName: any) {\r\n        switch (actionName) {\r\n            case \"Fullscreen\": \r\n\r\n                if (this.elem.requestFullscreen) {\r\n                    this.elem.requestFullscreen();\r\n                    } else if (this.elem.mozRequestFullScreen) {\r\n                    /* Firefox */\r\n                    this.elem.mozRequestFullScreen();\r\n                    } else if (this.elem.webkitRequestFullscreen) {\r\n                    /* Chrome, Safari and Opera */\r\n                    this.elem.webkitRequestFullscreen();\r\n                    } else if (this.elem.msRequestFullscreen) {\r\n                    /* IE/Edge */\r\n                    this.elem.msRequestFullscreen();\r\n                    }\r\n                \r\n                break;\r\n\r\n            case \"Reload Screen\": {\r\n\r\n                this.onReloadScreen();\r\n\r\n                window.location.reload()\r\n\r\n                \r\n                // this.homepageTabs.forEach(tab => {\r\n                //     if (tab.componentRef &&\r\n                //         tab.componentRef.instance.openRefreshScreen) {\r\n                //         tab.componentRef.instance.openRefreshScreen();\r\n                //     }\r\n                // })\r\n                break;\r\n            }\r\n          case \"Settings\": {\r\n            this.DisplayGlobalSettingsDialog(\"Filtering\");\r\n          }\r\n        }\r\n    }\r\n\r\n    HelpClick(actionName: any) {\r\n        switch (actionName) {\r\n            case \"Help\": {\r\n                this.DisplayHelp();\r\n                break;\r\n            }\r\n            case \"Report\": {\r\n                this.DisplayHelp();\r\n                break;\r\n            }\r\n            case \"About\": {\r\n                this.DisplayAbout();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    setActiveTabProperties(tabNdx: number = -1) {\r\n\r\n\r\n        if (tabNdx === -1) tabNdx = this.homepageTabs.findIndex(x => x.isActive == true);\r\n\r\n        let activeComponentName: string = this.homepageTabs[tabNdx].label;\r\n\r\n\r\n        this.homepageTabs.forEach((item: HomePageTabItem) => {\r\n            item.isActive = item.label === activeComponentName;\r\n        });\r\n\r\n        // this.activeTabIndex = tabNdx;\r\n        if(this.commonService.debugMode) {\r\n            console.log('tab switched is: ', tabNdx);\r\n            console.log('global l: ', this.GlobalSettingsLinkColorDialogSettings);\r\n            console.log('global n: ', this.GlobalSettingsNodeColorDialogSettings);\r\n       }\r\n       \r\n\r\n        switch (activeComponentName) {\r\n\r\n            case \"Files\": {\r\n\r\n                this.showSettings = true;\r\n                this.showExport = false;\r\n                this.showCenter = false;\r\n                this.showPinAllNodes = false;\r\n                this.showRefresh = false;\r\n                this.showButtonGroup = false;\r\n                this.showSorting = false;\r\n\r\n                this.cachedGlobalSettingsVisibility = this.GlobalSettingsDialogSettings.isVisible;\r\n                this.cachedGlobalSettingsLinkColorVisibility = this.GlobalSettingsLinkColorDialogSettings.isVisible;\r\n                this.cachedGlobalSettingsNodeColorVisibility = this.GlobalSettingsNodeColorDialogSettings.isVisible;\r\n                // this.GlobalSettingsDialogSettings.setVisibility(false);\r\n                // this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n                // this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n\r\n                break;\r\n            }\r\n            case \"2D Network\": {\r\n\r\n                this.showSettings = true;\r\n                this.showExport = true;\r\n                this.showCenter = true;\r\n                this.showPinAllNodes = true;\r\n                this.showRefresh = false;\r\n                this.showButtonGroup = false;\r\n                this.showSorting = false;\r\n\r\n                break;\r\n            }\r\n            case \"Table\": {\r\n\r\n                this.showSettings = false;\r\n                this.showExport = true;\r\n                this.showCenter = false;\r\n                this.showPinAllNodes = false;\r\n                this.showRefresh = false;\r\n                this.showButtonGroup = true;\r\n                this.showSorting = true;\r\n\r\n                // this.GlobalSettingsDialogSettings.setVisibility(false);\r\n                this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n                this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n\r\n                break;\r\n            }\r\n            case \"Map\": {\r\n\r\n                this.showSettings = true;\r\n                this.showExport = true;\r\n                this.showCenter = true;\r\n                this.showPinAllNodes = false;\r\n                this.showRefresh = false;\r\n                this.showButtonGroup = false;\r\n                this.showSorting = false;\r\n\r\n                // this.GlobalSettingsDialogSettings.setVisibility(false);\r\n                //this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n                this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n\r\n                break;\r\n            }\r\n            case \"Phylogenetic Tree\": {\r\n\r\n                this.showSettings = true;\r\n                this.showExport = true;\r\n                this.showCenter = true;\r\n                this.showPinAllNodes = false;\r\n                this.showRefresh = false;\r\n                this.showButtonGroup = false;\r\n                this.showSorting = false;\r\n\r\n                // this.GlobalSettingsDialogSettings.setVisibility(false);\r\n                this.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n                this.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n\r\n                break;\r\n            }\r\n        }\r\n\r\n\r\n        if (!this.homepageTabs[tabNdx].componentRef) {\r\n            setTimeout(() => {\r\n\r\n                tabNdx = this.homepageTabs.findIndex(x => x.label == activeComponentName);\r\n                if (this.homepageTabs[tabNdx].componentRef.instance.DisplayGlobalSettingsDialogEvent) {\r\n                    this.homepageTabs[tabNdx].componentRef.instance.DisplayGlobalSettingsDialogEvent.subscribe((v) => { this.DisplayGlobalSettingsDialog(v) });\r\n                }\r\n\r\n            });\r\n        } else {\r\n          \r\n            if (this.homepageTabs[tabNdx].componentRef.instance.DisplayGlobalSettingsDialogEvent) {\r\n                this.homepageTabs[tabNdx].componentRef.instance.DisplayGlobalSettingsDialogEvent.subscribe((v) => { this.DisplayGlobalSettingsDialog(v) });\r\n            }\r\n        }\r\n\r\n\r\n        this.previousTab = activeComponentName;\r\n    }\r\n\r\n   // openPinAllNodes(tabNdx: any): void {\r\n        //this.homepageTabs[tabNdx].componentRef.instance.openPinAllNodes();\r\n    //}\r\n\r\n\r\n    addTab(tabLabel: any, tabTitle: any, tabPosition: any, componentRef: any, activate: boolean = true): void {\r\n\r\n        /*/\r\n         * Ensure that all tabs are not selected before we set the next new tab.\r\n         * This will ensure that the newly created component appears on the currently selected tab, \r\n         * which will be the newly added tab array element.\r\n        /*/\r\n        this.homepageTabs.map(x => {\r\n\r\n            x.isActive = false;\r\n        });\r\n\r\n        console.log\r\n\r\n        // this.tabView.tabs.map(x => {\r\n\r\n        //     x.selected = false;\r\n        // });\r\n\r\n        this.activeTabIndex = tabPosition;\r\n        this.homepageTabs.splice(tabPosition, 0, {\r\n            label: tabLabel,\r\n            templateRef: null,\r\n            tabTitle: tabTitle,\r\n            isActive: activate,\r\n            componentRef: componentRef\r\n            // componentRef: this.goldenLayout.componentInstances[this.goldenLayout.componentInstances.length - 1]\r\n        });\r\n\r\n    }\r\n\r\n    clearTable(tableId) {\r\n        let linkColorTable = $(tableId).empty();\r\n    }\r\n\r\n    onReloadScreen() {\r\n        this.commonService.session.style.widgets = this.commonService.defaultWidgets();\r\n        this.loadSettings();\r\n    }\r\n\r\n    loadSettings() {\r\n        this.getGlobalSettingsData();\r\n\r\n        //Filtering|Prune With\r\n        this.SelectedPruneWityTypesVariable = this.visuals.microbeTrace.commonService.session.style.widgets[\"link-show-nn\"] ? \"Nearest Neighbor\" : \"None\";\r\n        this.onPruneWithTypesChanged();\r\n\r\n        //Filtering|Minimum Cluster Size\r\n        this.SelectedClusterMinimumSizeVariable = this.visuals.microbeTrace.commonService.session.style.widgets[\"cluster-minimum-size\"];\r\n        this.onMinimumClusterSizeChanged();\r\n        \r\n        //Filtering|Filter Links on\r\n        this.SelectedLinkSortVariable = this.visuals.microbeTrace.commonService.session.style.widgets[\"link-sort-variable\"];\r\n        this.onLinkSortChanged();\r\n\r\n        //Filtering|Filtering Threshold\r\n        this.SelectedLinkThresholdVariable = this.visuals.microbeTrace.commonService.session.style.widgets[\"link-threshold\"];\r\n        this.onLinkThresholdChanged();\r\n\r\n        //Styling|Color Nodes By\r\n        this.SelectedColorNodesByVariable = this.visuals.microbeTrace.commonService.session.style.widgets[\"node-color-variable\"];\r\n        this.onColorNodesByChanged();\r\n\r\n        //Styling|Nodes\r\n        this.SelectedNodeColorVariable = this.visuals.microbeTrace.commonService.session.style.widgets[\"node-color\"];\r\n        this.onNodeColorChanged();\r\n\r\n        //Styling|Color Links By\r\n        if (this.visuals.microbeTrace.commonService.session.style.widgets['link-color-variable'] === \"None\") {\r\n            this.visuals.microbeTrace.commonService.session.style.widgets['link-color-variable'] = \"origin\";\r\n        }\r\n\r\n        this.SelectedColorLinksByVariable = this.visuals.microbeTrace.commonService.session.style.widgets['link-color-variable'];\r\n        this.onColorLinksByChanged();\r\n\r\n         //Styling|Links\r\n         this.SelectedLinkColorVariable = this.visuals.microbeTrace.commonService.session.style.widgets[\"link-color\"];\r\n         this.onLinkColorChanged();\r\n\r\n        //Styling|Link Color Table\r\n\r\n        //Styling|Selected\r\n        this.SelectedColorVariable = this.visuals.microbeTrace.commonService.session.style.widgets['selected-color'];\r\n\r\n        //Styling|Background\r\n        this.SelectedBackgroundColorVariable = this.visuals.microbeTrace.commonService.session.style.widgets['background-color'];\r\n        this.onBackgroundChanged();\r\n\r\n        this.updateGlobalSettingsModel();\r\n    }\r\n\r\n    publishLoadNewData() {\r\n\r\n        // this.goldenLayout.componentInstances[1].onLoadNewData();\r\n        this.homepageTabs.forEach(tab => {\r\n            // componentRef.instance.onLoadNewData ?\r\n            if (tab.componentRef &&\r\n                tab.componentRef.onLoadNewData) {\r\n                tab.componentRef.onLoadNewData();\r\n            }\r\n        })\r\n    }\r\n\r\n    publishFilterDataChange() {\r\n\r\n        // this.goldenLayout.componentInstances[1].onFilterDataChange();\r\n        this.homepageTabs.forEach(tab => {\r\n            if (tab.componentRef &&\r\n                tab.componentRef.instance.onFilterDataChange) {\r\n                tab.componentRef.instance.onFilterDataChange();\r\n            }\r\n        })\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.NewSession();\r\n    }\r\n\r\n    /**\r\n     * Updates default-distance-metric widget and this.SelectedLinkThresholdVariable (7 for snps, 0.015 for TN93).\r\n     * Calls onLinkThresholdChanged to updated links\r\n     */\r\n  onDistanceMetricChanged = () => {\r\n    if (this.SelectedDistanceMetricVariable.toLowerCase() === 'snps') {\r\n      $('#default-distance-threshold, #link-threshold')\r\n        .attr('step', 1)\r\n        .val(7)\r\n        .trigger('change');\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['default-distance-metric'] = 'snps';\r\n      this.SelectedLinkThresholdVariable = '7';\r\n      this.onLinkThresholdChanged();\r\n    } else {\r\n      $('#default-distance-threshold, #link-threshold')\r\n        .attr('step', 0.001)\r\n        .val(0.015)\r\n        .trigger('change');\r\n      this.visuals.microbeTrace.commonService.session.style.widgets['default-distance-metric'] = 'tn93';\r\n      this.SelectedLinkThresholdVariable = '0.015';\r\n      this.onLinkThresholdChanged();\r\n    }\r\n  }\r\n}\r\n\r\nclass BpaaSPayloadWrapper {\r\n    public BlockHashCode: string | undefined = undefined;\r\n    public BlockName: string | undefined = undefined;\r\n    public BpaaSPayload: BpaaSPayloadWrapperData | undefined = undefined;\r\n    public FuzzyMatchRatios: string | undefined = undefined;\r\n\r\n}\r\n\r\nclass BpaaSPayloadWrapperData {\r\n    public Type: string | undefined = undefined;\r\n    public SubType: 'Edgelist' | 'Nodelist' | undefined = undefined;\r\n    public JurisdictionKey: number | undefined = undefined;\r\n    public JurisdictionName: string | undefined = undefined;\r\n    public Jurisdiction: string | undefined = undefined;\r\n    public FileName: string | undefined = undefined;\r\n    public Data: any[] = [];\r\n}\r\n","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, Inject, Injector, OnInit, Renderer2, ViewChild } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { CommonService } from '@app/contactTraceCommonServices/common.service';\r\nimport { MicobeTraceNextPluginEvents } from '@app/helperClasses/interfaces';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { OrderList } from 'primeng/orderlist';\r\nimport { MicrobeTraceNextVisuals } from '@app/microbe-trace-next-plugin-visuals';\r\n\r\nimport * as Papa from 'papaparse';\r\nimport JSZip from 'jszip';\r\nimport * as saveAs from 'file-saver';\r\nimport * as XLSX from 'xlsx';\r\n// import pdfMake from 'pdfmake/build/pdfmake.js';\r\n// import pdfFonts from 'pdfmake/build/vfs_fonts.js';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\n\r\n@Component({\r\n  selector: 'AggregateComponent',\r\n  templateUrl: './aggregate.component.html',\r\n  styleUrls: ['./aggregate.component.scss'],\r\n})\r\nexport class AggregateComponent extends BaseComponentDirective implements OnInit, AfterViewInit, MicobeTraceNextPluginEvents {\r\n\r\n  @ViewChild('orderList') orderList: OrderList;\r\n  \r\n  visuals: MicrobeTraceNextVisuals;\r\n  widgets: any;\r\n\r\n  SelectedDataTables: TableData[] = [];\r\n  fieldOptions =  [\r\n    {\r\n        label: 'Node',\r\n        value: 'nodes',\r\n        items: []\r\n    },\r\n    {\r\n        label: 'Link',\r\n        value: 'links',\r\n        items: []\r\n    },\r\n    {\r\n        label: 'Cluster',\r\n        value: 'clusters',\r\n        items: []\r\n    }\r\n];\r\n\r\n  SelectedDataFields = ['Node-cluster']\r\n  \r\n  viewActive = true;\r\n  settingsOpen = true;\r\n  exportOpen = false;\r\n  SelectedAggregateExportFilename = '';\r\n  AggregateExportFileTypeList = [\r\n    { label: 'xlsx', value: 'xlsx' },\r\n    { label: 'csv.zip', value: 'csv.zip' },\r\n    { label: 'json', value: 'json'},\r\n    { label: 'pdf', value: 'pdf'}\r\n  ]\r\n  SelectedAggregateExportFileType = 'pdf';\r\n\r\n  viewHeight: number;\r\n  tableStyle;\r\n\r\n  constructor(injector: Injector,\r\n    private renderer: Renderer2,\r\n    private elem: ElementRef,\r\n    private eventManager: EventManager,\r\n    public commonService: CommonService,\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n    elRef: ElementRef,\r\n    private cdref: ChangeDetectorRef,\r\n    private gtmService: GoogleTagManagerService) {\r\n\r\n      super(elRef.nativeElement);\r\n\r\n      this.visuals = commonService.visuals;\r\n      this.visuals.aggregate = this;\r\n      this.widgets = this.commonService.session.style.widgets;\r\n\r\n      this.updateFieldOptions();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/aggregate\",\r\n            page_title: \"Aggregate View\"\r\n        });\r\n\r\n    this.SelectedDataFields.forEach((field, index) => {\r\n      this.SelectedDataTables.push({label: '', data: [], tableColumns: []})\r\n      this.updateTable(index);\r\n    })\r\n\r\n    this.updateViewHeight();\r\n    this.updateTableColWidth();\r\n\r\n    this.container.on('resize', () => { \r\n      this.updateViewHeight();\r\n      this.updateTableColWidth();\r\n    })\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n      this.viewActive = true; \r\n      this.cdref.detectChanges();\r\n    })\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.updateTableColWidth()\r\n  }\r\n\r\n  updateTable(i) {\r\n    let fullField = this.SelectedDataFields[i].split('-')\r\n    let dataset = fullField[0];\r\n    let field = fullField.slice(1).join('-');\r\n\r\n    let tableColumns;\r\n    let total = 0;\r\n    let rawdata;\r\n\r\n    if (dataset == 'Node') {\r\n      rawdata = this.commonService.getVisibleNodes();\r\n      tableColumns = [{field:'groupName', header: this.commonService.capitalize(field)}, {field:'count', header:'Number of Nodes'}, {field:'percent', header:'Percent of Total Nodes'}];\r\n    } else if (dataset == 'Link') {\r\n      rawdata = this.commonService.getVisibleLinks();\r\n      tableColumns = [{field:'groupName', header: this.commonService.capitalize(field)}, {field:'count', header:'Number of Links'}, {field:'percent', header:'Percent of Total Links'}];\r\n    } else {\r\n      rawdata = this.commonService.getVisibleClusters();\r\n      tableColumns = [{field:'groupName', header: this.commonService.capitalize(field)}, {field:'count', header:'Number of Clusters'}, {field:'percent', header:'Percent of Total Clusters'}];\r\n    }   \r\n    \r\n    // populate count array [{}, {}, ...] where each item/object is a row\r\n    var data = [];\r\n\r\n    rawdata.forEach(row => {\r\n      var match = data.find(arow => arow.groupName == row[field]);\r\n      if (match) {\r\n        match['count']++;\r\n      } else {\r\n        data.push({ groupName: row[field], count: 1 });\r\n      }\r\n      total++;\r\n    });\r\n\r\n    data.forEach(row => {\r\n      row['percent'] = (row['count']*100/total)\r\n      if (row.groupName == null) {\r\n        row.groupName = 'null'\r\n      }\r\n    })\r\n    \r\n    this.SelectedDataTables[i] = {\r\n      label: dataset+'-'+field,\r\n      data: data,\r\n      tableColumns: tableColumns,\r\n    };\r\n  }\r\n\r\n  updateViewHeight() {\r\n    this.viewHeight = $(\".aggregate-wrapper\").parent().height()-70\r\n  }\r\n\r\n  updateTableColWidth() {\r\n    let width = ($('#tablesContainer').width() - 40);\r\n    width = width > 700 ? width*.7 : width;\r\n    this.tableStyle = {\r\n        'width' : width+'px',\r\n        'display': 'block'\r\n    }\r\n    $('#tablesContainer th').width(width/3);\r\n  }\r\n\r\n\r\n  addTable() {\r\n    this.SelectedDataFields.push('Node-selected')\r\n    this.SelectedDataTables.push({label: 'Node-selected', data: [], tableColumns: []})\r\n\r\n    this.updateTable(this.SelectedDataTables.length-1)\r\n    setTimeout(() => this.updateTableColWidth(), 0);\r\n    this.orderList.cd.detectChanges();\r\n  }\r\n  deleteTable(i) {\r\n    console.log(`deleting table ${i}`);\r\n    this.SelectedDataFields = this.SelectedDataFields.filter((_, loc) => loc != i)\r\n    this.SelectedDataTables = this.SelectedDataTables.filter((_, loc) => loc != i)\r\n  }\r\n\r\n  updateFieldOptions() {\r\n    this.commonService.session.data['nodeFields'].map((d) => {\r\n      if (['seq', 'origin', '_diff', '_ambiguity', 'index', '_id'].includes(d)) return;\r\n      this.fieldOptions[0]['items'].push({\r\n        short_label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n        label : `Node-${this.commonService.capitalize(d.replace(\"_\", \"\"))}`,\r\n        value: `Node-${d}`\r\n      });\r\n    })\r\n\r\n    this.commonService.session.data['linkFields'].map((d) => {\r\n      if (['index', 'origin', 'nearest neighbor', 'nn'].includes(d)) return;\r\n      this.fieldOptions[1]['items'].push({\r\n        short_label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n        label : `Link-${this.commonService.capitalize(d.replace(\"_\", \"\"))}`,\r\n        value: `Link-${d}`\r\n      });\r\n    })\r\n\r\n    this.commonService.session.data['clusterFields'].map((d) => {\r\n      this.fieldOptions[2]['items'].push({\r\n        short_label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n        label : `Cluster-${this.commonService.capitalize(d.replace(\"_\", \"\"))}`,\r\n        value: `Cluster-${d}`\r\n      });\r\n    })\r\n\r\n  }\r\n\r\n  formatTableTitle(inputString) {\r\n    let fullField = inputString.split('-')\r\n    //let datasetName = this.commonService.capitalize(fullField[0]);\r\n    let colGroupName = this.commonService.capitalize(fullField.slice(1).join('-'));\r\n    return colGroupName;\r\n  }\r\n\r\n  updateNodeColors() {}\r\n  updateLinkColor() {}\r\n  updateVisualization() {}\r\n  applyStyleFileSettings() {}\r\n  openRefreshScreen() {}\r\n  onRecallSession() {}\r\n  onLoadNewData() {}\r\n  onFilterDataChange() {}\r\n\r\n  openSettings() {\r\n    console.log(\"open settings pushed\");\r\n    this.settingsOpen = true;\r\n  }\r\n\r\n  openExport() {\r\n    console.log(\"open export pushed\")\r\n    this.exportOpen = true;\r\n  }\r\n\r\n  async exportVisualization() {\r\n    console.log(this.SelectedAggregateExportFilename + '.' + this.SelectedAggregateExportFileType);\r\n    if (this.SelectedAggregateExportFileType == 'csv.zip') {\r\n      let zip = new JSZip();\r\n      this.SelectedDataTables.forEach(table => {\r\n        let tmpData = table.data.map(item => {\r\n          let colGroupName = table.label.split('-').slice(1).join('-')\r\n          return { [colGroupName]: item.groupName, 'count': item.count, 'percent': item.percent+'%'}\r\n        })\r\n        \r\n        zip.file(table.label + '.csv', Papa.unparse(tmpData))\r\n        console.log(Papa.unparse(tmpData));\r\n      })\r\n      zip.generateAsync({type: 'blob'}).then(content => saveAs(content, this.SelectedAggregateExportFilename + '.zip'))\r\n    } else if (this.SelectedAggregateExportFileType == 'xlsx') {\r\n      let wb = XLSX.utils.book_new();\r\n      this.SelectedDataTables.forEach(table => {\r\n        let tmpData = table.data.map(item => {\r\n          let colGroupName = table.label.split('-').slice(1).join('-');\r\n          return { [colGroupName]: item.groupName, 'count': item.count, 'percent': item.percent+'%'}\r\n        })\r\n\r\n        let ws = XLSX.utils.json_to_sheet(tmpData);\r\n        XLSX.utils.book_append_sheet(wb, ws, table.label)\r\n      })\r\n      XLSX.writeFile(wb, this.SelectedAggregateExportFilename+'.xlsx')\r\n    \r\n    } else if (this.SelectedAggregateExportFileType == 'json') {\r\n      let outputData = [];\r\n      this.SelectedDataTables.forEach(table => {\r\n        let fullField = table.label.split('-')\r\n        let datasetName = fullField[0];\r\n        let colGroupName = fullField.slice(1).join('-');\r\n\r\n        let tmpData = table.data.map(item => {\r\n          return { [colGroupName]: item.groupName, 'n': item.count, 'percent': item.percent+'%'}\r\n        })\r\n        outputData.push({\"dataset\": datasetName.toLowerCase(), \"column\": colGroupName, data: tmpData})\r\n      })\r\n      let blob = new Blob([JSON.stringify(outputData)], { type: \"application/json;charset=utf-8\"});\r\n      saveAs(blob, this.SelectedAggregateExportFilename+'.json');\r\n    } else if ( this.SelectedAggregateExportFileType == 'pdf') {\r\n\r\n      try {\r\n        const { default: pdfMake } = await import('pdfmake/build/pdfmake.js');\r\n        const { default: pdfFonts } = await import('pdfmake/build/vfs_fonts.js');\r\n        pdfMake.vfs = pdfFonts.pdfMake.vfs;\r\n\r\n        const documentDefinition = {\r\n          content: [\r\n            { image: this.commonService.watermark },\r\n            { \r\n              text: \"Cluster Aggregation Snapshot\",\r\n              style: \"header\",\r\n              alignment: \"center\"\r\n            },\r\n            ...this.SelectedDataTables.map(table => {\r\n              let fullField = table.label.split('-')\r\n              let datasetName = fullField[0];\r\n              let colGroupName = fullField.slice(1).join('-');\r\n\r\n              let tmpData = table.data.map(item => {\r\n                let colGroupName = table.label.split('-').slice(1).join('-');\r\n                return [item.groupName, item.count, `${item.percent.toFixed(2)}%`];\r\n              });\r\n\r\n              return {\r\n                style: \"paddedTable\",\r\n                table: {\r\n                  headerRow: 1,\r\n                  widths: [\"*\", \"*\", \"*\"],\r\n                  body: [\r\n                    [\r\n                      `${this.commonService.capitalize(colGroupName)}`,\r\n                      `Number of ${datasetName}s`,\r\n                      `Percent of Total ${datasetName}s`\r\n                    ],\r\n                    ...tmpData\r\n                  ]\r\n                }\r\n              }\r\n            })\r\n          ],\r\n          footer: function(currentPage, pageCount) {\r\n            return [\r\n              {\r\n                text: `Page ${currentPage.toString()} of ${pageCount}`,\r\n                alignment: \"center\"\r\n              }\r\n            ];\r\n          },\r\n          styles: {\r\n            header: {\r\n              fontSize: 22,\r\n              bold: true\r\n            },\r\n            paddedTable: {\r\n              margin: [10, 10, 10, 10]\r\n            }\r\n          }\r\n        };\r\n\r\n        pdfMake.createPdf(documentDefinition).download(`${this.SelectedAggregateExportFilename}.pdf`);\r\n        \r\n      } catch (error) {\r\n        console.error(\"Failed to load pdfmake modules\", error);\r\n        // Optionally, notify the user about the failure using a toast or alert\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  reordered(e) {\r\n    console.log('reordered ', this.SelectedDataFields, e)\r\n    let updatedTableOrder = [];\r\n    this.SelectedDataFields.forEach((field) => {\r\n      updatedTableOrder.push(this.SelectedDataTables.find((table) => {\r\n        if (table.label == field) {\r\n          return true;\r\n        }\r\n      }))\r\n    })\r\n    this.SelectedDataTables = updatedTableOrder;\r\n  }\r\n\r\n  updateDataField(i,e) {\r\n    console.log(`data field ${i} changed\\nBefore: ${this.SelectedDataFields[0]}, ${this.SelectedDataFields[1]}, ${this.SelectedDataFields[2]}`);\r\n    console.log(e);\r\n    this.SelectedDataFields[i] = e.value;\r\n    console.log(`After: ${this.SelectedDataFields[0]}, ${this.SelectedDataFields[1]}, ${this.SelectedDataFields[2]}`);\r\n    this.updateTable(i); \r\n    setTimeout(() => this.updateTableColWidth(), 0);\r\n  }\r\n}\r\n\r\nexport namespace AggregateComponent {\r\n  export const componentTypeName = 'Aggregate';\r\n}\r\n\r\ninterface TableData {\r\n  label: string,\r\n  data: any[],\r\n  tableColumns: any[],\r\n}","import { Component, OnInit, Injector, Inject, ElementRef, ChangeDetectorRef, AfterViewInit } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { MicrobeTraceNextVisuals } from '@app/microbe-trace-next-plugin-visuals';\r\nimport { CommonService } from '@app/contactTraceCommonServices/common.service';\r\nimport { DialogSettings } from '../../helperClasses/dialogSettings';\r\nimport { MicobeTraceNextPluginEvents } from '../../helperClasses/interfaces';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { generateCanvas } from './generateAlignmentViewCanvas';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { saveAs } from 'file-saver';\r\nimport { svgAsPngUri } from 'save-svg-as-png';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\n\r\n@Component({\r\n  selector: 'AlignmentViewComponent',\r\n  templateUrl: './alignment-view-plugin-component.html',\r\n  styleUrls: ['./alignment-view-plugin-component.scss']\r\n})\r\nexport class AlignmentViewComponent extends BaseComponentDirective implements OnInit, AfterViewInit, MicobeTraceNextPluginEvents {\r\n\r\n  // General Settings\r\n  alignmentDialogSettings: DialogSettings = new DialogSettings('#alignment-settings-pane', false)\r\n  ShowAlignExportPane: boolean = false;\r\n  viewActive: boolean = true;\r\n\r\n  showHideOptions: any = [\r\n    { label: 'Show', value: true },\r\n    { label: 'Hide', value: false }\r\n  ];\r\n  labelFieldList: SelectItem[] = [];\r\n  //labelField = \"_id\" // replaced with this.widgets['alignView-labelField']\r\n  labelArray: any[];\r\n  //sortField = \"index\" // replaced with this.widgets['alignView-sortField']\r\n\r\n  private visuals: MicrobeTraceNextVisuals;\r\n  widgets;\r\n  \r\n  // Data\r\n  nodesWithSeq: any[];\r\n  seqArray: string[];\r\n  seqArrayShortened: any[];\r\n  longestSeqLength: number = 0;\r\n\r\n  /**\r\n   * count matrix: [ [#A, #C, #G, #T, #other/ambig]-for each location, ... ]\r\n   */\r\n  countMatrix;\r\n  /**\r\n   * proportion matrix: [ [A, C, G, T, #other/ambig]-for each location, ... ]\r\n   */\r\n  proportionMatrix;\r\n  /**\r\n   * position matrix: [ [A, C, G, T, #other/ambig]-for each location, ... ]\r\n   * y position (top) for each base at each postion in sequence\r\n   */\r\n  positionMatrix;\r\n  proportionMatrixAA;\r\n  positionMatrixAA;\r\n\r\n  // Layout\r\n  //showMiniMap: boolean; // replaced with this.widgets['alignView-showMiniMap']\r\n  //alignmentTopDisplay: string; // replaced with this.widgets['alignView-topDisplay']\r\n  alignmentTopDisplayOptions = [\r\n    { label: 'Logo', value: 'logo' },\r\n    { label: 'Bar Plot', value: 'barplot'}\r\n  ]\r\n  //charSetting: string; // 'show', 'min', 'hide' // replaced with this.widgets['alignView-charSetting']\r\n  charSettingOptions: any = [\r\n    { label: 'Show', value: 'show' },\r\n    { label: 'Minimum', value: 'min'},\r\n    { label: 'Hide', value: 'hide' }\r\n  ];\r\n  seqTypeOptions = [\r\n    { label: 'Nucleotides', value: 'nt'},\r\n    { label: 'Codons', value: 'codon'},\r\n    { label: 'Amino Acids', value: 'aa'}\r\n  ];\r\n  selectedSeqType = 'nt';\r\n  startPos = 1;\r\n  //rulerMinorInterval: number = 20; replaced with this.widgets['alignView-rulerMinorInterval']\r\n  rulerIntervalOptions = [0, 10, 20, 25, 50]\r\n  translationSetting = 'Maintain Codons'\r\n\r\n  // Sizing\r\n  // spanWidth and spanHeight values are duplicated in the widgets; I didn't replace because these are used through the template in loops and I was concerned that\r\n  // looking up there values 1000's of times from this.commonService.session.style.widgets would hurt performance\r\n  spanWidth: number; \r\n  spanHeight: number;\r\n  fontSize: number;\r\n\r\n  sizes = [\r\n    { label: 'Small', value: 's'},\r\n    { label: 'Medium', value: 'm'},\r\n    { label: 'Large', value: 'l'},\r\n    { label: 'Custom', value: 'c'}\r\n  ]\r\n  //selectedSize: string; // replaced with this.widgets['alignView-selectedSize']\r\n\r\n  alignmentViewHeight: number;\r\n  rightViewHeight: number;\r\n  canvasViewHeight: number;\r\n\r\n  leftWidth: number;\r\n  rightWidth: number;\r\n\r\n  // Colors\r\n  //selectedColorSchemeName: string; // replaced with this.widgets['alignView-colorSchemeName']\r\n  colorScheme; // current color scheme;\r\n  // customColorScheme; // replaced with this.widgets['alignView-customColorScheme']\r\n  useCustomColorScheme: boolean;\r\n  colorSchemeOptions = [\r\n    { label: 'Normal', \r\n      value: 'n',\r\n    },\r\n    { label: 'Alternative', \r\n    value: 'a',\r\n    },\r\n    {\r\n      label: 'Custom',\r\n      value: 'c'\r\n    }\r\n  ]\r\n\r\n  // Export\r\n  AlignmentExportFileName: string = \"\"\r\n  AlignmentExportFileTypeVis: string = \"svg\";\r\n  AlignmentExportFileTypeData: string = \"fasta\";\r\n\r\n  constructor(injector: Injector,\r\n    private eventManager: EventManager,\r\n    public commonService: CommonService,\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n    elRef: ElementRef,\r\n    private cdref: ChangeDetectorRef,\r\n    private gtmService: GoogleTagManagerService) {\r\n\r\n    super(elRef.nativeElement);\r\n\r\n    this.visuals = commonService.visuals;\r\n    this.commonService.visuals.alignment = this;\r\n    this.widgets = this.commonService.session.style.widgets;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/alignment\",\r\n            page_title: \"Alignment View\"\r\n        });\r\n    // set events such as node-selected\r\n    this.setEvents();\r\n\r\n    this.setDefaultWidgets();\r\n\r\n    this.labelFieldList = [];\r\n    this.commonService.session.data['nodeFields'].map((d, i) => {\r\n      if (d != 'seq' && d != 'sequence') {\r\n        this.labelFieldList.push({\r\n          label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n          value: d\r\n        });\r\n      }\r\n    });\r\n\r\n    // sets nodesWithSeq, seqArr, and longestSeqLength\r\n    this.nodesWithSeq = [];\r\n    this.seqArray = [];\r\n    this.commonService.session.data.nodes.forEach((node, index) => {\r\n      if (node.seq != null && node.seq != \"\" && node.seq != \"null\"){\r\n        this.nodesWithSeq.push(index);\r\n        this.seqArray.push(node.seq.toUpperCase());\r\n        if (node.seq.length > this.longestSeqLength) {\r\n          this.longestSeqLength = node.seq.length;\r\n        }\r\n      }\r\n    })\r\n\r\n    this.labelArray = this.getData(this.nodesWithSeq, ['index', this.widgets['alignView-labelField']]);\r\n\r\n    // calculations countMatrix, proportionMatrix, and positionMatrix\r\n    this.calculateProportionAtEachLocation();\r\n\r\n    // sets different variables relating to size and display\r\n    this.onAlignmentTopChange()\r\n\r\n    if (this.widgets['alignView-colorSchemeName'] == 'n' || this.widgets['alignView-colorSchemeName'] == 'a') {\r\n      this.useCustomColorScheme = false;\r\n    } else {\r\n      this.useCustomColorScheme = true;\r\n    }\r\n    this.onSelectedColorChanged(true)\r\n\r\n    // updates spanWidth, spanHeight, rightWidth, leftWidth, fontSize, and then updates alignment\r\n    this.onSelectedSizeChanged()\r\n    // updates the valus of nodeWidthSeqShortened based on size of rigthWitdth, longestSeqLength, and nodesWithSeq\r\n    this.shortenNodesWithSeq();\r\n\r\n    // updates shows or hides minimap and then updates view heights\r\n    this.updateMiniMapVisibility();    \r\n\r\n    this.container.on('resize', () => { this.goldenLayoutComponentResize()})\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n      this.viewActive = true; \r\n      this.cdref.detectChanges();\r\n    })\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.highlightRows();\r\n  }\r\n\r\n  // General\r\n\r\n  /**\r\n   * Defines new widgets and set default values\r\n   */\r\n  setDefaultWidgets() {\r\n    //size\r\n    if (this.widgets['alignView-selectedSize'] == undefined) {\r\n      this.widgets['alignView-selectedSize'] = 'l';\r\n    }\r\n    // height and width are declare/checked in this.onSelectedSizeChanged()\r\n\r\n    // color\r\n    if (this.widgets['alignView-colorSchemeName'] == undefined) {\r\n      this.widgets['alignView-colorSchemeName'] = 'n';\r\n    }\r\n\r\n    if (this.widgets['alignView-customColorScheme'] == undefined) {\r\n      this.widgets['alignView-customColorScheme'] = {\r\n        'A': '#ccff00',\r\n        'C': '#f0e442',\r\n        'G': '#ff9900',\r\n        'T': '#ff6600',\r\n        'ambig': '#ffffff',\r\n      }\r\n    }\r\n\r\n    // labels/sorting\r\n    if (this.widgets['alignView-labelField'] == undefined) {\r\n      this.widgets['alignView-labelField'] = '_id';\r\n    }\r\n\r\n    if (this.widgets['alignView-sortField'] == undefined) {\r\n      this.widgets['alignView-sortField'] = 'index';\r\n    }\r\n\r\n    // top settings\r\n    if (this.widgets['alignView-showMiniMap'] == undefined) {\r\n      this.widgets['alignView-showMiniMap'] = true;\r\n    }\r\n\r\n    if (this.widgets['alignView-topDisplay'] == undefined) {\r\n      this.widgets['alignView-topDisplay'] = 'barplot';\r\n    }\r\n\r\n    if (this.widgets['alignView-rulerMinorInterval'] == undefined) {\r\n      this.widgets['alignView-rulerMinorInterval'] = 20;\r\n    }\r\n\r\n    // main canvas\r\n    if (this.widgets['alignView-charSetting'] == undefined) {\r\n      this.widgets['alignView-charSetting'] = 'show';\r\n    }\r\n    this.widgets['alignView-charSetting'] = 'show';\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param indexList an array of indexes for the nodes to get data from\r\n   * @param field string | array of which field to get data from\r\n   * @returns an array of objects\r\n   */\r\n  getData(indexList, field) {\r\n    if (Array.isArray(field)) {\r\n      return indexList.map(index => {\r\n        let currentObj = {}\r\n        field.forEach(f => currentObj[f] = (f == \"seq\") ? this.commonService.session.data.nodes[index][f].toUpperCase() : this.commonService.session.data.nodes[index][f]);\r\n        return currentObj;\r\n      })\r\n    } else if (field == \"seq\") {\r\n      return indexList.map(index => this.commonService.session.data.nodes[index][\"seq\"].toUpperCase());\r\n    } else {\r\n      return indexList.map(index => this.commonService.session.data.nodes[index][field])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates the value of this.longestSeqLength\r\n   */\r\n  updateLongestSeqLength() {\r\n    let longestSeq = 0;\r\n    this.seqArray.forEach((seq) => {\r\n      if (seq.length > longestSeq) {\r\n        longestSeq = seq.length\r\n      }\r\n    })\r\n    this.longestSeqLength = longestSeq;\r\n  }\r\n\r\n  /**\r\n  * Updates the alignment by generating a new canvas, and recalcuating various heights\r\n  */\r\n  updateAlignment() {\r\n    generateCanvas(this.seqArray, {width: this.spanWidth, height: this.spanHeight, charSetting: this.widgets['alignView-charSetting'], fontSize: this.fontSize, colors: this.colorScheme}).then(function(canvas: HTMLCanvasElement) {\r\n      $('#msa-viewer .canvasHolder').empty().append(canvas)\r\n    })\r\n    \r\n    this.updateViewHeights();\r\n  }\r\n\r\n  // Mini Map\r\n\r\n  /**\r\n  * Creates a minimap. \r\n  * The sequences (seqArrayShortened) are previously downsample by picking 1 nt / every n nucleotides;\r\n  */\r\n  updateMiniMap() {\r\n    $('#miniMap canvas').remove();\r\n    generateCanvas(this.seqArrayShortened, {width: 1, height: 1, charSetting: 'hide', fontSize: 1, colors: this.colorScheme}).then(function(canvas: HTMLCanvasElement) {\r\n      $('#miniMap').append(canvas);\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Adds/Removed miniMap and miniMap title\r\n   */\r\n  updateMiniMapVisibility() {\r\n    if (this.widgets['alignView-showMiniMap']){\r\n      this.updateMiniMap();\r\n      $('#miniMapHolder').css({'display': 'block'});\r\n      $('#miniMapTitle').css({'display': 'block'});\r\n    } else {\r\n      $('#miniMapHolder').css({'display': 'none'});\r\n      $('#miniMapTitle').css({'display': 'none'});\r\n    }\r\n\r\n    this.updateViewHeights();\r\n  }\r\n\r\n  /**\r\n   * Add miniMapHighlight to correct position\r\n   * @param e mouse event\r\n   * @param miniMap HTMLElement\r\n   */\r\n  showMiniMapHighlight(e: MouseEvent, miniMap: HTMLElement) {\r\n    let mmDimensions = miniMap.getBoundingClientRect();\r\n    \r\n    // need to reduce number of sequences on minimap if there are too many\r\n    let scaleFactorNumber = (this.nodesWithSeq.length <= 100)? 1: Math.ceil(this.nodesWithSeq.length/100);\r\n    let viewHeight = $('.canvasLabels').height();\r\n    let highlightHeight = viewHeight/(this.spanHeight*scaleFactorNumber);\r\n\r\n    // want the minimap to be around this.rightWidth pixels wide; caculate how much to downscale by and then downscale\r\n    let scaleFactorLength = (this.longestSeqLength < this.rightWidth)? 1 : Math.ceil(this.longestSeqLength/this.rightWidth);\r\n    let highlightWidth = $('.canvasHolder').width()/(this.spanWidth*scaleFactorLength)\r\n\r\n    let canvasWidth = $('#miniMap canvas').width()\r\n    let left = e.clientX - mmDimensions.left - highlightWidth/2;\r\n    if (left < 0) {\r\n      left = 0;\r\n    } else if (left > canvasWidth - highlightWidth) {\r\n      left = canvasWidth - highlightWidth;\r\n    }\r\n\r\n    $('#miniMapHighlight').css({'display': 'block', 'top': top +'px', 'left': left +'px', 'height': highlightHeight+'px', 'width': highlightWidth+'px'})\r\n  }\r\n\r\n  /**\r\n   * Moves the position of miniMapHighlight\r\n   * @param e mouse event\r\n   * @param miniMap HTMLElement\r\n   */\r\n  updateMiniMapHighlight(e: MouseEvent, miniMap: HTMLElement) {\r\n    let mmDimensions = miniMap.getBoundingClientRect();\r\n\r\n    let highlightHeight = $('#miniMapHighlight').height()\r\n    let top = e.clientY - mmDimensions.top - (highlightHeight/2)\r\n    if (top < 0) {\r\n      top = 0\r\n    } else if (top > mmDimensions.height-highlightHeight) {\r\n      top = mmDimensions.height-highlightHeight\r\n    }\r\n\r\n    let canvasWidth = $('#miniMap canvas').width()\r\n    let highlightWidth = $('#miniMapHighlight').width()\r\n    let left = e.clientX - mmDimensions.left - highlightWidth/2;\r\n    if (left < 0) {\r\n      left = 0;\r\n    } else if (left > canvasWidth - highlightWidth) {\r\n      left = canvasWidth - highlightWidth;\r\n    }\r\n\r\n    $('#miniMapHighlight').css({'top': top +'px', 'left': left +'px'});\r\n  }\r\n\r\n  /**\r\n   * Removes highling from minimap\r\n   */\r\n  hideMiniMapHighlight() {\r\n    $('#miniMapHighlight').css({'display': 'none'})\r\n  }\r\n\r\n  /**\r\n   * Moves scroll position of main canvas, canvasLabels, and alignmentTop(Bar Plot, Rule) based on position of miniMapHighlight\r\n   */\r\n  miniMapClick(e: MouseEvent, miniMap: HTMLElement, canvasHolder: HTMLElement, canvasLabels: HTMLElement, alignmentTop: HTMLElement) {\r\n    let mmDimensions = miniMap.getBoundingClientRect();\r\n    let highlightDimensions =  document.getElementById('miniMapHighlight').getBoundingClientRect();\r\n\r\n    // want the minimap to be around this.rightWidth pixels wide; caculate how much to downscale by and then downscale\r\n    let scaleFactorLength = (this.longestSeqLength < this.rightWidth)? 1 : Math.ceil(this.longestSeqLength/this.rightWidth);\r\n    // need to reduce number of sequences on minimap if there are too many\r\n    let scaleFactorNumber = (this.nodesWithSeq.length <= 100)? 1: Math.ceil(this.nodesWithSeq.length/100);\r\n    //let scaleFactor = Math.ceil(this.longestSeqLength/this.rightWidth)\r\n    let horizontalScroll = (highlightDimensions.left - mmDimensions.left)*this.spanWidth*scaleFactorLength;    \r\n    alignmentTop.scrollLeft = horizontalScroll < 10 ? horizontalScroll : horizontalScroll + 7;\r\n    canvasHolder.scrollLeft = horizontalScroll < 10 ? horizontalScroll : horizontalScroll + 7;\r\n\r\n    let verticalScroll = (highlightDimensions.top - mmDimensions.top)*this.spanHeight*scaleFactorNumber;\r\n    canvasLabels.scrollTop = verticalScroll < 4 ? verticalScroll : verticalScroll+4;\r\n    canvasHolder.scrollTop = verticalScroll < 4 ? verticalScroll : verticalScroll+4;  \r\n  }\r\n\r\n  // Tooltip\r\n\r\n  /**\r\n   * \r\n   * @param e $event\r\n   * @param index index of the nt for the tooltip\r\n   */\r\n  showTooltip(e: MouseEvent ,index:number) {\r\n    // offsetX = mouse X position + adjustment to center of the bar -50 to center toolbar\r\n    let [x, ] = this.getRelativeMousePosition(e);\r\n    let adjX = this.spanWidth/2 - (e.offsetX % this.spanWidth)\r\n    let offsetX = x + adjX -50;\r\n    \r\n    // offsetY = 151 (51 offset + 100 height) + height of minimap (number of seq/scaleFactor + 26 for padding, border, margin)\r\n    let offsetY;\r\n    if (this.widgets['alignView-showMiniMap']) {\r\n      let scaleFactorNumber = (this.nodesWithSeq.length <= 100)? 1: Math.ceil(this.nodesWithSeq.length/100)\r\n      offsetY = 151 + Math.ceil(this.nodesWithSeq.length/scaleFactorNumber+26)\r\n    } else {\r\n      offsetY = 151;\r\n    }\r\n\r\n    let htmlString = this.tabulate(index);\r\n    $('#tooltipAlign').html(htmlString)\r\n    $('#tooltipHolder').css({'display': 'block', 'position': 'absolute', 'left': offsetX + 'px', 'top': offsetY + 'px'})\r\n  }\r\n\r\n  /**\r\n   * Hides the tooltip\r\n   */\r\n  hideTooltip() {\r\n    //$('#tooltipAlign').html(\"\")\r\n    $('#tooltipHolder').css({'display': 'none'})\r\n  }\r\n\r\n\r\n  // Data\r\n\r\n  /**\r\n   * Updates seqArrayShortened by downsampling (selecting 1 out of every n NTs and selected 1 out of every m sequences, as needed) nodesWithSeq\r\n   * \r\n   */\r\n  shortenNodesWithSeq() {\r\n    if (this.longestSeqLength < this.rightWidth && this.nodesWithSeq.length <= 100) {\r\n      this.seqArrayShortened = this.seqArray\r\n      $('#miniMap').css({'width': this.longestSeqLength+'px', 'height': this.nodesWithSeq.length+'px'})\r\n      $('#miniMapTitle').css({'height': (this.nodesWithSeq.length+16)+'px', 'line-height': (this.nodesWithSeq.length+16)+'px'})\r\n      return; \r\n    }\r\n\r\n    // want the minimap to be around this.rightWidth pixels wide; caculate how much to downscale by and then downscale\r\n    let scaleFactorLength = (this.longestSeqLength < this.rightWidth)? 1 : Math.ceil(this.longestSeqLength/this.rightWidth);\r\n    // need to reduce number of sequences on minimap if there are too many\r\n    let scaleFactorNumber = (this.nodesWithSeq.length <= 100)? 1: Math.ceil(this.nodesWithSeq.length/100);\r\n    this.seqArrayShortened = [];\r\n    this.seqArray.forEach((seq, index) => {\r\n      if (index % scaleFactorNumber != 0) return;\r\n      let downSizedSeq = \"\";\r\n      for (let i=0; i < this.longestSeqLength; i+= scaleFactorLength) {\r\n        downSizedSeq += seq.charAt(i);\r\n      }\r\n      this.seqArrayShortened.push(downSizedSeq)\r\n    })\r\n\r\n    $('#miniMap').css({'width': Math.ceil(this.longestSeqLength/scaleFactorLength)+'px', 'height': Math.ceil(this.nodesWithSeq.length/scaleFactorNumber)+'px'})\r\n    $('#miniMapTitle').css({'height': Math.ceil(this.nodesWithSeq.length/scaleFactorNumber+16)+'px', 'line-height': Math.ceil(this.nodesWithSeq.length/scaleFactorNumber+16)+'px'})\r\n  }\r\n\r\n  /**\r\n   * Calculates the count, proportion, and y position (for logo/bar plot) of each base at each position\r\n   */\r\n  calculateProportionAtEachLocation() {\r\n    // count matrix: [ [#A, #C, #G, #T, #other/ambiguos]-for each location, ... ]\r\n    this.countMatrix = [];\r\n    this.proportionMatrix = [];\r\n    this.positionMatrix = [];\r\n\r\n    for (let i =0; i<this.longestSeqLength; i++) {\r\n      this.countMatrix.push([0,0,0,0,0]);\r\n    }\r\n\r\n    for (let seq of this.seqArray) {\r\n      for (let i=0; i< seq.length; i++) {\r\n        let nt = seq[i];\r\n        switch (nt) {\r\n          case 'A':\r\n            this.countMatrix[i][0] += 1;\r\n            break;\r\n          case 'C':\r\n            this.countMatrix[i][1] += 1;\r\n            break;\r\n          case 'G':\r\n            this.countMatrix[i][2] += 1;\r\n            break;\r\n          case 'T':\r\n            this.countMatrix[i][3] += 1;\r\n            break; \r\n          default:\r\n            this.countMatrix[i][4] += 1\r\n        }\r\n      } \r\n    }\r\n    \r\n    function calcProportion(value) {\r\n      let sum = value[0] + value[1] + value[2] + value[3] + value[4];\r\n      return [value[0]/sum, value[1]/sum, value[2]/sum, value[3]/sum, value[4]/sum]\r\n    }\r\n\r\n    function calculatePosition(value) {\r\n      // custom merge sort; i want  first four items in value sorted but i want array of indexes returned not array of values\r\n      let mergeA = value[0] > value[1] ? [0,1] : [1,0]\r\n      let mergeB = value[2] > value[3] ? [2,3] : [3,2]\r\n      let sortedIndexes = [];\r\n      let locA = 0, locB=0;\r\n      for (let i =0; i<4; i++) {\r\n        if (locA == 2) {\r\n          sortedIndexes.push(mergeB[locB])\r\n          locB += 1;\r\n        } else if (locB == 2) {\r\n          sortedIndexes.push(mergeA[locA])\r\n          locA += 1;\r\n        } else if (value[mergeA[locA]] > value[mergeB[locB]]) {\r\n          sortedIndexes.push(mergeA[locA])\r\n          locA += 1;\r\n        } else {\r\n          sortedIndexes.push(mergeB[locB])\r\n          locB += 1;\r\n        }\r\n      }\r\n\r\n      // use sorted index to create temp/row of positionMatrix such at the ambig (value[4]) is at the very top and then largest to smallest\r\n      let temp = [0,0,0,0,0];\r\n      let y = value[4]*100;\r\n      for (let index of sortedIndexes) {\r\n        temp[index] = y;\r\n        y += value[index]*100\r\n      }\r\n      return temp;\r\n    }\r\n\r\n    this.proportionMatrix = this.countMatrix.map(calcProportion)\r\n    this.positionMatrix = this.proportionMatrix.map(calculatePosition)\r\n  }\r\n\r\n  /**\r\n   * Generates and returns the proportion matrix from Amino Acid sequence\r\n   */\r\n    calculateProportionAminoAcids() {\r\n      // count matrix: [ [#A, #R, #N, #D, #C, #E, #Q, #G, #H, #I, #L, #K, #M, #F, #P, #S, #T, #W, #Y, #V, #*, #-, #X]-for each location, ... ]\r\n      let countMatrix = [];\r\n  \r\n      for (let i =0; i<this.longestSeqLength; i++) {\r\n        countMatrix.push(Array(23).fill(0));\r\n      }\r\n  \r\n      for (let seq of this.seqArray) {\r\n        for (let i=0; i< seq.length; i++) {\r\n          let nt = seq[i];\r\n          switch (nt) {\r\n            case 'A':\r\n              countMatrix[i][0] += 1;\r\n              break;\r\n            case 'R':\r\n              countMatrix[i][1] += 1;\r\n              break;\r\n            case 'N':\r\n              countMatrix[i][2] += 1;\r\n              break;\r\n            case 'D':\r\n              countMatrix[i][3] += 1;\r\n              break; \r\n            case 'C':\r\n              countMatrix[i][4] += 1;\r\n              break;\r\n            case 'E':\r\n              countMatrix[i][5] += 1;\r\n              break;\r\n            case 'Q':\r\n              countMatrix[i][6] += 1;\r\n              break;\r\n            case 'G':\r\n              countMatrix[i][7] += 1;\r\n              break;\r\n            case 'H':\r\n              countMatrix[i][8] += 1;\r\n              break;\r\n            case 'I':\r\n              countMatrix[i][9] += 1;\r\n              break;\r\n            case 'L':\r\n              countMatrix[i][10] += 1;\r\n              break; \r\n            case 'K':\r\n              countMatrix[i][11] += 1;\r\n              break;\r\n            case 'M':\r\n              countMatrix[i][12] += 1;\r\n              break;\r\n            case 'F':\r\n              countMatrix[i][13] += 1;\r\n              break; \r\n            case 'P':\r\n              countMatrix[i][14] += 1;\r\n              break;\r\n            case 'S':\r\n              countMatrix[i][15] += 1;\r\n              break; \r\n            case 'T':\r\n              countMatrix[i][16] += 1;\r\n              break; \r\n            case 'W':\r\n              countMatrix[i][17] += 1;\r\n              break; \r\n            case 'Y':\r\n              countMatrix[i][18] += 1;\r\n              break; \r\n            case 'V':\r\n              countMatrix[i][19] += 1;\r\n              break; \r\n            case '*':\r\n              countMatrix[i][20] += 1;\r\n              break; \r\n            case '-':\r\n              countMatrix[i][21] += 1;\r\n              break; \r\n            case 'X':\r\n              countMatrix[i][22] += 1;\r\n              break; \r\n            default:\r\n              countMatrix[i][22] += 1;\r\n          }\r\n        } \r\n      }\r\n\r\n      function calcProportion(value) {\r\n        let sum = value.reduce((acc, cur) => acc + cur, 0)\r\n        return value.map(current => current/sum);\r\n      }\r\n      return countMatrix.map(calcProportion)\r\n}\r\n\r\n  /**\r\n   * Generates and returns the position Matrix from Amino Acid proportion matrix\r\n   */\r\n  calculatePositionMatrixAminoAcids() {\r\n    let count = 0;\r\n    let output = [];\r\n      //let index2NT = ['A', 'R', 'N', 'D', 'C', 'E', 'Q', 'G', 'H', 'I', 'L', 'K', 'M', 'F', 'P', 'S', 'T', 'W', 'Y', 'V', '*', '-', 'X'];\r\n      this.proportionMatrixAA.forEach((row) => {\r\n        let nonZeroIndexes = [];\r\n        row.forEach((value, index) => {\r\n          if (value > 0 && index < 20) nonZeroIndexes.push(index);\r\n        })\r\n        nonZeroIndexes.sort(compareIndices);\r\n        function compareIndices(a,b) {\r\n          return row[b] - row[a]\r\n        }\r\n        count += 1;\r\n        let temp = new Array(23).fill(0);\r\n        let y = (row[22]+row[21]+row[20])*100;        \r\n        for (let index of nonZeroIndexes) {\r\n          temp[index] = y;\r\n          y += row[index]*100\r\n        }\r\n        output.push(temp);\r\n      })\r\n\r\n    return output;\r\n  }\r\n\r\n  /**\r\n   * Similar to caclulating the proportion, but gaps and ambiguous nucleotides are separated\r\n   */\r\n  calculateAdvancedProportion() {\r\n        // count matrix: [ [#A, #C, #G, #T, gaps, #N, #R, #Y, #K, #M, #S, #W, #B, #D, #H, #V #other]-for each location, ... ]\r\n        let countMatrix = [];\r\n    \r\n        for (let i =0; i<this.longestSeqLength; i++) {\r\n          countMatrix.push(Array(17).fill(0)); // update this\r\n        }\r\n    \r\n        for (let seq of this.seqArray) {\r\n          for (let i=0; i< seq.length; i++) {\r\n            let nt = seq[i];\r\n            switch (nt) {\r\n              case 'A':\r\n                countMatrix[i][0] += 1;\r\n                break;\r\n              case 'C':\r\n                countMatrix[i][1] += 1;\r\n                break;\r\n              case 'G':\r\n                countMatrix[i][2] += 1;\r\n                break;\r\n              case 'T':\r\n                countMatrix[i][3] += 1;\r\n                break; \r\n              case '-':\r\n                countMatrix[i][4] += 1;\r\n                break;\r\n              case 'N':\r\n                countMatrix[i][5] += 1;\r\n                break;\r\n              case 'R':\r\n                countMatrix[i][6] += 1;\r\n                break;\r\n              case 'Y':\r\n                countMatrix[i][7] += 1;\r\n                break;\r\n              case 'K':\r\n                countMatrix[i][8] += 1;\r\n                break;\r\n              case 'M':\r\n                countMatrix[i][9] += 1;\r\n                break;\r\n              case 'S':\r\n                countMatrix[i][10] += 1;\r\n                break; \r\n              case 'W':\r\n                countMatrix[i][11] += 1;\r\n                break;\r\n              case 'B':\r\n                countMatrix[i][12] += 1;\r\n                break;\r\n              case 'D':\r\n                countMatrix[i][13] += 1;\r\n                break; \r\n              case 'H':\r\n                countMatrix[i][14] += 1;\r\n                break;\r\n              case 'V':\r\n                countMatrix[i][15] += 1;\r\n                break; \r\n              default:\r\n                countMatrix[i][16] += 1;\r\n            }\r\n          } \r\n        }\r\n\r\n        function calcProportion(value) {\r\n          let sum = value.reduce((acc, cur) => acc + cur, 0)\r\n          return value.map(current => current/sum);\r\n        }\r\n        return countMatrix.map(calcProportion)\r\n  }\r\n\r\n  /** returns Math.floor(i); allows for it to be called from within the template */\r\n  floor(i) {\r\n    return Math.floor(i)\r\n  }\r\n\r\n  /**\r\n   * @param i position\r\n   * @returns the x pos for the elements in the barplot/logo/ruler based on the startPos and selectedSeqType\r\n   */\r\n  xPos(i) {\r\n    if (this.selectedSeqType == 'codon' && i < this.startPos) {\r\n      return 0\r\n    } else if (this.selectedSeqType=='codon') {\r\n      return this.spanWidth*(i-this.startPos+1+Math.floor((i-this.startPos+1)/3))\r\n    } else {\r\n      return this.spanWidth*i;\r\n    }\r\n  }\r\n\r\n  /** Calculates the need with of SVG image based on selectedSeqType and the length of the sequences */\r\n  getSVGWidth() {\r\n    if (this.selectedSeqType == 'nt') {\r\n      return this.spanWidth*this.proportionMatrix.length+17\r\n    } else if (this.selectedSeqType == 'codon') {\r\n      let length = this.proportionMatrix.length\r\n      return this.spanWidth*(length+Math.floor(length/3))+17\r\n    } else {\r\n      return this.spanWidth*this.proportionMatrixAA.length+17\r\n    }\r\n  }\r\n\r\n  /** Updates Alignment View when type of sequence is changed */\r\n  onSeqTypeChange() {\r\n    if (this.selectedSeqType=='nt') {\r\n      this.startPos = 1;\r\n      this.revert2NT();\r\n    } else if (this.selectedSeqType == 'codon') {\r\n      this.NT2Codon(this.startPos-1);\r\n    } else {\r\n      this.convertToAASequence(this.startPos-1);\r\n    }\r\n  }\r\n\r\n  /** Returns a lookup table for converting NTs to Amino Acids. Doesn't account for ambiguity. USe checkAmbiguousCodons() to convert a codon\r\n   * with ambiguous nucleotides into an Amino Acid\r\n   */\r\n  getNT2AATable() {\r\n    return {\r\n      'TTT': 'F', 'TTC': 'F', 'TTA': 'L', 'TTG': 'L', 'TCT': 'S', 'TCC': 'S', 'TCA': 'S', 'TCG': 'S', \r\n      'TAT': 'Y', 'TAC': 'Y', 'TAA': '*', 'TAG': '*', 'TGT': 'C', 'TGC': 'C', 'TGA': '*', 'TGG': 'W',\r\n      'CTT': 'L', 'CTC': 'L', 'CTA': 'L', 'CTG': 'L', 'CCT': 'P', 'CCC': 'P', 'CCA': 'P', 'CCG': 'P',\r\n      'CAT': 'H', 'CAC': 'H', 'CAA': 'Q', 'CAG': 'Q', 'CGT': 'R', 'CGC': 'R', 'CGA': 'R', 'CGG': 'R', \r\n      'ATT': 'I', 'ATC': 'I', 'ATA': 'I', 'ATG': 'M', 'ACT': 'T', 'ACC': 'T', 'ACA': 'T', 'ACG': 'T',\r\n      'AAT': 'N', 'AAC': 'N', 'AAA': 'K', 'AAG': 'K', 'AGT': 'S', 'AGC': 'S', 'AGA': 'R', 'AGG': 'R', \r\n      'GTT': 'V', 'GTC': 'V', 'GTA': 'V', 'GTG': 'V', 'GCT': 'A', 'GCC': 'A', 'GCA': 'A', 'GCG': 'A',\r\n      'GAT': 'D', 'GAC': 'D', 'GAA': 'E', 'GAG': 'E', 'GGT': 'G', 'GGC': 'G', 'GGA': 'G', 'GGG': 'G'\r\n    }\r\n  }\r\n\r\n  /** Converts the nucleotide sequence for each node into an amino acid sequence, based on startPos and , then updates the view */\r\n  convertToAASequence(startPos=0) {\r\n    let NT2AA_table = this.getNT2AATable();\r\n\r\n    this.seqArray = this.getData(this.nodesWithSeq, 'seq');\r\n\r\n    this.updateLongestSeqLength();\r\n    let AAarray = [];\r\n    let NT_check = /^[ACGT]+$/;\r\n    \r\n    this.seqArray.forEach(seq => {\r\n      if (this.translationSetting=='Maintain Codons') {\r\n        let aaString = ''\r\n        for (let i=startPos; i< seq.length; i += 3) {\r\n          let codon = seq.substring(i, i+3);\r\n          if (NT_check.test(codon)) {\r\n            aaString += NT2AA_table[codon];\r\n          } else if (codon == '---') {\r\n            aaString += '-'\r\n          } else {\r\n            aaString += this.checkAmbiguousCodons(codon, NT2AA_table);\r\n          }\r\n        }\r\n        AAarray.push(aaString);\r\n      } else {\r\n        let aaString = '';\r\n        let gapCount = 0;\r\n        let codon = '';\r\n        for (let i=startPos; i < seq.length; i++) {\r\n          let nt = seq.charAt(i);\r\n          if (nt == '-') {\r\n            gapCount += 1;\r\n          } else {\r\n            codon += nt;\r\n          }\r\n\r\n          if (gapCount == 3) {\r\n            aaString += '-';\r\n            gapCount = 0;\r\n          } else if (codon.length == 3) {\r\n            if (NT_check.test(codon)) {\r\n              aaString += NT2AA_table[codon]\r\n            } else {\r\n              let aa = this.checkAmbiguousCodons(codon, NT2AA_table);\r\n              aaString += aa;\r\n            } \r\n            codon = '';\r\n          }\r\n        }\r\n        AAarray.push(aaString);\r\n      }     \r\n    })\r\n    this.seqArray = AAarray;\r\n    this.colorScheme =   {\r\n      A: '#33cc00',\r\n      R: '#cc0000',\r\n      N: '#6600cc',\r\n      D: '#0033ff',\r\n      C: '#ffff00',\r\n      Q: '#6600cc',\r\n      E: '#0033ff',\r\n      G: '#33cc00',\r\n      H: '#009900',\r\n      I: '#33cc00',\r\n      L: '#33cc00',\r\n      K: '#cc0000',\r\n      M: '#33cc00',\r\n      F: '#009900',\r\n      P: '#33cc00',\r\n      S: '#0099ff',\r\n      T: '#0099ff',\r\n      W: '#009900',\r\n      Y: '#009900',\r\n      V: '#33cc00',\r\n      X: '#ffffff'\r\n    }\r\n\r\n    this.updateAlignment();\r\n    this.updateLongestSeqLength();\r\n    this.shortenNodesWithSeq();\r\n    this.proportionMatrixAA = this.calculateProportionAminoAcids();\r\n    this.positionMatrixAA = this.calculatePositionMatrixAminoAcids();\r\n    this.updateMiniMap();\r\n  }\r\n\r\n  /** Converts a codon into an amino acid, tries to resolve ambiguous nucleotides; Return amino acid, X for ambiguous amino acid, or - if codon.length != 3 */\r\n  checkAmbiguousCodons(codon: string, NT2AA_table=this.getNT2AATable()) {\r\n    let ambiguousCheck = /^[ACGTNRYKMSWBDHV]+$/\r\n    if (codon.length != 3) {\r\n      return '-'\r\n    } else if (!ambiguousCheck.test(codon)) {\r\n      return 'X'\r\n    }\r\n\r\n    let positionPossibilities = [];\r\n    for (let i=0; i<3; i++) {\r\n      let currentNT = codon.charAt(i);\r\n      if (currentNT == 'A' || currentNT == 'C' || currentNT == 'G' || currentNT == 'T') {\r\n        positionPossibilities.push([currentNT])\r\n      } else if (currentNT == 'W') {\r\n        positionPossibilities.push(['A', 'T'])\r\n      } else if (currentNT == 'S') {\r\n        positionPossibilities.push(['C', 'G'])\r\n      } else if (currentNT == 'M') {\r\n        positionPossibilities.push(['A', 'C'])\r\n      } else if (currentNT == 'K') {\r\n        positionPossibilities.push(['G', 'T'])\r\n      } else if (currentNT == 'R') {\r\n        positionPossibilities.push(['A', 'G'])\r\n      } else if (currentNT == 'Y') {\r\n        positionPossibilities.push(['C', 'T'])\r\n      } else if (currentNT == 'B') {\r\n        positionPossibilities.push(['C', 'G', 'T'])\r\n      } else if (currentNT == 'D') {\r\n        positionPossibilities.push(['A', 'G', 'T'])\r\n      } else if (currentNT == 'H') {\r\n        positionPossibilities.push(['A', 'C', 'T'])\r\n      } else if (currentNT == 'V') {\r\n        positionPossibilities.push(['A','C', 'G'])\r\n      } else if (currentNT == 'N') {\r\n        positionPossibilities.push(['A', 'C', 'G', 'T'])\r\n      }\r\n    }\r\n    let possibleCodons = [];\r\n    positionPossibilities[0].forEach(nt0 => {\r\n      positionPossibilities[1].forEach(nt1 => {\r\n        positionPossibilities[2].forEach(nt2 => {\r\n          possibleCodons.push(nt0+nt1+nt2);\r\n        })\r\n      })\r\n    })\r\n\r\n    let possibleAA = NT2AA_table[possibleCodons[0]];\r\n    for (let i=1; i<possibleCodons.length; i++) {\r\n      let AA = NT2AA_table[possibleCodons[i]]\r\n      if (possibleAA != AA) {\r\n        return 'X'\r\n      }\r\n    }\r\n\r\n    return possibleAA;\r\n  }\r\n\r\n  /** Reverts the view back to the original sequence view */\r\n  revert2NT() {\r\n    this.seqArray = this.getData(this.nodesWithSeq, 'seq');\r\n    this.updateLongestSeqLength();\r\n    this.shortenNodesWithSeq();\r\n    this.onSelectedColorChanged();\r\n  }\r\n\r\n  /** Converts the sequence into a codons by introducing spaces every 3NTs and then updates the view */\r\n  NT2Codon(start) {\r\n    let newSeqs = []\r\n    this.seqArray = this.getData(this.nodesWithSeq, 'seq');\r\n    this.seqArray.forEach(seq => {\r\n      let codons = []\r\n      for (let i=start; i<seq.length; i+= 3) {\r\n        codons.push(seq.slice(i, i+3));\r\n      }\r\n      newSeqs.push(codons.join(' '));\r\n    })\r\n\r\n    this.seqArray = newSeqs;\r\n    this.updateLongestSeqLength();\r\n    this.shortenNodesWithSeq();\r\n    this.onSelectedColorChanged();\r\n  }\r\n\r\n  // Layout Positioning\r\n\r\n  /**\r\n  * Set rightViewHeigh, alignmentViewHeight, and canvasViewHeigh\r\n  */\r\n  updateViewHeights() {\r\n    // order is important as subsequent calculations rely on previous updated values; These values are used to ensure the view heights are correct and scrolling occurs as expectd\r\n    this.rightViewHeight = this.calculateRightHeight();\r\n    this.alignmentViewHeight = this.calculateViewHeight();\r\n    this.canvasViewHeight = this.calculateCanvasViewHeight();\r\n  }\r\n\r\n  /**\r\n   * @returns the height needed to for all the elements on the right half of msa-viewer. If this height > available space, then scrolling will be used\r\n   */\r\n  calculateRightHeight(): number {\r\n    let miniMapHeight = (this.widgets['alignView-showMiniMap']) ? $('#miniMapHolder').height()+16 : 0;\r\n    // 170 alignmentTop, 17 bottomScrollBar, height of canvas\r\n    return 170+25+this.nodesWithSeq.length*this.spanHeight+ miniMapHeight;\r\n  }\r\n\r\n  /**\r\n   * @returns the height for msa-viewer element based on the minimum of the available space for the view and the height needed for the elements\r\n   */\r\n  calculateViewHeight(): number {\r\n    return Math.min($(\".msa-viewer-container\").parent().height()-50, this.rightViewHeight)\r\n  }\r\n\r\n  /**\r\n   * @returns the height for the canvasHolder element and then subsequently the canvasLabels element. Not the height of the canvas itself\r\n   */\r\n  calculateCanvasViewHeight(): number {\r\n    let miniMapHeight = (this.widgets['alignView-showMiniMap']) ? $('#miniMapHolder').outerHeight() : 0;\r\n    return Math.min(this.alignmentViewHeight - 170 - miniMapHeight, this.nodesWithSeq.length*this.spanHeight+25)\r\n  }\r\n\r\n  /**\r\n   * @returns the width for the right half of the viewer\r\n   */\r\n  calculateRightWidth(): number {\r\n    // 7: gap between left and right (5) + 2\r\n    return $(\"#msa-viewer\").width() - this.leftWidth - 7;\r\n  }\r\n\r\n\r\n  // Sizing\r\n  \r\n  /**\r\n  * Updates font size as needed and then updates the alignment view based on new height\r\n  */\r\n  onSpanHeightChange(e) {\r\n    if (e >= 16) {\r\n      this.fontSize = 16;\r\n      this.leftWidth=250;\r\n    } else if (e >= 12) {\r\n      this.fontSize = 12;\r\n      this.leftWidth = 200;\r\n    } else if (e >= 10) {\r\n      this.fontSize = 10;\r\n      this.leftWidth = 150;\r\n    }\r\n\r\n    this.rightWidth = this.calculateRightWidth();\r\n\r\n    this.widgets['alignView-selectedSize']='c';\r\n    this.widgets['alignView-spanHeight'] = e;\r\n    this.updateAlignment();\r\n  }\r\n\r\n  /**\r\n   * Updates the alignment view with the new width\r\n   */\r\n  onSpanWidthChange(e){\r\n    this.widgets['alignView-selectedSize']='c';\r\n    this.widgets['alignView-spanWidth'] = e\r\n    this.updateAlignment();\r\n  }\r\n\r\n  /**\r\n   * Updates spanHeight, spanWidth, fontSize, and sometimes charSetting and then updates alignment view with new settings\r\n   */\r\n  onSelectedSizeChanged() {\r\n    if (this.widgets['alignView-selectedSize'] == 's') {\r\n      this.spanHeight = 10;\r\n      this.spanWidth = 2;\r\n      this.widgets['alignView-charSetting'] = 'hide';\r\n    } else if (this.widgets['alignView-selectedSize'] == 'm') {\r\n      this.spanHeight = 12;\r\n      this.spanWidth = 6;\r\n      //this.charSetting = 'hide';\r\n    } else if (this.widgets['alignView-selectedSize'] == 'l') {\r\n      this.spanHeight = 16;\r\n      this.spanWidth = 10;\r\n      //this.charSetting = 'show';\r\n    } else if (this.widgets['alignView-selectedSize'] == 'c') {\r\n      \r\n      if (!this.widgets['alignView-spanWidth']) {\r\n        this.spanWidth = 10;\r\n      } else {\r\n        this.spanWidth = this.widgets['alignView-spanWidth']\r\n      }\r\n\r\n      if (!this.widgets['alignView-spanHeight']) {\r\n        this.spanHeight = 16;\r\n      } else {\r\n        this.spanHeight = this.widgets['alignView-spanHeight']\r\n      }\r\n    }\r\n\r\n    if (this.spanHeight >= 16) {\r\n      this.fontSize = 16;\r\n      this.leftWidth=250;\r\n    } else if (this.spanHeight >= 12) {\r\n      this.fontSize = 12;\r\n      this.leftWidth = 200;\r\n    } else if (this.spanHeight >= 10) {\r\n      this.fontSize = 10;\r\n      this.leftWidth = 150;\r\n    }\r\n\r\n    this.widgets['alignView-spanWidth'] = this.spanWidth;\r\n    this.widgets['alignView-spanHeight'] = this.spanHeight;\r\n\r\n    this.rightWidth = this.calculateRightWidth();\r\n    this.updateAlignment();\r\n  }\r\n\r\n\r\n  // Colors\r\n\r\n  /**\r\n   * Updates the color scheme for the view based on what is selected\r\n   * @param skipUpdateAlignment set to true during ngOnInit to skip this.updateAlignment() and if statement for this.updateMiniMap()\r\n   */\r\n  onSelectedColorChanged(skipUpdateAlignment=false) {\r\n    if (this.selectedSeqType != 'aa') {\r\n      if (this.widgets['alignView-colorSchemeName'] == 'n') {\r\n        this.colorScheme = {\r\n          'A': '#ccff00',\r\n          'C': '#f0e442',\r\n          'G': '#ff9900',\r\n          'T': '#ff6600',\r\n          'ambig': '#ffffff',\r\n        }\r\n        this.useCustomColorScheme = false;\r\n      } else if (this.widgets['alignView-colorSchemeName'] == 'a') {\r\n        this.colorScheme = {\r\n          'A': '#009E73',\r\n          'C': '#F0E442',\r\n          'G': '#E69F00',\r\n          'T': '#D55E00',\r\n          'ambig': '#ffffff',\r\n          }\r\n          this.useCustomColorScheme = false;\r\n      } else {\r\n        this.colorScheme = {\r\n          'A': this.widgets['alignView-customColorScheme']['A'],\r\n          'C': this.widgets['alignView-customColorScheme']['C'],\r\n          'G': this.widgets['alignView-customColorScheme']['G'],\r\n          'T': this.widgets['alignView-customColorScheme']['T'],\r\n          'ambig': this.widgets['alignView-customColorScheme']['ambig'],\r\n          }\r\n        this.useCustomColorScheme = true;\r\n      }\r\n    } else {\r\n      this.useCustomColorScheme = false;\r\n      this.colorScheme =   {\r\n        A: '#33cc00',\r\n        R: '#cc0000',\r\n        N: '#6600cc',\r\n        D: '#0033ff',\r\n        C: '#ffff00',\r\n        Q: '#6600cc',\r\n        E: '#0033ff',\r\n        G: '#33cc00',\r\n        H: '#009900',\r\n        I: '#33cc00',\r\n        L: '#33cc00',\r\n        K: '#cc0000',\r\n        M: '#33cc00',\r\n        F: '#009900',\r\n        P: '#33cc00',\r\n        S: '#0099ff',\r\n        T: '#0099ff',\r\n        W: '#009900',\r\n        Y: '#009900',\r\n        V: '#33cc00',\r\n        X: '#ffffff'\r\n      }\r\n      \r\n    }\r\n\r\n    if (skipUpdateAlignment == false) {\r\n      this.updateAlignment();\r\n      if (this.widgets['alignView-showMiniMap']) {\r\n        this.updateMiniMap();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates the colorScheme for nt given with the e.target.value color\r\n   * @param nt 'A' | 'C' | 'G' | 'T' | 'ambig'\r\n   */\r\n  updateColorScheme(nt, e) {\r\n    this.colorScheme[nt] = e.target.value;\r\n    this.widgets['alignView-customColorScheme'][nt] = e.target.value;\r\n    this.updateAlignment();\r\n    if (this.widgets['alignView-showMiniMap']) {\r\n      this.updateMiniMap();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param index 0=A, 1=C, 2=G, 3=T, anythingElse=ambig\r\n   * @returns the value (hexvalue) from colorScheme based on the index given\r\n   */\r\n  fillColor(index:number) {\r\n    if (this.selectedSeqType == 'aa') {\r\n      switch (index) {\r\n        //['A', 'R', 'N', 'D', 'C', 'E', 'Q', 'G', 'H', 'I', 'L', 'K', 'M', 'F', 'P', 'S', 'T', 'W', 'Y', 'V', '*', '-', 'X']\r\n        case 0:\r\n          return this.colorScheme['A']\r\n        case 1:\r\n          return this.colorScheme['R']\r\n        case 2:\r\n          return this.colorScheme['N']\r\n        case 3:\r\n          return this.colorScheme['D']\r\n        case 4:\r\n          return this.colorScheme['C']\r\n        case 5:\r\n          return this.colorScheme['E']\r\n        case 6:\r\n          return this.colorScheme['Q']\r\n        case 7:\r\n          return this.colorScheme['G']\r\n        case 8:\r\n          return this.colorScheme['H']\r\n        case 9:\r\n          return this.colorScheme['I']\r\n        case 10:\r\n          return this.colorScheme['L']\r\n        case 11:\r\n          return this.colorScheme['K']\r\n        case 12:\r\n          return this.colorScheme['M']\r\n        case 13:\r\n          return this.colorScheme['F']\r\n        case 14:\r\n          return this.colorScheme['P']\r\n        case 15:\r\n          return this.colorScheme['S']\r\n        case 16:\r\n          return this.colorScheme['T']\r\n        case 17:\r\n          return this.colorScheme['W']\r\n        case 18:\r\n          return this.colorScheme['Y']\r\n        case 19:\r\n          return this.colorScheme['V']\r\n        case 22:\r\n          return this.colorScheme['X']\r\n        default:\r\n          return this.colorScheme['X']\r\n      }\r\n    }\r\n    if (index == 0) {\r\n      return this.colorScheme['A'];\r\n    } else if (index == 1) {\r\n      return this.colorScheme['C'];\r\n    } else if (index == 2) {\r\n      return this.colorScheme['G'];\r\n    } else if (index == 3) {\r\n      return this.colorScheme['T'];\r\n    } else {\r\n      return this.colorScheme['ambig'];\r\n    }\r\n  }\r\n\r\n  // Helper\r\n\r\n  /**\r\n   * Searches nodesWithSequences for name given; changes background color for all nodes that are found\r\n   * @param name name/id of node to search for\r\n   * @param field which field from node to search in\r\n   */\r\n  search(name: string, field: string) {\r\n    $('.canvasLabels div').removeClass('searchHighlight2')\r\n    if (name == \"\") {\r\n      return;\r\n    }\r\n\r\n    let isFieldNumerical = typeof this.getData([this.nodesWithSeq[0]], field)[0] === 'number'\r\n\r\n    let data = this.getData(this.nodesWithSeq, (field == 'index' ? ['index'] : ['index', field]))\r\n    let indexes;\r\n    if (isFieldNumerical) {\r\n      indexes = data.filter((obj) => obj[field] == parseFloat(name)).map((obj) => obj['index'])\r\n    } else {\r\n      indexes = data.filter((obj) => obj[field].includes(name)).map((obj) => obj['index'])\r\n    }\r\n    //let indexes = this.nodesWithSeq.filter((obj) => obj.name.includes(name)).map((obj) => this.nodesWithSeq.indexOf(obj));\r\n    if (indexes.length == 0) {\r\n      console.log('not found');\r\n      return;\r\n    }\r\n\r\n    for (let index of indexes) {\r\n      //let element = $('.canvasLabels div').get(index);\r\n      let element = $(`.canvasLabels div[data-index=\"${index}\"]`)\r\n      $(element).addClass('searchHighlight2')\r\n    }\r\n\r\n    // need to scroll if necessary\r\n    let scroll = $('.canvasLabels').scrollTop();\r\n    let topIndex = scroll/this.spanHeight;\r\n    topIndex = (topIndex%1 > .2) ? Math.ceil(topIndex) : Math.floor(topIndex)\r\n    let bottomIndex = Math.floor((this.canvasViewHeight-20) / this.spanHeight + topIndex -1);\r\n    if (indexes[0] < topIndex || indexes[0] > bottomIndex) {\r\n        let scrollPos = (indexes[0])*this.spanHeight -5\r\n        $('.canvasLabels').scrollTop(scrollPos)\r\n    }\r\n    \r\n  }\r\n\r\n  /**\r\n   * Replaces search function and better incorporates with all node-selected events and not node-selected from search\r\n   */\r\n  highlightRows() {\r\n    $('.canvasLabels div').removeClass('searchHighlight2')\r\n    let nodes = this.getData(this.nodesWithSeq, ['index', 'selected']);\r\n    let selectedNodes = nodes.filter(node => node.selected);\r\n\r\n    if (selectedNodes.length == 0) {\r\n      return;\r\n    }\r\n\r\n    for (let node of selectedNodes) {\r\n      //let element = $('.canvasLabels div').get(index);\r\n      let element = $(`.canvasLabels div[data-index=\"${node.index}\"]`)\r\n      $(element).addClass('searchHighlight2')\r\n    }\r\n    let firstPositionSelected = nodes.indexOf(selectedNodes[0])\r\n\r\n    // need to scroll if necessary\r\n    let scroll = $('.canvasLabels').scrollTop();\r\n    let topIndex = scroll/this.spanHeight;\r\n    topIndex = (topIndex%1 > .2) ? Math.ceil(topIndex) : Math.floor(topIndex)\r\n    let bottomIndex = Math.floor((this.canvasViewHeight-20) / this.spanHeight + topIndex -1);\r\n    if (firstPositionSelected < topIndex || firstPositionSelected > bottomIndex) {\r\n        let scrollPos = (firstPositionSelected)*this.spanHeight -5\r\n        $('.canvasLabels').scrollTop(scrollPos)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens settings pane\r\n   */\r\n  openSettings() {\r\n    //this.alignmentDialogSettings.isVisible ? this.alignmentDialogSettings.setVisibility(false) : this.alignmentDialogSettings.setVisibility(true);\r\n    this.alignmentDialogSettings.isVisible = !this.alignmentDialogSettings.isVisible\r\n  }\r\n\r\n  /**\r\n   * Updates text in Alignment Top\r\n   */\r\n  onAlignmentTopChange() {\r\n    if (this.widgets['alignView-topDisplay'] == 'barplot') {\r\n      $('#alignmnetTopTitle').text('Bar Plot').prop('title', 'Barplot representation of the sequences that shows the proportion of each nucleotide at each position.');\r\n    } else {\r\n      $('#alignmnetTopTitle').text('Logo').prop('title', 'Logo representation of the sequences that shows the proportion of each nucleotide at each position.');\r\n    }\r\n  }\r\n\r\n  /** XXXX May need to remove; currently use position matrix instead of calculating each XXXX\r\n   * @param i current index of the base/nt in proportion matrix\r\n   * @param j A=0, C=1, G=2, T=3, other/ambiguos=4\r\n   * @returns location for the y value of rectangle in the logo\r\n   */\r\n  calculateY(i:number, j:number) {\r\n    if (j == 4) { return 0}\r\n    let nt = this.proportionMatrix[i];\r\n    let y = nt[4]*100;\r\n    if (j==0) { return y }\r\n    for (let k=0; k<j; k++) {\r\n      y += nt[k]*100\r\n    }\r\n    return y;\r\n  }\r\n\r\n  /**\r\n   * Sychronises horizonal scrolls on canvasHolder with alignmentTop and vertical scrolls on canvasHolder with canvasLabels\r\n   * @param canvasHolder div class=\"canvasHolder\"\r\n   * @param canvasLabels div class=\"canvasLabels\"\r\n   * @param alignmentTop div class=\"alignmentTop\"\r\n   */\r\n  canvasScroll(canvasHolder: HTMLElement, canvasLabels: HTMLElement, alignmentTop: HTMLElement) {\r\n    if (canvasHolder.scrollLeft != alignmentTop.scrollLeft) {\r\n      alignmentTop.scrollLeft = canvasHolder.scrollLeft\r\n    }\r\n    if (canvasHolder.scrollTop != canvasLabels.scrollTop) {\r\n      canvasLabels.scrollTop = canvasHolder.scrollTop;\r\n    }   \r\n  }\r\n\r\n\r\n  /**\r\n  * Generate a tabular HTML string from the index of proportionMatrix\r\n  * @param data index of the position to use to make the HTML string of the table\r\n  * @returns an HTML string with a table representation of the data\r\n  */\r\n  tabulate(index) {\r\n    let dataType = this.selectedSeqType == 'aa' ? 'AA': 'NT'\r\n\r\n    let tableHtml = `\r\n        <style>\r\n        #tooltip-table {\r\n            border-spacing: 0;\r\n            width: 100%;\r\n            border: 1px solid #ddd;\r\n            z-index: 1000;\r\n        }\r\n        \r\n        #tooltip-table td, #tooltip-table th {\r\n            text-align: left;\r\n            padding: 2px;\r\n            border: 1px solid #ddd;\r\n        }\r\n        \r\n        #tooltip-table tr:nth-child(even) {\r\n            background-color: #f2f2f2;\r\n        }\r\n        \r\n        #tooltip-table tr:nth-child(odd) {\r\n            background-color: #fff;\r\n        }\r\n        </style>\r\n        <div>Position: ${index+1}</div>\r\n        <table id=\"tooltip-table\"><thead><th>${dataType}</th><th> % </th></thead><tbody>`;\r\n\r\n        \r\n        if (this.selectedSeqType == 'aa') {\r\n          let data = this.proportionMatrixAA[index];\r\n          let nonZeroIndexes = [];\r\n          let index2NT = ['A', 'R', 'N', 'D', 'C', 'E', 'Q', 'G', 'H', 'I', 'L', 'K', 'M', 'F', 'P', 'S', 'T', 'W', 'Y', 'V', 'STOP', 'GAP', 'UNK'];\r\n          data.forEach((value, index) => {\r\n            if (value > 0) nonZeroIndexes.push(index);\r\n          })\r\n          nonZeroIndexes.sort(compareIndices);\r\n          function compareIndices(a,b) {\r\n            return data[b] - data[a]\r\n          }\r\n          let numberOfRows = Math.min(4, nonZeroIndexes.length)\r\n          let sum = 0;\r\n          for (let i = 0; i< numberOfRows; i++) {\r\n            let AAindex = nonZeroIndexes[i];\r\n            tableHtml += `<tr><td>${index2NT[AAindex]}</td><td>`+(data[AAindex]*100).toFixed(1) +'%</td>';\r\n            sum += data[AAindex];\r\n          }\r\n          if (sum <= 0.99) {\r\n            tableHtml += `<tr><td>Other</td><td>`+((1-sum)*100).toFixed(1) +'%</td>';\r\n          }\r\n          \r\n        } else {\r\n          for (let i = 0; i<5; i++) {\r\n            let data = this.proportionMatrix[index]\r\n            tableHtml += '<tr>';\r\n            if (i == 0) {\r\n              tableHtml += '<td>A</td><td>' + (data[i]*100).toFixed(1) + '%</td>';\r\n            } else if (i == 1) {\r\n              tableHtml += '<td>C</td><td>' + (data[i]*100).toFixed(1) + '%</td>';\r\n            } else if (i == 2) {\r\n              tableHtml += '<td>G</td><td>' + (data[i]*100).toFixed(1) + '%</td>';\r\n            } else if (i == 3) {\r\n              tableHtml += '<td>T</td><td>' + (data[i]*100).toFixed(1) + '%</td>';\r\n            } else {\r\n              tableHtml += '<td>other</td><td>' + (data[i]*100).toFixed(1) + '%</td>'\r\n            }\r\n            tableHtml += '</tr>';\r\n          } \r\n        }\r\n        \r\n    tableHtml += '</tbody></table>';\r\n\r\n    return tableHtml;\r\n  }\r\n\r\n  /**\r\n  * @returns an array [X, Y] of the position of mouse relative to alignment view. Global position (i.e. d3.event.pageX) doesn't work for a dashboard\r\n  */  \r\n  getRelativeMousePosition(e) {\r\n    let rect = document.querySelector('alignmentviewcomponent').getBoundingClientRect();\r\n    let X = e.pageX - rect.left;\r\n    let Y = e.pageY - rect.top; \r\n    return [X, Y];\r\n  }\r\n\r\n  /**\r\n   * Set events such as node-selected so that they can be triggered; such as with search\r\n   */\r\n  setEvents() {\r\n    let that = this;\r\n\r\n    $(document).on( \"node-selected\", function( ) {  \r\n      //that.search($('#search').val() as string, $('#search-field').val() as string)\r\n      that.highlightRows();\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * updates labelArray and then searches again if needed\r\n   */\r\n  onLabelFieldChange() {\r\n    this.labelArray = this.getData(this.nodesWithSeq, ['index', this.widgets['alignView-labelField']])\r\n    \r\n    setTimeout(()=>this.highlightRows(), 1);\r\n  }\r\n\r\n  /**\r\n   * Sorts the indexes in nodesWithSeq based on the field selected. \r\n   * After updating nodesWithSeq, it updates labelArray, seqArray, seqArrayShortened, main canvas, and minimap\r\n   */\r\n  onSortFieldChange() {\r\n    let newSort;\r\n    let sortField = this.widgets['alignView-sortField']\r\n    if (sortField == \"None\") {\r\n      return;\r\n    } else if ( sortField == \"index\") {\r\n      //return\r\n      newSort = this.getData(this.nodesWithSeq, [sortField]).sort((a,b) => a[sortField] -b[sortField]);\r\n      //this.nodesWithSeq.sort((a,b) => )\r\n    } else if (typeof this.getData([this.nodesWithSeq[0]], sortField)[0] == 'number') {\r\n      newSort = this.getData(this.nodesWithSeq, ['index', sortField]).sort((a,b) => a[sortField] - b[sortField]);\r\n    } else {\r\n      newSort = this.getData(this.nodesWithSeq, ['index', sortField]).sort((a,b) => a[sortField].localeCompare(b[sortField]));\r\n    }\r\n\r\n    // updates nodesWithSeq\r\n    this.nodesWithSeq = newSort.map((obj) => obj['index'])\r\n    // updates labelArray with new sort\r\n    this.onLabelFieldChange();\r\n\r\n    // updates seqArray with new order\r\n    this.seqArray = this.getData(this.nodesWithSeq, 'seq');\r\n\r\n    // updates seqArrayShortened with new order\r\n    this.shortenNodesWithSeq();\r\n\r\n    // updates main canvas and minimap canvas\r\n    this.updateAlignment();\r\n  }\r\n\r\n  \r\n  updateNodeColors() { }\r\n  updateLinkColor() { }\r\n\r\n  updateVisualization() {\r\n  }\r\n\r\n  // function is called when style file is applied\r\n  applyStyleFileSettings() {\r\n    this.widgets = (window as any).context.commonService.session.style.widgets;\r\n\r\n    this.labelArray = this.getData(this.nodesWithSeq, ['index', this.widgets['alignView-labelField']]);\r\n\r\n    // sets different variables relating to size and display\r\n    this.onAlignmentTopChange()\r\n\r\n    if (this.widgets['alignView-colorSchemeName'] == 'n' || this.widgets['alignView-colorSchemeName'] == 'a') {\r\n      this.useCustomColorScheme = false;\r\n    } else {\r\n      this.useCustomColorScheme = true;\r\n    }\r\n    this.onSelectedColorChanged(true)\r\n\r\n    // updates spanWidth, spanHeight, rightWidth, leftWidth, fontSize, and then updates alignment\r\n    this.onSelectedSizeChanged()\r\n\r\n    // updates shows or hides minimap and then updates view heights\r\n    this.updateMiniMapVisibility()\r\n  }\r\n\r\n  goldenLayoutComponentResize() {\r\n    this.updateViewHeights()\r\n    this.rightWidth = this.calculateRightWidth()\r\n  }\r\n\r\n  openRefreshScreen() {\r\n    \r\n  }\r\n  onRecallSession() {\r\n    \r\n  }\r\n  onLoadNewData() {   \r\n  }\r\n  onFilterDataChange() {\r\n    \r\n  }\r\n\r\n  /**\r\n   * Opens the Alignment View Export Pain\r\n  */\r\n  openExport() {\r\n    this.ShowAlignExportPane = true;\r\n  }\r\n\r\n  /**\r\n   * Exports the alignmentTop and main canvas as png image\r\n   */\r\n  exportPNG() {\r\n    let that = this;\r\n    let alignmentTop = document.querySelector('#alignmentTop svg');\r\n    let mainCanvas = $('.canvasHolder canvas').get(0) as HTMLCanvasElement\r\n    let exportWidth = mainCanvas.width\r\n    let exportHeight = mainCanvas.height + 140;\r\n    svgAsPngUri(alignmentTop, {\r\n      scale: 1,\r\n      backgroundColor: '#ffffff',\r\n      encoderType: 'image/png',\r\n      encoderOptions: 0.8\r\n    }).then((topB64string) => {\r\n      let imageDataUrl;\r\n\r\n      let exportCanvas = document.createElement(\"canvas\");\r\n      exportCanvas.height = exportHeight;\r\n      exportCanvas.width = exportWidth;\r\n      let ctx = exportCanvas.getContext(\"2d\");\r\n\r\n      let iTop = new Image();\r\n      let iMain = new Image();\r\n      iTop.src = topB64string;\r\n      iTop.onload = function() {\r\n        iMain.src = mainCanvas.toDataURL()\r\n        iMain.onload = function() {\r\n\r\n          ctx.drawImage(iTop, 0, 0)\r\n          ctx.drawImage(iMain, 0, 140)\r\n\r\n          imageDataUrl = exportCanvas.toDataURL(\"image/png\")\r\n          saveAs(imageDataUrl, that.AlignmentExportFileName + '.png')\r\n        }\r\n      }\r\n  }); \r\n  }\r\n\r\n  /**\r\n   * Exports the alignment top and main canvas as svg or png image\r\n   */\r\n  exportVisualization() {\r\n    $(\"body\").css(\"cursor\", \"progress\");\r\n    if (this.AlignmentExportFileTypeVis == 'png') {\r\n      this.exportPNG();\r\n    } else {\r\n      \r\n    let canvas = $('.canvasHolder canvas').get(0) as HTMLCanvasElement\r\n    let canvasDataURL = canvas.toDataURL();\r\n  \r\n    let foreignObj = document.createElementNS('http://www.w3.org/2000/svg', 'image')\r\n    foreignObj.setAttribute('x', '0'); // Set the x-coordinate\r\n    foreignObj.setAttribute('y', '140'); // Set the y-coordinate\r\n    foreignObj.setAttribute('width', canvas.width.toString()); // Set the width\r\n    foreignObj.setAttribute('height', canvas.height.toString()); // Set the height\r\n    foreignObj.setAttribute('xlink:href', canvasDataURL);\r\n\r\n    let top = $('#alignmentTop svg').get(0)\r\n    top.style.height = 150+canvas.height+'px'\r\n    top.appendChild(foreignObj);\r\n\r\n    let content = this.commonService.unparseSVG(top);\r\n    let blob = new Blob([content], { type: 'image/svg+xml;charset=utf-8' });\r\n    saveAs(blob, this.AlignmentExportFileName + '.svg');\r\n\r\n    top.style.height = 150+canvas.height+'px';\r\n    top.removeChild(foreignObj)\r\n    }\r\n    $(\"body\").css(\"cursor\", \"default\");\r\n  }\r\n\r\n  /**\r\n   * Exports sequencing data (id + seq string) as fasta or mega file\r\n   */\r\n  exportData(includeConsensus=false) {\r\n    let data, consensus, megaFormat;\r\n    if (this.selectedSeqType == 'aa') {\r\n      let labels = this.getData(this.nodesWithSeq, '_id')\r\n      data = labels.map((id, index) => ({ '_id': id, seq: this.seqArray[index] }));\r\n      consensus = includeConsensus? this.getConsensus(this.proportionMatrixAA, 'plurality', 'aa') : '';\r\n      megaFormat = 'DataType=Protein Missing=X Indel=-;\\r\\n\\r\\n'\r\n    } else {\r\n      data = this.getData(this.nodesWithSeq, ['_id', 'seq']);\r\n      consensus = includeConsensus? this.getConsensus(this.proportionMatrix) : '';\r\n      megaFormat = 'DataType=DNA CodeTable=Standard\\r\\n\\tIdentical=. Missing=? Indel=-;\\r\\n\\r\\n'\r\n    }\r\n    if (this.AlignmentExportFileTypeData == 'fasta') {\r\n      let consensusString = includeConsensus? '>consensus\\r\\n' + consensus + \"\\r\\n\":'';\r\n      let blob = new Blob([consensusString, data.map(node => \">\" + node._id + \"\\r\\n\" + node.seq).join(\"\\r\\n\")])\r\n      saveAs(blob, this.AlignmentExportFileName+'.fasta')\r\n    } else if (this.AlignmentExportFileTypeData == 'mega') {\r\n      let headers = \"#mega\\r\\n!Title \" + this.AlignmentExportFileName + \";\\r\\n!Format\\r\\n\\t\" + megaFormat;\r\n      let consensusString = includeConsensus? '#consensus\\r\\n' + consensus + \"\\r\\n\" : '';\r\n      let blob = new Blob([headers, consensusString, data.map(node => \"#\" + node._id + \"\\r\\n\" + node.seq).join(\"\\r\\n\")])\r\n      saveAs(blob, this.AlignmentExportFileName+'.meg')\r\n    }\r\n  }\r\n\r\n  exportDataTable(option='basic', includeConsensus) {\r\n    // basic 5 number for each position     // may not use basic option but keeping it for now\r\n    // advances includes proportion for gaps and each ambiguous nucleotide option\r\n    // [A, C, G, T, #other/ambig]\r\n    let csvString;\r\n    if (option == 'basic') {\r\n      let csvHeader = 'A,C,G,T,other (including gap and abiguous)\\n';\r\n      csvString = csvHeader + this.proportionMatrix.map(innerArray => innerArray.join(',')).join('\\n');\r\n    } else if (includeConsensus) {\r\n      let csvHeader;\r\n      let proportionMatrix;\r\n      let consensus;\r\n      if (this.selectedSeqType =='aa') {\r\n        csvHeader = 'position,consensus,\"consensus ambiguities (most prevalent AA outside of brackets, other AAs found at this position inside brackets)\",A,R,N,D,C,E,Q,G,H,I,L,K,M,F,P,S,T,W,Y,V,stop,gap,ambiguous\\n';\r\n        proportionMatrix = this.proportionMatrixAA;\r\n        consensus = this.getConsensus(proportionMatrix, 'meme', 'aa')\r\n      } else {\r\n        csvHeader = 'position,consensus,\"consensus ambiguities (most prevalent NT outside of brackets, other NTs found at this position inside brackets)\",A,C,G,T,gap,N,R,Y,K,M,S,W,B,D,H,V,other\\n';\r\n        proportionMatrix= this.calculateAdvancedProportion();\r\n        consensus = this.getConsensus(proportionMatrix, 'meme')\r\n      }\r\n       \r\n      let consensusInterator = getNextPosition(consensus);\r\n      csvString = csvHeader + proportionMatrix.map((innerArray,pos) => {\r\n        let chars = consensusInterator.next().value;\r\n        return (pos+1) + ',' + chars.charAt(0)+',' + chars + ',' + innerArray.join(',')\r\n      }).join('\\n');\r\n    } else {\r\n      let proportionMatrix;\r\n      let csvHeader;\r\n      if (this.selectedSeqType == 'aa') {\r\n        csvHeader = 'position,A,R,N,D,C,E,Q,G,H,I,L,K,M,F,P,S,T,W,Y,V,stop,gap,ambiguous\\n';\r\n        proportionMatrix = this.proportionMatrixAA;\r\n      } else {\r\n        csvHeader = 'position,A,C,G,T,gap,N,R,Y,K,M,S,W,B,D,H,V,other\\n';\r\n        proportionMatrix = this.calculateAdvancedProportion();\r\n      }\r\n\r\n      csvString = csvHeader + proportionMatrix.map((innerArray,pos) => (pos+1)+ ',' + innerArray.join(',')).join('\\n');\r\n    }\r\n    function* getNextPosition(input) {\r\n      for (let i = 0; i < input.length; i++) {\r\n        const char = input[i];\r\n        if (input[i+1] === '[') {\r\n            // Yield the character and everything in the brackets\r\n            let bracketContent = '';\r\n            while (input[i] !== ']') {\r\n                bracketContent += input[i];\r\n                i++;\r\n            }\r\n            bracketContent += ']';\r\n            yield bracketContent;\r\n        } else {\r\n            // Yield individual characters\r\n            yield char;\r\n        }\r\n      }\r\n    }\r\n\r\n    let blob = new Blob([csvString], { type: 'text/csv' })\r\n    saveAs(blob, this.AlignmentExportFileName + '.csv')\r\n  }\r\n\r\n  /** Gets the consensus sequence of a NT or AA sequence, defined by most common char at a position (not based on meeting a threshold);\r\n   * \r\n   * Option: \r\n   ** 'pluratily' returns just the sequence of most common bases\r\n   ** 'meme' return the most common base, then adds other bases found at that position in brackets.\r\n   * \r\n   * Given all A at first 1, and 70% C and 30% A at 2nd pos, plurality returns 'AC', 'meme' returns 'AC[A]'\r\n   */\r\n  getConsensus(proportionMatrix, option='plurality', seq='nt') {\r\n    let consensusSeq = '';\r\n    if (option == 'plurality') {\r\n      let index2NT = seq == 'nt' ? ['A', 'C', 'G', 'T', '-'] : ['A', 'R', 'N', 'D', 'C', 'E', 'Q', 'G', 'H', 'I', 'L', 'K', 'M', 'F', 'P', 'S', 'T', 'W', 'Y', 'V', '*', '-', 'X']\r\n      proportionMatrix.forEach((row) => {\r\n        let maxPos = row.indexOf(Math.max(...row));\r\n        if (maxPos > 4 && seq=='nt') {consensusSeq += 'N'}\r\n        else {consensusSeq += index2NT[maxPos];}\r\n      })\r\n      return consensusSeq;\r\n    } else if (option == 'meme') {\r\n      let index2NT = seq == 'nt' ?  ['A','C','G','T','-','N','R','Y','K','M','S','W','B','D','H','V', 'invalid'] : ['A', 'R', 'N', 'D', 'C', 'E', 'Q', 'G', 'H', 'I', 'L', 'K', 'M', 'F', 'P', 'S', 'T', 'W', 'Y', 'V', '*', '-', 'X'];\r\n      proportionMatrix.forEach((row) => {\r\n        let nonZeroIndexes = [];\r\n        row.forEach((value, index) => {\r\n          if (value > 0) nonZeroIndexes.push(index);\r\n        })\r\n        nonZeroIndexes.sort(compareIndices);\r\n        function compareIndices(a,b) {\r\n          return row[b] - row[a]\r\n        }\r\n        nonZeroIndexes.forEach((index, pos) => {\r\n          if (pos == 1) {\r\n            consensusSeq += '['\r\n          }\r\n          consensusSeq += index2NT[index]\r\n        })\r\n        if (nonZeroIndexes.length > 1) consensusSeq+=']'\r\n      })\r\n\r\n      return consensusSeq;\r\n    }\r\n  }\r\n}\r\n\r\nexport namespace AlignmentViewComponent {\r\n  export const componentTypeName = 'Alignment View';\r\n}\r\n\r\n","\r\n// Moved out of alignment-view-plugin-component, so that it can be accessed from files view without having to initialize the whole view\r\n/**\r\n   * Adapted from  https://github.com/CDCgov/AlignmentViewer to also allow minimum charSetting, accepts array of seq (not array of seq objects)\r\n   * @param seqs array of sequences objects ['ATGA...', 'TATA...', ...]\r\n   * @param config  object: { width: number, height: number, charSetting:['hide'|'show'|'min'], fontSize: number, colors: {'A':'#000000', 'C': , 'G':, 'T':, 'ambig':}}\r\n   * @returns promise of a HTMLCanvasElement showing the alignment\r\n   */\r\nexport function generateCanvas(seqs, config) {\r\n    config = Object.assign({\r\n      width: 1,\r\n      height: 1,\r\n      'charSetting': 'hide'\r\n    }, config, {\r\n      colors: Object.assign({\r\n        'A': '#ccff00',\r\n        'C': '#ffff00',\r\n        'G': '#ff9900',\r\n        'T': '#ff6600',\r\n        'ambig': '#ffffff'\r\n      }, ('colors' in config) ? config.colors : {}),\r\n    });\r\n  \r\n    return new Promise(resolve => {\r\n      let longest = 0;\r\n      let n = seqs.length;\r\n      for (let i = 0; i < n; i++) {\r\n        let seq = seqs[i].toUpperCase();\r\n        if (seq.length > longest) longest = seq.length;\r\n      }\r\n      let ch = Math.ceil(config.height);\r\n      let cw = Math.ceil(config.width);\r\n      let width = longest * config.width;\r\n      let height = seqs.length * config.height;\r\n      let canvas = document.createElement('canvas');\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n      let context = canvas.getContext('2d', { alpha: false });\r\n      context.fillStyle = config.colors['ambig'];\r\n      context.fillRect(0, 0, width, height);\r\n      Object.keys(config.colors).forEach(nucleotide => {\r\n        if(nucleotide == 'ambig') return;\r\n        context.fillStyle = config.colors[nucleotide];\r\n        for (let row = 0; row < n; row ++) {\r\n          let seq = seqs[row];\r\n          let y = Math.floor(row * ch);\r\n          for (let col = 0; col < longest; col++) {\r\n            let c = seq[col];\r\n            if(!c) break;\r\n            if(c != nucleotide) continue;\r\n            let x = Math.floor(col * cw);\r\n            context.fillRect(x, y, cw, ch);\r\n          }\r\n        }\r\n      });\r\n      context.font = (config.fontSize) + 'px mono';\r\n      context.textAlign = 'center';\r\n      context.textBaseline = 'bottom';\r\n      context.fillStyle = 'black';\r\n      if(config.charSetting=='show'){\r\n        for (let row = 0; row < n; row++) {\r\n          let seq = seqs[row];\r\n          let y = row * ch + ch;\r\n          for (let col = 0; col < longest; col++) {\r\n            let c = seq[col];\r\n            if(!c) break;\r\n            let x = col * cw + cw/2;\r\n            context.fillText(c, x, y, cw);\r\n          }\r\n        }\r\n      } else if (config.charSetting=='min'){\r\n        let refSeq = seqs[0]\r\n        for (let col = 0; col < longest; col++) {\r\n          let c = refSeq[col];\r\n          if(!c) break;\r\n          let x = col * cw + cw/2;\r\n          context.fillText(c, x, ch, cw);\r\n        }\r\n\r\n        for (let row = 1; row < n; row++) {\r\n          let seq = seqs[row];\r\n          let y = row * ch + ch;\r\n          for (let col = 0; col < longest; col++) {\r\n            let c = (refSeq[col] != seq[col] || seq[col]=='-' || refSeq[col] == ' ')? seq[col]: '.';\r\n            if(!c) break;\r\n            let x = col * cw + cw/2;\r\n            context.fillText(c, x, y, cw);\r\n          }\r\n        } \r\n\r\n      }\r\n      resolve(canvas);\r\n    });\r\n  }","import { ChangeDetectorRef, Component, ElementRef, Inject, Injector, OnInit, Output, Renderer2, EventEmitter, ViewChild } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { SelectItem } from 'primeng/api';\r\nimport * as saveAs from 'file-saver';\r\nimport { saveSvgAsPng } from 'save-svg-as-png';\r\n\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { CommonService } from '@app/contactTraceCommonServices/common.service';\r\nimport { MicobeTraceNextPluginEvents } from '@app/helperClasses/interfaces';\r\nimport { MicrobeTraceNextVisuals } from '@app/microbe-trace-next-plugin-visuals';\r\nimport { ComponentContainer } from 'golden-layout';\r\n \r\nimport { XYContainer, Scatter, Axis } from '@unovis/ts'\r\n\r\ntype DataRecord = { index: number, id: string, x: number; y: number, color: string, Xgroup: number, Ygroup: number, strokeColor: string, totalCount?: number, counts ?: any }//selected: boolean }\r\n\r\n@Component({\r\n  selector: 'bubble-component',\r\n  templateUrl: './bubble.component.html',\r\n  styleUrls: ['./bubble.component.scss']\r\n})\r\nexport class BubbleComponent extends BaseComponentDirective implements OnInit, MicobeTraceNextPluginEvents {\r\n\r\n  @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n  @ViewChild('scatter') scatterPlot: Scatter<Object>;\r\n  @ViewChild('x_axis') x_axis: Axis<DataRecord>;\r\n  @ViewChild('y_axis') y_axis: Axis<DataRecord>;\r\n  \r\n  visuals: MicrobeTraceNextVisuals;\r\n  widgets: any;\r\n\r\n  viewActive: boolean = true;\r\n  settingsOpen: boolean = false;\r\n  exportOpen: boolean = false;\r\n\r\n  BubbleExportFileType: string = 'png'\r\n  BubbleExportFileName: string = ''\r\n  SelectedBubbleExportScaleVariable: number = 1;\r\n  CalculatedResolution: string;\r\n\r\n  viewHeight: number\r\n  viewWidth: number\r\n  padding = { left: 20, right: 20, top: 20, bottom: 20 }\r\n\r\n  selectedFieldList: SelectItem[] = [];\r\n  xVariable: string;\r\n  yVariable: string;\r\n  nodeSize: number;\r\n  nodeSpacing = 0.05;\r\n\r\n  allData: DataRecord[] = [];\r\n  visibleData: DataRecord[] = [];\r\n\r\n  X_categories = []\r\n  X_axisFormat = (tick: number) => this.X_categories[tick]\r\n  X_tickValues = []\r\n\r\n  Y_categories = []\r\n  Y_axisFormat = (tick: number) => this.Y_categories[tick]\r\n  Y_tickValues = []\r\n  \r\n  /* on-click effect, if we want functionality when a node is clicked (also add [events]=\"events\" to vis-scatter in template)\r\n  events = {\r\n    [Scatter.selectors.point]: {\r\n      click: (d: DataRecord) => { \r\n        //d.selected = true;\r\n        console.log(d);\r\n      }\r\n    }\r\n  }\r\n  */\r\n\r\n  tooltipTriggers = {\r\n    [Scatter.selectors.point]: (d: DataRecord): string => {\r\n      if (this.SelectedNodeCollapsingTypeVariable) {\r\n        let output = `\r\n        <style>\r\n          #bubbleToolTip {\r\n            border-spacing: 0;\r\n            width: 100%;\r\n            //border: 1px solid #ddd;\r\n            z-index: 1000;\r\n          }\r\n\r\n          #bubbleToolTip td, #bubbleToolTip th {\r\n            text-align: center;\r\n            padding: 2px;\r\n            font-weight: 400;\r\n            border: 1px solid #ddd;\r\n          }\r\n\r\n          #bubbleToolTip tr:nth-child(even) {\r\n            background-color: #f2f2f2;\r\n          }\r\n\r\n          #bubbleToolTip tr:nth-child(odd) {\r\n            background-color: #fff;\r\n          } \r\n        </style>\r\n        <table id=\"bubbleToolTip\"><thead><th>${this.commonService.capitalize(this.visuals.microbeTrace.SelectedColorNodesByVariable)}</th><th> Count </th><th> % </th></thead><tbody>`\r\n        d.counts.forEach((x) => output += `<tr><td>${x.label}</td><td> ${x.count}</td><td>${(x.count/d.totalCount*100).toFixed(1)}%</td></tr>`)\r\n        return output + '</tbody></table>';\r\n      } else {\r\n        return d.id\r\n      }\r\n    }\r\n  }\r\n\r\n  x = (d: DataRecord) => d.x\r\n  y = (d: DataRecord) => d.y\r\n  color = (d: DataRecord) => d.color\r\n  strokeColor = (d: DataRecord) => d.strokeColor\r\n  sizing: (d: DataRecord) => number\r\n\r\n  NodeCollapsingTypes: any = [\r\n    { label: 'On', value: true },\r\n    { label: 'Off', value: false }\r\n  ];\r\n  SelectedNodeCollapsingTypeVariable: boolean;\r\n\r\n  constructor(injector: Injector,\r\n    private renderer: Renderer2,\r\n    private elem: ElementRef,\r\n    private eventManager: EventManager,\r\n    public commonService: CommonService,\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer,\r\n    elRef: ElementRef,\r\n    private cdref: ChangeDetectorRef\r\n  ) {\r\n    super(elRef.nativeElement);\r\n\r\n    this.visuals = commonService.visuals;\r\n    this.visuals.bubble = this;\r\n    this.widgets = this.commonService.session.style.widgets;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    \r\n    this.selectedFieldList.push({ label: \"None\", value: \"None\"})\r\n    this.commonService.session.data['nodeFields'].map((d) => {\r\n      if (['seq', 'origin', '_diff', '_ambiguity', 'index', '_id'].includes(d)) return;\r\n      this.selectedFieldList.push({\r\n        label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n        value: d\r\n      });\r\n    })\r\n\r\n    this.setWidgets();\r\n    this.updateAxisValues('X');\r\n    this.updateAxisValues('Y');\r\n\r\n    this.getData();\r\n    this.onNodeSizeChange();\r\n\r\n    this.container.on('resize', () => { this.goldenLayoutComponentResize()})\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n        this.viewActive = true; \r\n        this.setSelectedNodes(this);\r\n        setTimeout(() => {\r\n          this.goldenLayoutComponentResize();\r\n          this.cdref.detectChanges();\r\n        }, 5)\r\n\r\n    })\r\n    \r\n    let that = this;\r\n    $( document ).on(\"node-selected\", function( ) {\r\n      if (that.viewActive) {\r\n          that.visuals.bubble.setSelectedNodes(that);\r\n      }\r\n    });\r\n\r\n    $( document ).on( \"node-visibility\", function( ) {\r\n      //console.log('node visi event')\r\n      that.updateVisibleNodes()\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    try {\r\n      setTimeout(() => this.updateViewRatio(), 10)\r\n    } catch (error) {\r\n      try {\r\n        setTimeout(() => this.updateViewRatio(), 1000)\r\n      } catch (error) {\r\n        console.log('unable to set proper view ratio for bubble view, setting to default values');\r\n        this.viewWidth = 800;\r\n        this.viewHeight = 600;\r\n      }\r\n    }    \r\n  }\r\n\r\n  setWidgets() {\r\n    if (this.widgets['bubble-x'] == undefined || !(this.selectedFieldList.map(x=> x.value).includes(this.widgets['bubble-x']))) {\r\n      this.xVariable = 'cluster';\r\n      this.widgets['bubble-x'] = this.xVariable;\r\n    } else {\r\n      this.xVariable = this.widgets['bubble-x'];\r\n    }\r\n\r\n    if (this.widgets['bubble-y'] == undefined || !(this.selectedFieldList.map(x=> x.value).includes(this.widgets['bubble-y']))) {\r\n      this.xVariable = 'None';\r\n      this.widgets['bubble-y'] = this.xVariable;\r\n    } else {\r\n      this.yVariable = this.widgets['bubble-y']\r\n    }\r\n\r\n    if (this.widgets['bubble-x'] == 'None' && this.widgets['bubble-y'] == 'None') {\r\n      this.openSettings();\r\n    }\r\n\r\n    if (this.widgets['bubble-size'] < 10 || this.widgets['bubble-size'] > 40 || this.widgets['bubble-size'] == undefined || this.widgets['bubble-size'] == null || typeof this.widgets['bubble-size'] != 'number') {\r\n      this.widgets['bubble-size'] = 20;\r\n    }\r\n    this.nodeSize = this.widgets['bubble-size']\r\n\r\n    if (this.widgets['bubble-charge'] < .01 || this.widgets['bubble-charge'] > .15 || this.widgets['bubble-charge'] == undefined || this.widgets['bubble-charge'] == null || typeof this.widgets['bubble-charge'] != 'number') {\r\n      this.widgets['bubble-charge'] = 0.05;\r\n    }\r\n    this.nodeSpacing = this.widgets['bubble-charge']\r\n\r\n    if (this.widgets['bubble-collapsed'] == undefined || this.widgets['bubble-collapsed'] == null) {\r\n      this.widgets['bubble-collapsed'] = false;\r\n    }\r\n    this.SelectedNodeCollapsingTypeVariable = this.widgets['bubble-collapsed']\r\n  }\r\n\r\n  /**\r\n   * Gets the data from commonService.getVisibleNodes and then creates node with this. Creates the axis labels and \r\n   * (updates axes and places nodes with this.updateAxes and updates color of nodes with this.updateColors)\r\n   */\r\n  getData() {\r\n    this.allData = [];\r\n  \r\n    let nodes = this.commonService.session.data.nodeFilteredValues;\r\n    nodes.forEach(node => {\r\n      let nodeDR: DataRecord = {\r\n        index: node.index,\r\n        id: node._id,\r\n        x: 0,\r\n        y: 0,\r\n        color: '#ff00ff',\r\n        Xgroup: 0,\r\n        Ygroup: 0,\r\n        strokeColor: node.selected ? this.commonService.session.style.widgets['selected-color']: '#000000'\r\n      }\r\n      if (this.xVariable != undefined || this.xVariable != 'None') {\r\n        let nodeX = node[this.xVariable];\r\n        let locX = this.X_categories.indexOf(nodeX);\r\n        nodeDR.Xgroup = locX;\r\n      }\r\n      if (this.yVariable != undefined || this.yVariable != 'None') {\r\n        let nodeY = node[this.yVariable];\r\n        let locY = this.Y_categories.indexOf(nodeY);\r\n        nodeDR.Ygroup = locY;\r\n      }\r\n\r\n      this.allData.push(nodeDR)\r\n    })\r\n    this.updateAxes();\r\n    this.updateColors();\r\n    if (this.widgets[\"node-timeline-variable\"] != 'None') {\r\n      this.sortData(this.widgets[\"node-timeline-variable\"])\r\n    }\r\n    this.updateVisibleNodes();\r\n\r\n  }\r\n\r\n  /**\r\n   * updates values of visibleNodes based on SelectedNodeCollapsingTypeVariable and if timeline mode is active\r\n   */\r\n  updateVisibleNodes() {\r\n    if (this.widgets[\"node-timeline-variable\"] == 'None' && this.SelectedNodeCollapsingTypeVariable == false) {\r\n      this.visibleData = this.allData;\r\n    } else if (this.SelectedNodeCollapsingTypeVariable){\r\n      if (this.commonService.getVisibleNodes().length == this.visibleData.reduce((sum, obj) => sum + obj.totalCount, 0)) { return }\r\n      this.getCollapsedData(false, false)\r\n    } else { \r\n      let visibleNodes = this.commonService.getVisibleNodes();\r\n      if (visibleNodes.length +2 == this.visibleData.length) { return }\r\n      this.visibleData = [];\r\n      this.visibleData.push({\r\n        id: '',\r\n        index: 10000,\r\n        x: -.4,\r\n        y: -.4,\r\n        color: '#ffffff',\r\n        Xgroup: -.4,\r\n        Ygroup: -.4,\r\n        strokeColor: '#ffffff'\r\n      })\r\n      this.visibleData.push({\r\n        id: '',\r\n        index: 10000,\r\n        x: this.X_categories.length - .6,\r\n        y: this.Y_categories.length - .6,\r\n        color: '#ffffff',\r\n        Xgroup: this.X_categories.length - .6,\r\n        Ygroup: this.Y_categories.length -.6,\r\n        strokeColor: '#ffffff'\r\n      })\r\n      this.allData.forEach(node => {\r\n        if (visibleNodes.find(vNode => vNode._id == node.id)) {\r\n          this.visibleData.push(node);\r\n        }\r\n      })\r\n    } \r\n    \r\n\r\n  }\r\n\r\n  /**\r\n  * Updates the value of X_categories X_tickValues based on xVariables (or those variables for Y axis)\r\n  * @param axis 'X' or anything else defaults to 'Y' axis\r\n  */\r\n  updateAxisValues(axis: string) {\r\n    let nodes = this.commonService.session.data.nodeFilteredValues;\r\n\r\n    if (axis == 'X') {\r\n      this.widgets['bubble-x'] = this.xVariable;\r\n      if ( this.xVariable == 'None' || this.xVariable == undefined) {\r\n        this.X_categories = [ undefined ];\r\n        this.X_tickValues = [ 0 ];\r\n      }\r\n\r\n      this.X_categories = [];\r\n      this.X_tickValues = [];\r\n\r\n      nodes.forEach(node => {\r\n        let nodeX = node[this.xVariable];\r\n        if (this.X_categories.indexOf(nodeX) == -1) {\r\n          this.X_tickValues.push(this.X_categories.length);\r\n          this.X_categories.push(nodeX);\r\n        }\r\n    })\r\n\r\n    } else {\r\n      this.widgets['bubble-y'] = this.yVariable;\r\n      if ( this.yVariable == 'None' || this.yVariable == undefined) {\r\n        this.Y_categories = [ undefined ];\r\n        this.Y_tickValues = [ 0 ];\r\n      }\r\n\r\n      this.Y_categories = [];\r\n      this.Y_tickValues = [];\r\n\r\n      nodes.forEach(node => {\r\n        let nodeY = node[this.yVariable];\r\n        if (this.Y_categories.indexOf(nodeY) == -1) {\r\n          this.Y_tickValues.push(this.Y_categories.length);\r\n          this.Y_categories.push(nodeY);\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates axis tickValues (X_tickValues & Y_tickValues) and positions for each node\r\n   */\r\n  updateAxes() {\r\n    this.X_tickValues.forEach(xLoc => {\r\n      this.Y_tickValues.forEach(yLoc => {\r\n        let filteredNodes = this.allData.filter(node => node.Xgroup == xLoc && node.Ygroup == yLoc)\r\n        if (filteredNodes.length == 0) {\r\n          return;\r\n        } else if (filteredNodes.length == 1) {\r\n          filteredNodes[0].x = xLoc;\r\n          filteredNodes[0].y = yLoc;\r\n        } else {\r\n          this.calculateHexagonalGridPositions(filteredNodes)\r\n        }\r\n      })\r\n    })\r\n\r\n    this.X_axisFormat = (tick: number) => {\r\n      if (this.X_categories[tick] == null || this.X_categories[tick] == undefined) {\r\n        return 'Unknown'\r\n      } else {\r\n        return this.X_categories[tick]\r\n      }\r\n    }\r\n    this.Y_axisFormat = (tick: number) => {\r\n      if (this.Y_categories[tick] == null || this.Y_categories[tick] == undefined) {\r\n        return 'Unknown'\r\n      } else {\r\n        return this.Y_categories[tick]\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates this.visibleData so that each node represents a multiple datapoints instead of a single data point;\r\n   * Also updates color/pattern of nodes so that they are pie charts based on proportion of each datapoint's color\r\n   */\r\n  getCollapsedData( sortData = false, initial  = true) {\r\n    if (this.widgets[\"node-timeline-variable\"] != 'None' && sortData) {\r\n      this.sortData(this.widgets[\"node-timeline-variable\"])\r\n    }\r\n    \r\n    if (initial) {\r\n      this.visibleData = [];\r\n      let fullNodes = this.commonService.session.data.nodeFilteredValues;\r\n      this.allData.forEach(node => {\r\n        let X_group = 0, Y_group = 0;\r\n        let currentFullNode = fullNodes.find(fNode => fNode.index == node.index)\r\n        if (this.xVariable != undefined || this.xVariable != 'None') {\r\n          let nodeX = currentFullNode[this.xVariable];\r\n          X_group = this.X_categories.indexOf(nodeX);\r\n        }\r\n        if (this.yVariable != undefined || this.yVariable != 'None') {\r\n          let nodeY = currentFullNode[this.yVariable];\r\n          Y_group = this.Y_categories.indexOf(nodeY);\r\n        }\r\n\r\n        let index = this.visibleData.findIndex((node) => node.Xgroup==X_group && node.Ygroup==Y_group);\r\n        if (index == -1) {\r\n          console.log(X_group, Y_group)\r\n          let length = this.visibleData.length;\r\n          this.visibleData.push({\r\n            index: length,\r\n            id: `${length}`,\r\n            x: X_group,\r\n            y: Y_group,\r\n            color: this.commonService.session.style.widgets['node-color'],\r\n            Xgroup: X_group,\r\n            Ygroup: Y_group,\r\n            strokeColor: '#000000',\r\n            totalCount: 0,\r\n            counts: []\r\n          })\r\n        }\r\n      })\r\n\r\n    }\r\n\r\n    let changedVisibleNodes = this.generateCollapsedCounts();\r\n    let gradient = this.generatePieChartsSVGDefs(changedVisibleNodes);\r\n    let svgDef = this.elem.nativeElement.querySelector('#bubbleDefs');\r\n    changedVisibleNodes.forEach(nodeIndex => { \r\n      let currentNode = svgDef.querySelector(`pattern[id='node${nodeIndex}']`)\r\n      if (currentNode != null) currentNode.remove()\r\n    })\r\n    let XMLS = new XMLSerializer();\r\n    svgDef.childNodes.forEach(cNode => gradient += XMLS.serializeToString(cNode))\r\n    this.renderer.setProperty(svgDef, 'innerHTML', gradient)\r\n\r\n    if (this.widgets['node-timeline-variable'] && initial) {\r\n      // these 2 invisible nodes are to try to keep the graph frame consistent\r\n      this.visibleData.push({\r\n        id: '',\r\n        index: 10000,\r\n        x: -.4,\r\n        y: -.4,\r\n        color: '#ffffff',\r\n        Xgroup: -.4,\r\n        Ygroup: -.4,\r\n        strokeColor: '#000000',\r\n        counts: [],\r\n        totalCount: 0\r\n      })\r\n      this.visibleData.push({\r\n        id: '',\r\n        index: 10000,\r\n        x: this.X_categories.length - .6,\r\n        y: this.Y_categories.length - .6,\r\n        color: '#ffffff',\r\n        Xgroup: this.X_categories.length - .6,\r\n        Ygroup: this.Y_categories.length -.6,\r\n        strokeColor: '#000000',\r\n        counts: [],\r\n        totalCount: 0\r\n      })\r\n    }\r\n\r\n    this.color = (d: DataRecord) => {\r\n      if (d.id == '' && d.index == 10000) {\r\n        return '#ffffff'\r\n      } else if ( d.totalCount == 1 || d.counts.length == 1) {\r\n        return this.commonService.temp.style.nodeColorMap(d.counts[0].label)\r\n      } else {\r\n        return `url(#node${d.index})`\r\n      }\r\n    };\r\n\r\n    this.updateAxes();\r\n  }\r\n\r\n  /**\r\n   * Update the values for counts for each node in this.visibleData (relevant when nodes are collapsed). These values are used when creating a pie\r\n   * chart of each collapsed node.\r\n   * @returns an array of indexes of visibleData that was changed\r\n   */\r\n  generateCollapsedCounts() {\r\n    let fullNodes = this.commonService.getVisibleNodes();\r\n    let colorCategory = this.commonService.session.style.widgets['node-color-variable']\r\n    let changedVisibleNodes = [];\r\n\r\n    this.visibleData.forEach(node => {\r\n      if (node.id == '' && node.index == 1000) {\r\n        node.counts = { label: '', count: 0}\r\n        return;\r\n      }\r\n      let X = this.X_categories[node.Xgroup]\r\n      let Y = this.Y_categories[node.Ygroup]\r\n      \r\n      let currentNodes = fullNodes.filter(fNode => fNode[this.xVariable] == X && fNode[this.yVariable]==Y) \r\n      node.counts = [];\r\n      let previousTotal = node.totalCount;\r\n      node.totalCount = 0;\r\n      currentNodes.forEach(cNode => {\r\n        let currentCategory = cNode[colorCategory];\r\n        let index = node.counts.findIndex((countItem) => countItem.label == currentCategory)\r\n        if (index == -1) {\r\n          node.counts.push({\r\n            label: currentCategory,\r\n            count: 1\r\n          })\r\n        } else {\r\n          node.counts[index].count += 1\r\n        }\r\n        node.totalCount += 1;\r\n      })\r\n      if (previousTotal != node.totalCount) {\r\n        console.log('node updated: ', node.totalCount, node.index)\r\n        changedVisibleNodes.push(node.index)\r\n      }\r\n    })\r\n    return changedVisibleNodes;\r\n  }\r\n\r\n  /**\r\n   * @returns a string representing the SVG def of the patterns needed to generate the pie chart\r\n   */\r\n  generatePieChartsSVGDefs(changedVisibleNodes) : string {\r\n    let patternString = '';\r\n    changedVisibleNodes.forEach((indexNumber) => { //})\r\n      let node = this.visibleData.find(vNode => vNode.index == indexNumber);\r\n\r\n      if (node.totalCount < 2 || node.counts.length == 1 || node == undefined) {\r\n        return;\r\n      }\r\n      let proportions = []\r\n      let coordinates = []\r\n      let colors = [];\r\n      node.counts.forEach(x => {\r\n        let proportion = proportions.reduce((acc, cv) => acc+cv, 0) + x.count/node.totalCount\r\n        let xPos = Math.cos(2 * Math.PI * proportion)\r\n        let yPos = Math.sin(2 * Math.PI * proportion)\r\n        \r\n        proportions.push(x.count/node.totalCount)\r\n        coordinates.push([xPos, yPos])\r\n        colors.push(this.commonService.temp.style.nodeColorMap(x.label))\r\n      })\r\n\r\n      patternString += `<pattern id='node${indexNumber}' viewBox='-1 -1 2 2' style='transform: rotate(-.25turn)' width='100%' height='100%'>` ;\r\n      for (let i = 0; i<coordinates.length; i++) {\r\n        let arcStart = i == 0 ? '1 0': coordinates[i-1][0] + ' ' + coordinates[i-1][1];\r\n        let largeArcFlag = proportions[i] > .5 ? 1: 0 \r\n        let arcEnd = i == coordinates.length-1 ? '1 0' : coordinates[i][0] + ' ' + coordinates[i][1]\r\n        patternString += `<path d='M 0 0 L ${arcStart} A 1 1 0 ${largeArcFlag} 1 ${arcEnd} L 0 0' fill=${colors[i]} />`\r\n      }\r\n      patternString += '</pattern>'\r\n    })\r\n    return patternString;\r\n  }\r\n\r\n  /**\r\n   * Updates the color of the nodes in allData\r\n   */\r\n  updateColors() {\r\n    let fillcolor = this.commonService.session.style.widgets['node-color']\r\n    let colorVariable = this.commonService.session.style.widgets['node-color-variable']\r\n\r\n    let fullNodes = this.commonService.session.data.nodeFilteredValues;\r\n\r\n    this.allData.forEach(node => {\r\n      let currentFullNode = fullNodes.find(Fnode => node.index == Fnode.index);\r\n      node.color = colorVariable == 'None' ? fillcolor : this.commonService.temp.style.nodeColorMap(currentFullNode[colorVariable]);\r\n    })\r\n\r\n    this.color = (d: DataRecord) => d.color\r\n  }\r\n\r\n  /**\r\n   * Calculates the position (x, y) for the array of nodes; nodes are positioned in a layers spiral/hexagonal pattern \r\n   */\r\n  calculateHexagonalGridPositions(nodes: DataRecord[]) {\r\n    const layerDistance = this.nodeSpacing * Math.sqrt(3); // Distance between layers\r\n    let layer = 0;\r\n    let nodesInLayer = 1;\r\n\r\n    let count = 0;\r\n    nodes.forEach(node => {\r\n      const angle = (2 * Math.PI / nodesInLayer) * count;\r\n      node.x = node.Xgroup + layer * layerDistance * Math.cos(angle);\r\n      node.y = node.Ygroup + layer * layerDistance * Math.sin(angle);\r\n\r\n      count++;\r\n      if (count >= nodesInLayer) {\r\n        count = 0;\r\n        layer++;\r\n        nodesInLayer = 6*layer;\r\n      }\r\n    })\r\n  }\r\n\r\n  onNodeCollapsingChange() {\r\n    this.widgets['bubble-collapsed'] = this.SelectedNodeCollapsingTypeVariable;\r\n    if (this.SelectedNodeCollapsingTypeVariable) {\r\n      this.getCollapsedData(true);\r\n      this.sizing = (d: DataRecord) => {\r\n        if (d.id == '') return 0;\r\n        return this.nodeSize * Math.sqrt(d.totalCount);\r\n      };\r\n    } else {\r\n      this.getData();\r\n      this.sizing = (d: DataRecord) => {\r\n        if (d.id == '') return 1;\r\n        \r\n        return this.nodeSize\r\n      }\r\n    }\r\n  }\r\n\r\n  goldenLayoutComponentResize() {    \r\n    this.updateViewRatio()\r\n  }\r\n\r\n  /**\r\n   * Updates size of the scatter plot based on number of X and Y categories and the ratio between them and the available space\r\n   */\r\n  updateViewRatio() {\r\n    let count_x = this.X_categories.length;\r\n    let count_y = this.Y_categories.length;\r\n\r\n    let height = $('bubble-component').height() - 55 - 10\r\n    let width = $('bubble-component').width() - 40\r\n\r\n    // @ts-ignore\r\n    let x_axis_height = this.x_axis.component._axisSizeBBox.height;\r\n    // @ts-ignore\r\n    let y_axis_width = this.y_axis.component._axisSizeBBox.width\r\n\r\n    let ratio = Math.min((height-x_axis_height)/count_y, (width-y_axis_width)/count_x);\r\n\r\n    this.viewHeight = Math.floor(ratio*count_y) + x_axis_height;\r\n    this.viewWidth = Math.floor(ratio*count_x) + y_axis_width;\r\n\r\n    this.cdref.detectChanges();\r\n    // @ts-ignore\r\n    this.scatterPlot.ngOnChanges(this.visibleData);\r\n  }\r\n\r\n  setSelectedNodes(that) {\r\n    if (that.commonService.visuals.bubble.SelectedNodeCollapsingTypeVariable) {\r\n      return;\r\n    }\r\n    let nodes = that.commonService.getVisibleNodes()\r\n    nodes.forEach(node => {\r\n      let datum = that.visibleData.find(datum => datum.index == node.index)\r\n      let datum_all = that.allData.find(datum => datum.index == node.index)\r\n      if (node.selected) console.log('found: ', datum)\r\n\r\n      datum.strokeColor = node.selected ? this.commonService.session.style.widgets['selected-color']: '#000000';\r\n      datum_all.strokeColor = node.selected ? this.commonService.session.style.widgets['selected-color']: '#000000';\r\n    })\r\n    that.strokeColor = (d: DataRecord) => d.strokeColor;\r\n  }\r\n\r\n  onDataChange(axis: string) {\r\n    this.updateAxisValues(axis);\r\n    if (this.SelectedNodeCollapsingTypeVariable) {\r\n      this.getCollapsedData(true);\r\n    } else {\r\n      this.getData();\r\n    }\r\n    this.updateViewRatio();\r\n  }\r\n\r\n  /**\r\n   * Sorts this.allData chronologically based on the given sortVariable\r\n   * @param sortVariable name of a property of commonService.session.data.nodeFilteredValues\r\n   */\r\n  sortData(sortVariable) {\r\n    let allNodes = JSON.parse(JSON.stringify(this.commonService.session.data.nodeFilteredValues));\r\n    allNodes.sort((a, b) => new Date(a[sortVariable]).getTime() - new Date(b[sortVariable]).getTime())\r\n    \r\n    let allData = []\r\n    allNodes.forEach(node => {\r\n      allData.push(this.allData.find(dataNode => node._id == dataNode.id))      \r\n    })\r\n\r\n    this.allData = allData;\r\n    this.recalculatePositions();\r\n    this.updateVisibleNodes();\r\n  }\r\n\r\n  /**\r\n   * Recalculates the position of the nodes in allData\r\n   */\r\n  recalculatePositions() {\r\n    this.X_tickValues.forEach(xLoc => {\r\n      this.Y_tickValues.forEach(yLoc => {\r\n        let filteredNodes = this.allData.filter(node => node.Xgroup == xLoc && node.Ygroup == yLoc)\r\n        if (filteredNodes.length == 0) {\r\n          return;\r\n        } else if (filteredNodes.length == 1) {\r\n          filteredNodes[0].x = xLoc;\r\n          filteredNodes[0].y = yLoc;\r\n        } else {\r\n          this.calculateHexagonalGridPositions(filteredNodes)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  onNodeSpacingChange() {\r\n    this.widgets['bubble-charge'] = this.nodeSpacing;\r\n    this.recalculatePositions();\r\n    // @ts-ignore\r\n    this.scatterPlot.ngOnChanges(this.visibleData);\r\n  }\r\n\r\n  onNodeSizeChange() {\r\n    this.widgets['bubble-size'] = this.nodeSize;\r\n    if (this.SelectedNodeCollapsingTypeVariable) {\r\n      this.sizing = (d: DataRecord) => {\r\n        if (d.id == '') return 0;\r\n        return this.nodeSize * Math.sqrt(d.totalCount);\r\n      };\r\n    } else {\r\n      this.recalculatePositions();\r\n      this.sizing = (d: DataRecord) => {\r\n        if (d.id == '') return 0;\r\n        return this.nodeSize;\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n  * Opens Global Setting Dialog\r\n  */\r\n  showGlobalSettings() {\r\n    this.DisplayGlobalSettingsDialogEvent.emit(\"Styling\");\r\n  }\r\n\r\n  updateNodeColors() {\r\n    if (this.SelectedNodeCollapsingTypeVariable) {\r\n      let _ = this.generateCollapsedCounts();\r\n      let gradient2 = this.generatePieChartsSVGDefs(this.visibleData.map(obj => obj.index));\r\n      let svgDef = this.elem.nativeElement.querySelector('#bubbleDefs');\r\n      this.renderer.setProperty(svgDef, 'innerHTML', gradient2);\r\n      this.color = (d: DataRecord) => {\r\n        if ( d.totalCount == 0) {\r\n          return '#ffffff'\r\n        } else if ( d.totalCount == 1 || d.counts.length == 1) {\r\n          return this.commonService.temp.style.nodeColorMap(d.counts[0].label)\r\n        } else {\r\n          return `url(#node${d.index})`\r\n        }\r\n      };\r\n    } else {\r\n      this.updateColors();\r\n    }\r\n  }\r\n\r\n  getAxisLabel(axis: string) {\r\n    if (axis == 'X') {\r\n      if (this.xVariable == 'None') return;\r\n      return this.commonService.capitalize(this.xVariable)\r\n    }\r\n    else {\r\n      if (this.yVariable == 'None') return;\r\n      return this.commonService.capitalize(this.yVariable)\r\n    }\r\n  }\r\n\r\n  updateLinkColor() {}\r\n  updateVisualization() {}\r\n  applyStyleFileSettings() {\r\n    this.widgets = (window as any).context.commonService.session.style.widgets;\r\n\r\n    if (this.widgets['bubble-x'] != undefined && this.selectedFieldList.map(x => x.value).includes(this.widgets['bubble-x'])) {\r\n      this.xVariable = this.widgets['bubble-x'];\r\n      this.onDataChange('X');\r\n    } else {\r\n      this.widgets['bubble-x'] = this.xVariable;\r\n    }\r\n\r\n    if (this.widgets['bubble-y'] != undefined && this.selectedFieldList.map(x => x.value).includes(this.widgets['bubble-y'])) {\r\n      this.yVariable = this.widgets['bubble-y'];\r\n      this.onDataChange('Y');\r\n    } else {\r\n      this.widgets['bubble-y'] = this.yVariable;\r\n    }\r\n\r\n    if (this.widgets['bubble-size'] >= 10 && this.widgets['bubble-size'] <= 40) {\r\n      this.nodeSize = this.widgets['bubble-size'];\r\n      this.onNodeSizeChange()\r\n    } else {\r\n      this.widgets['bubble-size'] = this.nodeSize;\r\n    }\r\n    \r\n    if (this.widgets['bubble-charge'] >= .01 && this.widgets['bubble-charge'] <= .15) {\r\n      this.nodeSpacing = this.widgets['bubble-charge'];\r\n      this.onNodeSpacingChange();\r\n    } else {\r\n      this.widgets['bubble-charge'] = this.nodeSpacing;\r\n    }\r\n    \r\n    if (this.widgets['bubble-collapsed'] == undefined || this.widgets['bubble-collapsed'] == null) {\r\n      this.widgets['bubble-collapsed'] = this.SelectedNodeCollapsingTypeVariable;\r\n    } else if (this.widgets['bubble-collapsed'] != this.SelectedNodeCollapsingTypeVariable) {\r\n      this.SelectedNodeCollapsingTypeVariable = this.widgets['bubble-collapsed'];\r\n      this.onNodeCollapsingChange();\r\n    }\r\n  }\r\n\r\n  openRefreshScreen() {}\r\n  onRecallSession() {}\r\n  onLoadNewData() {}\r\n  onFilterDataChange() {}\r\n    \r\n  openExport() { \r\n    this.setCalculatedResolution();\r\n    this.exportOpen = true;\r\n  }\r\n\r\n  /**\r\n  * Sets CalculatedResolution variable to string such as '1250 x 855px'. Only called when export is first opened\r\n  */\r\n  setCalculatedResolution() {\r\n    this.CalculatedResolution = (Math.round(this.viewWidth * this.SelectedBubbleExportScaleVariable) + \" x \" + Math.round(this.viewHeight * this.SelectedBubbleExportScaleVariable) + \"px\");\r\n  }\r\n\r\n  /**\r\n   * Updates CalculatedResolution variable to string such as '1250 x 855px' based on ImageDimensions and SelectedNetworkExportScaleVariable. \r\n   * This is called anytime SelectedNetworkExportScaleVariable is updated.\r\n   */\r\n  updateCalculatedResolution() {\r\n    this.CalculatedResolution = (Math.round(this.viewWidth * this.SelectedBubbleExportScaleVariable) + \" x \" + Math.round(this.viewHeight * this.SelectedBubbleExportScaleVariable) + \"px\");\r\n    this.cdref.detectChanges();\r\n  }\r\n\r\n  exportVisualization() {\r\n    let svg = $('#bubbleViewContainer svg')[0]\r\n    if (this.BubbleExportFileType == 'svg') {\r\n      let textElements = svg.querySelectorAll('text');\r\n      textElements.forEach(text => { text.setAttribute('fill', 'black');});\r\n\r\n      let svgString = this.commonService.unparseSVG(svg);\r\n      let content;\r\n      if (this.SelectedNodeCollapsingTypeVariable) {\r\n        let svgDef = this.commonService.unparseSVG($('#bubbleDefs')[0])\r\n        content = svgString.slice(0, -6) + svgDef + svgString.slice(-6);\r\n      } else {\r\n        content = svgString;\r\n      }\r\n      let blob = new Blob([content], { type: 'image/svg+xml;charset=utf-8' });\r\n      saveAs(blob, this.BubbleExportFileName + '.' + this.BubbleExportFileType);\r\n    } else {\r\n      saveSvgAsPng(svg, this.BubbleExportFileName + '.' + this.BubbleExportFileType, {\r\n          scale: this.SelectedBubbleExportScaleVariable,\r\n          backgroundColor: \"#ffffff\",\r\n          encoderType: 'image/' + this.BubbleExportFileType,\r\n          //encoderOptions: this.SelectedNetworkExportQualityVariable\r\n      });\r\n    }\r\n    this.exportOpen = false;\r\n  }\r\n\r\n  openSettings() {\r\n  this.settingsOpen = true;\r\n  }\r\n}\r\n\r\nexport namespace BubbleComponent {\r\n  export const componentTypeName = 'Bubble';\r\n}\r\n","import { ChangeDetectorRef, Component, ElementRef, Inject, Injector, OnInit, Renderer2, ViewChild } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { Table } from 'primeng/table';\r\nimport * as saveAs from 'file-saver';\r\n// import pdfMake from 'pdfmake/build/pdfmake.js';\r\n// import pdfFonts from 'pdfmake/build/vfs_fonts.js'\r\n\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { MicobeTraceNextPluginEvents } from '../../helperClasses/interfaces';\r\nimport { MicrobeTraceNextVisuals } from '../../microbe-trace-next-plugin-visuals';\r\nimport { CommonService } from '../../contactTraceCommonServices/common.service';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\n\r\n@Component({\r\n  selector: 'CrosstabComponent',\r\n  templateUrl: './crosstab-plugin.component.html',\r\n  styleUrls: ['./crosstab-plugin.component.scss']\r\n})\r\nexport class CrosstabComponent extends BaseComponentDirective implements OnInit, MicobeTraceNextPluginEvents {\r\n\r\n  private visuals: MicrobeTraceNextVisuals;\r\n\r\n  @ViewChild('dt') dataTable: Table;\r\n\r\n  widgets;\r\n  xVariable;\r\n  yVariable; \r\n\r\n  viewActive: boolean = true;\r\n  \r\n  showOptions: any = [\r\n    { label: 'Counts', value: false },\r\n    { label: 'Proportion', value: true }\r\n  ]\r\n\r\n  settingsOpen: boolean = true;\r\n  exportOpen: boolean = false;\r\n\r\n  SelectedCrossTabExportFilename: string = \"\";\r\n  SelectedCrossTabExportFileType = 'csv';\r\n  CrossTabExportFileTypeList: any = [\r\n    { label: 'xlsx', value: 'xlsx' },\r\n    { label: 'csv', value: 'csv' },\r\n    { label: 'json', value: 'json'},\r\n    { label: 'pdf', value: 'pdf'}\r\n];\r\n\r\n  fieldList: SelectItem[];\r\n  SelectedTableData: TableData;\r\n  totalRow;\r\n  selectedSize = '';\r\n  scrollHeight: string;\r\n  tableStyleCrosstab;\r\n  sizes = [\r\n      { name: 'Small', class: 'p-datatable-sm' },\r\n      { name: 'Normal', class: '' },\r\n      { name: 'Large',  class: 'p-datatable-lg' }\r\n  ];\r\n\r\n  constructor(injector: Injector,\r\n    private renderer: Renderer2,\r\n    private elem: ElementRef,\r\n    private eventManager: EventManager,\r\n    public commonService: CommonService,\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n    elRef: ElementRef,\r\n    private cdref: ChangeDetectorRef,\r\n    private gtmService: GoogleTagManagerService) {\r\n\r\n      super(elRef.nativeElement);\r\n\r\n      this.visuals = commonService.visuals;\r\n      this.visuals.crossTab = this;\r\n      this.widgets = this.commonService.session.style.widgets;\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/crosstab\",\r\n            page_title: \"Crosstab View\"\r\n        });\r\n\r\n    this.updateFieldLists();\r\n    this.setWidgets();\r\n\r\n    this.updateTable();\r\n\r\n    // offsets: 70 table-wrapper padding-top, 10 table-wrapper padding-bottom\r\n    let pFooterHeight = this.selectedSize == 'p-datatable-sm' ? 41 : this.selectedSize == 'p-datatable-lg' ? 65 : 57;\r\n    this.scrollHeight = ($('crosstabcomponent').height() - 70 - 10 - pFooterHeight) + 'px';\r\n    let width = ($('crosstabcomponent').width() - 23) + 'px';\r\n    this.tableStyleCrosstab = {\r\n        'max-width' : width,\r\n        'display': 'block'\r\n    }\r\n\r\n    this.container.on('resize', () => { this.goldenLayoutComponentResize()})\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n        this.viewActive = true; \r\n        this.cdref.detectChanges();\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Set Default widgets if not previously defined or when a style file is loaded\r\n   */\r\n  setWidgets() {\r\n\r\n    // x and y variable\r\n    if (this.widgets['crosstab-xVariable'] == undefined || !(this.fieldList.map(x => x.value).includes(this.widgets['crosstab-xVariable']))) {\r\n      this.xVariable = 'cluster';\r\n      this.widgets['crosstab-xVariable'] = 'cluster'\r\n    } else {\r\n      this.xVariable = this.widgets['crosstab-xVariable'];\r\n    }\r\n\r\n    if (this.widgets['crosstab-yVariable'] == undefined || !(this.fieldList.map(x => x.value).includes(this.widgets['crosstab-yVariable']))) {\r\n      this.yVariable = 'None';\r\n      this.widgets['crosstab-yVariable'] = 'None';\r\n    } else {\r\n      this.yVariable = this.widgets['crosstab-yVariable'];\r\n    }\r\n\r\n    // use proportion\r\n    if (this.widgets['crosstab-useProportion'] == undefined) {\r\n      this.widgets['crosstab-useProportion'] = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generates the table by counting the data. Converts the counts into proportions if needed\r\n   */\r\n  updateTable() {\r\n    var xValues = [], yValues = [];\r\n    let rawdata = this.commonService.getVisibleNodes();\r\n\r\n    // get values for X and Y axis\r\n    rawdata.forEach(row => {\r\n      var val = row[this.xVariable];\r\n      if (!xValues.includes(val)) xValues.push(val);\r\n      val = row[this.yVariable];\r\n      if (!yValues.includes(val)) yValues.push(val);\r\n    });\r\n    xValues.push('Total');\r\n    yValues.push('Total');\r\n    xValues = xValues.map(String);\r\n    \r\n    // populate count array [{}, {}, ...] where each item/object is a row\r\n    var data = [];\r\n    this.totalRow = { col: 'Total'}\r\n    xValues.forEach(col => this.totalRow[col] = 0)\r\n    rawdata.forEach(row => {\r\n      var match = data.find(arow => arow.col == row[this.widgets['crosstab-yVariable']]);\r\n      if (match) {\r\n        match[row[this.xVariable]]++;\r\n        match['Total']++;\r\n      } else {\r\n        var newRow = { col: row[this.widgets['crosstab-yVariable']] };\r\n        xValues.forEach(col => newRow[col] = 0);\r\n        newRow[row[this.xVariable]]++;\r\n        newRow['Total'] = 1;\r\n        data.push(newRow);\r\n      }\r\n      this.totalRow[row[this.xVariable]]++;\r\n    });\r\n    this.totalRow['Total'] = Object.keys(this.totalRow).filter(key => key!= 'col').reduce((acc, key) => acc + this.totalRow[key], 0);\r\n    data.forEach(row => {\r\n      row.col = String(row.col)\r\n    })\r\n\r\n    this.SelectedTableData = {\r\n      tableColumns: [\r\n        {\r\n          field: 'col',\r\n          header: ''\r\n        }\r\n       ],\r\n      data: data\r\n    }\r\n    xValues.forEach(value => {\r\n      this.SelectedTableData.tableColumns.push({\r\n        field: value,\r\n        header: value\r\n      })\r\n    })\r\n    \r\n    if(this.widgets['crosstab-useProportion']) {\r\n      this.convertToProportion();\r\n    }\r\n    \r\n  }\r\n\r\n  /**\r\n   * Calculate proportion instead of count for each cell based on total. \r\n   */\r\n  convertToProportion() {\r\n    // Future updates may give option for proportion based on col and row as well\r\n    // But it's not clear how to work with pivot function (would proportion by row/X become by col/Y or not)\r\n\r\n    let total = this.totalRow['Total'];\r\n    this.SelectedTableData.data.forEach(row => {\r\n      Object.keys(row).forEach(key => {\r\n        if (key =='col') return;\r\n        row[key] = (row[key]/total).toFixed(3);\r\n      })\r\n    })\r\n    Object.keys(this.totalRow).forEach(key => {\r\n      if (key == 'col') return;\r\n      this.totalRow[key] = (this.totalRow[key]/total).toFixed(3);\r\n    })\r\n    //this.cdref.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * Switch the value of widgets['crosstab-xVariable'] and widgets['crosstab-yVariable'], and then updates the values in the table so that it pivots.\r\n   * This function does not recount the value.\r\n   */\r\n  pivotCrosstab() {\r\n    // switch widgets['crosstab-xVariable'] and yVariable\r\n    let tmp = this.xVariable;\r\n    this.xVariable = this.yVariable;\r\n    this.yVariable = tmp;\r\n    \r\n    // use prevData and prevColumn to generate the newData and newTableColumns\r\n    let prevData = this.SelectedTableData.data;\r\n    let prevColumns = this.SelectedTableData.tableColumns.slice(1).map(obj => obj.header);\r\n    let newData = [];\r\n    let newTotalRow = { col: 'Total'};\r\n\r\n    let newTableColumns = [{\r\n      field: 'col',\r\n      header: ''\r\n    }]\r\n    prevData.forEach((row)=> {\r\n      newTableColumns.push({\r\n        field: row.col,\r\n        header: row.col\r\n      })\r\n      newTotalRow[row.col] = row['Total']\r\n    })\r\n    newTableColumns.push({ field: 'Total', header: 'Total'})\r\n\r\n    prevColumns.forEach(pcol => {\r\n      if (pcol == 'Total') return;\r\n      let newRow = {col: pcol}\r\n\r\n      newTableColumns.forEach(ncol => {\r\n        if (ncol.header == '') return;\r\n        else if (ncol.header == 'Total') {\r\n          newRow['Total'] = this.totalRow[pcol]\r\n          return;\r\n        }\r\n        newRow[ncol.field] = prevData.find(aRow => aRow.col == ncol.field)[pcol];\r\n      })\r\n      newData.push(newRow);\r\n    })\r\n\r\n    newTotalRow['Total'] = this.totalRow['Total'];\r\n\r\n    // update the table with new values\r\n    this.SelectedTableData = {\r\n      tableColumns: newTableColumns,\r\n      data: newData\r\n    }\r\n    this.totalRow = newTotalRow;\r\n\r\n    this.widgets['crosstab-xVariable'] = this.xVariable;\r\n    this.widgets['crosstab-yVariable'] = this.yVariable;\r\n  }\r\n\r\n  /**\r\n   * Converts the data into proportion or recounts the data\r\n   */\r\n  useProportionChanged() {\r\n    if (this.widgets['crosstab-useProportion']) {\r\n      this.convertToProportion();\r\n    } else {\r\n      this.updateTable();\r\n    }\r\n  }\r\n\r\n  formatTableTitle() {\r\n    if (this.xVariable != 'None' && this.yVariable != 'None') {\r\n      return `${this.commonService.capitalize(this.xVariable.replace(\"_\", \"\"))} vs ${this.commonService.capitalize(this.yVariable.replace(\"_\",\"\"))}`\r\n    } else if (this.xVariable != 'None') {\r\n      return `${this.commonService.capitalize(this.xVariable.replace(\"_\", \"\"))}`\r\n    } else if (this.yVariable != 'None') {\r\n      return `${this.commonService.capitalize(this.yVariable.replace(\"_\",\"\"))}`\r\n    } else {\r\n      return ''\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates the stored values and table when the widgets['crosstab-xVariable'] or widgets['crosstab-yVariable'] is changed\r\n   */\r\n  onDataChange() {\r\n\r\n    this.widgets['crosstab-xVariable'] = this.xVariable;\r\n    this.widgets['crosstab-yVariable'] = this.yVariable;\r\n\r\n    this.updateTable();\r\n  }\r\n\r\n\r\n  /**\r\n   * Updates the values for the fieldListDictionary then updates the fieldList\r\n   */\r\n  updateFieldLists() {\r\n    this.fieldList = []\r\n\r\n    this.fieldList.push({ label: \"None\", value: \"None\"})\r\n    this.commonService.session.data['nodeFields'].map((d) => {\r\n      if (['seq', 'origin', '_diff', '_ambiguity', 'index', '_id'].includes(d)) return;\r\n      this.fieldList.push({\r\n        label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n        value: d\r\n      });\r\n    })\r\n  }\r\n\r\n  updateNodeColors() {  }\r\n  updateVisualization() {  }\r\n\r\n  applyStyleFileSettings() { \r\n    this.widgets = (window as any).context.commonService.session.style.widgets;\r\n    let tempX, tempY;\r\n    if (this.widgets['crosstab-xVariable'] != undefined) {\r\n      tempX = this.widgets['crosstab-xVariable']\r\n    } \r\n    if (this.widgets['crosstab-yVariable'] != undefined) {\r\n      tempY = this.widgets['crosstab-yVariable'];\r\n    }\r\n\r\n    this.cdref.detectChanges();\r\n    \r\n    // x and y variable\r\n    if (tempX == undefined || !(this.fieldList.map(x => x.value).includes(tempX))) {\r\n      this.xVariable = 'None';\r\n      this.widgets['crosstab-xVariable'] = 'None';\r\n    } else {\r\n      this.xVariable = tempX;\r\n      this.widgets['crosstab-xVariable'] = tempX\r\n    }\r\n\r\n    if (tempY == undefined || !(this.fieldList.map(x => x.value).includes(tempY))) {\r\n      this.yVariable = 'None';\r\n      this.widgets['crosstab-yVariable'] = 'None';\r\n    } else {\r\n      this.yVariable = tempY;\r\n      this.widgets['crosstab-yVariable'] = tempY;\r\n    }\r\n\r\n    // use proportion\r\n    if (this.widgets['crosstab-useProportion'] == undefined) {\r\n      this.widgets['crosstab-useProportion'] = false;\r\n    }\r\n\r\n    this.updateTable();\r\n   }\r\n\r\n  updateLinkColor() {  }\r\n  openRefreshScreen() { }\r\n  onRecallSession() {  }\r\n  onLoadNewData() { \r\n    this.updateTable();\r\n   }\r\n  onFilterDataChange() { \r\n    this.updateTable();\r\n   }\r\n\r\n  /**\r\n   * Opens the settings menu\r\n   */\r\n  openSettings() {\r\n    this.settingsOpen = true;\r\n  }\r\n\r\n  /**\r\n   * Opens the export menu\r\n   */\r\n  openExport() {\r\n    this.exportOpen = true;\r\n  }\r\n\r\n  /**\r\n   * Exports visualization as csv file or calls saveAsExcelFile to save as Excel\r\n   */\r\n  exportVisualization() {\r\n    if (this.SelectedCrossTabExportFileType == 'xlsx') {\r\n      this.saveAsExcelFile();\r\n  } else if (this.SelectedCrossTabExportFileType == 'csv') {\r\n      this.dataTable.exportFilename = this.SelectedCrossTabExportFilename;\r\n      this.dataTable.value.push(this.totalRow)\r\n      this.dataTable.exportCSV()\r\n      this.dataTable.value.pop()\r\n  } else if (this.SelectedCrossTabExportFileType == 'json') {\r\n    let keys = Object.keys(this.SelectedTableData.data[0])\r\n    let data = this.SelectedTableData.data.map(row => {\r\n      let output = {}\r\n      keys.forEach(key => {\r\n        if (key == 'Total') return;\r\n        else if (row[key] == 'null') {\r\n          output[key] = null;\r\n        } else {\r\n          output[key] = row[key]\r\n        }\r\n      })\r\n      return output;\r\n    })\r\n    let blob = new Blob([JSON.stringify(data)], { type: \"application/json;charset=utf-8\"});\r\n    saveAs(blob, this.SelectedCrossTabExportFilename +'.json');\r\n  } else {\r\n    let columns = ['col']\r\n    this.SelectedTableData.tableColumns.forEach(col => {\r\n      if (col.header != '') {\r\n        columns.push(col.header)\r\n      }\r\n    })\r\n\r\n    let dataBody = [this.SelectedTableData.tableColumns.map(col => {\r\n      if (col.header == '') return this.commonService.capitalize(this.yVariable)      \r\n      return this.commonService.capitalize(col.header);\r\n    })].concat(this.SelectedTableData.data.map(formatData)).concat([formatData(this.totalRow)]);\r\n    \r\n    function formatData(dataRow) {\r\n      return columns.map(header => dataRow[header])\r\n    }\r\n\r\n    // pdfMake.vfs = pdfFonts.pdfMake.vfs;\r\n    //   pdfMake.createPdf({\r\n    //     content: [ \r\n    //       { image: this.commonService.watermark },\r\n    //       { \r\n    //         text: \"Cluster Crosstab Snapshot:\",\r\n    //         style: \"header\",\r\n    //         alignment: \"center\"\r\n    //       },\r\n    //       {\r\n    //         text: `${this.commonService.capitalize(this.xVariable)} vs ${this.commonService.capitalize(this.yVariable)}`,\r\n    //         style: \"fontSize: 18\",\r\n    //         alignment: \"center\"\r\n    //       },\r\n    //       {\r\n    //         style: \"paddedTable\",\r\n    //         table: {\r\n    //           headerRows: 1,\r\n    //           widths: this.SelectedTableData.tableColumns.map(col => \"*\"),\r\n    //           body: dataBody,\r\n    //         }\r\n    //       }\r\n    //     ],\r\n    //     footer: function(currentPage, pageCount) {\r\n    //       return [\r\n    //         {\r\n    //           text: `Page ${currentPage.toString()} of ${pageCount}`,\r\n    //           alignment: \"center\"\r\n    //         }\r\n    //       ];\r\n    //     },\r\n    //     styles: {\r\n    //       header: {\r\n    //         fontSize: 22,\r\n    //         bold: true\r\n    //       },\r\n    //       paddedTable: {\r\n    //         margin: [10, 10, 10, 10]\r\n    //       }\r\n    //     }\r\n    //   }).download(this.SelectedCrossTabExportFilename + '.pdf');\r\n    }\r\n\r\n  this.exportOpen = !this.exportOpen;\r\n  }\r\n\r\n  /**\r\n   * Exports the data as an excel file\r\n   */\r\n  saveAsExcelFile() {\r\n    import(\"xlsx\").then(xlsx => {\r\n      this.dataTable.value.push(this.totalRow);\r\n      let headers = [];\r\n      this.SelectedTableData.tableColumns.forEach(item => headers.push(item.field))\r\n      let worksheet = xlsx.utils.json_to_sheet(this.dataTable.value, { header: headers}) ; \r\n      const workbook = { Sheets: { 'data': worksheet }, SheetNames: ['data'] }\r\n      const excelBuffer: any = xlsx.write(workbook, { bookType: 'xlsx', type: 'array' });\r\n      const EXCEL_TYPE = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\r\n      const data: Blob = new Blob([excelBuffer], { type: EXCEL_TYPE });\r\n      saveAs(data, this.SelectedCrossTabExportFilename + '.xlsx');\r\n      this.dataTable.value.pop()\r\n  })\r\n}\r\n\r\n  /**\r\n   * Resizes the component as need based on how the goldenlayout dashboard is resized\r\n   */\r\n  goldenLayoutComponentResize() {\r\n    let pFooterHeight = this.selectedSize == 'p-datatable-sm' ? 41 : this.selectedSize == 'p-datatable-lg' ? 65 : 57;\r\n    this.scrollHeight = ($('crosstabcomponent').height() - 70 - 10 - pFooterHeight) + 'px';\r\n    let width = ($('crosstabcomponent').width() - 23) + 'px';\r\n    this.tableStyleCrosstab = {\r\n        'max-width' : width,\r\n        'display': 'block'\r\n    }\r\n  }\r\n\r\n  onTableSizeChange() {\r\n    let pFooterHeight = this.selectedSize == 'p-datatable-sm' ? 41 : this.selectedSize == 'p-datatable-lg' ? 65 : 57;\r\n    console.log('abc', pFooterHeight);\r\n    this.scrollHeight = ($('crosstabcomponent').height() - 70 - 10 - pFooterHeight) + 'px';\r\n  }\r\n\r\n}\r\n\r\nexport namespace CrosstabComponent {\r\n  export const componentTypeName = 'Crosstab';\r\n}\r\n\r\ninterface TableData {\r\n  data: any[],\r\n  tableColumns: any[],\r\n}","export const colorSchemes = {\r\n    colorful: [\r\n        '#EAC435', '#345995', '#03CEA4', '#FF6B6B', '#CA1551',\r\n        '#3A3335', '#FFE19C', '#C1FFF2', '#511730', '#8789C0' ],\r\n    cool: [\r\n        '#5680E9', '#84CEEB', '#5AB9EA', '#C1C8E4', '#8860D0',\r\n        '#7555E8', '#69C6EA', '#5971EA', '#AAACE2', '#C060D1' ],\r\n    warm: [\r\n        '#BA9434', '#FFE899', '#FFAC47', '#FF813D', '#E55730',\r\n        '#BA9948', '#A38B3C', '#A36E2E', '#A35327', '#92381F'\r\n    ]\r\n};\r\n","import { Component, OnInit, OnChanges, Input, ElementRef, ChangeDetectorRef } from '@angular/core';\r\nimport { colorSchemes } from '../constants/color-schemes';\r\nimport { GanttChartService } from './gantt-chart.service';\r\n\r\n@Component({\r\n  selector: 'ngx-gantt-chart',\r\n  templateUrl: './gantt-chart.component.html',\r\n  styleUrls: ['./gantt-chart.component.scss'],\r\n  providers: [GanttChartService]\r\n})\r\nexport class GanttChartComponent implements OnInit, OnChanges {\r\n\r\n  @Input() data;\r\n  @Input() width: number;\r\n  @Input() colorScheme = 'colorful';\r\n  @Input() customColorScheme: string[] = [];\r\n\r\n  componentID;\r\n  xPadding = 60;\r\n  yPadding = this.xPadding / 2;\r\n  phaseTimelines;\r\n  height: number;\r\n\r\n  gridWidthX: number;\r\n  gridWidthY: number;\r\n\r\n  gridPrecisionX: number;\r\n\r\n  gridID: string;\r\n  gridPath: string;\r\n\r\n  xAxis: any;\r\n  yAxis: any;\r\n\r\n  monthNames = [\r\n    'January', 'February', 'March',\r\n    'April', 'May', 'June', 'July',\r\n    'August', 'September', 'October',\r\n    'November', 'December'\r\n  ];\r\n\r\n\r\n  addDays(date, days: number) {\r\n    const newdate = new Date(date);\r\n    newdate.setDate((new Date(date)).getDate() + days);\r\n    const day = newdate.getDate();\r\n    const monthIndex = newdate.getMonth();\r\n    const year = newdate.getFullYear();\r\n\r\n\r\n    return this.monthNames[monthIndex] + ' ' + day + ', ' + year;\r\n  }\r\n\r\n  shortenDate(date) {\r\n    if (typeof date === \"string\"){\r\n      date = date.replace('January', 'Jan');\r\n      date = date.replace('February', 'Feb');\r\n      date = date.replace('March', 'Mar');\r\n      date = date.replace('April', 'Apr');\r\n      date = date.replace('May', 'May');\r\n      date = date.replace('June', 'Jun');\r\n      date = date.replace('July', 'Jul');\r\n      date = date.replace('August', 'Aug');\r\n      date = date.replace('September', 'Sep');\r\n      date = date.replace('October', 'Oct');\r\n      date = date.replace('November', 'Nov');\r\n      date = date.replace('December', 'Dec');\r\n    }\r\n    return date;\r\n  }\r\n\r\n  computeGrid() {\r\n    this.cdref.detectChanges();\r\n    // compute the min date and max date\r\n    // const oneDay = 24 * 60 * 60 * 1000;\r\n    // const dateRange = Math.round(Math.abs(\r\n    //     (this.ganttChartService.ganttMaxDate.getTime()\r\n    //      - this.ganttChartService.ganttMinDate.getTime()\r\n    //      ) / (oneDay)));\r\n    let flag = 0;\r\n    let qts = 1;\r\n\r\n    // 3m --> 1 week  --> 12\r\n    // 6m --> 2 weeks --> 12\r\n    // 9m --> 3 weeks --> 12\r\n\r\n    while (flag === 0) {\r\n      if (this.ganttChartService.ganttDateRange <= 90 * qts) {\r\n        this.gridPrecisionX = 7 * qts;\r\n        flag = 1;\r\n      } else qts = qts + 1;\r\n    }\r\n\r\n    // console.log(this.gridPrecisionX);\r\n\r\n    this.gridWidthX = this.ganttChartService.transformX(this.gridPrecisionX);\r\n    this.gridWidthY = this.ganttChartService.rectHeight / this.ganttChartService.ganttPhases.length;\r\n    this.gridPath = 'M ' + this.gridWidthX + ' 0 L 0 0 0 ' + this.gridWidthY;\r\n\r\n    this.xAxis = [];\r\n    this.yAxis = [];\r\n\r\n    let date = this.ganttChartService.ganttMinDate;\r\n    // let xPos = this.ganttChartService.transformGanttDate(date) + this.ganttChartService.xPadding + 150;\r\n    const yTrans = this.ganttChartService.rectHeight + this.ganttChartService.yPadding + 10;\r\n    // let transform = 'translate(' + xPos + 'px, ' + yTrans + 'px)';\r\n    // this.xAxis.push({xPos: xPos, value: date, transform: transform});\r\n    while (new Date(date) <= new Date(this.ganttChartService.ganttMaxDate)) {\r\n      // console.log(date);\r\n      const xPos = this.ganttChartService.transformGanttDate(date) + this.ganttChartService.xPadding + 150;\r\n      const transform = 'translate(' + xPos + 'px, ' + yTrans + 'px)';\r\n      this.xAxis.push({xPos, value: this.shortenDate(date), transform});\r\n      date = this.addDays(date, this.gridPrecisionX);\r\n    }\r\n\r\n    // console.log(this.xAxis);\r\n    let cnt = 0;\r\n    for (const phase of this.ganttChartService.ganttPhases) {\r\n      const yPos = this.gridWidthY * cnt + this.gridWidthY * 0.5 + this.ganttChartService.yPadding;\r\n      this.yAxis.push({yPos, value: phase });\r\n      cnt++;\r\n    }\r\n    // console.log(this.yAxis);\r\n    // console.log(this.xAxis);\r\n  }\r\n\r\n  getWidth(gEntry): number {\r\n    if (gEntry.to === gEntry.from) {\r\n      return 15;\r\n    } else {\r\n      return this.ganttChartService.transformGanttDate(gEntry.to) - this.ganttChartService.transformGanttDate(gEntry.from); \r\n    }\r\n  }\r\n\r\n\r\n\r\n  setDimensions() {\r\n    if (this.width) this.height = this.width - this.xPadding;\r\n    else {\r\n      const host = this.currentElement.nativeElement;\r\n      if (host.parentNode != null) {\r\n        const dims = host.parentNode.getBoundingClientRect();\r\n        this.width = dims.width;\r\n        this.height = this.width - this.xPadding;\r\n      }\r\n    }\r\n    \r\n     /*\r\n     console.log('---set dimensions---');\r\n     console.log('width: ' + this.width);\r\n     console.log('height: ' + this.height);\r\n     console.log('--------------------');\r\n     */\r\n     \r\n  }\r\n\r\n  setColors() {\r\n    let cnt = 0;\r\n    for (const team of this.data) {\r\n      if (!team.color) {\r\n        if (this.customColorScheme.length > 0) {\r\n          team.color = this.customColorScheme[cnt % this.customColorScheme.length];\r\n        } else {\r\n          team.color = colorSchemes[this.colorScheme][cnt % 10];\r\n        }\r\n        cnt++;\r\n      }\r\n    }\r\n  }\r\n\r\n  definePhaseTimelines() {\r\n    this.phaseTimelines = {};\r\n    for (const phase of this.ganttChartService.ganttPhases) {\r\n      this.phaseTimelines[phase] = [];\r\n    }\r\n\r\n    for (const team of this.ganttChartService.data) {\r\n      for (const phase of Object.keys(team.timelines)) {\r\n        for (const timeline of team.timelines[phase]) {\r\n          this.phaseTimelines[phase].push({from: timeline.from,\r\n            to: timeline.to,\r\n            color: team.color,\r\n            info: timeline.info,\r\n            toolTip: (timeline.info ? 'block' : 'none')});\r\n        }\r\n      }\r\n    }\r\n    // console.log('phase timelines: ');\r\n    // console.log(this.phaseTimelines);\r\n  }\r\n\r\n  // setColors() {\r\n  //   let cnt = 0;\r\n  //   for (const team of this.ganttChartService.data) {\r\n  //     if (!team.color) team.color = colorSchemes[this.ganttChartService.colorScheme][cnt % 10];\r\n  //     cnt++;\r\n  //   }\r\n  // }\r\n\r\n  constructor(public ganttChartService: GanttChartService,              \r\n              private currentElement: ElementRef,\r\n              private cdref: ChangeDetectorRef) { //super(ganttChartService, cdref);\r\n                }\r\n\r\n  ngOnInit() {\r\n    this.cdref.detectChanges();\r\n    this.componentID = 1;\r\n    this.setDimensions();\r\n    this.setColors();\r\n    this.ganttChartService.setValues({\r\n      componentID: this.componentID,\r\n      width: this.width,\r\n      xPadding: this.xPadding,\r\n      yPadding: this.yPadding,\r\n      data: this.data\r\n    });\r\n    this.gridID = 'grid' + this.ganttChartService.componentID;\r\n    this.height = this.ganttChartService.height;\r\n    this.definePhaseTimelines();\r\n    this.computeGrid();\r\n  }\r\n\r\n  ngOnChanges() {\r\n    this.setDimensions();\r\n    this.setColors();\r\n    this.ganttChartService.setValues({\r\n      componentID: this.componentID,\r\n      width: this.width,\r\n      xPadding: this.xPadding,\r\n      yPadding: this.yPadding,\r\n      data: this.data\r\n    });\r\n    this.height = this.ganttChartService.height;\r\n    this.definePhaseTimelines();\r\n    this.computeGrid();\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { colorSchemes } from '../constants/color-schemes';\r\n\r\n@Injectable({\r\n   providedIn: 'root'\r\n})\r\nexport class GanttChartService {\r\n\r\n  width: number;\r\n  height: number;\r\n  ganttTeams: Array<any>;\r\n  ganttPhases: Array<any>;\r\n  phaseTimelines;\r\n  legion;\r\n  ganttMinDate;\r\n  ganttMaxDate;\r\n  ganttDateRange: number;\r\n  xPadding: number;\r\n  yPadding: number;\r\n  componentID: number;\r\n  data: any;\r\n  ganttOpacity = \"0.9\";\r\n\r\n  rectWidth: number;\r\n  rectHeight: number;\r\n  legionWidth: number;\r\n  legionHeight: number;\r\n  minX: number;\r\n  maxX: number;\r\n\r\n  monthNames = [\r\n    'January', 'February', 'March',\r\n    'April', 'May', 'June', 'July',\r\n    'August', 'September', 'October',\r\n    'November', 'December'\r\n  ];\r\n\r\n  constructor() { }\r\n\r\n  computeRectDimensions() {\r\n    this.rectWidth = this.width - this.xPadding * 2 - 150;\r\n    this.rectHeight = this.ganttPhases.length * 60;\r\n  }\r\n\r\n  computeLegionDimensions() {\r\n    const noOfLines = Math.ceil(this.data.length / 3);\r\n    this.legionWidth = this.width - this.xPadding * 2 - 150;\r\n    this.legionHeight = 40 + 40 * noOfLines;\r\n  }\r\n\r\n  transformX(x: number) {\r\n    return this.rectWidth * x / (this.maxX - this.minX);\r\n  }\r\n\r\n  computeLegion() {\r\n    const noOfLines = Math.ceil(this.data.length / 3);\r\n    this.legion = [];\r\n    let cnt = 0;\r\n    for (let line = 0; line < noOfLines; line++) {\r\n      const legionLine = [];\r\n      for (let i = 0; i < 3; i++) {\r\n        if (this.ganttTeams[cnt]) legionLine.push(this.ganttTeams[cnt]);\r\n        cnt++;\r\n      }\r\n      this.legion.push(legionLine);\r\n    }\r\n    // console.log(this.legion);\r\n  }\r\n\r\n  transformGanttDate(d) {\r\n    const oneDay = 24 * 60 * 60 * 1000;\r\n    const daysSinceMinDate = Math.round(Math.abs(\r\n        (new Date(d).getTime()\r\n        - (new Date(this.ganttMinDate)).getTime()\r\n        ) / (oneDay)));\r\n    return this.rectWidth * daysSinceMinDate / (this.maxX - this.minX);\r\n  }\r\n\r\n  closestMultipleLessThanEqualTo(factor, num) {\r\n    if (num % factor === 0) return num;\r\n    else return this.closestMultipleLessThanEqualTo(factor, num - 1);\r\n  }\r\n\r\n  closestMultipleMoreThanEqualTo(factor, num) {\r\n    if (num % factor === 0) return num;\r\n    else return this.closestMultipleMoreThanEqualTo(factor, num + 1);\r\n  }\r\n\r\n\r\n  setValues({\r\n    componentID: componentID,\r\n    width: width,\r\n    xPadding: xPadding,\r\n    yPadding: yPadding,\r\n    data: data\r\n  }) {\r\n    this.componentID = componentID;\r\n    this.width = width;\r\n    this.xPadding = xPadding;\r\n    this.yPadding = yPadding;\r\n    this.data = data;\r\n    const froms: any = [];\r\n    const tos: any = [];\r\n    const phases = new Set();\r\n    this.ganttTeams = [];\r\n    // this.setColors();\r\n    for (const team of this.data) {\r\n      this.ganttTeams.push({name: team.name, color: team.color, opacity: team.opacity});\r\n      for (const phase of Object.keys(team.timelines)) {\r\n        phases.add(phase);\r\n        for (const timeline of team.timelines[phase]) {\r\n          froms.push(timeline.from);\r\n          tos.push(timeline.to);\r\n        }\r\n      }\r\n    }\r\n    this.ganttPhases = Array.from(phases);\r\n\r\n    const minDate = froms.filter(x => x !== null && x!==\"null\").reduce((a, b) => new Date(a) < new Date(b) ? a : b );\r\n    const maxDate = tos.filter(x=>x!==null && x!==\"null\").reduce((a, b) => new Date(a) > new Date(b) ? a : b );\r\n\r\n    this.ganttMinDate = minDate;\r\n    this.ganttMaxDate = maxDate;\r\n    const noOfLines = Math.ceil(this.data.length / 3);\r\n    this.height = this.ganttPhases.length * 60 + this.yPadding * 3 + 100 + 40 + 30 * noOfLines;\r\n\r\n    const oneDay = 24 * 60 * 60 * 1000;\r\n    this.ganttDateRange = Math.round(Math.abs(\r\n        (new Date(this.ganttMaxDate).getTime()\r\n        - new Date(this.ganttMinDate).getTime()\r\n        ) / (oneDay)));\r\n    this.minX = 0;\r\n    this.maxX = this.ganttDateRange;\r\n    let flag = 0;\r\n    let qts = 1;\r\n    let gridPrecisionX = 0;\r\n    while (flag === 0) {\r\n      if (this.ganttDateRange <= 90 * qts) {\r\n        gridPrecisionX = 7 * qts;\r\n        flag = 1;\r\n        break;\r\n      } else { qts = qts + 1; }\r\n    }\r\n\r\n    this.maxX = this.closestMultipleMoreThanEqualTo(7 * qts, this.ganttDateRange);\r\n    this.ganttMaxDate = this.addDays(this.ganttMinDate, this.maxX);\r\n\r\n    this.computeRectDimensions();\r\n    this.computeLegionDimensions();\r\n    this.computeLegion();\r\n    // this.printAll();\r\n  }\r\n\r\n  addDays(date, days: number) {\r\n    const newdate = new Date(date);\r\n    newdate.setDate((new Date(date)).getDate() + days);\r\n    const day = newdate.getDate();\r\n    const monthIndex = newdate.getMonth();\r\n    const year = newdate.getFullYear();\r\n\r\n\r\n    return this.monthNames[monthIndex] + ' ' + day + ', ' + year;\r\n  }\r\n\r\n  printAll() {\r\n    console.log('line-graph-service');\r\n    console.log('component ID: ' + this.componentID);\r\n    console.log('width: ' + this.width);\r\n    console.log('height: ' + this.height);\r\n    console.log('xPadding: ' + this.xPadding);\r\n    console.log('yPadding: ' + this.yPadding);\r\n    console.log('rectWidth: ' + this.rectWidth);\r\n    console.log('rectHeight: ' + this.rectHeight);\r\n    console.log('ganttMinDate: ' + this.ganttMinDate);\r\n    console.log('ganttMaxDate: ' + this.ganttMaxDate);\r\n  }\r\n}\r\n","import { Injector, Component, Output, EventEmitter, OnInit,\r\n  ViewChild, ViewContainerRef, ElementRef, ChangeDetectorRef, Inject } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { CommonService } from '@app/contactTraceCommonServices/common.service';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { DialogSettings } from '@app/helperClasses/dialogSettings';\r\nimport * as _ from 'lodash';\r\nimport * as saveAs from 'file-saver';\r\nimport * as domToImage from 'html-to-image';\r\nimport { CustomShapes } from '@app/helperClasses/customShapes';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { GanttChartService } from './gantt-chart/gantt-chart.service';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\nimport { MicrobeTraceNextVisuals } from '../../microbe-trace-next-plugin-visuals';\r\n\r\n\r\n@Component({\r\n  selector: 'GanttComponent',\r\n  templateUrl: './gantt-plugin.component.html',\r\n  styleUrls: ['./gantt-plugin.component.scss']\r\n})\r\nexport class GanttComponent extends BaseComponentDirective implements OnInit {\r\n  @ViewChild('ganttContainer', {read: ViewContainerRef}) ganttContainer: ViewContainerRef;\r\n  @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n  viewActive: boolean = true;\r\n  svgStyle: object = {\r\n    height: '0px',\r\n    width: '1000px'\r\n  };\r\n\r\n  ganttChartData: object[] = [\r\n    {\r\n      name: 'Market Team',\r\n      color: '#EAC435',\r\n      timelines: {\r\n        'Market Research': [\r\n          {from: new Date('June 9, 2019'), to: new Date('July 20, 2019')},\r\n          {from: new Date('October 9, 2019'), to: new Date('November 20, 2019')}\r\n        ],\r\n        'User Documentation': [\r\n          {from: new Date('August 10, 2019'), to: new Date('September 15, 2019')}\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      name: 'Development Team',\r\n      color: '#345995',\r\n      timelines: {\r\n        'Software Development': [\r\n          {from: new Date('July 9, 2019'), to: new Date('October 20, 2019')}\r\n        ],\r\n        'Testing': [\r\n          {from: new Date('October 25, 2019'), to: new Date('November 15, 2019')}\r\n        ],\r\n        'User Documentation': [\r\n          {from: new Date('August 1, 2019'), to: new Date('August 15, 2019')}\r\n        ]\r\n      }\r\n    }\r\n  ];\r\n\r\n  private customShapes: CustomShapes = new CustomShapes();\r\n\r\n  ShowNetworkAttributes = false;\r\n  ShowStatistics = false;\r\n  ShowGanttExportPane = false;\r\n  ShowGanttSettingsPane = false;\r\n  IsDataAvailable = true;\r\n  svg: any = null;\r\n  settings: object = this.commonService.session.style.widgets;\r\n  visuals: MicrobeTraceNextVisuals;\r\n  nodeIds: string[] = [];\r\n  FieldList: SelectItem[] = [];\r\n  ganttChartService: GanttChartService;\r\n  GanttEntryName: string = \"\";\r\n  GanttStartVariable: string = \"\";\r\n  GanttEndVariable: string = \"\";\r\n  GanttEntryColor: string = \"#000000\";\r\n  ganttEntries: object[] = [];\r\n  SelectedGanttChartImageFilenameVariable = \"default_gantt_chart\";\r\n\r\n  // ganttChartData: Object[] = [];\r\n\r\n  NetworkExportFileTypeList: any = [\r\n    { label: 'png', value: 'png' },\r\n    { label: 'jpeg', value: 'jpeg' },\r\n    { label: 'svg', value: 'svg' }\r\n  ];\r\n\r\n  SelectedNetworkExportFileTypeListVariable = 'png';\r\n  GanttSettingsDialogSettings: DialogSettings = new DialogSettings('#gantt-settings-pane', false);\r\n  isExportClosed: boolean;\r\n\r\n  constructor(injector: Injector,\r\n              private eventManager: EventManager,\r\n              public commonService: CommonService,\r\n              @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer,\r\n              @Inject(ViewContainerRef) ViewContainerRef, \r\n              elRef: ElementRef,\r\n              ganttChartService: GanttChartService,\r\n              private cdref: ChangeDetectorRef,\r\n              private gtmService: GoogleTagManagerService) {\r\n\r\n    super(elRef.nativeElement);\r\n\r\n    this.visuals = commonService.visuals;\r\n    this.commonService.visuals.gantt = this;\r\n    this.ganttChartService = ganttChartService;\r\n  }\r\n\r\n  dataAvail(): boolean {\r\n    if (!this.ganttChartData || this.ganttChartData.length === 1 && this.ganttChartData[0][\"name\"] === \"_blank\"){\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  openSettings(): void {\r\n    this.visuals.gantt.GanttSettingsDialogSettings.setVisibility(true);\r\n  }\r\n  openExport(): void {\r\n    this.ShowGanttExportPane = true;\r\n\r\n    this.visuals.microbeTrace.GlobalSettingsDialogSettings.setStateBeforeExport();\r\n    //this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.setStateBeforeExport();\r\n    //this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.setStateBeforeExport();\r\n    this.isExportClosed = false;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/gantt\",\r\n            page_title: \"Gantt Chart View\"\r\n        });\r\n\r\n    this.nodeIds = this.getNodeIds();\r\n    this.visuals.gantt.FieldList.push(\r\n      {\r\n        label: \"None\",\r\n        value: \"\",\r\n      }\r\n    )\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    this.commonService.session.data['nodeFields'].map((d, i) => {\r\n\r\n      this.visuals.gantt.FieldList.push(\r\n        {\r\n          label: this.visuals.gantt.commonService.capitalize(d.replace('_', '')),\r\n          value: d\r\n        });\r\n    });\r\n\r\n    this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n    this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n    \r\n\r\n    // this.createGanttEntry();\r\n    this.ganttChartData = [this.makeBlankEntry()];\r\n    this.openSettings();\r\n    \r\n    // this.ganttChartData = [this.makeGanttEntry(\"_blank\", \"Ipstart\", \"Ipend\", \"#2ca02c\")];\r\n    this.goldenLayoutComponentResize();\r\n\r\n    this.container.on('resize', () => { this.goldenLayoutComponentResize() })\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n      this.viewActive = true; \r\n      this.cdref.detectChanges();\r\n      this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n      this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n    })\r\n  }\r\n\r\n  makeBlankEntry(): object {\r\n    const timelineEntry = [{from:\"2000/01/01\", to: \"2024/12/31\"}];\r\n    const timelines = {};\r\n    this.nodeIds.forEach( (element: string) => {\r\n      timelines[element] = timelineEntry;\r\n    });\r\n    const blankEntry = {name: \"_blank\", color: \"#ffffff\", timelines: timelines};\r\n    return blankEntry;\r\n\r\n    // return this.makeGanttEntry(\"_blank\", \"ipstart\", \"ipend\", \"#2ca02c\");\r\n  }\r\n  goldenLayoutComponentResize() {\r\n    $('#gantt-plugin').height($('ganttcomponent').height()-19);\r\n    $('#gantt-plugin').width($('ganttcomponent').width()-1)\r\n  }\r\n\r\n  makeGanttEntry(dateName: string, startVariable: string, endVariable: string, entryColor: string): object {\r\n    const timeline = {};\r\n\r\n    this.nodeIds.forEach( (element: string) => {\r\n      const nodeData = this.visuals.gantt.commonService.session.data.nodes.filter(x => x._id == element)\r\n      const hasTimeZone: RegExp = /GMT.\\d{4}/;\r\n      const startDate = hasTimeZone.exec(nodeData[0][startVariable])? nodeData[0][startVariable].substring(4,15) : nodeData[0][startVariable];\r\n      const endDate = hasTimeZone.exec(nodeData[0][endVariable])? nodeData[0][endVariable].substring(4,15) : nodeData[0][endVariable];\r\n      const regExp: RegExp = /^.*$/;\r\n      if (startDate && endDate && regExp.exec(startDate) && regExp.exec(endDate)) {\r\n        const entry = [{ from: startDate, to: endDate, info: dateName }]\r\n        timeline[element] = entry;\r\n      }\r\n    })\r\n\r\n    const ganttEntry = {name: dateName, color: entryColor, opacity: this.ganttChartService.ganttOpacity, timelines: timeline};\r\n    return ganttEntry;\r\n  }\r\n\r\n  createGanttEntry(): void {\r\n    if (!this.GanttEndVariable) {\r\n      this.GanttEndVariable = this.GanttStartVariable;\r\n    }\r\n    if (this.ganttEntries.length === 0) { //} || this.ganttChartData.length === 1 && this.ganttChartData[0][\"name\"] === \"_blank\"){\r\n      const newEntry = this.makeGanttEntry(this.GanttEntryName, this.GanttStartVariable, this.GanttEndVariable, this.GanttEntryColor);\r\n      this.ganttEntries = [{entryName: this.GanttEntryName, startDate: this.GanttStartVariable, endDate: this.GanttEndVariable, color: this.GanttEntryColor}]\r\n      this.ganttChartData = [newEntry];\r\n\r\n    }\r\n    else {\r\n      const newEntry = this.makeGanttEntry(this.GanttEntryName, this.GanttStartVariable, this.GanttEndVariable, this.GanttEntryColor);\r\n      this.ganttEntries.push({entryName: this.GanttEntryName, startDate: this.GanttStartVariable, endDate: this.GanttEndVariable, color: this.GanttEntryColor});\r\n      const existingData = _.cloneDeep(this.ganttChartData);\r\n      existingData.push(newEntry);\r\n      this.ganttChartData = existingData;\r\n    }\r\n    this.cdref.markForCheck();\r\n    this.resetEntryForm();\r\n    this.visuals.gantt.GanttSettingsDialogSettings.setVisibility(false);\r\n\r\n  }\r\n\r\n  removeGanttEntry(entryName): void {\r\n    const startingEntries = _.cloneDeep(this.ganttChartData);\r\n    const endingEntries = startingEntries.filter(x => x[\"name\"] !== entryName)\r\n    this.ganttEntries = this.ganttEntries.filter(x => x[\"entryName\"] !== entryName);\r\n    this.ganttChartData = endingEntries;\r\n  }\r\n\r\n  resetEntryForm(): void {\r\n    this.GanttEntryName = \"\";\r\n    this.GanttEntryColor = \"#000000\";\r\n    this.GanttEndVariable = \"\";\r\n    this.GanttStartVariable = \"\";\r\n  }\r\n\r\n  updateEntryColor(entryName: string, event: Event): void {\r\n    const color = (event.target as HTMLInputElement).value;\r\n    const startingData = _.cloneDeep(this.ganttChartData);\r\n    for (let i=0; i<startingData.length; i++){\r\n      if (startingData[i][\"name\"] === entryName){\r\n        startingData[i][\"color\"] = color;\r\n      }\r\n    }\r\n    this.ganttChartData = startingData;\r\n\r\n  }\r\n\r\n  getNodeIds(): string[] {\r\n    const idSet: string[] = this.visuals.gantt.commonService.session.data.nodes.map(x=>x._id);\r\n    return idSet;\r\n  }\r\n\r\n  listGanttEntries(): object[] {\r\n    return this.ganttEntries;\r\n  }\r\n  saveImage(event): void {\r\n    const fileName = this.SelectedGanttChartImageFilenameVariable;\r\n    const domId = 'gantt';\r\n    const exportImageType = this.SelectedNetworkExportFileTypeListVariable ;\r\n    const content = document.getElementById(domId);\r\n    if (exportImageType === 'png') {\r\n      domToImage.toPng(content).then(\r\n        dataUrl => {\r\n          saveAs(dataUrl, fileName);\r\n      });\r\n    } else if (exportImageType === 'jpeg') {\r\n        domToImage.toJpeg(content, { quality: 0.85 }).then(\r\n          dataUrl => {\r\n            saveAs(dataUrl, fileName);\r\n          });\r\n    } else if (exportImageType === 'svg') {\r\n        // The tooltips were being displayed as black bars, so I add a rule to hide them.\r\n        // Have to parse the string into a document, get the right element, add the rule, and reserialize it\r\n        let svgContent = this.visuals.gantt.commonService.unparseSVG(content);\r\n        const parser = new DOMParser();\r\n        const deserialized = parser.parseFromString(svgContent, 'text/xml')\r\n        console.log(deserialized);\r\n        const style = deserialized.getElementsByTagName('style');\r\n        console.log(style);\r\n        style[0].innerHTML = \".tooltip { display: none !important; } .small { font-size: 80%; font-family: Roboto, 'Helvetica Neue', sans-serif; }\";\r\n        const serializer = new XMLSerializer();\r\n        svgContent = serializer.serializeToString(deserialized);\r\n        const blob = new Blob([svgContent], { type: 'image/svg+xml;charset=utf-8' });\r\n        saveAs(blob, fileName);\r\n    }\r\n\r\n  }\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace GanttComponent {\r\n    export const componentTypeName = 'Gantt Chart';\r\n}\r\n","import { Injector, Component, Output, EventEmitter, \r\n  ElementRef, Renderer2, ChangeDetectorRef, Inject, OnInit, ViewContainerRef,\r\n  ViewChild} from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { CommonService } from '@app/contactTraceCommonServices/common.service';\r\nimport * as _ from 'lodash';\r\nimport * as saveAs from 'file-saver';\r\nimport * as domToImage from 'html-to-image';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\nimport { DialogSettings } from '../../helperClasses/dialogSettings';\r\n// import { PlotlyComponent, PlotlyModule } from 'angular-plotly.js';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { MicrobeTraceNextVisuals } from '../../microbe-trace-next-plugin-visuals';\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'HeatmapComponent',\r\n  templateUrl: './heatmap.component.html',\r\n  styleUrls: ['./heatmap.component.scss']\r\n})\r\nexport class HeatmapComponent extends BaseComponentDirective implements OnInit {\r\n\r\n  @ViewChild('heatmapContainer', { read: ElementRef }) heatmapContainerRef: ElementRef;  @\r\n  Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n\r\n  private Plotly: any;\r\n\r\n  \r\n  labels: string[];\r\n  xLabels: string[];\r\n  yLabels: string[];\r\n  matrix: object;\r\n  // plot: PlotlyComponent;\r\n  visuals: MicrobeTraceNextVisuals;\r\n  nodeIds: string[];\r\n  viewActive: boolean;\r\n  heatmapData: object;\r\n  FieldList: SelectItem[] = [];\r\n  heatmapLayout: object;\r\n  heatmapConfig: object;\r\n  invertX: boolean;\r\n  invertY: boolean;\r\n  heatmapShowLabels: boolean;\r\n  loColor: string;\r\n  medColor: string;\r\n  hiColor: string;\r\n  HeatmapSettingsDialogSettings: DialogSettings = new DialogSettings('#heatmap-settings-pane', false);\r\n  ShowHeatmapExportPane: boolean = false;\r\n  invertOptions: object = [\r\n    { label: \"Yes\", value: true },\r\n    { label: \"No\", value: false }\r\n  ];\r\n  SelectedImageFilenameVariable = \"default_heatmap\";\r\n  SelectedNetworkExportFileTypeVariable: string = \"png\";\r\n  NetworkExportFileTypeList: object = [\r\n    { label: 'png', value: 'png' },\r\n    { label: 'jpeg', value: 'jpeg' },\r\n    { label: 'svg', value: 'svg' }\r\n  ];\r\n  SelectedDistanceMatrixFilenameVariable: string = \"distance_matrix.csv\";\r\n  heatmapLabels: string[];\r\n  heatmapMetric: string;\r\n    \r\n  constructor(injector: Injector,\r\n        private eventManager: EventManager,\r\n        public commonService: CommonService,\r\n        @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n        elRef: ElementRef,\r\n        private cdref: ChangeDetectorRef,\r\n        private gtmService: GoogleTagManagerService,\r\n        private renderer: Renderer2,\r\n        // private plotlyModule: PlotlyModule\r\n      ) {\r\n          super(elRef.nativeElement);\r\n          this.visuals = commonService.visuals;\r\n          this.visuals.heatmap = this;\r\n          this.invertX = this.commonService.session.style.widgets['heatmap-invertX'];\r\n          this.invertY = this.commonService.session.style.widgets['heatmap-invertY'];\r\n          this.heatmapShowLabels = this.commonService.session.style.widgets['heatmap-axislabels-show'];\r\n          this.loColor = this.commonService.session.style.widgets['heatmap-color-low'];\r\n          this.medColor = this.commonService.session.style.widgets['heatmap-color-medium'];\r\n          this.hiColor = this.commonService.session.style.widgets['heatmap-color-high']\r\n          this.heatmapMetric = this.commonService.session.style.widgets['default-distance-metric'].toUpperCase();\r\n        }\r\n\r\n  openSettings(): void {\r\n    this.visuals.heatmap.HeatmapSettingsDialogSettings.setVisibility(true);\r\n  }\r\n  \r\n  openExport(): void {\r\n    this.ShowHeatmapExportPane = true;\r\n  }\r\n  \r\n  openCenter(): void {\r\n    const reCenter = {\r\n      'xaxis.autorange': true,\r\n      'yaxis.autorange': true\r\n    }\r\n    console.log(reCenter);\r\n    // PlotlyModule.plotlyjs.relayout(\"heatmap\", reCenter);\r\n  }\r\n  \r\n  async ngOnInit(): Promise<void> {\r\n\r\n     // Lazy load Plotly.js when the component initializes\r\n     this.Plotly = await import('plotly.js-dist-min');\r\n\r\n    this.viewActive = true;\r\n    this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/heatmap\",\r\n            page_title: \"Heatmap View\"\r\n        });\r\n\r\n    this.nodeIds = this.getNodeIds();\r\n    this.visuals.heatmap.FieldList.push(\r\n      {\r\n        label: \"None\",\r\n        value: \"\",\r\n      }\r\n    )\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    this.commonService.session.data['nodeFields'].map((d, i) => {\r\n\r\n      this.visuals.heatmap.FieldList.push(\r\n        {\r\n          label: this.visuals.heatmap.commonService.capitalize(d.replace('_', '')),\r\n          value: d\r\n        });\r\n    });\r\n\r\n    this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.setVisibility(false);\r\n    this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.setVisibility(false);\r\n    \r\n\r\n    this.goldenLayoutComponentResize();\r\n\r\n    this.container.on('resize', () => { this.goldenLayoutComponentResize() })\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n      this.viewActive = true; \r\n      this.cdref.detectChanges();\r\n    })\r\n\r\n    this.redrawHeatmap();\r\n  }\r\n\r\n  drawHeatmap(xLabels: string[], yLabels: string[], config: object): void {\r\n    this.commonService.getDM().then(dm => {\r\n      if (this.invertX) {\r\n        dm.forEach(l => l.reverse());\r\n        xLabels.reverse();\r\n      }\r\n      this.heatmapLabels = xLabels;\r\n      if (this.invertY) {\r\n        dm.reverse();\r\n        yLabels.reverse();\r\n      }\r\n\r\n      this.heatmapData = [{\r\n        x: xLabels,\r\n        y: yLabels,\r\n        z: dm,\r\n        type: 'heatmap',\r\n        colorscale: [\r\n          [0, this.loColor],\r\n          [0.5, this.medColor],\r\n          [1, this.hiColor]\r\n        ]\r\n      }]\r\n\r\n      const parentElement = this.heatmapContainerRef.nativeElement.parentElement;\r\n    const width = parentElement.clientWidth;\r\n    const height = parentElement.clientHeight;\r\n\r\n      this.heatmapLayout = {\r\n          xaxis: config,\r\n          yaxis: config,\r\n          width: width,\r\n          height: height\r\n        }\r\n      this.heatmapConfig = {\r\n          displaylogo: false,\r\n          displayModeBar: false\r\n        }\r\n\r\n        this.Plotly.newPlot('heatmap', this.heatmapData, this.heatmapLayout, this.heatmapConfig);\r\n\r\n      // this.plot = PlotlyModule.plotlyjs.newPlot('heatmap', this.heatmapData, this.heatmapLayout, this.heatmapConfig);\r\n    });\r\n  }\r\n\r\n  goldenLayoutComponentResize(): void {\r\n    const heatmapElement = this.heatmapContainerRef.nativeElement;\r\n    const parentElement = heatmapElement.parentElement;\r\n  \r\n    const height = parentElement.clientHeight;\r\n    const width = parentElement.clientWidth;\r\n\r\n    if (height) {\r\n      this.renderer.setStyle(heatmapElement, 'height', `${height - 19}px`);\r\n    }\r\n    if (width) {\r\n      this.renderer.setStyle(heatmapElement, 'width', `${width - 1}px`);\r\n    }\r\n  }\r\n\r\n  getNodeIds(): string[] {\r\n    const idSet: string[] = this.visuals.heatmap.commonService.session.data.nodes.map(x=>x._id);\r\n    return idSet;\r\n  }\r\n  \r\n  redrawHeatmap(): void {\r\n    if (!this.heatmapContainerRef.nativeElement.length) return;\r\n    // if (this.plot) PlotlyModule.plotlyjs.purge('heatmap');\r\n    const labels = this.nodeIds;\r\n    const xLabels = labels.map(d => 'N' + d);\r\n    const yLabels = xLabels.slice();\r\n    this.heatmapMetric = this.commonService.session.style.widgets['default-distance-metric'].toUpperCase();\r\n\r\n\r\n    const config = {\r\n      autotick: false,\r\n      showticklabels: this.heatmapShowLabels\r\n    };\r\n\r\n    if (!config.showticklabels) {\r\n      config[\"ticks\"] = '';\r\n    }\r\n\r\n    this.drawHeatmap(xLabels, yLabels, config);\r\n    this.setBackground();\r\n  }\r\n\r\n  setBackground(): void {\r\n    const heatmapElement: HTMLElement = this.heatmapContainerRef.nativeElement;\r\n    const col = this.commonService.session.style.widgets['background-color'];\r\n    const contrast = this.commonService.session.style.widgets['background-color-contrast'];\r\n      \r\n    // Set background color of the main SVG\r\n    const mainSvg = heatmapElement.querySelector('svg.main-svg');\r\n    if (mainSvg) {\r\n      this.renderer.setStyle(mainSvg, 'background', col);\r\n    }\r\n\r\n    // Set fill for rect.bg\r\n    const rectBg = heatmapElement.querySelector('rect.bg');\r\n    if (rectBg) {\r\n      this.renderer.setStyle(rectBg, 'fill', col);\r\n    }\r\n\r\n    // Set fill for titles\r\n    const titles = heatmapElement.querySelectorAll('.xtitle, .ytitle');\r\n    titles.forEach(title => {\r\n      this.renderer.setStyle(title, 'fill', contrast);\r\n    });\r\n\r\n    // Set fill for axis layer texts\r\n    const axisTexts = heatmapElement.querySelectorAll('.xaxislayer-above text, .yaxislayer-above text');\r\n    axisTexts.forEach(text => {\r\n      this.renderer.setStyle(text, 'fill', contrast);\r\n    });\r\n  }\r\n\r\n  updateLoColor(color: string): void {\r\n    console.log(color);\r\n    this.commonService.session.style.widgets[\"heatmap-color-low\"] = color;\r\n    this.loColor = color;\r\n    this.redrawHeatmap();\r\n  }\r\n\r\n  updateMedColor(color: string): void {\r\n    console.log(color);\r\n    this.commonService.session.style.widgets[\"heatmap-color-medium\"] = color;\r\n    this.medColor = color;\r\n    this.redrawHeatmap();\r\n  }\r\n\r\n  updateHiColor(color: string): void {\r\n    console.log(color);\r\n    this.commonService.session.style.widgets[\"heatmap-color-high\"] = color;\r\n    this.hiColor = color;\r\n    this.redrawHeatmap();\r\n  }\r\n\r\n  updateInvertX(direction: boolean): void {\r\n    this.invertX = direction;\r\n    this.commonService.session.style.widgets[\"heatmap-invertX\"] = this.invertX;\r\n    this.redrawHeatmap();\r\n  }\r\n\r\n  updateInvertY(direction: boolean): void {\r\n    this.invertY = direction;\r\n    this.commonService.session.style.widgets[\"heatmap-invertY\"] = this.invertY;\r\n    this.redrawHeatmap();\r\n  }\r\n\r\n  saveImage(): void {\r\n    const fileName = this.SelectedImageFilenameVariable;\r\n    const domId = 'heatmap';\r\n    const exportImageType = this.SelectedNetworkExportFileTypeVariable;\r\n    console.log(exportImageType);\r\n    const content = document.getElementById(domId);\r\n    if (content) {\r\n      const fixedContent = this.fixGradient(content);\r\n      if (exportImageType === 'png') {\r\n        domToImage.toPng(content).then(\r\n          dataUrl => {\r\n            saveAs(dataUrl, fileName+\".\"+exportImageType);\r\n        });\r\n      } else if (exportImageType === 'jpeg') {\r\n          domToImage.toJpeg(content, { quality: 0.85 }).then(\r\n            dataUrl => {\r\n              saveAs(dataUrl, fileName+\".\"+exportImageType);\r\n            });\r\n      } else if (exportImageType === 'svg') {\r\n          const svgContent = this.commonService.unparseSVG(fixedContent);\r\n          const blob = new Blob([svgContent], { type: 'image/svg+xml;charset=utf-8' });\r\n          saveAs(blob, fileName+\".\"+exportImageType);\r\n      }\r\n    }\r\n  }\r\n\r\n  fixGradient(el: HTMLElement): HTMLElement {\r\n    const insertionPoint = el.getElementsByClassName(\"gradient_filled\");\r\n    const startingUrl = insertionPoint[0][\"style\"][\"fill\"];\r\n    const idVal = startingUrl.substring(startingUrl.indexOf(\"#\"));\r\n    insertionPoint[0][\"style\"][\"fill\"] = 'url(\"'+idVal;\r\n    return el;\r\n  }\r\n\r\n  saveDistanceMatrix(): void {\r\n    const fileName = this.SelectedDistanceMatrixFilenameVariable;\r\n    const labelArray = _.cloneDeep(this.heatmapLabels);\r\n    this.commonService.getDM().then(dm => {\r\n      let csvContent = \"data:text/csv;charset=utf-8,\";\r\n      if (this.heatmapShowLabels) {\r\n        labelArray.unshift(\"\");\r\n        csvContent += labelArray.join(\",\") + \"\\n\";\r\n        for(let i=0; i<dm.length; i++) {\r\n          dm[i].unshift(this.heatmapLabels[i]);\r\n          csvContent += dm[i].join(\",\") + \"\\n\";\r\n        }\r\n      } else {\r\n        csvContent += dm.map(e => e.join(\",\")).join(\"\\n\");\r\n      }\r\n      saveAs(csvContent, fileName);\r\n    });\r\n    \r\n  } \r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace HeatmapComponent {\r\n    export const componentTypeName = 'Heatmap';\r\n}","import { Injector, Component, Output, OnChanges, SimpleChange, EventEmitter, OnInit, NgZone, InjectionToken, ElementRef, ViewChild, ViewContainerRef, ViewChildren, QueryList, ChangeDetectorRef, Renderer2, Inject } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { AppComponentBase } from '@shared/common/app-component-base';\r\nimport { CommonService } from '../../contactTraceCommonServices/common.service';\r\nimport * as saveAs from 'file-saver';\r\nimport * as d3 from 'd3';\r\nimport * as domToImage from 'dom-to-image-more';\r\nimport * as L from 'leaflet';\r\n// import * as moment from 'moment';\r\nimport moment from 'moment';\r\nimport 'leaflet.markercluster';\r\n\r\nimport * as MarkerCluster from 'leaflet.markercluster';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { Observable } from 'rxjs';\r\nimport { tileLayer, latLng, marker, icon, polyline, circle, polygon, Map, MapOptions, Layer, Marker, markerClusterGroup, MarkerClusterGroupOptions, MarkerClusterGroup, circleMarker, PathOptions, featureGroup, FeatureGroup, TileLayer, geoJSON } from 'leaflet';\r\nimport { DialogSettings } from '../../helperClasses/dialogSettings';\r\nimport { MicobeTraceNextPluginEvents } from '../../helperClasses/interfaces';\r\nimport { MicrobeTraceNextVisuals } from '../../microbe-trace-next-plugin-visuals';\r\nimport { ColorIterator } from '../../helperClasses/colorIterator';\r\nimport * as _ from 'lodash';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\n\r\ndeclare var google: any;\r\n\r\n\r\n/**\r\n * @title Complex Example\r\n */\r\n\r\ninterface LongLatInterface {\r\n    Longitude: any;\r\n    Latitude: any;\r\n}\r\n\r\nclass LongLatClass implements LongLatInterface {\r\n    Longitude: any;\r\n    Latitude: any;\r\n}\r\n\r\n// interface gmapMarkerInterface {\r\n//     zip: string;\r\n//     marker: google.maps.Marker;\r\n// }\r\n\r\n// class gmapMarkerClass implements gmapMarkerInterface {\r\n//     zip: string;\r\n//     marker: google.maps.Marker;\r\n// }\r\n\r\n\r\n@Component({\r\n    selector: 'MapComponent',\r\n    templateUrl: './map-plugin.component.html',\r\n    styleUrls: ['./map-plugin.component.css'],\r\n})\r\n\r\n\r\n\r\n\r\nexport class MapComponent extends BaseComponentDirective implements OnInit, MicobeTraceNextPluginEvents {\r\n\r\n    @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n\r\n    viewActive: boolean = true;\r\n    svgStyle: {} = {\r\n        'height': '0px',\r\n        'width': '1000px'\r\n    };\r\n\r\n    nodes: any = [];\r\n    map: any = null;\r\n    layers: MapLayers = new MapLayers();\r\n\r\n    IsDataAvailable: boolean = false;\r\n    ShowGEOMapExportPane: boolean = false;\r\n    ShowGEOMapSettingsPane: boolean = false;\r\n    FieldList: SelectItem[] = [];\r\n    SelectedLatitude: string = \"None\";\r\n    SelectedLongitude: string = \"None\";\r\n    SelectedCensusTract: string = \"None\";\r\n    SelectedZipCode: string = \"None\";\r\n    SelectedCounty: string = \"None\";\r\n    SelectedState: string = \"None\";\r\n    SelectedCountry: string = \"None\";\r\n    SelectedResidenceAddress: string = \"None\";\r\n    SelectedVenueAddress: string = \"None\";\r\n    SelectedExposureAddress: string = \"None\";\r\n\r\n    geocoder: any = null;\r\n    address: any = \"new york city\";\r\n\r\n    OriginalCenterLocation: any = null;\r\n    markers: any[] = [];\r\n    gmapOptions: any;\r\n    overlays: any[];\r\n\r\n\r\n    SelectedNetworkExportFilenameVariable: string = \"\";\r\n\r\n    NetworkExportFileTypeList: any = [\r\n        { label: 'png', value: 'png' },\r\n        { label: 'jpeg', value: 'jpeg' },\r\n        { label: 'webp', value: 'webp' },\r\n        // { label: 'svg', value: 'svg' }\r\n    ];\r\n    SelectedNetworkExportFileTypeListVariable: string = \"png\";\r\n\r\n\r\n\r\n    SelectedNetworkExportScaleVariable: any = 1;\r\n    SelectedNetworkExportQualityVariable: any = 0.92;\r\n    // view implementation of 2D to calculate resolution before export\r\n    CalculatedResolutionWidth: any = 1918;\r\n    CalculatedResolutionHeight: any = 909;\r\n    CalculatedResolution: any = ((this.CalculatedResolutionWidth * this.SelectedNetworkExportScaleVariable) + \" x \" + (this.CalculatedResolutionHeight * this.SelectedNetworkExportScaleVariable) + \"px\");\r\n\r\n\r\n    NodesTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedNodesTypeVariable: string = \"Show\";\r\n\r\n\r\n    LinksTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedLinksTypeVariable: string = \"Show\";\r\n\r\n\r\n    CountriesTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedCountriesTypeVariable: string = \"Show\";\r\n\r\n\r\n    StatesTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedStatesTypeVariable: string = \"Show\";\r\n\r\n\r\n    CountiesTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedCountiesTypeVariable: string = \"Hide\";\r\n\r\n\r\n    BasemapTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedBasemapTypeVariable: string = \"Hide\";\r\n\r\n    SatelliteTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedSatelliteTypeVariable: string = \"Hide\";\r\n\r\n    NodeCollapsingTypes: any = [\r\n        { label: 'On', value: 'On' },\r\n        { label: 'Off', value: 'Off' }\r\n    ];\r\n    SelectedNodeCollapsingTypeVariable: string = \"On\";\r\n\r\n    GeospatialTypes: any = [\r\n        { label: 'On', value: 'On' },\r\n        { label: 'Off', value: 'Off' }\r\n    ];\r\n    SelectedGeospatialTypeVariable: string = \"Off\";\r\n\r\n\r\n    SelectedNodeTransparencyVariable: any = 0.0;\r\n    SelectedNodeJitterVariable: any = -2;\r\n    SelectedNodeTooltipVariable: string = \"None\";\r\n\r\n    SelectedLinkTransparencyVariable: any = 0.0;\r\n    SelectedLinkTooltipVariable: string = \"None\";\r\n\r\n    //@ViewChild('select.nodeVariables') selectList: ElementRef;\r\n    //@ViewChildren('map-field-lat') targets: ElementRef\r\n\r\n    //@ViewChild('gmap') mapElement: any;\r\n    //gmap: google.maps.Map;\r\n    //gmapMarkers: gmapMarkerInterface[];\r\n\r\n    clusterImages: any =\r\n        {\r\n            m1: \"data:image/png;base64,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\",\r\n            m2: \"data:image/png;base64,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\",\r\n            m3: \"data:image/png;base64,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\",\r\n            m4: \"data:image/png;base64,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\",\r\n            m5: 'data:image/png;base64,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'\r\n        };\r\n\r\n    locationsFound: any[] = [];\r\n\r\n    private lmap: Map;\r\n    private mapTooltip: string = '#mapTooltip'\r\n\r\n    public leafletMarkers: Layer[] = [];\r\n    public leafletInitialOptions: MapOptions;\r\n    public leafletMarkerClusterOptions: MarkerClusterGroupOptions;\r\n\r\n    public isExporting: boolean = false;\r\n    public isExportClosed: boolean = false;\r\n    private exportTryCount: number = 0;\r\n\r\n    public NodeMapSettingsExportDialogSettings: DialogSettings;\r\n\r\n    private visuals: MicrobeTraceNextVisuals;\r\n\r\n    private colorIterator: ColorIterator = new ColorIterator();\r\n\r\n    private marker: { triangle: string, square: string, circle: string } = {\r\n        triangle: '<svg version=\"1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\"><path d=\"M7.5 0 L0 15 L15 15 Z\" fill=\"{mapIconColor}\"/></svg>',\r\n        square: '<svg version=\"1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\"><rect width=\"15\" height=\"15\" fill=\"{mapIconColor}\" /></svg>',\r\n        circle: '<svg version=\"1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\"><circle cx=\"7.5\" cy=\"7.5\" r=\"7.5\" fill=\"{mapIconColor}\" /></svg>',\r\n    };\r\n\r\n    public dateFilterRangeValues: number[] = [0, 100];\r\n    public dateFilterRangeMax: number = 100;\r\n    public dateFilterRangeDates: Date[] = [new Date(), new Date()];\r\n    public dateFilterRangeMinDate: Date;\r\n    public geospatialNodes: MarkerWithData[] = [];\r\n\r\n    constructor(injector: Injector,\r\n        private renderer: Renderer2,\r\n        private elem: ElementRef,\r\n        private eventManager: EventManager,\r\n        public commonService: CommonService,\r\n        @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n        elRef: ElementRef,\r\n        private cdref: ChangeDetectorRef,\r\n        private gtmService: GoogleTagManagerService) {\r\n\r\n            super(elRef.nativeElement);\r\n\r\n        this.visuals = commonService.visuals;\r\n        this.visuals.gisMap = this;\r\n    }\r\n\r\n\r\n    ngOnInit() {\r\n\r\n        this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/map\",\r\n            page_title: \"Map View\"\r\n        });\r\n\r\n        if (!this.NodeMapSettingsExportDialogSettings) {\r\n            this.NodeMapSettingsExportDialogSettings = new DialogSettings('#map-settings-pane', false);\r\n        }\r\n\r\n        this.IsDataAvailable = (this.commonService.session.data.nodes.length == 0 ? false : true);\r\n\r\n        this.FieldList = [];\r\n\r\n        this.FieldList.push({ label: \"None\", value: \"None\" });\r\n        this.commonService.session.data['nodeFields'].map((d, i) => {\r\n\r\n            this.FieldList.push(\r\n                {\r\n                    label: this.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                    value: d\r\n                });\r\n\r\n        });\r\n\r\n        //this.geocoder = new google.maps.Geocoder();\r\n        this.initializeMap(\"US\");\r\n\r\n        if (this.commonService.temp.mapData.zipcodes == undefined) {\r\n            this.commonService.getMapData('zipcodes.csv').then((x) => {\r\n\r\n            });\r\n        }\r\n\r\n        this.hideTooltip();\r\n\r\n        // TODO: remove when not needed\r\n        // this.eventManager.addGlobalEventListener('window', 'node-selected', () => {\r\n        //     this.drawNodes();\r\n        // });\r\n\r\n        let that = this;\r\n\r\n        $( document ).on( \"node-selected\", function( ) {\r\n            //update this?\r\n            that.drawNodes(false);\r\n        });\r\n\r\n        $( document ).on( \"node-visibility\", function( ) {\r\n            // XXYY seems to re-jitter the nodes at times, so may want to look into that. thanks\r\n            //console.log('is node vis called here? probs not right')\r\n            let visNodes = that.commonService.getVisibleNodes();\r\n            if (visNodes.length == that.nodes.length) { return; }\r\n            that.nodes = visNodes;\r\n            that.matchCoordinates(undefined, true);\r\n            that.nodes.forEach(node => {\r\n                if (node._jlat == undefined || node._jlon == undefined) {\r\n                    that.rerollNodeAndJitter(node);\r\n                }\r\n            })\r\n\r\n            that.drawNodes(false);\r\n            //that.centerMap();\r\n        });\r\n        \r\n        $( document ).on( \"link-visibility\", function( ) {\r\n            that.drawLinks();\r\n        })\r\n\r\n        this.container.on('resize', () => { this.lmap.invalidateSize() })\r\n        this.container.on('hide', () => { \r\n            this.viewActive = false; \r\n            this.cdref.detectChanges();\r\n        })\r\n        this.container.on('show', () => { \r\n            this.viewActive = true; \r\n            this.cdref.detectChanges();\r\n        })\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        setTimeout(() => this.centerMap(), 1000)\r\n    }\r\n\r\n\r\n    initializeMap(address: string) {\r\n\r\n        this.codeAddress([\"US\"]).then((result: any[]) => {\r\n\r\n            console.log('map codeAddress result', result);\r\n            if (result.length > 0) {\r\n                let latitude = result[0].Latitude;\r\n                let longitude = result[0].Longitude;\r\n\r\n                this.initializeLeafletMap(latitude, longitude);\r\n            }\r\n        });\r\n    }\r\n\r\n    initializeLeafletMap(latitude: number, longitude: number) {\r\n        //TODO: put this in a config?\r\n        const mapTokenKey: string = 'sk.eyJ1IjoicndhdHR5IiwiYSI6ImNrY2RuMWlzcDAwMmUyc3A5ejl3ODEzMXoifQ.qpXOouVsI6P8-HOHUWofuQ'\r\n\r\n        this.layers.basemap = tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            maxZoom: 20,\r\n            attribution: ' <a href=\"https://openstreetmap.org/about\" target=\"_blank\">OpenStreetMap</a> contributors'\r\n        }); \r\n        this.layers.satellite = tileLayer(`https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v9/tiles/256/{z}/{x}/{y}?access_token=${mapTokenKey}`);\r\n\r\n        this.leafletInitialOptions = {\r\n            zoom: 4,\r\n            zoomControl: true,\r\n            maxZoom: 15,\r\n            preferCanvas: true,\r\n            center: latLng([latitude, longitude]),\r\n        };\r\n\r\n        this.leafletMarkerClusterOptions = {\r\n            showCoverageOnHover: false,\r\n            zoomToBoundsOnClick: true,\r\n            spiderfyOnMaxZoom: true,\r\n            removeOutsideVisibleBounds: false,\r\n            maxClusterRadius: 20,\r\n            spiderLegPolylineOptions: { opacity: 0 }\r\n        };\r\n    }\r\n\r\n    onMapReady(map: Map) {\r\n\r\n        //get the leaflet map\r\n        this.lmap = map;\r\n        this.lmap.zoomControl.setPosition('bottomleft');\r\n\r\n\r\n        setTimeout(() => {\r\n            this.loadSettings();\r\n            //this.setDefaultAddressFields();\r\n            //this.setDateRangeFilterValues();\r\n            //this.onDataChange(undefined);\r\n        }, 600);\r\n    }\r\n\r\n    onMarkerClusterReady(markerCluster: MarkerClusterGroup) {\r\n        this.layers.markerClusterGroup = markerCluster;\r\n    }\r\n\r\n    getMarker(latitude: number, longitude: number): Layer {\r\n        return circleMarker([latitude, longitude], {\r\n            color: '#3c4b8d',\r\n            fillColor: '#3c4b8d',\r\n            radius: 5\r\n        });\r\n    }\r\n\r\n    /* Not sure goal of this at the moment\r\n    setDefaultAddressFields() {\r\n        const foundExposureAddressColName = this.commonService.session.data['nodeFields'].find(x => x === 'ExposureLocation');\r\n        if (foundExposureAddressColName) this.SelectedExposureAddress = foundExposureAddressColName;\r\n        const foundVenueAddressColName = this.commonService.session.data['nodeFields'].find(x => x === 'VenueLocation');\r\n        if (foundVenueAddressColName) this.SelectedVenueAddress = foundVenueAddressColName;\r\n    }*/\r\n\r\n    onDateFilterChange(e: any) {\r\n        this.dateFilterRangeDates[0] = moment(this.dateFilterRangeMinDate).add(this.dateFilterRangeValues[0], 'days').toDate();\r\n        this.dateFilterRangeDates[1] = moment(this.dateFilterRangeMinDate).add(this.dateFilterRangeValues[1], 'days').toDate();\r\n\r\n        this.onDataChange(undefined);\r\n    }\r\n\r\n    /* Not sure about this function\r\n    setDateRangeFilterValues() {\r\n        let markers = this.getGeospatialNodes().filter(x => x.locationDetail.Name != 'Residence');\r\n\r\n        const dates = markers.filter(x => x.locationDetail)\r\n            .map(x => x.locationDetail.Date);\r\n        this.dateFilterRangeDates[0] = _.min(dates);\r\n        this.dateFilterRangeDates[1] = _.max(dates);\r\n        const daysDiff = moment(this.dateFilterRangeDates[1]).diff(moment(this.dateFilterRangeDates[0]), 'days');\r\n        this.dateFilterRangeValues = [0, daysDiff];\r\n        this.dateFilterRangeMax = daysDiff;\r\n        this.dateFilterRangeMinDate = this.dateFilterRangeDates[0];\r\n\r\n        this.onDataChange(undefined);\r\n    }\r\n        */\r\n\r\n    showAllVisibleMarkers() {\r\n        // var bounds = new google.maps.LatLngBounds();\r\n        // for (var i = 0; i < this.markers.length; i++) {\r\n        //     bounds.extend(this.markers[i].getPosition());\r\n        // }\r\n    }\r\n\r\n    centerMap() {\r\n        if (this.lmap && this.layers.nodes().getLayers().length > 0) {\r\n            this.lmap.flyToBounds(this.layers.nodes().getBounds());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Calls clearAllMarkers_Leftlet() which removes all nodes from map and remove _jlat and _jlon value for each node\r\n     */\r\n    clearAllMarkers() {\r\n        this.clearAllMarkers_Leaflet();\r\n    }\r\n\r\n    /*clearAllMarkers_Google() {\r\n        for (var i = 0; i < this.markers.length; i++) {\r\n            this.markers[i].setMap(null);\r\n        }\r\n\r\n        this.markers = [];\r\n    }*/\r\n\r\n    /**\r\n     * Removes all nodes from map and remove _jlat and _jlon value for each node\r\n     */\r\n    clearAllMarkers_Leaflet() {\r\n        this.layers.removeNodes();\r\n        this.nodes.forEach(node => {\r\n            node._jlat = undefined;\r\n            node._jlon = undefined;\r\n        });\r\n    }\r\n\r\n    onDataChange(event) {\r\n        this.commonService.session.style.widgets['map-field-lat'] = this.SelectedLatitude;\r\n        this.commonService.session.style.widgets['map-field-lon'] = this.SelectedLongitude;\r\n        this.commonService.session.style.widgets['map-field-tract'] = this.SelectedCensusTract;\r\n        this.commonService.session.style.widgets['map-field-zipcode'] = this.SelectedZipCode;\r\n        this.commonService.session.style.widgets['map-field-county'] = this.SelectedCounty;\r\n        this.commonService.session.style.widgets['map-field-state'] = this.SelectedState;\r\n        this.commonService.session.style.widgets['map-field-country'] = this.SelectedCountry;\r\n        this.commonService.session.style.widgets['map-field-residence-address'] = this.SelectedResidenceAddress;\r\n        this.commonService.session.style.widgets['map-field-venue-address'] = this.SelectedVenueAddress;\r\n        this.commonService.session.style.widgets['map-field-exposure-address'] = this.SelectedExposureAddress;\r\n\r\n        this.clearAllMarkers();\r\n        this.layers.removeLinks();\r\n\r\n        this.nodes = this.commonService.getVisibleNodes();\r\n        let cnt: any = 0;\r\n        let dataFound: boolean = false;\r\n\r\n        let that = this;\r\n        // XXX check if reroll is need for drawNodes()\r\n        this.matchCoordinates(function () {\r\n            let rerollCheck = that.rerollCheck();\r\n            if (rerollCheck) {\r\n                that.drawNodes();\r\n            } else {\r\n                that.jitter();\r\n                that.drawNodes(false);\r\n            }\r\n            that.drawLinks();\r\n            that.resetStack();\r\n            // that.visuals.gisMap.lmap.flyToBounds(that.layers.nodes().getBounds());\r\n            }, false);\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Updates where to show or hide nodes on the Map\r\n     * @param e 'Show' | 'Hide'\r\n     */\r\n    onMapNodeShowHideChange(e) {\r\n        this.SelectedNodesTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n            this.commonService.session.style.widgets['map-node-show'] = true;\r\n            this.drawNodes(false);\r\n            //this.drawLinks();\r\n        }\r\n        else {\r\n            this.commonService.session.style.widgets['map-node-show'] = false;\r\n            this.layers.removeNodes();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates where to show or hide links on the Map\r\n     * @param e 'Show' | 'Hide'\r\n     */\r\n    onMapLinksShowHideChange(e) {\r\n        this.SelectedLinksTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n            this.commonService.session.style.widgets['map-link-show'] = true;\r\n            this.drawNodes(false);\r\n            this.drawLinks();\r\n        }\r\n        else {\r\n            this.commonService.session.style.widgets['map-link-show'] = false;\r\n            this.layers.links.remove();\r\n        }\r\n    }\r\n\r\n\r\n    onCountriesShowHidChange(e) {\r\n        this.SelectedCountriesTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n\r\n            this.commonService.session.style.widgets['map-countries-show'] = true;\r\n            if (this.layers.countries.getLayers().length > 0) {\r\n                this.layers.countries.addTo(this.lmap);\r\n                this.resetStack();\r\n            } else {\r\n                //this.commonService.getMapData('countries.json', () => $(this).trigger('click'));\r\n                this.getMapData('countries.json', () => {\r\n                    this.layers.countries.addTo(this.lmap);\r\n                    this.resetStack();\r\n                });\r\n\r\n            }\r\n        }\r\n        else {\r\n\r\n            this.commonService.session.style.widgets['map-countries-show'] = false;\r\n            this.layers.countries.remove();\r\n\r\n        }\r\n    }\r\n\r\n\r\n    onStatesShowHideChange(e) {\r\n        this.SelectedStatesTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n            this.commonService.session.style.widgets['map-states-show'] = true;\r\n            if (this.layers.states.getLayers().length > 0) {\r\n                this.layers.states.addTo(this.lmap);\r\n                this.resetStack();\r\n            } else {\r\n                this.getMapData('states.json', () => {\r\n                    this.layers.states.addTo(this.lmap);\r\n                    this.resetStack();\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this.commonService.session.style.widgets['map-states-show'] = false;\r\n            this.layers.states.remove();\r\n        }\r\n    }\r\n\r\n\r\n    onCountiesShowHideChange(e) {\r\n        this.SelectedCountiesTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n            this.commonService.session.style.widgets['map-counties-show'] = true;\r\n\r\n            if (this.layers.counties.getLayers().length > 0) {\r\n                this.layers.counties.addTo(this.lmap);\r\n                this.resetStack();\r\n            } else {\r\n                this.getMapData('counties.json', () => {\r\n                    this.layers.counties.addTo(this.lmap);\r\n                    this.resetStack();\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this.commonService.session.style.widgets['map-counties-show'] = false;\r\n            this.layers.counties.remove();\r\n        }\r\n    }\r\n\r\n    onBasemapChange(e, isReload: boolean = false) {\r\n        this.SelectedBasemapTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n            this.commonService.session.style.widgets['map-basemap-show'] = true;\r\n\r\n            this.layers.basemap.addTo(this.lmap);\r\n            this.layers.basemap.bringToFront();\r\n\r\n            if (!isReload) {\r\n                this.SelectedSatelliteTypeVariable = 'Hide';\r\n                this.onSatelliteChange('Hide');\r\n                this.onCountiesShowHideChange('Hide');\r\n                this.onStatesShowHideChange('Hide');\r\n                this.onCountriesShowHidChange('Hide');\r\n            }\r\n        }\r\n        else {\r\n\r\n            this.commonService.session.style.widgets['map-basemap-show'] = false;\r\n\r\n            if (!isReload) {\r\n                if (this.SelectedSatelliteTypeVariable === 'Hide' && this.SelectedBasemapTypeVariable === 'Hide') {\r\n                    this.onCountriesShowHidChange('Show');\r\n                    this.onStatesShowHideChange('Show');\r\n                }\r\n            }\r\n\r\n            this.layers.basemap.remove();\r\n        }\r\n    }\r\n\r\n    onSatelliteChange(e, isReload: boolean = false) {\r\n        this.SelectedSatelliteTypeVariable = e;\r\n\r\n        if (e == \"Show\") {\r\n            this.commonService.session.style.widgets['map-satellite-show'] = true;\r\n\r\n            this.layers.satellite.addTo(this.lmap);\r\n            this.layers.satellite.bringToFront();\r\n\r\n            if (!isReload) {\r\n                this.SelectedBasemapTypeVariable = 'Hide';\r\n                this.onBasemapChange('Hide');\r\n                this.onCountiesShowHideChange('Hide');\r\n                this.onStatesShowHideChange('Hide');\r\n                this.onCountriesShowHidChange('Hide');\r\n            }\r\n        }\r\n        else {\r\n            this.commonService.session.style.widgets['map-satellite-show'] = false;\r\n\r\n            if (!isReload) {\r\n                if (this.SelectedSatelliteTypeVariable === 'Hide' && this.SelectedBasemapTypeVariable === 'Hide') {\r\n                    this.onCountriesShowHidChange('Show');\r\n                    this.onStatesShowHideChange('Show');\r\n                }\r\n            }\r\n\r\n            this.layers.satellite.remove();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates nodes to be collapsing or not and updates the value of the widget['map-collapsing-on']\r\n     */\r\n    onNodeCollapsingChange(e) {\r\n        if (this.SelectedNodeCollapsingTypeVariable == \"On\") {\r\n            this.commonService.session.style.widgets['map-collapsing-on'] = true;\r\n            this.drawNodes(false);\r\n        }\r\n        else {\r\n            this.commonService.session.style.widgets['map-collapsing-on'] = false;\r\n            this.drawNodes(false);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * revisit if nodes need to be rerolled or not\r\n     * @param e \r\n     */\r\n    onGeospatialTypeChange(e) {\r\n        if (this.SelectedGeospatialTypeVariable == \"On\") {\r\n            this.commonService.session.style.widgets['map-geospatial-type-on'] = true;\r\n            this.drawNodes();\r\n            this.drawLinks();\r\n        }\r\n        else {\r\n            this.commonService.session.style.widgets['map-geospatial-type-on'] = false;\r\n            this.drawNodes();\r\n            this.drawLinks();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates transparency of the nodes and the value of the widget['map-node-transparency']\r\n     */\r\n    onNodeTransparencyChange(e) {\r\n        this.commonService.session.style.widgets['map-node-transparency'] = e;\r\n        this.drawNodes(false);\r\n    }\r\n\r\n\r\n    /**\r\n     * updates node and link positions after rerolling nodes and also updates the value of the widget['map-node-jitter']\r\n     * @param e \r\n     */\r\n    onNodeJitterChange(e?) {\r\n        if (e) {\r\n            this.commonService.session.style.widgets['map-node-jitter'] = e;\r\n        }\r\n        \r\n        this.drawNodes();\r\n        this.drawLinks();\r\n    }\r\n\r\n\r\n    onNodeToolTipChange(e) {\r\n        this.commonService.session.style.widgets['map-node-tooltip-variable'] = e;\r\n    }\r\n\r\n\r\n    /**\r\n     * Updates transparency of the link and the value of the widget['map-link-transparency']\r\n     */\r\n    onLinkTransparencyChange(e) {\r\n        this.commonService.session.style.widgets['map-link-transparency'] = e;\r\n        this.drawLinks();\r\n    }\r\n\r\n\r\n    onLinkToolTipChange(e) {\r\n        this.commonService.session.style.widgets['map-link-tooltip-variable'] = e;\r\n    }\r\n\r\n    exportVisualization(event) {\r\n        this.visuals.gisMap.ShowGEOMapExportPane = false;\r\n        this.isExporting = true;\r\n\r\n        if (this.commonService.session.style.widgets['node-color-variable'] != 'None') {\r\n            this.visuals.microbeTrace.generateNodeColorTable(\"#node-color-table-bottom-map\", false);\r\n        }\r\n\r\n        if (this.commonService.session.style.widgets['link-color-variable'] != 'None') {\r\n            this.visuals.microbeTrace.generateNodeLinkTable(\"#link-color-table-bottom-map\", false);\r\n        }\r\n\r\n        if (!this.isExportClosed) {\r\n            setTimeout(() => this.exportVisualization(undefined), 300);\r\n        }\r\n        else {\r\n            this.exportWork();\r\n        }\r\n    }\r\n\r\n    onCloseExport() {\r\n        this.isExportClosed = true;\r\n    }\r\n\r\n    exportWork() {\r\n        setTimeout(() => {\r\n            var format = this.visuals.gisMap.SelectedNetworkExportFileTypeListVariable;\r\n            const element = document.querySelector('MapComponent').parentElement;\r\n\r\n            domToImage.toBlob(element)\r\n                .then((blob) => {\r\n                    // Sometimes libraries don't play nice with each other.\r\n                    // Sometimes dom-to-image does not recognize the leaflet element\r\n                    // so we jiggle it and try again. Typically works the second time, but we try 10 times\r\n                    if (blob === null) {\r\n                        if (this.visuals.gisMap.exportTryCount > 10) {\r\n                            //return toast about export failed\r\n                        }\r\n                        this.visuals.gisMap.exportTryCount += 1;\r\n\r\n                        this.visuals.gisMap.lmap.flyToBounds(this.visuals.gisMap.lmap.getBounds());\r\n\r\n                        this.visuals.gisMap.exportWork();\r\n                    }\r\n                    else {\r\n                        saveAs(blob, this.visuals.gisMap.SelectedNetworkExportFilenameVariable + '.' + format);\r\n                        this.visuals.gisMap.isExporting = false;\r\n                        this.visuals.microbeTrace.clearTable(\"#node-color-table-bottom-map\");\r\n                        this.visuals.microbeTrace.clearTable(\"#link-color-table-bottom-map\");\r\n\r\n                        this.visuals.gisMap.exportTryCount = 0;\r\n\r\n                        this.visuals.microbeTrace.GlobalSettingsDialogSettings.restoreStateAfterExport();\r\n                        this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.restoreStateAfterExport();\r\n                        this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.restoreStateAfterExport();\r\n                        this.visuals.gisMap.NodeMapSettingsExportDialogSettings.restoreStateAfterExport();\r\n                    }\r\n                });\r\n        }, 1000);\r\n    }\r\n\r\n    displayColorOptions() {\r\n        this.DisplayGlobalSettingsDialogEvent.emit(\"Styling\");\r\n    }\r\n\r\n    codeAddress(addressList: any[]) {\r\n\r\n        let positionList: any[] = [];\r\n        let cnt: number = 0;\r\n\r\n        return new Promise((resolve, reject) => {\r\n\r\n            addressList.map(address => {\r\n\r\n                if (this.geocoder) {\r\n                    this.geocoder.geocode({ 'address': address }, (results, status) => {\r\n\r\n                        //    debugger;\r\n\r\n                        let latLng: LongLatInterface = new LongLatClass();\r\n\r\n                        if (results != null) {\r\n                            if (results.length > 0) {\r\n\r\n                                console.log(cnt, results);\r\n\r\n                                latLng.Latitude = results[0].geometry.location.lat();\r\n                                latLng.Longitude = results[0].geometry.location.lng();\r\n\r\n                                if (status == 'OK') {\r\n                                    positionList.push(latLng);\r\n\r\n                                } else {\r\n                                    alert('Geocode was not successful for the following reason: ' + status);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        cnt = cnt + 1;\r\n\r\n                        if (cnt >= addressList.length)\r\n                            resolve(positionList);\r\n\r\n                    });\r\n                }\r\n                else\r\n                {\r\n                    let latLng: LongLatInterface = new LongLatClass();\r\n                    latLng.Latitude = 39.833332;\r\n                    latLng.Longitude = -98.583336;\r\n                    positionList.push(latLng);\r\n                    resolve(positionList);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    updateCalculatedResolution(event) {\r\n        this.CalculatedResolution = (Math.round(this.CalculatedResolutionWidth * this.SelectedNetworkExportScaleVariable) + \" x \" + Math.round(this.CalculatedResolutionHeight * this.SelectedNetworkExportScaleVariable) + \"px\");\r\n        this.cdref.detectChanges();\r\n    }\r\n\r\n    getMapData(type, callback) {\r\n        var name = type.split('.')[0];\r\n        this.commonService.getMapData(type).then(data => {\r\n            if (this.commonService.includes(['countries', 'states', 'counties'], name)) {\r\n\r\n                this.layers[name] = geoJSON(data,\r\n                    {\r\n                        style: {\r\n                            color: '#dadde0',\r\n                            weight: name == 'countries' ? 1 : 0.5,\r\n                            fillColor: '#fafaf8',\r\n                            fillOpacity: name == 'countries' ? 1 : 0\r\n                        }\r\n                    });\r\n            }\r\n            if (callback) callback();\r\n        })\r\n    }\r\n\r\n    matchCoordinates(callback, norefresh) {\r\n        if (!norefresh) this.nodes = this.commonService.getVisibleNodes();\r\n        if (this.commonService.session.style.widgets['map-field-country'] !== 'None') {\r\n            if (!this.commonService.temp.mapData.countries) {\r\n                this.getMapData('countries.json', () => this.matchCoordinates(callback, true));\r\n                return;\r\n            }\r\n            var val = this.commonService.session.style.widgets['map-field-country'];\r\n            this.nodes.forEach(n => {\r\n                var country = this.commonService.temp.mapData.countries.features.find(c => c.id == n[val] || c.properties.name == n[val]);\r\n                if (country) {\r\n                    n._lat = country.properties._lat,\r\n                        n._lon = country.properties._lon\r\n                }\r\n            });\r\n        }\r\n        if (this.commonService.session.style.widgets['map-field-state'] !== 'None') {\r\n            if (!this.commonService.temp.mapData.states) {\r\n                this.getMapData('states.json', () => this.matchCoordinates(callback, true));\r\n                return;\r\n            }\r\n            var sval = this.commonService.session.style.widgets['map-field-state'];\r\n            this.nodes.forEach(n => {\r\n                var state = this.commonService.temp.mapData.states.features.find(s => s.properties.usps == n[sval] || s.properties.name == n[sval]);\r\n                if (state) {\r\n                    n._lat = state.properties._lat;\r\n                    n._lon = state.properties._lon;\r\n                }\r\n            });\r\n        }\r\n        if (this.commonService.session.style.widgets['map-field-county'] !== 'None') {\r\n            if (!this.commonService.temp.mapData.counties) {\r\n                this.getMapData('counties.json', () => this.matchCoordinates(callback, true));\r\n                return;\r\n            }\r\n            var sval = this.commonService.session.style.widgets['map-field-state'];\r\n            var cval = this.commonService.session.style.widgets['map-field-county'];\r\n            this.nodes.forEach(n => {\r\n                var county;\r\n                county = this.commonService.temp.mapData.counties.features.find(c => {\r\n                    return (c.properties.fips == n[cval] ||\r\n                        parseFloat(c.properties.fips) == parseFloat(n[cval]));\r\n                });\r\n                if (county) {\r\n                    n._lat = county.properties._lat;\r\n                    n._lon = county.properties._lon;\r\n                    return;\r\n                }\r\n                var state = this.commonService.temp.mapData.states.features.find(s => s.properties.usps == n[sval].toUpperCase() || s.properties.name.toLowerCase().includes(n[sval].toLowerCase()));\r\n                county = this.commonService.temp.mapData.counties.features.find(c => {\r\n                    var small = n[cval].toLowerCase();\r\n                    return c.properties.state == state.properties.usps && (\r\n                        c.properties.name.includes(small) ||\r\n                        small.includes(c.properties.name)\r\n                    );\r\n                });\r\n                if (county) {\r\n                    n._lat = county.properties._lat;\r\n                    n._lon = county.properties._lon;\r\n                }\r\n            });\r\n        }\r\n        if (this.commonService.session.style.widgets['map-field-zipcode'] !== 'None') {\r\n            if (!this.commonService.temp.mapData.zipcodes) {\r\n                this.getMapData('zipcodes.csv', () => this.matchCoordinates(callback, true));\r\n                return;\r\n            }\r\n            var val = this.commonService.session.style.widgets['map-field-zipcode'];\r\n            this.nodes.forEach(n => {\r\n                var zo = this.commonService.temp.mapData.zipcodes.find(z => z.zipcode == n[val]);\r\n                if (zo) {\r\n                    n._lat = zo._lat;\r\n                    n._lon = zo._lon;\r\n                }\r\n            });\r\n        }\r\n        if (this.commonService.session.style.widgets['map-field-tract'] !== 'None') {\r\n            if (!this.commonService.temp.mapData.tracts) {\r\n                this.getMapData('tracts.csv', () => this.matchCoordinates(callback, true));\r\n                return;\r\n            }\r\n            var val = this.commonService.session.style.widgets['map-field-tract'];\r\n            this.nodes.forEach(n => {\r\n                var tract = this.commonService.temp.mapData.tracts.find(t => t.tract == n[val]);\r\n                if (tract) {\r\n                    n._lat = tract._lat;\r\n                    n._lon = tract._lon;\r\n                }\r\n            });\r\n        }\r\n\r\n        // debugger;\r\n\r\n        if (this.commonService.session.style.widgets['map-field-lat'] !== 'None' && this.commonService.session.style.widgets['map-field-lon'] !== 'None') {\r\n            var lat = this.commonService.session.style.widgets['map-field-lat'],\r\n                lon = this.commonService.session.style.widgets['map-field-lon'];\r\n\r\n\r\n            this.nodes.forEach(n => {\r\n\r\n\r\n                if (typeof n[lat] == 'string') {\r\n                    n._lat = (n[lat].includes('S') ? -1 : 1) * parseFloat(n[lat]);\r\n                } else {\r\n                    n._lat = n[lat];\r\n                }\r\n                if (typeof n[lon] == 'string') {\r\n                    n._lon = (n[lon].includes('W') ? -1 : 1) * parseFloat(n[lon]);\r\n                } else {\r\n                    n._lon = n[lon];\r\n                }\r\n            });\r\n        }\r\n        if (callback) callback();\r\n    }\r\n\r\n    getResidenceMarker(nodeColor: string, iconCode: string, location: LocationDetail, data: any): MarkerWithData {\r\n        const iconSettings = {\r\n            mapIconUrl: iconCode,\r\n            mapIconColor: nodeColor,\r\n        };\r\n\r\n        const divIcon = L.divIcon({\r\n            className: \"leaflet-data-marker\",\r\n            html: L.Util.template(iconSettings.mapIconUrl, iconSettings),\r\n            iconSize: [15, 15]\r\n        });\r\n\r\n        const locationDetail: LocationDetail = {\r\n            Name: location.Name,\r\n            FullAddress: location.FullAddress,\r\n            Date: location.Date ? new Date(location.Date) : undefined,\r\n            Latitude: location.Latitude,\r\n            Longitude: location.Longitude\r\n        }\r\n        data._jlat = location.Latitude;\r\n        data._jlon = location.Longitude;\r\n\r\n        let marker: MarkerWithData = L.marker([location.Latitude, location.Longitude], { icon: divIcon });\r\n        marker.data = data;\r\n        marker.locationDetail = locationDetail;\r\n\r\n        return marker;\r\n    }\r\n\r\n    getVenueMarker(nodeColor: string, iconCode: string, location: VenueLocationDetail, data: any): MarkerWithData | undefined {\r\n        const iconSettings = {\r\n            mapIconUrl: iconCode,\r\n            mapIconColor: nodeColor,\r\n        };\r\n\r\n        const divIcon = L.divIcon({\r\n            className: \"leaflet-data-marker\",\r\n            html: L.Util.template(iconSettings.mapIconUrl, iconSettings),\r\n            iconSize: [15, 15]\r\n        });\r\n\r\n        const locationDetail: LocationDetail = {\r\n            Name: location.Name,\r\n            FullAddress: location.FullAddress,\r\n            Date: location.DateOfContact ? new Date(location.DateOfContact) : undefined,\r\n            Latitude: location.Latitude,\r\n            Longitude: location.Longitude\r\n        }\r\n\r\n        if (locationDetail.Latitude != undefined && locationDetail.Longitude != undefined) {\r\n            let marker: MarkerWithData = L.marker([location.Latitude, location.Longitude], { icon: divIcon });\r\n            marker.data = data;\r\n            marker.locationDetail = locationDetail;\r\n\r\n            return marker;\r\n        }\r\n\r\n        return undefined\r\n    }\r\n\r\n    getExposureMarkers(nodeColor: string, iconCode: string, exposureProp: any, data: any): MarkerWithData[] {\r\n        const iconSettings = {\r\n            mapIconUrl: iconCode,\r\n            mapIconColor: nodeColor,\r\n        };\r\n\r\n        const divIcon = L.divIcon({\r\n            className: \"leaflet-data-marker\",\r\n            html: L.Util.template(iconSettings.mapIconUrl, iconSettings),\r\n            iconSize: [15, 15]\r\n        });\r\n\r\n        let markers: MarkerWithData[] = [];\r\n\r\n        let locationDetails: LocationDetail[] = [];\r\n\r\n        Object.keys(exposureProp).forEach(prop => {\r\n            const locationDetail: LocationDetail = {\r\n                Name: exposureProp[prop].Name,\r\n                FullAddress: exposureProp[prop].FullAddress,\r\n                Date: exposureProp[prop].ExposedDate ? new Date(exposureProp[prop].ExposedDate) : undefined,\r\n                Latitude: exposureProp[prop].Latitude,\r\n                Longitude: exposureProp[prop].Longitude\r\n            };\r\n\r\n            locationDetails.push(locationDetail);\r\n\r\n            if (locationDetail.Latitude != undefined && locationDetail.Longitude != undefined) {\r\n                let marker: MarkerWithData = L.marker([locationDetail.Latitude, locationDetail.Longitude], { icon: divIcon });\r\n                marker.data = data;\r\n                marker.locationDetail = locationDetail;\r\n\r\n                markers.push(marker);\r\n            }\r\n        })\r\n\r\n        return markers;\r\n    }\r\n\r\n    /*getGeospatialNodes(): MarkerWithData[] {\r\n        let returnMarkerWithData: MarkerWithData[] = [];\r\n\r\n        let n = this.nodes.length;\r\n\r\n        for (let i = 0; i < n; i++) {\r\n            const venueValue = this.nodes[i][this.SelectedVenueAddress];\r\n            const exposureValue = this.nodes[i][this.SelectedExposureAddress];\r\n\r\n            const d = this.nodes[i];\r\n            const nodeColor = this.colorIterator.next();\r\n            let venueMarkers: MarkerWithData[] = [];\r\n            let exposureMarkers: MarkerWithData[] = [];\r\n\r\n            if (venueValue) {\r\n                const venues: VenueLocationDetail[] = JSON.parse(venueValue);\r\n                if (venues && Array.isArray(venues))\r\n                    venueMarkers = venues.map(v => this.getVenueMarker(nodeColor, this.marker.triangle, v, d));\r\n                venueMarkers = venueMarkers.filter(x => x != undefined);\r\n            }\r\n\r\n            if (exposureValue) {\r\n                const exposures: any = JSON.parse(exposureValue);\r\n                if (exposures)\r\n                    exposureMarkers = this.getExposureMarkers(nodeColor, this.marker.square, exposures, d);\r\n            }\r\n\r\n            const residence = this.getResidenceNode(d);\r\n            if (residence && residence.Latitude != 0 && residence.Longitude != 0) {\r\n                returnMarkerWithData.push(this.getResidenceMarker(nodeColor, this.marker.circle, residence, d));\r\n            }\r\n\r\n            returnMarkerWithData = returnMarkerWithData.concat(venueMarkers.concat(exposureMarkers));\r\n        }\r\n\r\n        return returnMarkerWithData;\r\n    }\r\n\r\n    getResidenceNode(data: any): LocationDetail | undefined {\r\n        if (!data ||\r\n            isNaN(data.CasedemographicsLatitude) ||\r\n            isNaN(data.CasedemographicsLongitude) ||\r\n            data.CasedemographicsLatitude == '' ||\r\n            data.CasedemographicsLongitude == '') return undefined;\r\n\r\n        return {\r\n            Date: new Date(),\r\n            FullAddress: data.CasedemographicsFullAddress,\r\n            Latitude: data.CasedemographicsLatitude,\r\n            Longitude: data.CasedemographicsLongitude,\r\n            Name: 'Residence'\r\n        };\r\n    } */\r\n\r\n    /**\r\n     * Calls drawLeafletMapNodes() which removes all previous nodes from map, updates _j, _theta, _jlat, _jlon for each node\r\n     */\r\n    drawNodes(rerollNodes=true) {\r\n        this.drawLeafletMapNodes(rerollNodes);\r\n    }\r\n\r\n    /**\r\n     * Updates map by redrawing nodes\r\n     * @param rerollNodes if true rerolls node positioning\r\n     */\r\n    drawLeafletMapNodes(rerollNodes) {\r\n        if (rerollNodes) {\r\n            this.clearAllMarkers();\r\n            this.rerollNodes();\r\n        } else {\r\n            this.layers.removeNodes();\r\n        }\r\n\r\n        if (!this.commonService.session.style.widgets['map-node-show']) return;\r\n\r\n        if (this.SelectedGeospatialTypeVariable == 'On') {\r\n            //this.drawLeafletMapNodesGeospatial();\r\n            console.error('implement drawLeafletMapNodesGeospatial')\r\n        }\r\n        else {\r\n            this.drawLeafletMapNodesList();\r\n        }\r\n    }\r\n\r\n    /*drawLeafletMapNodesGeospatial() {\r\n        const opacity = 1 - this.commonService.session.style.widgets['map-node-transparency'];\r\n        const selectedColor = this.commonService.session.style.widgets['selected-color'];\r\n\r\n        this.colorIterator.reset();\r\n\r\n        const features: Layer[] = [];\r\n\r\n        let markers = this.getGeospatialNodes();\r\n        markers = markers.filter(x => x.locationDetail && (x.locationDetail.Name === 'Residence' || (x.locationDetail.Date >= this.dateFilterRangeDates[0] &&\r\n            x.locationDetail.Date <= this.dateFilterRangeDates[1])));\r\n\r\n        markers.forEach(m => {\r\n            m.on('mouseover', (e) => this.showNodeTooltip(e))\r\n                .on('mouseout', (e) => this.hideTooltip())\r\n                .on('click', (e) => this.clickHandler(e));\r\n\r\n            features.push(m);\r\n        })\r\n\r\n        if (this.commonService.session.style.widgets['map-collapsing-on']) {\r\n            this.layers.markerClusterGroup.addLayers(features);\r\n        } else {\r\n            this.layers.featureGroup = featureGroup(features);\r\n            this.lmap.addLayer(this.layers.featureGroup);\r\n        }\r\n    } */\r\n\r\n    /**\r\n     * Draws nodes on the map\r\n     */\r\n    drawLeafletMapNodesList() {\r\n        var fillcolor = this.commonService.session.style.widgets['node-color'],\r\n            colorVariable = this.commonService.session.style.widgets['node-color-variable'],\r\n            selectedColor = this.commonService.session.style.widgets['selected-color'],\r\n            opacity = 1 - this.commonService.session.style.widgets['map-node-transparency'];\r\n\r\n        var features: Layer[] = [];\r\n\r\n        var n = this.nodes.length;\r\n        for (var i = 0; i < n; i++) {\r\n            var d = this.nodes[i];\r\n            if (!d._jlat || !d._jlon || d.visible === false) continue;\r\n\r\n            let circleMarker: CircleWithData = L.circleMarker(L.latLng(d._jlat, d._jlon), {\r\n                color: d.selected ? selectedColor : '#ffffff',\r\n                opacity: opacity,\r\n                fillColor: colorVariable == 'None' ? fillcolor : this.commonService.temp.style.nodeColorMap(d[colorVariable]),\r\n                fillOpacity: opacity,\r\n                radius: 5\r\n            });\r\n\r\n            circleMarker.data = d;\r\n\r\n            circleMarker\r\n                .on('mouseover', (e) => this.showNodeTooltip(e))\r\n                .on('mouseout', (e) => this.hideTooltip())\r\n                .on('click', (e) => this.clickHandler(e));\r\n\r\n\r\n            features.push(circleMarker);\r\n        }\r\n\r\n        if (this.commonService.session.style.widgets['map-collapsing-on']) {\r\n            this.layers.markerClusterGroup.addLayers(features);\r\n        } else {\r\n            this.layers.featureGroup = featureGroup(features);\r\n            this.lmap.addLayer(this.layers.featureGroup);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Draws links on the map\r\n    */\r\n    drawLinks() {\r\n        this.layers.removeLinks();\r\n    \r\n        if (!this.commonService.session.style.widgets['map-link-show']) return;\r\n    \r\n        var lcv = this.commonService.session.style.widgets['link-color-variable'];\r\n        var opacity = 1 - this.commonService.session.style.widgets['map-link-transparency'];\r\n        var links = this.commonService.getVisibleLinks();\r\n    \r\n        var features: Layer[] = [];\r\n    \r\n        links.forEach((d) => {\r\n            if (!d.visible) return;\r\n            var source = this.nodes.find(node => node._id == d.source && node.visible);\r\n            var target = this.nodes.find(node => node._id == d.target && node.visible);\r\n    \r\n            if (source && target && source._jlat && source._jlon && target._jlat && target._jlon) {\r\n                // Handle multiple origins\r\n                if (d.origin && d.origin.length > 1) {\r\n                    let color1 = this.commonService.temp.style.linkColorMap(d.origin[0]);\r\n                    let color2 = this.commonService.temp.style.linkColorMap(d.origin[1]);\r\n    \r\n                    let dashPattern1 = '10, 10';\r\n                    let dashPattern2 = '0, 10, 10, 0';\r\n    \r\n                    let polyline1 = L.polyline([[source._jlat, source._jlon], [target._jlat, target._jlon]], {\r\n                        color: color1,\r\n                        dashArray: dashPattern1,\r\n                        opacity: opacity\r\n                    });\r\n    \r\n                    let polyline2 = L.polyline([[source._jlat, source._jlon], [target._jlat, target._jlon]], {\r\n                        color: color2,\r\n                        dashArray: dashPattern2,\r\n                        opacity: opacity\r\n                    });\r\n    \r\n                    features.push(polyline1);\r\n                    features.push(polyline2);\r\n                } else {\r\n                    // Single origin handling\r\n                    const connectorLine: PolyLineWithData = L.polyline([\r\n                        [source._jlat, source._jlon],\r\n                        [target._jlat, target._jlon]\r\n                    ], {\r\n                        color: lcv === \"None\" ?\r\n                            this.commonService.session.style.widgets['link-color'] :\r\n                            this.commonService.temp.style.linkColorMap(d[lcv]),\r\n                        opacity: opacity\r\n                    });\r\n    \r\n                    connectorLine.data = d;\r\n    \r\n                    features.push(connectorLine);\r\n                }\r\n            }\r\n        });\r\n    \r\n        this.layers.links = featureGroup(features);\r\n        this.lmap.addLayer(this.layers.links);\r\n\r\n        if (this.commonService.session.style.widgets['map-node-show']) {\r\n            if (this.commonService.session.style.widgets['map-collapsing-on']) {\r\n                // Not sure how to move collapsed nodes to front with bringToFront(), they use markerClusterGroup (from leaflet.markercluster plugin) instead of featureGroup (from base leaflet)\r\n                this.drawNodes(false)\r\n            } else {\r\n                this.layers.featureGroup.bringToFront();\r\n            }\r\n        }\r\n    }\r\n    \r\n\r\n    showNodeTooltip(e) {\r\n        var data = e.target.data;\r\n        var locationData = e.target.locationDetail;\r\n        var variable = this.commonService.session.style.widgets['map-node-tooltip-variable'];\r\n        if (variable !== 'None' && data[variable]) {\r\n\r\n            let htmlText = data[variable];\r\n            if (locationData) {\r\n                htmlText = `<p><strong>${variable}:</strong> ${data[variable]}</p>`\r\n                htmlText += `<p><strong>Location:</strong> ${locationData.Name}</p>`\r\n                htmlText += `<p><strong>Address:</strong> ${locationData.FullAddress}</p>`\r\n            }\r\n            d3.select(this.mapTooltip)\r\n                .html(htmlText)\r\n                .style('position', 'absolute')\r\n                .style('left', (e.containerPoint.x - 50) + 'px')\r\n                .style('top', (e.containerPoint.y - 50) + 'px')\r\n                .style('visibility', 'visible')\r\n                .style('z-index', 1001)\r\n                .transition().duration(100)\r\n                .style('opacity', 1)\r\n                ;\r\n        }\r\n    }\r\n\r\n    showLinkTooltip(e) {\r\n        var d = e.layer.data;\r\n        var v = this.commonService.session.style.widgets['map-link-tooltip-variable'];\r\n        if (v !== 'None' && d[v]) {\r\n            d3.select(this.mapTooltip)\r\n                .html(d[v])\r\n                .style('left', (e.originalEvent.pageX + 8) + 'px')\r\n                .style('top', (e.originalEvent.pageY + 18) + 'px')\r\n                .style('z-index', 1001)\r\n                .transition().duration(100)\r\n                .style('opacity', 1);\r\n        }\r\n    }\r\n\r\n    hideTooltip() {\r\n        var tooltip = d3.select(this.mapTooltip);\r\n        tooltip\r\n            .transition().duration(100)\r\n            .style('opacity', 0)\r\n            .on('end', () => tooltip.style('z-index', -1));\r\n    }\r\n\r\n    /**\r\n     * Clicking on a node updates that status of node selected properties. Other nodes will be unselected and then triggers a document node-selected event\r\n     */\r\n    clickHandler(e) {\r\n        var node = e.sourceTarget.data;\r\n        var d = this.visuals.gisMap.commonService.session.data.nodes.find(d => d._id == node._id);\r\n        if (!e.originalEvent.ctrlKey) {\r\n            this.visuals.gisMap.commonService.session.data.nodes\r\n                .filter(node => node._id !== d._id)\r\n                .forEach(node => node.selected = false);\r\n        }\r\n        d.selected = !d.selected;\r\n        $(document).trigger('node-selected')\r\n        //window.dispatchEvent(new Event('node-selected'));\r\n    }\r\n\r\n    /**\r\n     * @returns an array [X, Y] of the position of mouse relative to alignment view. Global position (i.e. d3.event.pageX) doesn't work for a dashboard\r\n     */  \r\n    getRelativeMousePosition(e) {\r\n        let rect = document.querySelector('mapcomponent').getBoundingClientRect();\r\n        let X = e.pageX - rect.left;\r\n        let Y = e.pageY - rect.top; \r\n        return [X, Y];\r\n    }\r\n\r\n    resetStack() {\r\n        //Tile Layers, in reverse order:\r\n        if (this.layers.satellite && this.commonService.session.style.widgets['map-satellite-show']) this.layers.satellite.bringToBack();\r\n        if (this.layers.basemap && this.commonService.session.style.widgets['map-basemap-show']) this.layers.basemap.bringToBack();\r\n\r\n        //Background Layers, in order:\r\n        if (this.layers.countries && this.commonService.session.style.widgets['map-countries-show']) this.layers.countries.bringToFront();\r\n        if (this.layers.states && this.commonService.session.style.widgets['map-states-show']) this.layers.states.bringToFront();\r\n        if (this.layers.counties && this.commonService.session.style.widgets['map-counties-show']) this.layers.counties.bringToFront();\r\n\r\n        //User Layers:\r\n        Object.keys(this.layers)\r\n            .filter(l => !this.commonService.includes(['countries', 'states', 'counties', 'satellite', 'basemap', 'links', 'nodes'], l))\r\n            .forEach(l => this.layers[l].bringToFront());\r\n\r\n\r\n        //Foreground Layers, in order:\r\n        if (this.layers.links && this.commonService.session.style.widgets['map-link-show']) this.layers.links.bringToFront();\r\n        if (this.layers.nodes() && this.commonService.session.style.widgets['map-node-show']) {\r\n            if (this.commonService.session.style.widgets['map-collapsing-on']) {\r\n                this.drawNodes(false); //This did not work with clusters//this.layers.nodes().bringToFront();\r\n            } else {\r\n                this.layers.nodes().bringToFront()\r\n            }\r\n        }\r\n    }\r\n\r\n    rerollCheck() {\r\n        return this.nodes.some(node => node._theta == undefined || node._j == undefined);\r\n    }\r\n\r\n    /**\r\n     * Reroll and jitter function for an individual node\r\n     */\r\n    rerollNodeAndJitter(node) {\r\n        node._theta = this.commonService.r01() * Math.PI * 2;\r\n        node._j = this.commonService.r01();\r\n\r\n        var v = this.commonService.session.style.widgets['map-node-jitter'] == -2 ? 0 : Math.pow(2, this.commonService.session.style.widgets['map-node-jitter']);\r\n        node._jlon = parseFloat(node._lon) + v * node._j * Math.cos(node._theta);\r\n        node._jlat = parseFloat(node._lat) + v * node._j * Math.sin(node._theta);\r\n    }\r\n\r\n    /**\r\n     * Updates _jlon and _jLat for each node using _theta & _j values from each node and widget['map-node-jitter']\r\n     */\r\n    jitter() {\r\n        //debugger;\r\n        var v = this.commonService.session.style.widgets['map-node-jitter'] == -2 ? 0 : Math.pow(2, this.commonService.session.style.widgets['map-node-jitter']);\r\n        var n = this.nodes.length;\r\n        for (var i = 0; i < n; i++) {\r\n            var node = this.nodes[i];\r\n            this.nodes[i]._jlon = parseFloat(node._lon) + v * node._j * Math.cos(node._theta);\r\n            this.nodes[i]._jlat = parseFloat(node._lat) + v * node._j * Math.sin(node._theta);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates _theta and _j for each node. Then calls jitter() which uses those values to upate _jlon and _jlat\r\n     */\r\n    rerollNodes() {\r\n        //debugger;\r\n\r\n        this.nodes.forEach((node) => {\r\n            node._theta = this.commonService.r01() * Math.PI * 2;\r\n            node._j = this.commonService.r01();\r\n        });\r\n        this.jitter();\r\n    }\r\n\r\n    /*makeGeoJSON() {\r\n        var features = [];\r\n        var jitter = this.commonService.session.style.widgets['map-node-jitter'] > 0;\r\n        this.nodes.forEach((d) => {\r\n            if (d._lat && d._lon) {\r\n                features.push({\r\n                    type: 'Feature',\r\n                    geometry: {\r\n                        type: 'Point',\r\n                        coordinates: jitter ? [d._lon + d._jlon, d._lat + d._jlat] : [d._lon, d._lat]\r\n                    },\r\n                    properties: d\r\n                });\r\n            }\r\n        });\r\n        this.commonService.getVisibleLinks().forEach((d) => {\r\n            if (!d.visible) return;\r\n            var source = this.nodes.find(node => node.id == d.source);\r\n            var target = this.nodes.find(node => node.id == d.target);\r\n            if (source && target) {\r\n                if (source._lat && source._lon && target._lat && target._lon) {\r\n                    features.push({\r\n                        type: 'Feature',\r\n                        geometry: {\r\n                            type: 'LineString',\r\n                            coordinates: jitter ? [\r\n                                [source._lon + source._jlon, source._lat + source._jlat],\r\n                                [target._lon + target._jlon, target._lat + target._jlat]\r\n                            ] : [\r\n                                [source._lon, source._lat],\r\n                                [target._lon, target._lat]\r\n                            ]\r\n                        },\r\n                        properties: d\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        return {\r\n            type: 'FeatureCollection',\r\n            features: features\r\n        };\r\n    } */\r\n\r\n    openSettings() {\r\n        this.NodeMapSettingsExportDialogSettings.setVisibility(true);\r\n    }\r\n\r\n    openExport() {\r\n        this.ShowGEOMapExportPane = true;\r\n\r\n        this.visuals.microbeTrace.GlobalSettingsDialogSettings.setStateBeforeExport();\r\n        this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.setStateBeforeExport();\r\n        this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.setStateBeforeExport();\r\n        this.visuals.gisMap.NodeMapSettingsExportDialogSettings.setStateBeforeExport();\r\n    }\r\n\r\n    openCenter() {\r\n        this.centerMap();\r\n    }\r\n\r\n    //openPinAllNodes() {\r\n\r\n    //}\r\n\r\n    openRefreshScreen() {\r\n        this.centerMap();\r\n    }\r\n\r\n    openSelectDataSetScreen() {\r\n\r\n    }\r\n\r\n    updateNodeColors() {\r\n        this.drawNodes(false);\r\n        this.drawLinks();\r\n    }\r\n\r\n    updateVisualization() {\r\n        this.drawNodes(false);\r\n        this.drawLinks();\r\n    }\r\n\r\n    applyStyleFileSettings() {\r\n        this.loadSettings();\r\n        //this.widgets = (window as any).context.commonService.session.style.widgets;\r\n    }\r\n\r\n    updateLinkColor() {\r\n        this.drawLinks();\r\n    }\r\n\r\n    onRecallSession() {\r\n        // nothing to do here. loadSettings is called when the map is ready (onMapReady)\r\n    }\r\n\r\n    onLoadNewData() {\r\n        this.onDataChange(undefined);\r\n    }\r\n\r\n    onFilterDataChange() {\r\n        this.onDataChange(undefined);\r\n    }\r\n\r\n    loadSettings() {\r\n        //Components|Online|Basemap\r\n        this.SelectedBasemapTypeVariable = this.commonService.session.style.widgets['map-basemap-show'] ? 'Show' : 'Hide';\r\n        if (this.SelectedBasemapTypeVariable === 'Show') {\r\n            this.onBasemapChange(this.SelectedBasemapTypeVariable, true);\r\n        }\r\n\r\n        //Components|Online|Satellite\r\n        this.SelectedSatelliteTypeVariable = this.commonService.session.style.widgets['map-satellite-show'] ? 'Show' : 'Hide';\r\n        if (this.SelectedSatelliteTypeVariable === 'Show') {\r\n            this.onSatelliteChange(this.SelectedSatelliteTypeVariable, true);\r\n        }\r\n\r\n        //Components|Network|Nodes\r\n        this.SelectedNodesTypeVariable = this.commonService.session.style.widgets['map-node-show'] ? 'Show' : 'Hide';\r\n        this.onMapNodeShowHideChange(this.SelectedNodesTypeVariable);\r\n\r\n        //Components|Network|Links\r\n        this.SelectedLinksTypeVariable = this.commonService.session.style.widgets['map-link-show'] ? 'Show' : 'Hide';\r\n        this.onMapLinksShowHideChange(this.SelectedLinksTypeVariable);\r\n\r\n        //Components|Offline|Countries\r\n        this.SelectedCountriesTypeVariable = this.commonService.session.style.widgets['map-countries-show'] ? 'Show' : 'Hide';\r\n        this.onCountriesShowHidChange(this.SelectedCountriesTypeVariable);\r\n\r\n        //Components|Offline|States\r\n        this.SelectedStatesTypeVariable = this.commonService.session.style.widgets['map-states-show'] ? 'Show' : 'Hide';\r\n        this.onStatesShowHideChange(this.SelectedStatesTypeVariable);\r\n\r\n        //Components|Offline|Counties\r\n        this.SelectedCountiesTypeVariable = this.commonService.session.style.widgets['map-counties-show'] ? 'Show' : 'Hide';\r\n        this.onCountiesShowHideChange(this.SelectedCountiesTypeVariable);\r\n\r\n        //Data|Geospatial\r\n        this.SelectedGeospatialTypeVariable = this.commonService.session.style.widgets['map-geospatial-type-on'] ? 'On' : 'Off';\r\n        this.onGeospatialTypeChange(undefined);\r\n\r\n        //Data|Latitude\r\n        this.SelectedLatitude = this.commonService.session.style.widgets['map-field-lat'];\r\n\r\n        //Data|Longitude\r\n        this.SelectedLongitude = this.commonService.session.style.widgets['map-field-lon'];\r\n\r\n        //Data|Census Tract\r\n        this.SelectedCensusTract = this.commonService.session.style.widgets['map-field-tract'];\r\n\r\n        //Data|Zipcode\r\n        this.SelectedZipCode = this.commonService.session.style.widgets['map-field-zipcode'];\r\n\r\n        //Data|County\r\n        this.SelectedCounty = this.commonService.session.style.widgets['map-field-county'];\r\n\r\n        //Data|State\r\n        this.SelectedState = this.commonService.session.style.widgets['map-field-state'];\r\n\r\n        //Data|Country\r\n        this.SelectedCountry = this.commonService.session.style.widgets['map-field-country'];\r\n\r\n        //Data|Country\r\n        this.SelectedResidenceAddress = this.commonService.session.style.widgets['map-field-residence-address'];\r\n\r\n        //Data|Country\r\n        this.SelectedVenueAddress = this.commonService.session.style.widgets['map-field-venue-address'];\r\n\r\n        //Data|Country\r\n        this.SelectedExposureAddress = this.commonService.session.style.widgets['map-field-exposure-address'];\r\n\r\n        this.onDataChange(undefined);\r\n\r\n\r\n        //Nodes|Collapsing\r\n        this.SelectedNodeCollapsingTypeVariable = this.commonService.session.style.widgets['map-collapsing-on'] ? 'On' : 'Off';\r\n        this.onNodeCollapsingChange(undefined);\r\n\r\n        //Nodes|Transparency\r\n        this.SelectedNodeTransparencyVariable = this.commonService.session.style.widgets['map-node-transparency'];\r\n        this.onNodeTransparencyChange(this.SelectedNodeTransparencyVariable);\r\n\r\n        //Nodes|Jitter\r\n        this.SelectedNodeJitterVariable = this.commonService.session.style.widgets['map-node-jitter'];\r\n        this.onNodeJitterChange(this.SelectedNodeJitterVariable);\r\n\r\n        //Nodes|Tooltip\r\n        this.SelectedNodeTooltipVariable = this.commonService.session.style.widgets['map-node-tooltip-variable'];\r\n        this.onNodeToolTipChange(this.SelectedNodeTooltipVariable);\r\n\r\n\r\n        //Links|Transparency\r\n        this.SelectedLinkTransparencyVariable = this.commonService.session.style.widgets['map-link-transparency'];\r\n        this.onLinkTransparencyChange(this.SelectedLinkTransparencyVariable);\r\n\r\n        //Links|Tooltip\r\n        this.SelectedLinkTooltipVariable = this.commonService.session.style.widgets['map-link-tooltip-variable'];\r\n        this.onLinkToolTipChange(this.SelectedLinkTooltipVariable);\r\n    }\r\n}\r\n\r\n//MOVE CLASSES TO NEW FILE\r\nclass MapLayers {\r\n    basemap!: TileLayer;\r\n    satellite!: TileLayer;\r\n    featureGroup: FeatureGroup = featureGroup();\r\n    markerClusterGroup: MarkerClusterGroup = markerClusterGroup();\r\n    links: FeatureGroup = featureGroup();\r\n    countries: L.GeoJSON<any> = geoJSON();\r\n    states: L.GeoJSON<any> = geoJSON();\r\n    counties: L.GeoJSON<any> = geoJSON();\r\n\r\n    public nodes(): FeatureGroup | MarkerClusterGroup {\r\n        if (this.markerClusterGroup.getLayers().length) return this.markerClusterGroup;\r\n        return this.featureGroup;\r\n    }\r\n\r\n    public removeNodes() {\r\n        this.featureGroup.clearLayers();\r\n        this.markerClusterGroup.clearLayers();\r\n    }\r\n\r\n    public removeLinks() {\r\n        this.links.clearLayers();\r\n    }\r\n}\r\n\r\nclass MarkerWithData extends L.Marker<any>{\r\n    public data?: any;\r\n    public locationDetail?: LocationDetail\r\n    public nodeType?: 'Residence' | 'Exposure' | 'Venue';\r\n}\r\n\r\nclass CircleWithData extends L.CircleMarker<any>{\r\n    public data?: any;\r\n}\r\n\r\nclass PolyLineWithData extends L.Polyline {\r\n    public data?: any;\r\n}\r\n\r\ninterface VenueLocationDetail {\r\n    City: string,\r\n    Country: string,\r\n    County: string,\r\n    DateOfContact: string,\r\n    FullAddress: string,\r\n    Latitude: number,\r\n    Longitude: number,\r\n    Name: string,\r\n    State: string,\r\n    StreetAddress: string,\r\n    Zipcode: string\r\n}\r\n\r\ninterface LocationDetail {\r\n    FullAddress: string | undefined,\r\n    Name: string | undefined,\r\n    Latitude: number | undefined,\r\n    Longitude: number | undefined,\r\n    Date: Date | undefined\r\n}\r\n\r\nexport namespace MapComponent {\r\n    export const componentTypeName = 'Map';\r\n}","import { Injector, Component, Output, EventEmitter, OnInit,\r\n  ElementRef, ChangeDetectorRef, Inject } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { CommonService } from '@app/contactTraceCommonServices/common.service';\r\nimport * as saveAs from 'file-saver';\r\nimport * as domToImage from 'html-to-image';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { DialogSettings } from '@app/helperClasses/dialogSettings';\r\nimport * as _ from 'lodash';\r\nimport { MicrobeTraceNextVisuals } from '@app/microbe-trace-next-plugin-visuals';\r\nimport { CustomShapes } from '@app/helperClasses/customShapes';\r\nimport TidyTree from './tidytree';\r\nimport * as d3 from 'd3';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\n\r\n\r\n/**\r\n * @title PhylogeneticComponent\r\n */\r\n@Component({\r\n  selector: 'PhylogeneticComponent',\r\n  templateUrl: './phylogenetic-plugin.component.html',\r\n  styleUrls: ['./phylogenetic-plugin.component.scss']\r\n})\r\nexport class PhylogeneticComponent extends BaseComponentDirective implements OnInit {\r\n\r\n  @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n  viewActive: boolean = true;\r\n  svgStyle: object = {\r\n    height: '0px',\r\n    width: '1000px'\r\n  };\r\n\r\n  private customShapes: CustomShapes = new CustomShapes();\r\n\r\n  ShowNetworkAttributes = false;\r\n  ShowStatistics = false;\r\n  ShowPhylogeneticExportPane = false;\r\n  ShowPhylogeneticSettingsPane = false;\r\n  IsDataAvailable = false;\r\n  svg: any = {};\r\n  settings: object = this.commonService.session.style.widgets;\r\n  radToDeg: number = (180 / Math.PI);\r\n  selected: boolean = false;\r\n  multidrag = false;\r\n  zoom: number = 1;\r\n  FieldList: SelectItem[] = [];\r\n  ToolTipFieldList: SelectItem[] = [];\r\n\r\n\r\n  // Tree Tab\r\n  TreeLayouts: object = [\r\n    { label: 'Horizontal', value: 'horizontal' },\r\n    { label: 'Vertical', value: 'vertical' },\r\n    { label: 'Circular', value: 'circular' },\r\n  ];\r\n  SelectedTreeLayoutVariable = 'horizontal';\r\n  TreeModes: object = [\r\n    { label: 'Smooth', value: 'smooth' },\r\n    { label: 'Square', value: 'square' },\r\n    { label: 'Straight', value: 'straight' },\r\n  ];\r\n  SelectedTreeModeVariable = 'square';\r\n  TreeTypes: object = [\r\n    { label: 'Weighted', value: 'weighted' },\r\n    { label: 'Unweighted (Tree)', value: 'tree' },\r\n    { label: 'Dendrogram', value: 'dendrogram' },\r\n  ];\r\n  SelectedTreeTypeVariable = 'weighted';  // 'weighted';\r\n  SelectedVerticalStretchVariable = 1;\r\n  SelectedHorizontalStretchVariable = 1;\r\n\r\n\r\n  // Leaves Tab\r\n  SelectedLeafLabelShowVariable = true;\r\n  SelectedLeafLabelVariable = 'None';\r\n  LeafLabelFieldList: object[] = [];\r\n  SelectedLeafLabelSizeVariable = 12;\r\n  SelectedLeafTooltipShowVariable = true;\r\n  SelectedLeafTooltipVariable = 'id';\r\n  LeafTooltipFieldList: object[] = [];\r\n  SelectedLeafNodeShowVariable = true;\r\n  SelectedLeafNodeSizeVariable = 5;\r\n  SelectedLeafNodeColorVariable = this.settings['node-color'];\r\n  SelectedSelectedLeafNodeColorVariable = this.settings['selected-color'];\r\n\r\n  // Branch Tab\r\n  SelectedBranchNodeShowVariable = false;\r\n  SelectedBranchNodeSizeVariable = 5;\r\n  SelectedBranchNodeColorVariable = this.settings['node-color'];\r\n  SelectedBranchSizeVariable = 3;\r\n  SelectedBranchLabelSizeVariable = 12;\r\n  SelectedLinkColorVariable = this.settings['link-color'];\r\n  SelectedBranchLabelShowVariable = false;\r\n  SelectedBranchDistanceShowVariable = false;\r\n  SelectedBranchDistanceSizeVariable = 12;\r\n  SelectedBranchTooltipShowVariable = false;\r\n\r\n  hideShowOptions: object = [\r\n    { label: 'Hide', value: false },\r\n    { label: 'Show', value: true }\r\n  ];\r\n\r\n  // Export Settings\r\n  private isExportClosed = false;\r\n  public isExporting = false;\r\n\r\n  SelectedTreeImageFilenameVariable = 'default_tree';\r\n  SelectedNewickStringFilenameVariable = 'default_tree.nwk';\r\n\r\n  NetworkExportFileTypeList: object = [\r\n    { label: 'png', value: 'png' },\r\n    { label: 'jpeg', value: 'jpeg' },\r\n    { label: 'svg', value: 'svg' }\r\n  ];\r\n\r\n  SelectedNetworkExportFileTypeListVariable = 'png';\r\n  SelectedNetworkExportScaleVariable: number = 1;\r\n  SelectedNetworkExportQualityVariable: number = 0.92;\r\n  CalculatedResolutionWidth: number = 1918;\r\n  CalculatedResolutionHeight: number = 909;\r\n  CalculatedResolution: string = ((this.CalculatedResolutionWidth * this.SelectedNetworkExportScaleVariable) + ' x ' + (\r\n    this.CalculatedResolutionHeight * this.SelectedNetworkExportScaleVariable) + 'px');\r\n\r\n\r\n  ShowAdvancedExport = true;\r\n\r\n  PhylogeneticTreeExportDialogSettings: DialogSettings = new DialogSettings('#phylotree-settings-pane', false);\r\n\r\n  ContextSelectedNodeAttributes: {attribute: string, value: string}[] = [];\r\n  tree: any = null;\r\n\r\n  private visuals: MicrobeTraceNextVisuals;\r\n\r\n\r\n  constructor(injector: Injector,\r\n              private eventManager: EventManager,\r\n              public commonService: CommonService,\r\n              @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n              elRef: ElementRef,\r\n              private cdref: ChangeDetectorRef,\r\n              private gtmService: GoogleTagManagerService) {\r\n\r\n    super(elRef.nativeElement);\r\n\r\n    this.visuals = commonService.visuals;\r\n    this.commonService.visuals.phylogenetic = this;\r\n  }\r\n\r\n  openTree = () => {\r\n    /*\r\n    if (this.visuals.phylogenetic.commonService.session.data.newickString) {\r\n      this.tree = new TidyTree(this.visuals.phylogenetic.commonService.session.data.tree,\r\n                               this.getTreeOptions(),\r\n                               this.getTreeHandlers());\r\n      console.log(this.visuals.phylogenetic.commonService.session.data.tree);\r\n      console.log(this.tree);\r\n      this.hideTooltip();\r\n      this.styleTree();\r\n    } else {\r\n    */\r\n      //@ts-ignore\r\n      if (this.visuals.phylogenetic.commonService.session.data.hasOwnProperty(\"newickString\") && this.visuals.phylogenetic.commonService.session.data.newickString) {\r\n        //@ts-ignore\r\n        const newickString = this.visuals.phylogenetic.commonService.session.data.newickString;\r\n        const tree = this.buildTree(newickString);\r\n        this.tree = tree;\r\n        this.commonService.visuals.phylogenetic.tree = tree;\r\n        this.hideTooltip();\r\n        this.styleTree();\r\n      } else {\r\n          const newickString = this.commonService.computeTree();\r\n          newickString.then((x) => {\r\n            const tree = this.buildTree(x);\r\n            this.tree = tree;\r\n            this.commonService.visuals.phylogenetic.tree = tree;\r\n            this.hideTooltip();\r\n            this.styleTree();\r\n        });\r\n      }\r\n      // d3.select('svg#network').exit().remove();\r\n      // this.visuals.phylogenetic.svg = d3.select('svg#network').append('g');\r\n\r\n    this.LeafLabelFieldList.push({ label: 'None', value: 'None' });\r\n    console.log(\"getting node fields\")\r\n    this.commonService.session.data['nodeFields'].map((d, i) => {\r\n\r\n      this.visuals.phylogenetic.LeafLabelFieldList.push(\r\n        {\r\n          label: this.visuals.phylogenetic.commonService.capitalize(d.replace('_', '')),\r\n          value: d\r\n        });\r\n    });\r\n    console.log(this.visuals.phylogenetic.LeafLabelFieldList);\r\n\r\n   // }\r\n  }\r\n\r\n  styleTree = () => {\r\n    this.svg = d3.select('#tidytree');\r\n    let nodes = this.visuals.phylogenetic.commonService.session.data;\r\n    nodes = this.svg.select('g.nodes').selectAll('g').data(nodes, d => d.id)\r\n      .join(\r\n        enter => {\r\n          const g = enter.append('g')\r\n            .attr('tabindex', '0')\r\n            .on('mouseenter focusin', (x) => this.showTooltip(x))\r\n            .on('mouseout focusout', (x) => this.hideTooltip())\r\n            .on('contextmenu', (x) => this.showContextMenu(x))\r\n            .on('click', (x) => this.clickHandler(x))\r\n            .on('keydown', n => {\r\n              if ((d3 as any).event.code === 'Space') this.clickHandler(n);\r\n              if ((d3 as any).event.shiftKey && (d3 as any).event.key === 'F10') this.showContextMenu(n);\r\n            });\r\n          g.append('path')\r\n            .style('stroke', 'black')\r\n            .style('stroke-width', '2px');\r\n          g.append('text')\r\n            .attr('dy', 5)\r\n            .attr('dx', 8);\r\n          return g;\r\n        }\r\n      );\r\n    this.tree.setBranchLabels(this.SelectedBranchLabelShowVariable);\r\n    this.tree.eachBranchLabel(this.styleBranchLabel);\r\n    this.tree.setBranchNodes(this.SelectedBranchNodeShowVariable);\r\n    this.tree.eachBranchNode(this.styleBranchNode);\r\n    this.tree.setBranchDistances(this.SelectedBranchDistanceShowVariable);\r\n    this.tree.eachBranchDistance(this.styleBranchDistance);\r\n    this.tree.setLeafNodes(this.SelectedLeafNodeSizeVariable);\r\n    this.tree.eachLeafNode(this.styleLeafNode);\r\n    this.tree.setLeafLabels(this.SelectedLeafLabelShowVariable);\r\n    this.tree.eachLeafLabel(this.styleLeafLabel);\r\n    const branchEls = document.querySelectorAll('g.tidytree-link > path');\r\n    this.svg.style('height', '88vh;');\r\n    branchEls.forEach(this.styleBranch);\r\n    this.svg.style('background-color', '#ffffff');\r\n  }\r\n\r\n  styleBranch = (el) => {\r\n    d3.select(el).style('stroke', this.SelectedLinkColorVariable);\r\n    d3.select(el).style('stroke-width', `${this.SelectedBranchSizeVariable}px`);\r\n  }\r\n\r\n  styleBranchLabel = (label, data) => {\r\n    d3.select(label).style('font-size', `${this.SelectedBranchLabelSizeVariable}px`);\r\n  }\r\n\r\n  styleBranchNode = (node, data) => {\r\n    d3.select(node).attr('r', this.SelectedBranchNodeSizeVariable);\r\n    d3.select(node).style('fill', this.SelectedBranchNodeColorVariable);\r\n  }\r\n\r\n  styleBranchDistance = (label, data) => {\r\n    d3.select(label).style('font-size', `${this.SelectedBranchDistanceSizeVariable}px`);\r\n  }\r\n\r\n\r\n  styleLeafLabel = (label, data) => {\r\n    d3.select(label).style('font-size', `${this.SelectedLeafLabelSizeVariable}px`);\r\n  }\r\n\r\n  styleLeafNode = (node, data) => {\r\n    let nodes = this.visuals.phylogenetic.commonService.session.data.nodes;\r\n    const variable = this.visuals.phylogenetic.commonService.session.style.widgets['node-color-variable'];\r\n    d3.select(node).attr('r', this.SelectedLeafNodeSizeVariable);\r\n    if (variable === 'None') {\r\n      d3.select(node).style('fill', this.SelectedLeafNodeColorVariable);\r\n    } else {\r\n      d3.select(node).style('fill',  d => {\r\n        const node_values = nodes.filter(m => {\r\n          if (m._id === (d as any).data.id) {\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n        const node_color = this.visuals.phylogenetic.commonService.temp.style.nodeColorMap(node_values[0][variable]);\r\n        return node_color;\r\n      });\r\n      // d3.select(node).style('opacity', d => this.visuals.phylogenetic.commonService.temp.style.nodeAlphaMap(d[variable]));\r\n\r\n        //  this.context.microbeTrace.generateNodeColorTable(\"#node-color-table-bottom\", false);\r\n    }\r\n\r\n\r\n  }\r\n\r\n  buildTree = (newick) => {\r\n    const tree = new TidyTree(\r\n      newick ? newick : this.tree.data.clone(),\r\n      this.getTreeOptions(),\r\n      this.getTreeHandlers(),\r\n    );\r\n    return tree;\r\n  }\r\n\r\n  getTreeOptions = () => {\r\n    const treeOpts = {\r\n      parent: '#phylocanvas',\r\n      layout: this.SelectedTreeLayoutVariable,\r\n      mode: this.SelectedTreeModeVariable,\r\n      type: this.SelectedTreeTypeVariable,\r\n      leafNodes: this.SelectedLeafNodeShowVariable,\r\n      branchNodes:  this.SelectedBranchNodeSizeVariable,\r\n      leafLabels: this.SelectedLeafLabelSizeVariable,\r\n      branchLabels: this.SelectedBranchLabelSizeVariable,\r\n      branchDistances: this.SelectedBranchDistanceSizeVariable,\r\n      ruler: true,\r\n      animation: parseFloat('0'),  // range 0-2000 in steps of 10\r\n      margin: [10, 10, 70, 30]\r\n    };\r\n    return treeOpts;\r\n  }\r\n\r\n  getTreeHandlers = () => {\r\n    const handlers = {\r\n      contextmenu: this.showContextMenu,\r\n      showtooltip: this.showTooltip,\r\n      hidetooltip: this.hideTooltip\r\n    };\r\n    return handlers;\r\n  }\r\n\r\n  ngOnInit() {\r\n    let that = this;\r\n\r\n    this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/phylogenetic\",\r\n            page_title: \"Phylogenetic Tree View\"\r\n        });\r\n\r\n    $( document ).on( \"node-selected\", function( ) {\r\n      that.updateNodeColors();\r\n    });\r\n\r\n    \r\n    this.goldenLayoutComponentResize()\r\n    this.openTree();\r\n\r\n    this.container.on('resize', () => { this.goldenLayoutComponentResize() })\r\n    this.container.on('hide', () => { \r\n      this.viewActive = false; \r\n      this.cdref.detectChanges();\r\n    })\r\n    this.container.on('show', () => { \r\n      this.viewActive = true; \r\n      this.cdref.detectChanges();\r\n    })\r\n  }\r\n\r\n  goldenLayoutComponentResize() {\r\n    $('#phylocanvas').height($('phylogeneticcomponent').height()-19);\r\n    $('#phylocanvas').width($('phylogeneticcomponent').width()-1)\r\n  }\r\n\r\n  InitView() {\r\n    this.visuals.phylogenetic.IsDataAvailable = (\r\n      this.visuals.phylogenetic.commonService.session.data.nodes.length === 0 ? false : true\r\n    );\r\n\r\n    if (this.visuals.phylogenetic.IsDataAvailable === true && this.visuals.phylogenetic.zoom == null) {\r\n      // d3.select('svg#network').exit().remove();\r\n      // this.visuals.phylogenetic.svg = d3.select('svg#network').append('g');\r\n\r\n      this.LeafLabelFieldList.push({ label: 'None', value: 'None' });\r\n      console.log(\"getting node fields\")\r\n      this.commonService.session.data['nodeFields'].map((d, i) => {\r\n\r\n        this.visuals.phylogenetic.LeafLabelFieldList.push(\r\n          {\r\n            label: this.visuals.phylogenetic.commonService.capitalize(d.replace('_', '')),\r\n            value: d\r\n          });\r\n      });\r\n      console.log(this.visuals.phylogenetic.LeafLabelFieldList);\r\n    }\r\n  }\r\n\r\n  openSettings() {\r\n    this.visuals.phylogenetic.PhylogeneticTreeExportDialogSettings.setVisibility(true);\r\n    // this.context.twoD.ShowStatistics = !this.context.twoD.Show2DSettingsPane;\r\n  }\r\n\r\n\r\n  openExport() {\r\n    this.ShowPhylogeneticExportPane = true;\r\n\r\n    this.visuals.microbeTrace.GlobalSettingsDialogSettings.setStateBeforeExport();\r\n    this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.setStateBeforeExport();\r\n    this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.setStateBeforeExport();\r\n    this.isExportClosed = false;\r\n\r\n  }\r\n\r\n  openCenter() {\r\n    const thisTree = this.commonService.visuals.phylogenetic.tree;\r\n    thisTree.recenter()\r\n      .redraw();\r\n  }\r\n\r\n  //openPinAllNodes() {\r\n\r\n\r\n  //}\r\n\r\n  openRefreshScreen() {\r\n\r\n  }\r\n\r\n  openSelectDataSetScreen() {\r\n\r\n  }\r\n\r\n  onTreeLayoutChange(event) {\r\n    this.SelectedTreeLayoutVariable = event;\r\n    this.tree.setLayout(event);\r\n  }\r\n\r\n  onTreeModeChange(event) {\r\n    this.SelectedTreeModeVariable = event;\r\n    this.tree.setMode(event);\r\n  }\r\n\r\n  onTreeTypeChange(event) {\r\n    this.SelectedTreeTypeVariable = event;\r\n    this.tree.setType(event);\r\n  }\r\n\r\n  onLeafLabelVariableChange(event) {\r\n    this.SelectedLeafLabelVariable = event;\r\n    let labelVar = event;\r\n    this.tree.eachLeafLabel(label => {\r\n      d3.select(label).text(data => {\r\n        // let id = data.data.id;\r\n        let id = \"1\"\r\n        let node = this.commonService.session.network.nodes.find(node => node._id == id);\r\n        return node[labelVar];\r\n      }).attr('dx', 8)\r\n    });\r\n  }\r\n\r\n  onLeafTooltipVariableChange(event) {\r\n    this.SelectedLeafTooltipVariable = event;\r\n    let labelVar = event;\r\n    this.tree.eachLeafNode((circle, data) => {\r\n        let node = this.commonService.session.data.nodes.find(d => d.id === data.data.id);\r\n        if (node === undefined) \r\n          node = this.commonService.session.data.nodes.find(d => d._id === data.data.id);\r\n        d3.select(circle)\r\n          .attr('title', node[labelVar]);\r\n      });\r\n  }\r\n\r\n  onHorizontalStretchChange(event) {\r\n    let cached = this.tree.animation;\r\n    this.tree.setAnimation(0);\r\n    this.tree.setHStretch(this.SelectedHorizontalStretchVariable);\r\n    this.tree.setAnimation(cached);\r\n  }\r\n\r\n  onVerticalStretchChange(event) {\r\n    let cached = this.tree.animation;\r\n    this.tree.setAnimation(0);\r\n    this.tree.setVStretch(this.SelectedVerticalStretchVariable);\r\n    this.tree.setAnimation(cached);\r\n  }\r\n\r\n  onBranchLabelShowChange(event) {\r\n    this.SelectedBranchLabelShowVariable = event;\r\n    this.tree.setBranchLabels(event);\r\n  }\r\n\r\n  onBranchLabelSizeChange(event) {\r\n    this.SelectedBranchLabelSizeVariable = event;\r\n    this.styleTree();\r\n  }\r\n\r\n  onBranchDistanceShowChange(event) {\r\n    this.SelectedBranchDistanceShowVariable = event;\r\n    this.tree.setBranchDistances(event);\r\n  }\r\n\r\n  onBranchDistanceSizeChange(event) {\r\n    this.SelectedBranchDistanceSizeVariable = event;\r\n    this.styleTree();\r\n  }\r\n\r\n  onBranchNodeShowChange(event) {\r\n    this.SelectedBranchNodeShowVariable = event;\r\n    this.tree.setBranchNodes(event);\r\n  }\r\n\r\n  onBranchNodeSizeChange(event) {\r\n    console.log(`We're in the change function, the event is ${event}`);\r\n    this.SelectedBranchNodeSizeVariable = event;\r\n    this.styleTree();\r\n  }\r\n\r\n  onBranchTooltipShowChange(event) {\r\n    this.SelectedBranchTooltipShowVariable = event;\r\n  }\r\n\r\n  onLeafLabelTooltipShowChange(event) {\r\n    this.SelectedLeafTooltipShowVariable = event;\r\n  }\r\n\r\n  onLeafLabelShowChange(event) {\r\n    this.SelectedLeafLabelShowVariable = event;\r\n    this.tree.setLeafLabels(event);\r\n  }\r\n\r\n  showGlobalSettings() {\r\n    this.DisplayGlobalSettingsDialogEvent.emit('Styling');\r\n  }\r\n\r\n  onLeafSizeChange(event) {\r\n    this.SelectedLeafNodeSizeVariable = event;\r\n    this.styleTree();\r\n  }\r\n\r\n  onLeafLabelSizeChange(event) {\r\n    this.SelectedLeafLabelSizeVariable = event;\r\n    this.styleTree();\r\n  }\r\n\r\n  onBranchSizeChange(event) {\r\n    this.SelectedBranchSizeVariable = event;\r\n    this.styleTree();\r\n  }\r\n\r\n  onCloseExport() {\r\n    this.isExportClosed = true;\r\n  }\r\n\r\n  updateNodeColors() {\r\n    let variable = this.visuals.phylogenetic.commonService.session.style.widgets['node-color-variable'];\r\n    const nodeColor = this.visuals.phylogenetic.commonService.session.style.widgets['node-color'];\r\n    this.SelectedLeafNodeColorVariable = nodeColor;\r\n    this.styleTree();\r\n    const selectedColor = this.visuals.phylogenetic.commonService.GlobalSettingsModel.SelectedColorVariable;\r\n  }\r\n\r\n  updateLinkColor() {\r\n    const linkColor = this.visuals.phylogenetic.commonService.session.style.widgets['link-color'];\r\n    this.SelectedLinkColorVariable = linkColor;\r\n    this.styleTree();\r\n  }\r\n\r\n  saveImage(event) {\r\n    const thisTree = this.commonService.visuals.phylogenetic.tree;\r\n    const fileName = this.SelectedTreeImageFilenameVariable;\r\n    const treeId = 'tidytree';\r\n    const exportImageType = this.SelectedNetworkExportFileTypeListVariable ;\r\n    const content = document.getElementById(treeId);\r\n    if (exportImageType === 'png') {\r\n      domToImage.toPng(content).then(\r\n        dataUrl => {\r\n          saveAs(dataUrl, fileName);\r\n      });\r\n    } else if (exportImageType === 'jpeg') {\r\n        domToImage.toJpeg(content, { quality: 0.85 }).then(\r\n          dataUrl => {\r\n            saveAs(dataUrl, fileName);\r\n          });\r\n    } else if (exportImageType === 'svg') {\r\n        const svgContent = this.visuals.phylogenetic.commonService.unparseSVG(content);\r\n        const blob = new Blob([svgContent], { type: 'image/svg+xml;charset=utf-8' });\r\n        saveAs(blob, fileName);\r\n    }\r\n\r\n  }\r\n\r\n  saveNewickString(event) {\r\n    const thisTree = this.commonService.visuals.phylogenetic.tree;\r\n    const newickBlob = new Blob([thisTree.data.toNewick(false)], {type: 'text/plain;charset=utf-8'});\r\n    saveAs(newickBlob, this.SelectedNewickStringFilenameVariable);\r\n  }\r\n\r\n\r\n  getContextLeftVal = (xPos) => {\r\n    if (xPos - 175 < 0) {\r\n      return xPos + 25;\r\n    } else {\r\n      return xPos - 175;\r\n    }\r\n  }\r\n\r\n  getContextTopVal = (yPos) => {\r\n    if (yPos > (this.svg.clientHeight - 125)) {\r\n      return yPos - 125;\r\n    } else {\r\n      return yPos + 25;\r\n    }\r\n  }\r\n\r\n  showContextMenu = (d) => {\r\n    // d3.event.preventDefault();\r\n    this.hideTooltip();\r\n    const tree = this.tree;\r\n    const leftVal = this.getContextLeftVal((d3 as any).event.pageX);\r\n    const topVal = this.getContextTopVal((d3 as any).event.pageY);\r\n\r\n    d3.select('#phylo-context-menu')\r\n    .style('z-index', 1000)\r\n    .style('display', 'block')\r\n    .style('opacity', 1)\r\n    .style('left', `${leftVal}px`)\r\n    .style('top', `${topVal}px`);\r\n    d3.select('#reroot').on('click', c => {\r\n      tree.setData(d[0].data.reroot());\r\n      this.styleTree();\r\n      this.hideContextMenu();\r\n    });\r\n    d3.select('#rotate').on('click', c => {\r\n      tree.setData(d[0].data.rotate().getRoot());\r\n      this.styleTree();\r\n      this.hideContextMenu();\r\n    });\r\n    d3.select('#flip').on('click', c => {\r\n      tree.setData(d[0].data.flip().getRoot());\r\n      this.styleTree();\r\n      this.hideContextMenu();\r\n    });\r\n    d3.select('#tidytree').on('click', c => {\r\n      this.hideContextMenu();\r\n    });\r\n  }\r\n\r\n  hideContextMenu = () => {\r\n    $('#phylo-context-menu').animate({ opacity: 0 }, 80, () => {\r\n      $(this).css('z-index', -1);\r\n    });\r\n  }\r\n\r\n  clickHandler = (n) => {\r\n    if ((d3 as any).event.ctrlKey) {\r\n      this.visuals.phylogenetic.commonService.session.data.nodes.find(node => node._id === n._id).selected = !n.selected;\r\n    } else {\r\n      this.visuals.phylogenetic.commonService.session.data.nodes.forEach(node => {\r\n        if (node._id === n._id) {\r\n          node.selected = !n.selected;\r\n        } else {\r\n          node.selected = false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  showTooltip = (d) => {\r\n    if (this.SelectedLeafTooltipShowVariable) {\r\n      let htmlValue: any = this.SelectedLeafTooltipVariable;\r\n\r\n      let [X, Y] = this.getRelativeMousePosition();\r\n\r\n      // $('#tooltip').css({ top: d3.event.pageY - 28, left: d3.event.pageX + 8, position: 'absolute' });\r\n\r\n      // const leftVal = X + 8;\r\n      // const topVal = Y - 28;\r\n      let node = this.commonService.session.data.nodes.find(n => n.id === d[0].data.id);\r\n      if (node === undefined){ \r\n        node = this.commonService.session.data.nodes.find(n => n._id === d[0].data.id);\r\n        if (htmlValue === \"id\")\r\n          htmlValue = \"_id\";\r\n      }\r\n      console.log(node);\r\n      // Pre D3\r\n      const leftVal = (d3 as any).event.pageX + 8;\r\n      const topVal = (d3 as any).event.pageY - 28;\r\n      d3.select('#phyloTooltip')\r\n        .html(node[htmlValue])\r\n        .style('position', 'absolute')\r\n        .style('display', 'block')\r\n        .style('left', `${leftVal}px`)\r\n        .style('top', `${topVal}px`)\r\n        .style('z-index', 1000)\r\n        .transition().duration(100)\r\n        .style('opacity', 1)\r\n        .style('color', '#333333')\r\n        .style('background', '#f5f5f5')\r\n        .style('border', '1px solid #cccccc')\r\n        .style('border-radius', '.25rem')\r\n        .style('padding', '.25rem')\r\n      ;\r\n    }\r\n  }\r\n\r\n  hideTooltip = () => {\r\n    const tooltip = d3.select('#phyloTooltip');\r\n    tooltip\r\n      .transition().duration(100)\r\n      .style('opacity', 0)\r\n      .on('end', () => tooltip.style('z-index', -1));\r\n  }\r\n\r\n    /**\r\n     * @returns an array [X, Y] of the position of mouse relative to twodcomponent. Global position (i.e. d3.event.pageX) doesn't work for a dashboard\r\n     */  \r\n    getRelativeMousePosition() {\r\n      // let rect = d3.select('phylogeneticcomponent').node().getBoundingClientRect();\r\n      // let X = d3.event.pageX - rect.left;\r\n      // let Y = d3.event.pageY - rect.top; \r\n      return [0, 0];\r\n    }\r\n\r\n}\r\n\r\nexport namespace PhylogeneticComponent {\r\n    export const componentTypeName = 'Phylogenetic Tree';\r\n}\r\n","import { Injector, Component, Output, OnChanges, SimpleChange, EventEmitter, OnInit, ViewChild, ChangeDetectorRef, OnDestroy, ElementRef, Inject } from '@angular/core';\r\nimport { AppComponentBase } from '@shared/common/app-component-base';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { CommonService } from '../../contactTraceCommonServices/common.service';\r\nimport { Table } from 'primeng/table';\r\nimport { MicobeTraceNextPluginEvents } from '../../helperClasses/interfaces';\r\nimport { MicrobeTraceNextVisuals } from '../../microbe-trace-next-plugin-visuals';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport * as saveAs from 'file-saver';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\n\r\n\r\n/**\r\n * @title Complex Example\r\n */\r\n@Component({\r\n    selector: 'TableComponent',\r\n    templateUrl: './table-plugin-component.html',\r\n    styleUrls: ['./table-plugin-component.less']\r\n})\r\n\r\nexport class TableComponent extends BaseComponentDirective implements OnInit, OnDestroy, MicobeTraceNextPluginEvents {\r\n\r\n    @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n\r\n    viewActive: boolean = true;\r\n    SelectedTableExportFilenameVariable: string = \"\";\r\n\r\n    TableExportFileTypeList: any = [\r\n        { label: 'xlsx', value: 'xlsx' },\r\n        { label: 'csv', value: 'csv' }\r\n    ];\r\n    exportColumnOptions: any = [\r\n        { label: 'All', value: true },\r\n        { label: 'Current', value: false }\r\n    ];\r\n    exportAllColumns: boolean = false;\r\n\r\n    dataSetView: SelectItem[];\r\n    dataSetViewSelected: string;\r\n    \r\n    SelectedTableExportFileTypeListVariable: string = \"csv\";\r\n\r\n    SelectedTextSizeVariable: any = 14;\r\n\r\n    ShowTableExportPane: boolean = false;\r\n    ShowTableSettingsPane: boolean = false;\r\n    IsDataAvailable: boolean = false;\r\n    table: any;\r\n    meta: any = ['selected', 'visible']\r\n    TableColumns: any[] = [];\r\n    SelectableTableColumns: any[] = [];\r\n    AvailableColumns: any[] = [];\r\n    TableDatas: TableData[] = [];\r\n    SelectedTableData: TableData;\r\n    TableDataSelection: any[] = [];\r\n    TableType: 'node' | 'link' | 'cluster' = 'node';\r\n    filterTypes: FilterType[] = [\r\n        {label:'Contains', value: 'contains'},\r\n        {label:'=', value: 'equals'},\r\n        {label:'!=', value: 'notEquals'},\r\n        {label:'Starts With', value: 'startsWith'},\r\n        {label:'Ends With', value: 'endsWith'},\r\n        {label:'In', value: 'in'},\r\n        {label:'<', value: 'lt'},\r\n        {label:'<=', value: 'lte'},\r\n        {label:'>', value: 'gt'},\r\n        {label:'>=', value: 'gte'},\r\n    ];\r\n\r\n    selectedSize = '';\r\n    sizes = [\r\n        { name: 'Small', class: 'p-datatable-sm' },\r\n        { name: 'Normal', class: '' },\r\n        { name: 'Large',  class: 'p-datatable-lg' }\r\n    ];\r\n\r\n    scrollHeight: string;\r\n    tableStyle;\r\n    selectedRows = 10;\r\n\r\n    private visuals: MicrobeTraceNextVisuals;\r\n\r\n    // @ViewChild('dt') dataTable: Table;\r\n\r\n    @ViewChild('dt') dataTable: Table;\r\n\r\n\r\n    constructor(injector: Injector,\r\n        @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n        elRef: ElementRef,\r\n        private cdref: ChangeDetectorRef,\r\n        private eventManager: EventManager,\r\n        private commonService: CommonService,\r\n        private gtmService: GoogleTagManagerService) {\r\n\r\n        super(elRef.nativeElement);\r\n\r\n        this.visuals = commonService.visuals;\r\n        this.commonService.visuals.tableComp = this;\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        // this.InitView();\r\n\r\n        this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/table\",\r\n            page_title: \"Table View\"\r\n        });\r\n        this.dataSetView = [];\r\n        this.dataSetView.push({ label: 'Nodes', value: 'Node' });\r\n        this.dataSetView.push({ label: 'Links', value: 'Link' });\r\n        this.dataSetView.push({ label: 'Clusters', value: 'Cluster' });\r\n\r\n        this.dataSetViewSelected = \"Node\";\r\n\r\n        this.visuals.tableComp.IsDataAvailable = (this.visuals.tableComp.commonService.session.data.nodes.length == 0 ? false : true);\r\n\r\n        if (this.visuals.tableComp.IsDataAvailable == true) {\r\n            if (!this.SelectedTableData || this.SelectedTableData.tableColumns.length == 0) {\r\n                this.visuals.tableComp.createTable(this.visuals.microbeTrace.dataSetViewSelected);\r\n            }\r\n        }\r\n\r\n        let that = this;\r\n\r\n        $( document ).on( \"node-selected\", function( ) {\r\n\r\n            if (that.viewActive) {\r\n                that.visuals.tableComp.setSelectedNodes();\r\n            }\r\n\r\n        });\r\n\r\n\r\n        window.addEventListener(\"node-selected\", () => {\r\n            if (!this.visuals.microbeTrace.homepageTabs.find(x => x.isActive && x.label === 'Table')) {\r\n                this.visuals.tableComp.setSelectedNodes();\r\n            }\r\n        });\r\n\r\n        // offsets: 70 table-wrapper padding-top, 60 p-paginator, 10 table-wrapper padding-bottom\r\n        this.scrollHeight = ($('tableComponent').height() - 70 - 60 - 10) + 'px';\r\n        let width = ($('tableComponent').width() - 23) + 'px';\r\n        this.tableStyle = {\r\n            'max-width' : width,\r\n            'display': 'block'\r\n        }\r\n        \r\n        this.container.on('resize', () => { this.goldenLayoutComponentResize()})\r\n        this.container.on('hide', () => { \r\n            this.viewActive = false; \r\n            this.cdref.detectChanges();\r\n        })\r\n        this.container.on('show', () => { \r\n            this.viewActive = true; \r\n            this.setSelectedNodes();\r\n            this.cdref.detectChanges();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Exports table\r\n     * \r\n     * For exporting as excel file it calls this.saveAsExcelFile();\r\n     * \r\n     * For exporting as a csv it uses exportCSV() which is built into primeNG table object\r\n     */\r\n    exportVisualization() {\r\n        if (this.SelectedTableExportFileTypeListVariable == 'xlsx') {\r\n            this.saveAsExcelFile();\r\n        } else {\r\n            this.dataTable.exportFilename = this.SelectedTableExportFilenameVariable;\r\n            \r\n            if (this.exportAllColumns) {\r\n                let temp = this.SelectedTableData.tableColumns;\r\n                let temp2 = [];\r\n                this.SelectedTableData.availableColumns.forEach(column => temp2.push(column.value))\r\n                this.dataTable.columns = temp2;\r\n                this.dataTable.exportCSV()\r\n                this.dataTable.columns = temp;\r\n            } else {\r\n                this.dataTable.exportCSV()\r\n            }\r\n        }\r\n\r\n        this.ShowTableExportPane = !this.ShowTableExportPane;\r\n    }\r\n\r\n    /**\r\n     * Allows users to export the table as an excel file\r\n     * @param fileName optional if not given will use this.SelectedtableExportFilenameVariable\r\n     */\r\n    saveAsExcelFile( fileName?: string): void {\r\n        if (fileName == undefined) {\r\n            fileName = this.SelectedTableExportFilenameVariable\r\n        }\r\n        import(\"xlsx\").then(xlsx => {\r\n            // if a filtered is applied use filteredValue else use all values\r\n            let rowData = this.dataTable.filteredValue || this.dataTable.value;\r\n            if (this.exportAllColumns) {\r\n                // change name of data fields to header to be consistent with the other exports on this component\r\n                rowData = rowData.map((row) => {\r\n                    let output = {}\r\n                    this.SelectedTableData.availableColumns.forEach((key) => output[key.value.header] = row[key.value.field])\r\n                    return output;\r\n                })\r\n            } else {\r\n                // gets only the current/visible columns for export and also changes data field name to the header name\r\n                rowData = rowData.map((row) => {\r\n                    let output = {}\r\n                    this.SelectedTableData.tableColumns.forEach((key) => output[key.header] = row[key.field])\r\n                    return output;\r\n                })\r\n            }\r\n\r\n            let worksheet = xlsx.utils.json_to_sheet(rowData) ; \r\n            const workbook = { Sheets: { 'data': worksheet }, SheetNames: ['data'] }\r\n            const excelBuffer: any = xlsx.write(workbook, { bookType: 'xlsx', type: 'array' });\r\n            const EXCEL_TYPE = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\r\n            const EXCEL_EXTENSION = '.xlsx';\r\n            const data: Blob = new Blob([excelBuffer], { type: EXCEL_TYPE });\r\n            saveAs(data, fileName + EXCEL_EXTENSION);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Called first when filter is applied it applys filter to this.dataTable to update this.dataTable.filterValue\r\n     * @param col \r\n     */\r\n    onTableFilter(col){\r\n        this.dataTable.filter(col.filterValue, col.field, col.filterType);\r\n    }\r\n\r\n    /**\r\n     * Called second when a filter is applied, it updates values sotred in commonService.session.data and this.selectedRows if needed\r\n     * @param event \r\n     */\r\n    onFilter(event) {\r\n        let filteredValues = [];\r\n        switch (this.visuals.tableComp.TableType) {\r\n            case 'node':\r\n                filteredValues = this.visuals.tableComp.commonService.session.data.nodes.filter(x => event.filteredValue.find(y => y.index === x.index));\r\n                break;\r\n            case 'link':\r\n                filteredValues = this.visuals.tableComp.commonService.session.data.links.filter(x => event.filteredValue.find(y => y.index === x.index));\r\n                break;\r\n            case 'cluster':\r\n                filteredValues = this.visuals.tableComp.commonService.session.data.clusters.filter(x => event.filteredValue.find(y => y.id === x.id));\r\n                break;\r\n        }\r\n\r\n        this.visuals.tableComp.SelectedTableData.filter = event.filters;\r\n\r\n        // these lines can used to update nodes/data used for other views; publishFilterDataChange() calls onFilterDataChange for each view \r\n        // onFilterDataChange will need to be updated for implimenting this; also a bug in labeling by index sometimes changes the numbering of nodes\r\n        /*this.visuals.tableComp.commonService.session.data[this.visuals.tableComp.TableType + 'Filter'] = event.filters;\r\n        this.visuals.tableComp.commonService.session.data[this.visuals.tableComp.TableType + 'FilteredValues'] = filteredValues;\r\n        this.visuals.microbeTrace.publishFilterDataChange(); */\r\n\r\n        // updates number of rows when filter is changed (without there is a visual bug when removing a filter)\r\n        if ($('.p-paginator-rpp-options span').text() == 'All') {\r\n            this.selectedRows = event.filteredValue.length;\r\n        }\r\n    }\r\n\r\n    // XXXXX changing font size in settings pane currently calls this function\r\n    onDataChange(event) {\r\n\r\n    }\r\n\r\n    onFilterDataChange() {\r\n        //Nothing to do here\r\n    }\r\n\r\n    /**\r\n     * Function is called when a user selects a row by clicking on it.\r\n     * It calls nodeSelect(event, true), which updates commonService.session.data.nodes/nodeFilteredValues\r\n     * to be selected for the row/node and also emits a 'node-selected' event\r\n     */\r\n    onRowSelect(event) {\r\n        this.nodeSelect(event, true);\r\n    }\r\n\r\n    /**\r\n     * Function is called when a user unselects a row.\r\n     * It calls nodeSelect(event, false), which updates commonService.session.data.nodes/nodeFilteredValues\r\n     * to be selected for the row/node and also emits a 'node-selected' event\r\n     */\r\n    onRowUnselect(event) {\r\n        this.nodeSelect(event, false);\r\n    }\r\n\r\n    /**\r\n     * Called when a node is selected/unselected by clicking on a row. This function updates\r\n     * commonService.session.data.nodes/nodeFilteredValues to be selected for the row/node and also emits a 'node-selected' event\r\n     */\r\n    nodeSelect(event: any, isSelect: boolean) {\r\n        if(event.data === undefined) return;\r\n\r\n        if (this.visuals.tableComp.TableType === 'node') {\r\n            this.visuals.tableComp.commonService.session.data.nodes\r\n                .filter(x => x.index === event.data.index)\r\n                .forEach(x => x.selected = isSelect);\r\n            this.visuals.tableComp.commonService.session.data.nodeFilteredValues\r\n                .filter(x => x.index === event.data.index)\r\n                .forEach(x => x.selected = isSelect);\r\n        }\r\n\r\n        $(document).trigger('node-selected')\r\n        //window.dispatchEvent(new Event('node-selected'));\r\n    }\r\n\r\n    /**\r\n     * Update variables (such as TableType, selectedTableData) needed to update the contents of the table\r\n     * @param type The type of data (node, link, cluster) to create table with\r\n     */\r\n    createTable(type: any = \"node\") {\r\n        type = type.toLowerCase();\r\n        this.visuals.tableComp.TableType = type;\r\n\r\n        // checks if data for tableData exists in TableDatas, if not, creates a new TableData object and adds it to TableDatas\r\n        let tableData: TableData | undefined = this.TableDatas.find(x => x.tableType === type);\r\n        const isNewTableData: boolean = tableData == undefined;\r\n        if (isNewTableData) {\r\n            tableData = {\r\n                tableType: type,\r\n                data: [],\r\n                dataSelection: [],\r\n                tableColumns: this.visuals.tableComp.commonService.session.data[type + 'TableColumns'],\r\n                availableColumns: [],\r\n                selectedTableColumns: [],\r\n                filter: this.visuals.tableComp.commonService.session.data[type + 'Filter']\r\n            };\r\n\r\n            this.TableDatas.push(tableData);\r\n        }\r\n\r\n        this.visuals.tableComp.TableColumns = [];\r\n\r\n        if (this.dataTable) {\r\n            this.dataTable.reset();\r\n            this.dataTable.filters = tableData.filter;\r\n        }\r\n\r\n        this.visuals.tableComp.commonService.session.data[type + 'Fields'].map((d, i) => {\r\n            if (this.visuals.tableComp.meta.includes(d)) return;\r\n\r\n            let filterValue: string = \"\";\r\n            if (tableData.filter) {\r\n                const foundFilterItem = tableData.filter[d];\r\n                if (foundFilterItem) {\r\n                    filterValue = foundFilterItem.value;\r\n                }\r\n            }\r\n\r\n            const column = {\r\n                field: d,\r\n                header: d== 'nn' ? 'Nearest Neighbor' : this.visuals.tableComp.capitalize(d.replace(\"_\", \"\")),\r\n                filterValue: filterValue,\r\n                filterType: 'contains'\r\n            };\r\n\r\n            const foundAvailableColumn = tableData.availableColumns.find(x => x.label === column.header);\r\n\r\n            if (foundAvailableColumn) {\r\n                foundAvailableColumn.filterValue = column.filterValue;\r\n            } else {\r\n                tableData.availableColumns.push({\r\n                    label: column.header,\r\n                    value: column,\r\n                    disabled: column.field === 'index'\r\n                })\r\n            }\r\n        });\r\n\r\n        if (!tableData.tableColumns.length) {\r\n            tableData.tableColumns = tableData.availableColumns.filter((curVal, index) => index <= 5).map(x => x.value);\r\n        }\r\n\r\n        tableData.tableColumns.forEach(x=>{\r\n            const c = tableData.availableColumns.find(y=>y.value.header === x.header).value.filterValue;\r\n            x.filterValue = c;\r\n        })\r\n\r\n\r\n        tableData.data = [];\r\n        let typeData = type + \"s\";\r\n        this.visuals.tableComp.commonService.session.data[typeData].map((d, i) => {\r\n            if (this.visuals.tableComp.meta.includes(d)) return;\r\n\r\n            let nrow: any = {};\r\n            tableData.availableColumns.map((e, n) => {\r\n                const field = e.value.field;\r\n\r\n                let stringVal: String = d[field];\r\n\r\n                if (stringVal === undefined || stringVal === null) {\r\n                    nrow[field] = \"\";\r\n                } else {\r\n                    nrow[field] = (stringVal.toString().indexOf(\",\") > -1 ? (stringVal.toString().split(\",\", 100).length > 1 ? stringVal.toString().split(\",\", 100).join('\\n') : d[field]) : d[field]);\r\n                }\r\n\r\n            });\r\n\r\n            tableData.data.push(nrow);\r\n        });\r\n\r\n        const foundTableData = this.TableDatas.find(x => x.tableType === type);\r\n\r\n        if (foundTableData) {\r\n            this.SelectedTableData = foundTableData;\r\n        }\r\n\r\n        //set selected nodes\r\n        this.visuals.tableComp.setSelectedNodes();\r\n    }\r\n\r\n    /**\r\n     * If this.TableType == 'node' update the node TableData.dataSelection to the nodes that are selected in commonService.session.data.nodes\r\n     */\r\n    setSelectedNodes() {\r\n        if (this.visuals.tableComp.TableType === 'node') {\r\n            const foundTableData = this.TableDatas.find(x => x.tableType === 'node');\r\n            if (foundTableData) {\r\n                const selectedNodes = this.visuals.tableComp.commonService.session.data.nodes.filter(x => x.selected);\r\n                foundTableData.dataSelection = this.SelectedTableData.data.filter(x => selectedNodes.find(y => y.index == x.index));\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param s string\r\n     * @returns s but with first letter capitatlized, if s is not string type returns empty string\r\n     */\r\n    capitalize(s): string {\r\n        if (typeof s !== 'string') return ''\r\n        return s.charAt(0).toUpperCase() + s.slice(1)\r\n    }\r\n\r\n    // XXXXX need to revisit for changing text size in table; currently unable to change size of text and changing the setting calls onDataChange()\r\n    resetTextsize() {\r\n        let s: any = $('#table-font-size').val();\r\n        $('#table').css({\r\n            'font-size': s + 'px',\r\n            'line-height': s / 10\r\n        });\r\n    }\r\n    \r\n    reorderColumns() {\r\n        let temp = this.SelectedTableData.tableColumns[2]\r\n        this.SelectedTableData.tableColumns[2] = this.SelectedTableData.tableColumns[3];\r\n        this.SelectedTableData.tableColumns[3] = temp;\r\n    }\r\n\r\n    /**\r\n     * Opens settings pane for table component\r\n     */\r\n    openSettings() {\r\n        this.visuals.tableComp.ShowTableSettingsPane = !this.visuals.tableComp.ShowTableSettingsPane;\r\n    }\r\n\r\n    /**\r\n     * Opens export pane for table component\r\n     */\r\n    openExport() {\r\n        this.visuals.tableComp.ShowTableExportPane = !this.visuals.tableComp.ShowTableExportPane;\r\n    }\r\n\r\n    openCenter() {\r\n\r\n    }\r\n\r\n    //openPinAllNodes() {\r\n\r\n\r\n    //}\r\n\r\n    openRefreshScreen() {\r\n\r\n    }\r\n\r\n    /**\r\n     * This function is called when the type of data to display in the table is changed (Nodes, Links, Cluster)\r\n     * @param e event\r\n     */\r\n    openSelectDataSetScreen(e: any) {\r\n        this.visuals.tableComp.createTable(e.value);\r\n        // after changing table type sometimes there is a visual bug that the following code fixes\r\n        if ($('.p-paginator-rpp-options span').text() == 'All') {\r\n            this.selectedRows = this.SelectedTableData.data.length;\r\n        }\r\n    }\r\n\r\n    onLoadNewData() {\r\n        this.createTable(this.visuals.microbeTrace.dataSetViewSelected);\r\n    }\r\n\r\n    updateNodeColors() {\r\n        //Not Relevant\r\n    }\r\n    updateVisualization() {\r\n        //Not Relevant\r\n    }\r\n\r\n    applyStyleFileSettings() {\r\n        //this.widgets = (window as any).context.commonService.session.style.widgets;\r\n        //this.loadSettings();\r\n    }\r\n\r\n    updateLinkColor() {\r\n        //Not Relevant\r\n    }\r\n\r\n    onRecallSession() {\r\n    }\r\n\r\n    goldenLayoutComponentResize() {\r\n        this.scrollHeight = ($('tableComponent').height() - 70 - 60 - 10) + 'px';\r\n        let width = ($('tableComponent').width() - 23) + 'px';\r\n        this.tableStyle = {\r\n            'width' : width,\r\n            'display': 'block'\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Called before the comonent is destroyed; it save tableColumns for each node, link, and cluster in commonService.session.data\r\n     */\r\n    ngOnDestroy(): void {\r\n\r\n        let foundTableData = this.TableDatas.find(x => x.tableType === 'node');\r\n        if (foundTableData) {\r\n            this.visuals.tableComp.commonService.session.data.nodeTableColumns = foundTableData.tableColumns;\r\n        }\r\n\r\n        foundTableData = this.TableDatas.find(x => x.tableType === 'link');\r\n        if (foundTableData) {\r\n            this.visuals.tableComp.commonService.session.data.linkTableColumns = foundTableData.tableColumns;\r\n        }\r\n\r\n        foundTableData = this.TableDatas.find(x => x.tableType === 'cluster');\r\n        if (foundTableData) {\r\n            this.visuals.tableComp.commonService.session.data.clusterTableColumns = foundTableData.tableColumns;\r\n        }\r\n    }\r\n}\r\n\r\ninterface TableData {\r\n    tableType: 'node' | 'link' | 'cluster',\r\n    data: any[],\r\n    dataSelection: any[],\r\n    tableColumns: any[],\r\n    availableColumns: any[],\r\n    selectedTableColumns: any[],\r\n    filter: any\r\n}\r\n\r\ninterface FilterType{\r\n    label: string,\r\n    value: string\r\n}\r\n\r\nexport namespace TableComponent {\r\n    export const componentTypeName = 'Table';\r\n}","import { Component, ElementRef, EventEmitter, ChangeDetectorRef, Inject, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { CommonService } from '../../contactTraceCommonServices/common.service';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { MicobeTraceNextPluginEvents } from '@app/helperClasses/interfaces';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport * as d3 from 'd3';\r\nimport moment from 'moment';\r\nimport { MicrobeTraceNextVisuals } from '@app/microbe-trace-next-plugin-visuals';\r\n\r\nimport * as saveAs from 'file-saver';\r\nimport { saveSvgAsPng } from 'save-svg-as-png';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\n\r\n\r\n@Component({\r\n  selector: 'app-timeline-component',\r\n  templateUrl: './timeline-component.component.html',\r\n  styleUrls: ['./timeline-component.component.scss']\r\n})\r\nexport class TimelineComponent extends BaseComponentDirective implements OnInit, MicobeTraceNextPluginEvents {\r\n\r\n  @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n\r\n  @ViewChild('epiCurve') epiCurveElement: ElementRef;\r\n  @ViewChild('epiCurveSVG') epiCurveSVGElement: ElementRef;\r\n  viewActive: boolean = true;\r\n\r\n  widgets: object;\r\n  private visuals: MicrobeTraceNextVisuals;\r\n\r\n  FieldList: SelectItem[] = [];\r\n  FieldListStack: SelectItem[] = [];\r\n  SelectedDateFieldVariable;\r\n  SelectedDateFieldVariable2;\r\n  SelectedDateFieldVariable3;\r\n  binSizes = ['Day', 'Week', 'Month', 'Quarter', 'Year']\r\n  tickInterval;\r\n\r\n  graphTypes = ['Single Date Field', 'Multi: Side by Side', 'Multi: Overlay']\r\n  selectedGraphType = 'Single Date Field';\r\n  legendPositionOptions = ['Hide', 'Left', 'Right', 'Bottom']\r\n\r\n  ShowEpiSettingsPane: boolean = false;\r\n  ShowEpiExportPane: boolean = false;\r\n  EpiExportFileName: string = \"\";\r\n  EpiExportFileType: string = \"png\";\r\n  SelectedNetworkExportScaleVariable: any = 1;\r\n  SelectedNetworkExportQualityVariable: any = 0.92;\r\n  CalculatedResolution: string;\r\n\r\n  private localColorMap = (x) => {}\r\n\r\n  private svg;\r\n  private margin = { top: 5, left: 45, right: 20, bottom: 50 };\r\n  private width; // Default width, adjust as necessary\r\n  private height; // Default height, adjust as necessary\r\n  private middle;\r\n  private x;\r\n  private y;\r\n  private histogram;\r\n  private brush;\r\n  private brushG;\r\n  private selection;\r\n  private timer;\r\n  private tick = 0;\r\n  private isPlaying = false;\r\n\r\n  private vnodes = []; // Replace with your actual data\r\n  private timeDomainStart;\r\n  private timeDomainEnd;\r\n\r\n  constructor(\r\n    private commonService: CommonService,\r\n    @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer,\r\n    elRef: ElementRef,\r\n    private cdref: ChangeDetectorRef,\r\n    private gtmService: GoogleTagManagerService) {\r\n\r\n      super(elRef.nativeElement);\r\n      this.visuals = commonService.visuals;\r\n      this.commonService.visuals.epiCurve = this;\r\n      this.widgets = this.commonService.session.style.widgets;\r\n\r\n      this.setDefaultsWidgets();\r\n\r\n  }\r\n  ngOnInit() {\r\n\r\n    this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/timeline\",\r\n            page_title: \"Timeline View\"\r\n        });\r\n    // populate this.twoD.FieldList with [None, ...nodeFields]\r\n    this.visuals.epiCurve.FieldList = [];\r\n    this.visuals.epiCurve.FieldListStack = [];\r\n    this.visuals.epiCurve.FieldList.push({ label: \"None\", value: \"None\" });\r\n    this.visuals.epiCurve.FieldListStack.push({ label: \"None\", value: 'None'}, { label: \"Node Color\", value: \"Node Color\"});\r\n    this.visuals.epiCurve.commonService.session.data['nodeFields'].map((d, i) => {\r\n        if (d != 'seq' && d != 'sequence') {\r\n            this.visuals.epiCurve.FieldList.push(\r\n                {\r\n                    label: this.visuals.epiCurve.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                    value: d\r\n                });\r\n              this.visuals.epiCurve.FieldListStack.push(\r\n                {\r\n                    label: this.visuals.epiCurve.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                    value: d\r\n                });\r\n        }\r\n\r\n    });\r\n\r\n    this.tickInterval = 1;\r\n    this.updateSettingsRows();    \r\n }\r\n\r\n  setDefaultsWidgets() {\r\n    // graphType\r\n    if (this.widgets['epiCurve-graphType'] == undefined) {\r\n      this.widgets['epiCurve-graphType'] = 'Single Date Field';\r\n    }\r\n    this.selectedGraphType = this.widgets['epiCurve-graphType'];\r\n\r\n    // date fields\r\n    if (this.widgets['epiCurve-date-fields'] == undefined) {\r\n      if (this.widgets['epi-timeline-date-field'] != undefined) {\r\n        this.widgets['epiCurve-date-fields'] = [this.widgets['epi-timeline-date-field'], 'None', 'None']\r\n      } else {\r\n        this.widgets['epiCurve-date-fields'] = ['None', 'None', 'None']\r\n      }\r\n    } else if (this.widgets['epiCurve-date-fields'].length < 3) {\r\n      while (this.widgets['epiCurve-date-fields']< 3) {\r\n        this.widgets['epiCurve-date-fields'].push('None')\r\n      }\r\n    }\r\n    this.SelectedDateFieldVariable = this.widgets['epiCurve-date-fields'][0];\r\n    this.SelectedDateFieldVariable2 = this.widgets['epiCurve-date-fields'][1];\r\n    this.SelectedDateFieldVariable3 = this.widgets['epiCurve-date-fields'][2];\r\n\r\n    // colors\r\n    if (this.widgets['epiCurve-colors'] == undefined) {\r\n      this.widgets['epiCurve-colors'] = ['#f5d742', '#f20fff', '#20ff1a'];\r\n    }\r\n\r\n    // stackColorBy field\r\n    if (this.widgets['epiCurve-stackColorBy'] == undefined) {\r\n      this.widgets['epiCurve-stackColorBy'] = 'None';\r\n    }\r\n\r\n    // binSize\r\n    if (this.widgets['epiCurve-binSize'] == undefined) {\r\n      this.widgets['epiCurve-binSize'] = 'Month'\r\n    }\r\n\r\n    //\r\n    if (this.widgets['epiCurve-cumulative'] == undefined) {\r\n      this.widgets['epiCurve-cumulative'] = false;\r\n    }\r\n\r\n    // legendPosition\r\n    if (this.widgets['epiCurve-legendPosition'] == undefined) {\r\n      this.widgets['epiCurve-legendPosition'] = 'Left';\r\n    }\r\n }\r\n\r\n ngAfterViewInit() {\r\n\r\n  // this.initializeD3Chart();\r\n  this.setupEventListeners();\r\n\r\n  if (this.widgets['epiCurve-legendPosition'] == 'Bottom') {\r\n    this.margin.bottom = 100;\r\n  } else {\r\n    this.margin.bottom = 50;\r\n  }\r\n  \r\n  this.refresh();\r\n }\r\n  \r\n/**\r\n * Clears previous histogram/epi curve and creates a new one; calls refreshMulti if needed\r\n */\r\npublic refresh(): void {\r\n  if (this.selectedGraphType=='Multi: Overlay' || this.selectedGraphType=='Multi: Side by Side') {\r\n    this.refreshMulti();\r\n    return;\r\n  } else if (this.SelectedDateFieldVariable == 'None') {\r\n    return;\r\n  }\r\n\r\n  $('#epiCurveSVG').empty()\r\n\r\n  this.updateSizes();\r\n  if (this.height < 0) {\r\n    return;\r\n  }\r\n\r\n  const field = this.SelectedDateFieldVariable;\r\n  let times = this.getTimes([field]);\r\n\r\n  // updates this.timeDomainStart and this.timeDomainInterval and returns the bin interval\r\n  let binInterval = this.calculateBinInterval(times);\r\n  if (binInterval == 0) {\r\n    return;\r\n  }\r\n\r\n  this.x = d3.scaleTime().domain([this.timeDomainStart, this.timeDomainEnd]).rangeRound([0, this.width]);\r\n  this.y = d3.scaleLinear().range([this.height, 0]);\r\n\r\n  //@ts-ignore\r\n  this.histogram = d3.histogram().value(d => d[field as string]).domain(this.x.domain()).thresholds(binInterval);\r\n\r\n  this.svg = d3.select(this.epiCurveSVGElement.nativeElement)\r\n    .attr(\"width\", this.width + this.margin.left + this.margin.right)\r\n    .attr(\"height\", this.height + this.margin.top + this.margin.bottom)\r\n    //.attr(\"transform\", `translate(0, ${this.margin.top})`);\r\n    \r\n\r\n  const epiCurve = this.svg.append(\"g\")\r\n    .classed(\"epiCurve-epi-curve\", true)\r\n    .attr(\"transform\", `translate(${this.margin.left}, 5)`);\r\n\r\n  let bins = this.histogram(this.vnodes);\r\n  \r\n  let colorVariable = this.commonService.session.style.widgets['node-color-variable'];\r\n  let nodeColorKeys;\r\n  if (colorVariable != 'None' && this.widgets['epiCurve-stackColorBy'] == 'Node Color') {\r\n    nodeColorKeys = this.commonService.session.style.nodeColorsTableKeys[colorVariable].map(value => value=='null' ? null: value);\r\n    this.localColorMap = this.commonService.temp.style.nodeColorMap;\r\n  } else if (this.widgets['epiCurve-stackColorBy'] != 'None') {\r\n    nodeColorKeys = this.updateLocalColorMap();\r\n  }\r\n\r\n  let maxCount = 0;\r\n  [maxCount, bins] = this.updateBins(bins, this.widgets['epiCurve-stackColorBy'] == 'Node Color' ? colorVariable : this.widgets['epiCurve-stackColorBy'], nodeColorKeys);\r\n  \r\n\r\n  this.y.domain([0, maxCount]).nice()//d3.max(bins, d => d.length)]);\r\n\r\n  if ((colorVariable != 'None' && this.widgets['epiCurve-stackColorBy'] == 'Node Color') || (this.widgets['epiCurve-stackColorBy'] != 'None' && this.widgets['epiCurve-stackColorBy'] != 'Node Color')) {\r\n    let nodeColors = [];\r\n\r\n    nodeColorKeys.forEach((value, ind) =>{\r\n      epiCurve.selectAll(`rect${ind}`)\r\n      .data(bins)\r\n      .enter()\r\n      .append(\"rect\")\r\n      .attr(\"transform\", d => `translate(${this.x(d.x0)}, ${this.y(d.height[ind])})`)\r\n      .attr(\"width\", d => this.x(d.x1) - this.x(d.x0))\r\n      .attr(\"height\", d => this.height - this.y(d.length2[ind]))\r\n      .attr(\"fill\", this.localColorMap(value) )\r\n\r\n      nodeColors.push(this.localColorMap(value));\r\n    })\r\n    this.generateLegend(epiCurve, nodeColors,nodeColorKeys)\r\n  } else {\r\n    let color = this.widgets['epiCurve-stackColorBy'] == 'None' ? this.widgets['epiCurve-colors'][0] : this.widgets[\"node-color\"];\r\n    epiCurve.selectAll(\"rect\")\r\n      .data(bins)\r\n      .enter()\r\n      .append(\"rect\")\r\n      .attr(\"transform\", d => `translate(${this.x(d.x0)}, ${this.y(d.length)})`)\r\n      .attr(\"width\", d => this.x(d.x1) - this.x(d.x0))\r\n      .attr(\"height\", d => this.height - this.y(d.length))\r\n      .attr(\"fill\", color);\r\n\r\n    this.generateLegend(epiCurve, [color] ,[this.SelectedDateFieldVariable])\r\n  }\r\n\r\n  this.updateAxes();\r\n} \r\n\r\n/**\r\n * Updated version of refresh that works for multiple date fields to generate the epi curve graph\r\n * Calls refresh() instead if needed\r\n */\r\nprivate refreshMulti(): void {\r\n  if (this.selectedGraphType=='Single Date Field') {\r\n    this.refresh();\r\n    return;\r\n  } else if (this.SelectedDateFieldVariable == 'None' && this.SelectedDateFieldVariable2 == 'None' && this.SelectedDateFieldVariable3 == 'None') {\r\n    return;\r\n  }\r\n\r\n  $('#epiCurveSVG').empty()\r\n\r\n  this.updateSizes();\r\n  if (this.height < 0) {\r\n    return;\r\n  }\r\n\r\n  let fields = [];\r\n  let colors = [];\r\n  [this.SelectedDateFieldVariable, this.SelectedDateFieldVariable2, this.SelectedDateFieldVariable3].forEach((dateField, ind) => {\r\n    if (dateField != 'None') {\r\n      fields.push(dateField);\r\n      colors.push(this.widgets[\"epiCurve-colors\"][ind])\r\n    }\r\n  })\r\n\r\n  if (fields.length == 0) {\r\n    return;\r\n  }\r\n  // current implementation of times is only used to calculate min and max time of all data given when setting up x axis and bins; there isn't a current need to link times by datapoint with times\r\n  let times = this.getTimes(fields);\r\n\r\n  // updates this.timeDomainStart and this.timeDomainInterval and returns the bin interval\r\n  let binInterval = this.calculateBinInterval(times);\r\n  if (binInterval == 0) {\r\n    return;\r\n  }\r\n\r\n  this.x = d3.scaleTime().domain([this.timeDomainStart, this.timeDomainEnd]).rangeRound([0, this.width]);\r\n  this.y = d3.scaleLinear().range([this.height, 0]);\r\n\r\n  //@ts-ignore\r\n  this.histogram = d3.histogram().domain(this.x.domain()).thresholds(binInterval);\r\n\r\n  this.svg = d3.select(this.epiCurveSVGElement.nativeElement)\r\n    .attr(\"width\", this.width + this.margin.left + this.margin.right)\r\n    .attr(\"height\", this.height + this.margin.top + this.margin.bottom)\r\n    .attr(\"transform\", `translate(0, ${this.margin.top})`);\r\n    \r\n\r\n  const epiCurve = this.svg.append(\"g\")\r\n    .classed(\"epiCurve-epi-curve\", true)\r\n    .attr(\"transform\", `translate(${this.margin.left}, 5)`);\r\n\r\n  let maxCount = 0;\r\n  let bins = [];\r\n  fields.forEach((field) => {\r\n    if (field != 'None') {\r\n      let currentCount = 0;\r\n      let currentbin = this.histogram(this.vnodes.map((d) => d[field]).filter(value => value != null));\r\n      [currentCount, currentbin] = this.updateBins(currentbin);\r\n      bins.push(currentbin)\r\n      if (currentCount > maxCount) maxCount = currentCount;\r\n    }\r\n  })\r\n\r\n  this.y.domain([0, maxCount]).nice();\r\n\r\n  if (this.selectedGraphType == 'Multi: Overlay') {\r\n    fields.forEach((_, ind) => {\r\n        epiCurve.selectAll(`rect${ind}`)\r\n        .data(bins[ind])\r\n        .enter()\r\n        .append(\"rect\")\r\n        .attr(\"transform\", d => `translate(${this.x(d.x0)}, ${this.y(d.length)})`)\r\n        .attr(\"width\", d => this.x(d.x1) - this.x(d.x0))\r\n        .attr(\"height\", d => this.height - this.y(d.length))\r\n        .attr(\"fill\", colors[ind])\r\n        .attr(\"opacity\", 0.6);\r\n    })\r\n\r\n  } else {\r\n    let numberOfBins = fields.length;\r\n    let width;\r\n    let xOffset = [];\r\n    if (numberOfBins == 1) {\r\n      width = (d) => this.x(d.x1)- this.x(d.x0);\r\n      xOffset = [\r\n        function(d, c) {return c.x(d.x0)}\r\n      ]\r\n    } else if (numberOfBins == 2) {\r\n      width = (d) => (this.x(d.x1)- this.x(d.x0))/2\r\n      xOffset = [\r\n        function(d, c) {return c.x(d.x0)},\r\n        function(d, c) {return c.x(d.x0)+(c.x(d.x1) - c.x(d.x0))/2}\r\n      ]\r\n    } else {\r\n      width = (d) => (this.x(d.x1)- this.x(d.x0))/3;\r\n      xOffset = [\r\n        function(d, c) { return c.x(d.x0)},\r\n        function(d, c) { return c.x(d.x0)+(c.x(d.x1) - c.x(d.x0))/3},\r\n        function(d, c) { return c.x(d.x0)+2*(c.x(d.x1) - c.x(d.x0))/3}\r\n      ]\r\n    }\r\n    \r\n    let that = this;\r\n\r\n    fields.forEach((_, ind) => {\r\n        epiCurve.selectAll(`rect${ind}`)\r\n        .data(bins[ind])\r\n        .enter()\r\n        .append(\"rect\")\r\n        .attr(\"transform\", d => `translate(${xOffset[ind](d, that)}, ${this.y(d.length)})`)\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", d => this.height - this.y(d.length))\r\n        .attr(\"fill\", colors[ind]);\r\n    });\r\n  }\r\n\r\n  this.updateAxes();\r\n  this.generateLegend(epiCurve, colors, fields)\r\n} \r\n\r\n/**\r\n * Return an array of unique options for nodes[this.widgets['epiCurve-stackColorBy']] and then also used that information to update localColorMap function\r\n */\r\nupdateLocalColorMap() {\r\n  let nodeColorTableKeys = [];\r\n  this.commonService.session.data.nodes.forEach((node) => {\r\n    if (!node.visible) return;\r\n    if (!nodeColorTableKeys.some(value => value == node[this.widgets['epiCurve-stackColorBy']])) {\r\n      nodeColorTableKeys.push(node[this.widgets['epiCurve-stackColorBy']])\r\n    }\r\n  })\r\n  this.localColorMap = d3.scaleOrdinal(this.commonService.session.style.nodeColors).domain(nodeColorTableKeys);\r\n\r\n  return nodeColorTableKeys;\r\n}\r\n\r\nupdateSizes() {\r\n  const wrapper = $(this.epiCurveElement.nativeElement).parent();\r\n  $('#epiCurve').height(wrapper.height() - 50);\r\n  this.width = wrapper.width() - this.margin.left - this.margin.right;\r\n  // height represents the height of y axis\r\n  this.height = wrapper.height() - this.margin.top - this.margin.bottom - 50;\r\n  this.middle = this.height / 2;\r\n}\r\n\r\ngetTimes(fields) {\r\n  let times = [];\r\n  this.vnodes = JSON.parse(JSON.stringify(this.commonService.session.data.nodes));\r\n  this.vnodes.forEach(d => {\r\n    fields.forEach(field => {\r\n      const time = moment(d[field as string]); // Cast 'field' as string\r\n      if (time.isValid()) {\r\n        d[field as string] = time.toDate();\r\n        times.push(d[field as string]); // Cast 'field' as string\r\n      } else {\r\n        d[field as string] = null; // Cast 'field' as string\r\n      }\r\n    })\r\n  });\r\n\r\n  if (times.length < 2) {\r\n    times = [new Date(2000, 1, 1), new Date()];\r\n  }\r\n  return times;\r\n}\r\n\r\nupdateAxes() {\r\n  let [xAxis, xLabelOffset] = this.configureXAxisSettings();\r\n\r\n  this.svg.append(\"g\")\r\n    .attr(\"class\", \"axis axis--x\")\r\n    .attr(\"transform\", `translate(${this.margin.left}, ${this.height+5})`)\r\n    .call(xAxis)\r\n    .attr(\"text-anchor\", \"center\")\r\n    .selectAll(\"text\")\r\n    .attr(\"x\", xLabelOffset);\r\n\r\n  this.svg.append(\"g\")\r\n    .attr(\"class\", \"axis axis--y\")\r\n    .attr(\"transform\", `translate(${this.margin.left}, 5)`)\r\n    .call(d3.axisLeft(this.y))\r\n    .attr(\"text-anchor\", null)\r\n    .selectAll(\"text\")\r\n    .attr(\"x\", -20);\r\n\r\n  this.svg.append(\"text\")\r\n    .attr(\"class\", \"x label\")\r\n    .attr(\"text-anchor\", \"center\")\r\n    .attr(\"x\", this.width/2)\r\n    .attr(\"y\", this.height + 40)\r\n    .text(`Date (${this.widgets['epiCurve-binSize']=='Day'? 'Dai': this.widgets['epiCurve-binSize']}ly Bins)`);\r\n\r\n  this.svg.append(\"text\")\r\n    .attr(\"class\", \"y label\")\r\n    .attr(\"text-anchor\", \"center\")\r\n    .attr(\"y\", 15)\r\n    .attr(\"x\", -this.middle-this.margin.top-this.margin.bottom)\r\n    .attr(\"transform\", \"rotate(-90)\")\r\n    .text(\"Number of Cases\");\r\n\r\n  /*this.brush = d3.brushX()\r\n    .extent([[0, 0], [this.width, this.height]])\r\n    .on(\"start brush\", () => {\r\n      this.selection = d3.brushSelection(this.brushG.node());\r\n      if (!this.selection) return;\r\n      if (this.selection[0] > 0) {\r\n        this.selection[0] = 0;\r\n        this.brushG.call(this.brush.move, this.selection);\r\n      }\r\n    })\r\n    .on(\"end\", function () {\r\n      this.selection = d3.brushSelection(this.brushG.node());\r\n      if (!this.selection) return;\r\n      if (this.selection[0] > 0) {\r\n        this.selection[0] = 0;\r\n        this.brushG.call(this.brush.move, this.selection);\r\n        this.propagate();\r\n      }\r\n    });\r\n\r\n    this.brushG = this.svg\r\n    .append(\"g\")\r\n    .attr(\"class\", \"brush\")\r\n    .attr(\"transform\", \"translate(\" + this.margin.left + \",0)\")\r\n    .call(this.brush);\r\n    */\r\n\r\n}\r\n\r\ngenerateLegend(epiCurve, colors, fieldNames) {\r\n  let xOffset = 50; // default for left position\r\n  if (this.widgets['epiCurve-legendPosition'] == 'Hide') {\r\n    return;\r\n  } else if (this.widgets['epiCurve-legendPosition'] == 'Bottom') {\r\n    let prevLength = 0;\r\n    let rowCount = 0;\r\n    let y = this.height + 50;\r\n    if (this.selectedGraphType=='Single Date Field' && this.widgets['epiCurve-stackColorBy'] == 'Node Color' && this.commonService.session.style.widgets['node-color-variable'] != 'None') {\r\n      let field = this.commonService.capitalize(this.commonService.session.style.widgets['node-color-variable']);\r\n      epiCurve.append(\"text\").attr(\"x\", 70).attr(\"y\", y).text(field + ': ').style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\r\n      prevLength += field.length + 3;\r\n    } else if (this.selectedGraphType=='Single Date Field' && this.widgets['epiCurve-stackColorBy'] != 'Node Color' && this.widgets['epiCurve-stackColorBy'] != 'None') {\r\n      epiCurve.append(\"text\").attr(\"x\", 70).attr(\"y\", y).text(this.widgets['epiCurve-stackColorBy'] + ': ').style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\r\n      prevLength += this.widgets['epiCurve-stackColorBy'].length + 3;\r\n    }\r\n    fieldNames.forEach((name, i) => {\r\n      // this first section calculates the location for each item/name in the legend\r\n      let nLength = name==null ? 7: name.toString().length\r\n      let baseX = 70+40*(rowCount) + prevLength*7.5;\r\n      if (baseX+24+nLength*3 > this.width-70) {\r\n        rowCount = 0;\r\n        y += 30;\r\n        prevLength = 0;\r\n        baseX = 70;\r\n      }\r\n\r\n      epiCurve.append(\"circle\").attr(\"cx\", baseX).attr(\"cy\", y).attr(\"r\", 6).style(\"fill\", colors[i])\r\n      epiCurve.append(\"text\").attr(\"x\", baseX+10).attr(\"y\", y).text(this.commonService.capitalize(name==null? '(Empty)': name.toString())).style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\r\n\r\n      prevLength += nLength;\r\n      rowCount += 1;\r\n    })\r\n    return;\r\n  } else if (this.widgets['epiCurve-legendPosition'] == 'Right') {\r\n    xOffset = this.width - 120;\r\n  }\r\n  let count = 0;\r\n  if (this.selectedGraphType=='Single Date Field' && this.widgets['epiCurve-stackColorBy'] == 'Node Color' && this.commonService.session.style.widgets['node-color-variable'] != 'None') {\r\n    let field = this.commonService.capitalize(this.commonService.session.style.widgets['node-color-variable']);\r\n    epiCurve.append(\"text\").attr(\"x\", xOffset).attr(\"y\", 30).text(field + ': ').style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\r\n    count += 1;\r\n  } else if (this.selectedGraphType=='Single Date Field' && this.widgets['epiCurve-stackColorBy'] != 'Node Color' && this.widgets['epiCurve-stackColorBy'] != 'None') {\r\n    epiCurve.append(\"text\").attr(\"x\", xOffset).attr(\"y\", 30).text(this.widgets['epiCurve-stackColorBy'] + ': ').style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\r\n    count += 1;\r\n  }\r\n  fieldNames.forEach((name, i) => {\r\n    epiCurve.append(\"circle\").attr(\"cx\",xOffset).attr(\"cy\",30*(count+1)).attr(\"r\", 6).style(\"fill\", colors[i])\r\n    epiCurve.append(\"text\").attr(\"x\", xOffset+20).attr(\"y\", 30*(count+1)).text(this.commonService.capitalize(name==null? '(Empty)': name.toString())).style(\"font-size\", \"15px\").attr(\"alignment-baseline\",\"middle\")\r\n    count += 1;\r\n  })\r\n}\r\n\r\nprivate setupEventListeners(): void {\r\n\r\n  $('#timeline-play').click(() => {\r\n    if (this.isPlaying) {\r\n      $('#timeline-play').html('<span class=\"oi oi-media-play\"></span>');\r\n      this.stopTimeline();\r\n    } else {\r\n      $('#timeline-play').html('<span class=\"oi oi-media-pause\"></span>');\r\n      this.startTimeline();\r\n    }\r\n  });\r\n\r\n  $(window).on('node-color-change', () => {\r\n    this.svg.selectAll(\".epiCurve-epi-curve rect\")\r\n      .attr(\"fill\", this.commonService.session.style.widgets[\"node-color-variable\"]);\r\n  });\r\n\r\n  $('#timeline-speed').on('change', () => {\r\n    this.setTimer();\r\n  });\r\n\r\n  this.container.on('resize', () => { this.goldenLayoutComponentResize() })\r\n  this.container.on('hide', () => { \r\n    this.viewActive = false; \r\n    this.cdref.detectChanges();\r\n  })\r\n  this.container.on('show', () => { \r\n    this.viewActive = true; \r\n    this.cdref.detectChanges();\r\n  })\r\n}\r\n\r\n/**\r\n * Updates this.timeDomainStart and this.timeDomainEnd based on dates and this.widgets['epiCurve-binSize'];\r\n * \r\n * @param times array of date objects\r\n * @returns return a d3 time range such as d3.timeMonth.range()\r\n */\r\ncalculateBinInterval(times) {\r\n  let minTime = Math.min(...times);\r\n  let maxTime = Math.max(...times);\r\n\r\n  if (this.widgets['epiCurve-binSize'] == 'Day') {\r\n    //@ts-ignore\r\n    this.timeDomainStart = d3.timeMonth(minTime);\r\n    //@ts-ignore\r\n    this.timeDomainEnd = d3.timeMonth.ceil(maxTime);\r\n    return d3.timeDay.range(this.timeDomainStart, this.timeDomainEnd);\r\n  } else if (this.widgets['epiCurve-binSize'] == 'Week') {\r\n    //@ts-ignore\r\n    this.timeDomainStart = d3.timeMonth(minTime);\r\n    //@ts-ignore\r\n    this.timeDomainEnd = d3.timeMonth.ceil(maxTime);\r\n    return d3.timeMonday.range(this.timeDomainStart, this.timeDomainEnd);\r\n  } else if (this.widgets['epiCurve-binSize'] == 'Month') {\r\n    //@ts-ignore\r\n    this.timeDomainStart = d3.timeMonth(minTime);\r\n    //@ts-ignore\r\n    this.timeDomainEnd = d3.timeMonth.ceil(maxTime);\r\n    return d3.timeMonth.range(this.timeDomainStart, this.timeDomainEnd);\r\n  } else if (this.widgets['epiCurve-binSize'] == 'Quarter') {\r\n    //@ts-ignore\r\n    this.timeDomainStart = d3.timeMonth(minTime, 3);\r\n    //@ts-ignore\r\n    this.timeDomainEnd = d3.timeMonth.ceil(maxTime, 3);\r\n    // for quarter we may need to update earliest month so that quarters are consistant (always start on Jan, April, July, or October)\r\n    if ([1, 2].includes(this.timeDomainStart.getMonth())){\r\n      this.timeDomainStart.setMonth(0);\r\n    } else if ([4,5].includes(this.timeDomainStart.getMonth())) {\r\n      this.timeDomainStart.setMonth(3);\r\n    } else if ([7,8].includes(this.timeDomainStart.getMonth())) {\r\n      this.timeDomainStart.setMonth(6);\r\n    } else if ([10,11].includes(this.timeDomainStart.getMonth())) {\r\n      this.timeDomainStart.setMonth(9);\r\n    }\r\n    return d3.timeMonth.range(this.timeDomainStart, this.timeDomainEnd, 3);\r\n  } else if (this.widgets['epiCurve-binSize'] == 'Year') {\r\n    //@ts-ignore\r\n    this.timeDomainStart = d3.timeYear(minTime);\r\n    //@ts-ignore\r\n    this.timeDomainEnd = d3.timeYear.ceil(maxTime);\r\n    return d3.timeYear.range(this.timeDomainStart, this.timeDomainEnd);\r\n  } else {\r\n    alert(\"Invalid bin size selected\");\r\n    return 0;\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * @returns updated bins with new attributes. bin.length2 is array of height of each group (ie. 'M', 'F') needed for that bin interval, bin.height represents the offset of that group.\r\n * \r\n * Also returns maxCount which is used for setting y axis max value\r\n */\r\nupdateBins(bins, colorVariable='None', nodeColorKeys=undefined) {\r\n  let maxCount = 0;\r\n  // cumulative with multiple colors per column\r\n  if (this.widgets['epiCurve-stackColorBy'] != 'None' && this.widgets['epiCurve-cumulative'] && colorVariable != 'None') { //useNodeColors\r\n    //heights represents the size of each rect, offset represent the offset of each rect\r\n    let heights = new Array(nodeColorKeys.length).fill(0);\r\n    let offsets = new Array(nodeColorKeys.length).fill(0);\r\n    bins.forEach(bin => {\r\n      bin.length2 = [];\r\n      bin.height = [];\r\n      nodeColorKeys.forEach((value, ind) => {\r\n        let currentCount = bin.filter((obj)=> obj[colorVariable]==value).length\r\n        heights[ind] += currentCount;\r\n        bin.length2.push(heights[ind]);\r\n        offsets[ind] = bin.length2.reduce((paritalSum, a)=> paritalSum+a,0);\r\n        bin.height.push(offsets[ind]);\r\n        \r\n      })\r\n      maxCount += bin.length;\r\n    })\r\n    // noncumulative with multiple colors per column\r\n  } else if (this.widgets['epiCurve-stackColorBy'] != 'None' && colorVariable != 'None') {\r\n    bins.forEach(bin => {\r\n      bin.length2 = [];\r\n      bin.height = [];\r\n      nodeColorKeys.forEach(value => {\r\n        bin.length2.push(bin.filter((obj)=> obj[colorVariable]==value).length);\r\n        bin.height.push(bin.length2.reduce((paritalSum, a)=> paritalSum+a,0));\r\n      })\r\n      if (bin.length > maxCount) maxCount = bin.length\r\n    })\r\n  // else if (useNodeColor == False || (useNodeColor && colorVariable=='None')) and using cumulative\r\n  // cumulative with one color \r\n  } else if (this.widgets['epiCurve-cumulative']) {\r\n    bins.forEach(bin => {\r\n      maxCount += bin.length;\r\n      bin.length = maxCount;\r\n    });\r\n    // noncumulative with one color\r\n  } else {\r\n    bins.forEach(bin => {\r\n      if (bin.length > maxCount) maxCount = bin.length\r\n    })\r\n  }\r\n\r\n  return [maxCount, bins]\r\n}\r\n\r\n/**\r\n * \r\n * @return xAxis which is used to determine the interval and label for xAxis ticks and xLabelOffet which determine how much to shift each label\r\n */\r\nconfigureXAxisSettings() {\r\n  let xAxis;\r\n  let numberOfDays = d3.timeDay.count(this.timeDomainStart, this.timeDomainEnd);\r\n  let xLabelOffset = -10;\r\n  if (this.widgets['epiCurve-binSize'] == 'Year') {\r\n    xAxis = d3.axisBottom(this.x).ticks(d3.timeYear).tickFormat(d3.timeFormat(\"%Y\"));\r\n  } else if (numberOfDays<366) {\r\n    xAxis = d3.axisBottom(this.x).ticks(d3.timeMonth.every(this.tickInterval)).tickFormat(d3.timeFormat(\"%b %Y\"))\r\n    xLabelOffset = -25;\r\n  } else if (this.widgets['epiCurve-binSize'] == 'Quarter') {\r\n    xAxis = d3.axisBottom(this.x)\r\n      .ticks(d3.timeMonth.every(this.tickInterval < 3 ? this.tickInterval * 3 : 12))\r\n      .tickFormat((d: Date) => d <= d3.timeYear(d) ? d.getFullYear().toString() : null);\r\n  } else {\r\n    xAxis = d3.axisBottom(this.x)\r\n      .ticks(d3.timeMonth.every(this.tickInterval))\r\n      .tickFormat((d: Date) => d <= d3.timeYear(d) ? d.getFullYear().toString() : null);\r\n  }\r\n  return [xAxis, xLabelOffset]\r\n}\r\n\r\ngoldenLayoutComponentResize() {\r\n  this.refresh();\r\n  if (this.ShowEpiExportPane && this.EpiExportFileType!='svg') {\r\n    this.setCalculatedResolution();\r\n  }\r\n}\r\n\r\n// Handle the change event of the date field\r\nonDateFieldChange(index: number) {\r\n  if (index == 0) {\r\n    this.widgets[\"epiCurve-date-fields\"][index] = this.SelectedDateFieldVariable;\r\n  } else if (index == 1) {\r\n    this.widgets[\"epiCurve-date-fields\"][index] = this.SelectedDateFieldVariable2;\r\n  } else if (index == 2) {\r\n    this.widgets[\"epiCurve-date-fields\"][index] = this.SelectedDateFieldVariable3;\r\n  }\r\n\r\n  this.refresh();\r\n}\r\n\r\nonBinSizeChange() {\r\n  if (this.widgets['epiCurve-binSize'] == 'Year') {\r\n    $('#epi-tick-size').slideUp();\r\n  } else {\r\n    if (this.widgets['epiCurve-binSize'] == 'Quarter') {\r\n      this.tickInterval = 1;\r\n    }\r\n    $('#epi-tick-size').slideDown();\r\n  }\r\n  this.refresh();\r\n}\r\n\r\nupdateSettingsRows() {\r\n  this.ShowEpiSettingsPane = true;\r\n  setTimeout(() => {\r\n    if (this.selectedGraphType == 'Multi: Overlay' || this.selectedGraphType == 'Multi: Side by Side') {\r\n      $('#useNodeColorRow').slideUp();\r\n      $('.additionalDateField').slideDown();\r\n      //$('#epi-color-select').slideUp();\r\n    } else {\r\n      $('.additionalDateField').slideUp();\r\n      $('#useNodeColorRow').slideDown();\r\n      if (this.widgets['epiCurve-stackColorBy'] == 'None') {\r\n        $('#epi-color-select').slideDown();\r\n      }\r\n    }\r\n    //this.ShowEpiSettingsPane = false;\r\n  }, 0)\r\n}\r\n\r\nonGraphTypeChange(refresh=true) {\r\n  this.updateSettingsRows();\r\n\r\n  this.widgets['epiCurve-graphType'] = this.selectedGraphType;\r\n  if (refresh) this.refresh();\r\n}\r\n\r\nonUseNodeColorChange() {\r\n  if (this.widgets['epiCurve-stackColorBy'] == 'None') {\r\n    $('#epi-color-select').slideDown();\r\n  } else {\r\n    $('#epi-color-select').slideUp();\r\n  }\r\n  this.refresh();\r\n}\r\n\r\nonTickIntevalChange() {\r\n  this.refresh()\r\n}\r\n\r\nonNodeColorChanged() {\r\n  this.refresh();\r\n}\r\n\r\nonLegendPositionChange() {\r\n  if (this.widgets['epiCurve-legendPosition'] == 'Bottom') {\r\n    this.margin.bottom = 100;\r\n  } else {\r\n    this.margin.bottom = 50;\r\n  }\r\n  this.refresh();\r\n}\r\n\r\nopenSettings() {\r\n  this.visuals.epiCurve.ShowEpiSettingsPane = !this.visuals.epiCurve.ShowEpiSettingsPane;\r\n}\r\n\r\nsetCumulative(value: boolean): void {\r\n  this.widgets['epiCurve-cumulative'] = value;\r\n\r\n  this.refresh();\r\n}\r\n\r\n\r\n/**\r\n * Sets CalculatedResolution variable to string such as '1250 x 855px'. Only called when export is first opened\r\n */\r\nsetCalculatedResolution() {\r\n  let [width, height] = this.getImageDimensions();\r\n  this.CalculatedResolution = (Math.round(width * this.SelectedNetworkExportScaleVariable) + \" x \" + Math.round(height * this.SelectedNetworkExportScaleVariable) + \"px\");\r\n}\r\n\r\n  /**\r\n   * Updates CalculatedResolution variable to string such as '1250 x 855px' based on ImageDimensions and SelectedNetworkExportScaleVariable. \r\n   * This is called anytime SelectedNetworkExportScaleVariable is updated.\r\n   */\r\n  updateCalculatedResolution() {\r\n    let [width, height] = this.getImageDimensions();\r\n    this.CalculatedResolution = (Math.round(width * this.SelectedNetworkExportScaleVariable) + \" x \" + Math.round(height * this.SelectedNetworkExportScaleVariable) + \"px\");\r\n    this.cdref.detectChanges();\r\n}\r\n\r\n/**\r\n * @returns an array [width, height] of the svg image\r\n */\r\n  getImageDimensions() {\r\n    let parent = this.svg.node();\r\n    return [parent.clientWidth, parent.clientHeight] \r\n  }\r\n\r\nprivate startTimeline(): void {\r\n  this.isPlaying = true;\r\n  this.setTimer();\r\n}\r\n\r\nprivate stopTimeline(): void {\r\n  this.isPlaying = false;\r\n  if (this.timer) {\r\n    this.timer.stop();\r\n  }\r\n}\r\n\r\nprivate setTimer(): void {\r\n  if (this.timer) {\r\n    this.timer.stop();\r\n    d3.timerFlush();\r\n  }\r\n  this.timer = d3.interval(() => {\r\n    const selection = d3.brushSelection(this.brushG.node());\r\n    if (!selection) return this.timer.stop(); // Ignore empty selections\r\n    if (selection[1] >= this.width) {\r\n      this.startTimeline();\r\n      return;\r\n    }\r\n    this.brushG.call(this.brush.move, selection.map(s => s + 1));\r\n    if (++this.tick % 5 == 0) this.propagate();\r\n  }, 110 - parseInt($(\"#timeline-speed\").val() as string));\r\n  if (!this.isPlaying) this.timer.stop();\r\n}\r\n\r\nprivate propagate(): void {\r\n  this.commonService.session.state.timeStart = this.x.invert(this.selection[0]);\r\n  this.commonService.session.state.timeEnd = this.x.invert(this.selection[1]);\r\n  this.commonService.setNodeVisibility(true);\r\n  this.commonService.setLinkVisibility(true);\r\n  this.commonService.tagClusters().then(() => {\r\n    [\"node\", \"link\"].forEach((thing: string) => {\r\n      (window as any).trigger(thing + \"-visibility\");\r\n    });\r\n  });\r\n}\r\n\r\n// private initializeD3Chart(): void {\r\n//   this.clearSvg();\r\n//   this.setupDimensions();\r\n//   this.setupScales();\r\n//   this.createSvg();\r\n//   this.populateData();\r\n//   this.drawHistogram();\r\n//   this.setupBrush();\r\n// }\r\n\r\n// private clearSvg(): void {\r\n//   d3.select(this.timelineElement.nativeElement).selectAll(\"*\").remove();\r\n// }\r\n\r\n// private setupDimensions(): void {\r\n//   const wrapper = this.timelineElement.nativeElement;\r\n//   this.width = wrapper.clientWidth - this.margin.left - this.margin.right;\r\n//   this.height = wrapper.clientHeight - this.margin.top - this.margin.bottom;\r\n// }\r\n\r\n// private setupScales(): void {\r\n//   this.x = d3.scaleTime().range([0, this.width]);\r\n//   this.y = d3.scaleLinear().range([this.height, 0]);\r\n// }\r\n\r\n// private createSvg(): void {\r\n//   this.svg = d3.select(this.timelineElement.nativeElement)\r\n//     .append(\"svg\")\r\n//     .attr(\"width\", this.width + this.margin.left + this.margin.right)\r\n//     .attr(\"height\", this.height + this.margin.top + this.margin.bottom)\r\n//     .append(\"g\")\r\n//     .attr(\"transform\", `translate(${this.margin.left},${this.margin.top})`);\r\n// }\r\n\r\n// private populateData(): void {\r\n//   // Transform your data here\r\n//   this.vnodes.forEach(d => {\r\n//     const time = moment(d.date); // Replace 'date' with your actual date field\r\n//     if (time.isValid()) {\r\n//       d.date = time.toDate();\r\n//     } else {\r\n//       d.date = null;\r\n//     }\r\n//   });\r\n\r\n//   this.timeDomainStart = d3.min(this.vnodes, d => d.date);\r\n//   this.timeDomainEnd = d3.max(this.vnodes, d => d.date);\r\n//   this.x.domain([this.timeDomainStart, this.timeDomainEnd]);\r\n// }\r\n\r\n// private drawHistogram(): void {\r\n//   // Draw your histogram here\r\n//   this.histogram = d3.histogram()\r\n//     .value(d => d.date) // Replace 'date' with your actual date field\r\n//     .domain(this.x.domain())\r\n//     .thresholds(d3.thresholdScott);\r\n\r\n//   const bins = this.histogram(this.vnodes);\r\n\r\n//   if (this.cumulative) {\r\n//     let sum = 0;\r\n//     bins.forEach(bin => {\r\n//       sum += bin.length;\r\n//       bin.length = sum;\r\n//     });\r\n//   }\r\n\r\n//   this.y.domain([0, d3.max(bins, d => d.length)]);\r\n\r\n//   this.svg.selectAll(\"rect\")\r\n//     .data(bins)\r\n//     .enter()\r\n//     .append(\"rect\")\r\n//     .attr(\"x\", d => this.x(d.x0))\r\n//     .attr(\"y\", d => this.y(d.length))\r\n//     .attr(\"width\", d => this.x(d.x1) - this.x(d.x0))\r\n//     .attr(\"height\", d => this.height - this.y(d.length))\r\n//     .attr(\"fill\", \"steelblue\"); // Change fill as necessary\r\n// }\r\n\r\n// private setupBrush(): void {\r\n//   this.brush = d3.brushX()\r\n//     .extent([[0, 0], [this.width, this.height]])\r\n//     .on(\"end\", () => this.onBrushEnd());\r\n\r\n//   this.brushG = this.svg.append(\"g\")\r\n//     .attr(\"class\", \"brush\")\r\n//     .call(this.brush);\r\n// }\r\n\r\n// private onBrushEnd(): void {\r\n//   this.selection = d3.brushSelection(this.brushG.node());\r\n//   if (this.selection) {\r\n//     // Handle brush selection change\r\n//   }\r\n// }\r\n\r\n// playPauseTimeline(): void {\r\n//   if (this.isPlaying) {\r\n//     this.stopTimeline();\r\n//   } else {\r\n//     this.startTimeline();\r\n//   }\r\n// }\r\n\r\n// startTimeline(): void {\r\n//   this.isPlaying = true;\r\n//   this.setTimer();\r\n// }\r\n\r\n// stopTimeline(): void {\r\n//   this.isPlaying = false;\r\n//   if (this.timer) {\r\n//     this.timer.stop();\r\n//   }\r\n// }\r\n\r\n// setTimer(): void {\r\n//   if (this.timer) {\r\n//     this.timer.stop();\r\n//   }\r\n//   this.timer = d3.interval(() => {\r\n//     // Timer logic for updating the timeline\r\n//     // this.updateTimeline();\r\n//   }, 100); // Adjust interval as needed\r\n// }\r\n\r\nupdateNodeColors() {\r\n  this.refresh();\r\n}\r\nupdateVisualization() {\r\n  //Not Relevant\r\n}\r\n\r\napplyStyleFileSettings() {\r\n  this.widgets = (window as any).context.commonService.session.style.widgets;\r\n  this.setDefaultsWidgets();\r\n  \r\n  this.updateSettingsRows()\r\n  this.onLegendPositionChange()\r\n}\r\n\r\nupdateLinkColor() {\r\n  //Not Relevant\r\n}\r\n\r\nonRecallSession() {\r\n}\r\n\r\nopenExport() {\r\n  this.setCalculatedResolution();\r\n  this.ShowEpiExportPane = !this.ShowEpiExportPane;\r\n}\r\n\r\nexportVisualization() {\r\n  if (this.EpiExportFileType == 'svg') {\r\n      let content = this.commonService.unparseSVG(this.epiCurveSVGElement.nativeElement);\r\n      let blob = new Blob([content], { type: 'image/svg+xml;charset=utf-8' });\r\n      saveAs(blob, this.EpiExportFileName + '.' + this.EpiExportFileType);\r\n  } else {\r\n      saveSvgAsPng(this.epiCurveSVGElement.nativeElement, this.EpiExportFileName + '.' + this.EpiExportFileType, {\r\n          scale: this.SelectedNetworkExportScaleVariable,\r\n          backgroundColor: \"#ffffff\",\r\n          encoderType: 'image/' + this.EpiExportFileType,\r\n          //encoderOptions: this.SelectedNetworkExportQualityVariable\r\n      });\r\n  }\r\n  this.ShowEpiExportPane = false;\r\n}\r\n\r\nopenRefreshScreen() {\r\n\r\n}\r\n\r\nonLoadNewData() {\r\n  throw new Error('Method not implemented.');\r\n}\r\nonFilterDataChange() {\r\n  throw new Error('Method not implemented.');\r\n}\r\n\r\n\r\n}\r\n\r\n\r\n\r\nexport namespace TimelineComponent {\r\n  export const componentTypeName = 'Epi Curve';\r\n}","import { GraphNodeShape } from '@unovis/ts';\r\n\r\nexport type NodeDatum2 = {\r\n  id: string;\r\n  group: string;\r\n  label: string;\r\n  shape: GraphNodeShape;\r\n}\r\n\r\nexport type LinkDatum2 = {\r\n  source: string;\r\n  target: string;\r\n}\r\n\r\nexport type GraphPanelConfig = {\r\n  nodes: (string | number)[];\r\n  label?: string;\r\n  borderColor?: string;\r\n  borderWidth?: number;\r\n  padding?: number;\r\n  dashedOutline?: boolean;\r\n  sideIconSymbol?: string;\r\n  sideIconFontSize?: string;\r\n  sideIconSymbolColor?: string;\r\n  sideIconShape?: GraphNodeShape;\r\n  sideIconShapeSize?: number;\r\n  sideIconShapeStroke?: string;\r\n  sideIconCursor?: string;\r\n}\r\n\r\nexport const nodes: NodeDatum2[] = [\r\n  { id: 'node1', group: 'group1', label: 'Node 1', shape: GraphNodeShape.Circle },\r\n  { id: 'node2', group: 'group1', label: 'Node 2', shape: GraphNodeShape.Circle },\r\n  { id: 'node3', group: 'group2', label: 'Node 3', shape: GraphNodeShape.Square },\r\n  { id: 'node4', group: 'group2', label: 'Node 4', shape: GraphNodeShape.Square },\r\n];\r\n\r\nexport const links: LinkDatum2[] = [\r\n  { source: 'node1', target: 'node2' },\r\n  { source: 'node3', target: 'node4' },\r\n  { source: 'node1', target: 'node3' },\r\n  { source: 'node2', target: 'node4' },\r\n];\r\n\r\nexport const panels: GraphPanelConfig[] = [\r\n  {\r\n    nodes: ['node1', 'node2'],\r\n    label: 'Group 1',\r\n    borderColor: '#E3116C',\r\n    borderWidth: 2,\r\n    padding: 10,\r\n    dashedOutline: true,\r\n    sideIconSymbol: '',\r\n    sideIconShape: GraphNodeShape.Circle,\r\n    sideIconShapeStroke: '#777',\r\n    sideIconCursor: 'pointer',\r\n    sideIconFontSize: '24px',\r\n    sideIconShapeSize: 50,\r\n  },\r\n  {\r\n    nodes: ['node3', 'node4'],\r\n    label: 'Group 2',\r\n    borderColor: '#00A1E4',\r\n    borderWidth: 2,\r\n    padding: 10,\r\n    dashedOutline: true,\r\n    sideIconSymbol: '',\r\n    sideIconShape: GraphNodeShape.Square,\r\n    sideIconShapeStroke: '#777',\r\n    sideIconCursor: 'pointer',\r\n    sideIconFontSize: '24px',\r\n    sideIconShapeSize: 50,\r\n  },\r\n];","import { Injector, Component, Output, OnChanges, SimpleChange, EventEmitter, OnInit, ViewChild, ElementRef, ChangeDetectorRef, OnDestroy, Inject, ChangeDetectionStrategy } from '@angular/core';\r\nimport { AppComponentBase } from '@shared/common/app-component-base';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { CommonService } from '../../contactTraceCommonServices/common.service';\r\nimport * as d3 from 'd3';\r\nimport { forceAttract } from 'd3-force-attract';\r\nimport { Clipboard } from '@angular/cdk/clipboard';\r\n//import * as ClipboardJS from 'clipboard';\r\nimport * as saveAs from 'file-saver';\r\nimport * as domToImage from 'dom-to-image-more';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { DialogSettings } from '../../helperClasses/dialogSettings';\r\nimport { MicobeTraceNextPluginEvents } from '../../helperClasses/interfaces';\r\nimport * as _ from 'lodash';\r\nimport { MicrobeTraceNextVisuals } from '../../microbe-trace-next-plugin-visuals';\r\nimport { CustomShapes } from '@app/helperClasses/customShapes';\r\n//import { FormsModule } from '@angular/forms';\r\nimport { DialogModule } from 'primeng/dialog';\r\nimport { DialogService, DynamicDialogRef } from 'primeng/dynamicdialog';\r\nimport { BaseComponentDirective } from '@app/base-component.directive';\r\nimport { saveSvgAsPng } from 'save-svg-as-png';\r\nimport { ComponentContainer } from 'golden-layout';\r\nimport { MicrobeTraceNextHomeComponent } from '../../microbe-trace-next-plugin.component';\r\nimport { GoogleTagManagerService } from 'angular-google-tag-manager';\r\n\r\nimport { data, NodeDatum, LinkDatum, GraphData } from './data';\r\nimport { GraphCircleLabel, Graph, GraphForceLayoutSettings, GraphLayoutType, GraphNode, GraphLink, GraphPanelConfig, GraphLinkStyle } from '@unovis/ts';\r\n\r\nimport { nodes, links, NodeDatum2, LinkDatum2, panels } from './data2';\r\n\r\n@Component({\r\n    selector: 'TwoDComponent',\r\n    templateUrl: './twoD-plugin.component.html',\r\n    styleUrls: ['./twoD-plugin.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class TwoDComponent extends BaseComponentDirective implements OnInit, MicobeTraceNextPluginEvents, OnDestroy {\r\n\r\n    @Output() DisplayGlobalSettingsDialogEvent = new EventEmitter();\r\n    @ViewChild('twoDGraph') twoDGraph: Graph<GraphNode, GraphLink>;\r\n\r\n    svgStyle: {} = {\r\n        'height': '0px',\r\n        'width': '1000px'\r\n    };\r\n\r\n    vizLoaded = true;\r\n\r\n    data;\r\n\r\n    data2: { nodes: NodeDatum2[]; links: LinkDatum2[] } = { nodes, links };\r\n\r\n    layoutParallelNodesPerColumn = 4;\r\n\r\n    layoutType2 = GraphLayoutType.Parallel;\r\n    layoutNodeGroup = (d: NodeDatum2): string => d.group;\r\n    layoutParallelNodeSubGroup = (d: NodeDatum2): string => d.id;\r\n    panels: GraphPanelConfig[] = panels;\r\n\r\n    layoutType = GraphLayoutType.Force;\r\n\r\n    containerHeight = 800; // or any other number you want\r\n  \r\n    graphData : GraphData = {\r\n        nodes :[],\r\n        links :[]\r\n    };\r\n\r\n    showParallel: boolean = false;\r\n\r\n    selectedNodeId = undefined;\r\n\r\n    forceLayoutSettings: any = {\r\n      fixNodePositionAfterSimulation: true,\r\n      linkDistance: this.getLinkDistance()\r\n    }\r\n    selectedNodeShape: string = 'circle'; // Default shape\r\n\r\n    linkLabel = (l: LinkDatum): GraphCircleLabel => this.getLinkLabel(l)\r\n    nodeLabel = (n: NodeDatum) => this.getNodeLabel(n)\r\n    nodeShape = (n: NodeDatum) => this.getNodeShape(n)\r\n    linkStroke = (l: LinkDatum) => this.getLinkColor(l)\r\n    linkStyle = (l: LinkDatum) => this.getLinkStyle(l)\r\n    linkWidth = (l: LinkDatum) => this.getLinkWidth(l)\r\n    linkArrow = (l: LinkDatum) => this.getLinkArrow(l)\r\n    nodeFill = (n: NodeDatum) => this.getNodeColor(n)\r\n    nodeStroke = (n: NodeDatum) => this.getNodeStroke(n)\r\n    nodeSize =  (n: NodeDatum) => this.getNodeSize(n)\r\n    // onNodeSelectionBrush = (selectedNodes: GraphNode[], event: any)  => this.onSelectionBrush(selectedNodes)\r\n    // onNodeSelectionDrag = (selectedNodes: GraphNode[], event: any) => this.onSelectionDrag(selectedNodes)\r\n\r\n    onSelectionBrush(nodes: GraphNode[]) {\r\n        console.log('onSelectionNode: ', nodes);\r\n    }\r\n\r\n    getLinkStyle(l: LinkDatum) {\r\n\r\n        if((l.source['_id'] === \"KF773429\" && l.target['_id'] === \"KF773430\") || (l.source['_id'] === \"KF773430\" && l.target['_id'] === \"KF773429\")) {\r\n            console.log('setting link dashed: ', _.cloneDeep(l));\r\n        }\r\n        \r\n        return l['origin'].length > 1 ? GraphLinkStyle.Dashed : GraphLinkStyle.Solid;\r\n    }\r\n\r\n    onSelectionDrag(nodes: GraphNode[]) {\r\n        console.log('onSelectionDrag: ', nodes);\r\n    }\r\n\r\n    getLinkDistance() {\r\n        let dist = Math.random() * 100;\r\n        console.log('getLinkDistance: ',dist);\r\n        return dist;\r\n    }\r\n\r\n    events = {\r\n        [Graph.selectors.node]: {\r\n            click: (d: GraphNode) => {\r\n                console.log('selected node is: ', d);\r\n                this.selectedNodeId = d.id as string;\r\n                this._rerender();\r\n                // config.selectedNodeId = d.id\r\n                // Set the selected node id here, e.g.: config.selectedNodeId = d.id\r\n                // and trigger the component update if required by your UI framework\r\n             },\r\n             mouseover: (d: GraphNode, event: MouseEvent) => {\r\n                this.showNodeTooltip(d, event);\r\n                // Perform actions on hover, such as highlighting or displaying additional information\r\n              },\r\n              mouseout: (d: GraphNode) => {\r\n                this.hideTooltip();\r\n              },\r\n              brush: (selectedNodes: GraphNode[], event: any) => {\r\n                this.onSelectionBrush(selectedNodes);\r\n              },\r\n              drag: (selectedNodes: GraphNode[], event: any) => {\r\n                this.onSelectionDrag(selectedNodes);\r\n              }\r\n            \r\n        },\r\n        [Graph.selectors.link]: {\r\n             mouseover: (d: GraphLink, event: MouseEvent) => {\r\n                this.showLinkTooltip(d, event);\r\n                // Perform actions on hover, such as highlighting or displaying additional information\r\n              },\r\n              mouseout: () => {\r\n                this.hideTooltip();\r\n              }\r\n            \r\n        },\r\n      }\r\n\r\n\r\n    getNodeSize( node : any ) {\r\n\r\n        let defaultSize = this.widgets['node-radius']; \r\n        let size = defaultSize, med = defaultSize, oldrng, min, max;\r\n        let sizeVariable = this.widgets['node-radius-variable'];\r\n    \r\n\r\n        // console.log('in size: ', this.widgets['node-radius-variable'])\r\n        // console.log('in size 2: ', this.widgets['node-radius']);\r\n\r\n        // if (this.widgets['node-radius'] > 90) this.widgets['node-radius'] = 10;\r\n        // console.log('node index by size: ',this.widgets['node-radius-variable'] );\r\n        // console.log('node Radius Var: ', this.widgets['node-radius']);\r\n        if (this.widgets['node-radius-variable'] == 'None') {\r\n            return this.widgets['node-radius'];\r\n        } else {\r\n        \r\n            let v = node[sizeVariable];\r\n            \r\n            if (!this.isNumber(v)) v = this.nodeMid;\r\n    \r\n            // Check the type of v before calling linkScale\r\n    \r\n            // Ensure v is a number before using linkScale\r\n            if (typeof v === 'number') {\r\n                let scaleValue = this.nodeScale(v);\r\n                console.log('link scale', scaleValue);\r\n                return scaleValue;\r\n            } else {\r\n                console.error('v is not a number:', v);\r\n                return this.nodeScale; // Default to scalar if v is not a number\r\n            }\r\n\r\n        \r\n            // return this.visuals.twoD.commonService.temp.style.nodeColorMap(this.visuals.twoD.commonService.session.data.nodes[index][variable]);\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    getNodeStroke = (n: NodeDatum)  => {\r\n       \r\n        if(n.selected) {\r\n            return this.widgets['selected-node-stroke-color'];\r\n        } else {\r\n            return '#000';\r\n        }\r\n        \r\n    }\r\n\r\n    nodeStrokeWidth = (n: NodeDatum)  => {\r\n        return this.nodeBorderWidth;\r\n    }\r\n\r\n    getLinkArrow = (link: any ) => {\r\n        if(this.widgets['link-directed'] && this.widgets['link-bidirectional']) {\r\n            return \"double\";\r\n        }\r\n        return this.widgets['link-directed'];\r\n    }\r\n\r\n\r\n    getNodeColor( node : any ) {\r\n\r\n        let variable = this.widgets['node-color-variable'];\r\n        let color = this.widgets['node-color'];\r\n\r\n        // Set cluster to group if showing paralell grouping\r\n        if(variable == \"cluster\" && this.showParallel) {\r\n            variable = \"group\";\r\n        }\r\n\r\n        return (variable == 'None') ? color : this.visuals.twoD.commonService.temp.style.nodeColorMap(node[variable]);\r\n\r\n    }\r\n\r\n    getLinkWidth( link: any ) {\r\n        let scalar = this.widgets['link-width'];\r\n        let variable = this.widgets['link-width-variable'];\r\n    \r\n        if (variable == 'None') return scalar;\r\n    \r\n        else {\r\n            let mid = (this.linkMax - this.linkMin) / 2 + this.linkMin;\r\n            let v = link[variable];\r\n            \r\n    \r\n            if (!this.isNumber(v)) v = mid;\r\n    \r\n            // Ensure v is a number before using linkScale\r\n            if (typeof v === 'number') {\r\n                let scaleValue = this.linkScale(v);\r\n                return scaleValue;\r\n            } else {\r\n                return scalar; // Default to scalar if v is not a number\r\n            }\r\n        }\r\n    }\r\n\r\n      // Method to handle shape change from the dropdown\r\n      onNodeShapeChange(newShape: string) {\r\n        this.selectedNodeShape = newShape;\r\n        this._rerender();\r\n    }\r\n\r\n\r\n    getLinkColor( link: any ) {\r\n        let variable = this.widgets['link-color-variable'];\r\n        let color = this.widgets['link-color'];\r\n\r\n        if((link.source.id === \"KF773429\" && link.target.id === \"KF773430\") || (link.source.id === \"KF773430\" && link.target.id === \"KF773429\")) {\r\n            console.log('link variable: ', link[variable]);\r\n        }\r\n\r\n\r\n         // Convert hex color to RGBA\r\n        const hexToRgba = (hex: string, alpha: number) => {\r\n            const r = parseInt(hex.slice(1, 3), 16);\r\n            const g = parseInt(hex.slice(3, 5), 16);\r\n            const b = parseInt(hex.slice(5, 7), 16);\r\n            return `rgba(${r}, ${g}, ${b}, ${alpha})`;\r\n        };\r\n\r\n        let finalColor;\r\n        let alphaValue;\r\n\r\n        if ((variable == 'Origin' || variable == 'origin') && link.origin.length > 1) {\r\n            finalColor = this.visuals.twoD.commonService.temp.style.linkColorMap(\"Duo-Link\");\r\n            alphaValue =this.visuals.twoD.commonService.temp.style.linkAlphaMap(\"Duo-Link\")\r\n            // this.visuals.twoD.commonService.temp.style.linkColorMap(\"Multi-Link\"), alphaValue;\r\n        } else {\r\n            finalColor = (variable == 'None') ? color : this.visuals.twoD.commonService.temp.style.linkColorMap(link[variable]);\r\n            alphaValue =this.visuals.twoD.commonService.temp.style.linkAlphaMap(link[variable])\r\n        }\r\n\r\n        return hexToRgba(finalColor, alphaValue);\r\n\r\n    }\r\n\r\n    private customShapes : CustomShapes = new CustomShapes();\r\n\r\n    private symbolTableWrapper: HTMLElement | null = null;\r\n    private linkColorTableWrapper: HTMLElement | null = null;\r\n    private nodeColorTableWrapper: HTMLElement | null = null;\r\n\r\n\r\n    linkMin: number = 3;\r\n    linkMax: number = 27;\r\n    linkScale : any;\r\n    visLinks : any;\r\n    linkMid : number = 1\r\n\r\n    nodeMin: number = 3;\r\n    nodeMax: number = 27;\r\n    nodeScale : any;\r\n    visNodes : any;\r\n    nodeMid : number = 1;\r\n\r\n    autoFit: boolean = true;\r\n\r\n    ShowNetworkAttributes: boolean = false;\r\n    ShowStatistics: boolean = true;\r\n    Show2DExportPane: boolean = false;\r\n    Show2DSettingsPane: boolean = false;\r\n    IsDataAvailable: boolean = false;\r\n    // svg: any = null;\r\n    widgets: object;\r\n    halfWidth: any = null;\r\n    halfHeight: any = null;\r\n    transform: any = null;\r\n    force: any = null;\r\n    radToDeg: any = (180 / Math.PI);\r\n    selected: any = null;\r\n    multidrag: boolean = false;\r\n    // clipboard = new ClipboardJS('#copyID, #copySeq');\r\n    zoom: any = null;\r\n    brush: any = null;\r\n    FieldList: SelectItem[] = [];\r\n    ToolTipFieldList: SelectItem[] = [];\r\n    LinkToolTipList: SelectItem[] = [];\r\n\r\n    ctrlPressed : boolean = false;\r\n    dragging : boolean = false;\r\n\r\n    isLoading : boolean = true;\r\n    viewActive: boolean = true;\r\n    \r\n    //Polygon Tab\r\n    SelectedPolygonLabelVariable: string = \"None\";\r\n    SelectedPolygonColorVariable: string = \"None\";\r\n    SelectedPolygonLabelOrientationVariable: string = \"top\";\r\n    SelectedPolygonLabelSizeVariable: number = 0.0;\r\n    SelectedPolygonGatherValue: number = 0.0;\r\n    CenterPolygonVariable: string = \"None\";\r\n    SelectedPolygonLabelShowVariable: string = \"Hide\";\r\n    SelectedPolygonColorShowVariable: string = \"Hide\";\r\n    SelectedPolygonColorTableShowVariable: string = \"Hide\";\r\n\r\n\r\n    // Node Tab    \r\n    SelectedNodeLabelVariable: string = \"None\";\r\n    SelectedNodeTooltipVariable: any = \"None\";\r\n    SelectedNodeSymbolVariable: string = \"None\";\r\n    SelectedNodeShapeVariable: string = \"symbolCircle\";\r\n    SelectedNodeRadiusVariable: string = \"None\";\r\n    SelectedNodeRadiusSizeVariable: string = \"None\";\r\n    SelectedNodeRadiusSizeMaxVariable: string = \"None\";\r\n    SelectedNodeRadiusSizeMinVariable: string = \"None\";\r\n    TableTypes: any = [\r\n        { label: 'Show', value: 'Show' },\r\n        { label: 'Hide', value: 'Hide' }\r\n    ];\r\n    SelectedNetworkTableTypeVariable: string = \"Hide\";\r\n\r\n    private isExportClosed: boolean = false;\r\n    /* XXXXXnot sure if this boolean is necessary; Related to exportWork, and bottom-table s (ie. node-symbol-table-bottom)\r\n     currently exportWork2 is used which don't make use of isExporting and bottom-table s XXXXX */\r\n    public isExporting: boolean = false;\r\n\r\n    isMac: boolean = navigator.userAgent.toUpperCase().indexOf('MAC') >= 0;\r\n\r\n\r\n    // Link Tab\r\n    SelectedLinkTooltipVariable: any = \"None\";\r\n    SelectedLinkLabelVariable: string = \"None\";\r\n    SelectedLinkDecimalVariable: number = 3;\r\n    SelectedLinkTransparencyVariable: any = 0;\r\n    SelectedLinkWidthByVariable: string = \"None\";\r\n    SelectedLinkWidthMax: number = 27;\r\n    SelectedLinkWidthMin: number = 3;\r\n\r\n    ReciprocalTypes: any = [\r\n        { label: 'Reciprocal', value: 'Reciprocal' },\r\n        { label: 'Non-Reciprocal', value: 'Non-Reciprocal' }\r\n    ];\r\n    SelectedLinkReciprocalTypeVariable: string = \"Reciprocal\";\r\n\r\n    SelectedLinkWidthVariable: any = 0;\r\n    SelectedLinkLengthVariable: any = 0;\r\n    ArrowTypes: any = [\r\n        { label: 'Hide', value: 'Hide' },\r\n        { label: 'Show', value: 'Show' }\r\n    ];\r\n\r\n    hideShowOptions: any = [\r\n        { label: 'Hide', value: false },\r\n        { label: 'Show', value: true }\r\n    ];\r\n\r\n    bidirectionalOptions: any = [\r\n        { label: 'Hide', value: 'Hide' },\r\n        { label: 'Show', value: 'Show' }\r\n    ];\r\n    SelectedLinkArrowTypeVariable: string = \"Hide\";\r\n\r\n    SelectedLinkBidirectionalTypeVariable: string = \"Hide\";\r\n\r\n\r\n    // Network \r\n    NeighborTypes: any = [\r\n        { label: 'Normal', value: 'Normal' },\r\n        { label: 'Highlighted', value: 'Highlighted' }\r\n    ];\r\n    SelectedNetworkNeighborTypeVariable: string = \"Normal\";\r\n\r\n    GridLineTypes: any = [\r\n        { label: 'Hide', value: 'Hide' },\r\n        { label: 'Show', value: 'Show' }\r\n    ];\r\n    SelectedNetworkGridLineTypeVariable: string = \"Hide\";\r\n\r\n    SelectedNetworkChargeVariable: any = 200;\r\n    SelectedNetworkGravityVariable: any = .05;\r\n    SelectedNetworkFrictionVariable: any = .4;\r\n    SelecetedNetworkLinkStrengthVariable: any = 0.123;\r\n    SelectedNetworkExportFilenameVariable: string = \"\";\r\n\r\n    NetworkExportFileTypeList: any = [\r\n        { label: 'png', value: 'png' },\r\n        { label: 'jpeg', value: 'jpeg' },\r\n        { label: 'webp', value: 'webp' },\r\n        { label: 'svg', value: 'svg' }\r\n    ];\r\n\r\n    SelectedNetworkExportFileTypeListVariable: string = \"png\";\r\n    SelectedNetworkExportScaleVariable: any = 1;\r\n    SelectedNetworkExportQualityVariable: any = 0.92;\r\n    CalculatedResolution: string;\r\n\r\n    SelectedNodeLabelSizeVariable: any = 16;\r\n\r\n    public nodeBorderWidth = 2.0;\r\n\r\n    ShowNodeSymbolWrapper: boolean = false;\r\n    ShowNodeSymbolTable: boolean = false;\r\n    ShowPolygonColorTable: boolean = false;\r\n    ShowAdvancedExport: boolean = true;\r\n\r\n    NodeSymbolTableWrapperDialogSettings: DialogSettings = new DialogSettings('#node-symbol-table-wrapper', false);\r\n    PolygonColorTableWrapperDialogSettings: DialogSettings = new DialogSettings('#polygon-color-table-wrapper', false);\r\n\r\n    Node2DNetworkExportDialogSettings: DialogSettings = new DialogSettings('#network-settings-pane', false);\r\n\r\n    ContextSelectedNodeAttributes: {attribute: string, value: string}[] = [];\r\n\r\n    private visuals: MicrobeTraceNextVisuals;\r\n\r\n    // Set the zoom scale extent\r\n    zoomScaleExtent: [number, number] = [0.005, 5]; // Minimum zoom of 0.1 and maximum zoom of 2\r\n\r\n    constructor(injector: Injector,\r\n        private eventManager: EventManager,\r\n        public commonService: CommonService,\r\n        @Inject(BaseComponentDirective.GoldenLayoutContainerInjectionToken) private container: ComponentContainer, \r\n        elRef: ElementRef,\r\n        private cdref: ChangeDetectorRef,\r\n        private clipboard: Clipboard,\r\n        private gtmService: GoogleTagManagerService) {\r\n\r\n            super(elRef.nativeElement);\r\n\r\n            // this.setExpanded(this.mainSite);\r\n\r\n\r\n            this.visuals = commonService.visuals;\r\n            this.commonService.visuals.twoD = this;\r\n            this.widgets = this.commonService.session.style.widgets;\r\n            window.addEventListener('resize', () => {\r\n                // Replace this with the logic to determine the current show/hide state\r\n                const showState: boolean = this.widgets['network-gridlines-show'];\r\n                this.drawGridlines(showState);\r\n            });\r\n\r\n            this.container.on('hide', () => { \r\n                this.viewActive = false; \r\n                this.cdref.detectChanges();\r\n            })\r\n            this.container.on('show', () => { \r\n                this.viewActive = true; \r\n                this.cdref.detectChanges();\r\n                setTimeout(() => {\r\n                    (this.twoDGraph as any).component.fitView(500);\r\n                }, 50)\r\n            })\r\n\r\n             // Initialize the selectedNodeShape from the settings\r\n            this.selectedNodeShape = this.widgets['node-symbol'] || 'circle';\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.visuals.twoD.commonService.updateNetwork();\r\n        this.InitView();\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        // Apply CSS variables programmatically\r\n        const root = document.documentElement;\r\n        root.style.setProperty('--vis-graph-brush-selection-opacity', '1');\r\n        root.style.setProperty('--vis-graph-brushed-node-stroke-color', '#ff0000');\r\n        root.style.setProperty('--vis-graph-brushed-node-label-text-color', '#00ff00');\r\n        root.style.setProperty('--vis-graph-brushed-node-icon-fill-color', '#0000ff');\r\n        setTimeout(() => {this.saveNodeFx()}, 1000);\r\n\r\n        (this.twoDGraph as any).component.config.onNodeDragEnd = (d, e) => this.updateNodeFx(d, e);\r\n      }\r\n\r\n    saveNodeFx() {\r\n        (this.twoDGraph as any).component.datamodel._nodes.forEach(node => {\r\n            let globalNode = (window as any).context.commonService.session.data.nodeFilteredValues.find(x => x._id == node.id)\r\n            globalNode['fx'] = node.x;\r\n            globalNode['fy'] = node.y;\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Updates the saved postion of a node when it is dragged by the user\r\n     * @param node\r\n     */\r\n    updateNodeFx(node, event) {\r\n      let globalNode = (window as any).context.commonService.session.data.nodeFilteredValues.find(x => x._id == node.id)\r\n      globalNode['fx'] = node._state.fx;\r\n      globalNode['fy'] = node._state.fy;\r\n    }\r\n\r\n    applyNodeFx() {\r\n        // idk, this forEach loop produces an error (_nodes.forEach  is not a function) but it still executes just fine. Without the forEach loop not are \r\n        // placed differently each time the timeline is run.\r\n        try {\r\n            (this.twoDGraph as any).component.datamodel._nodes.forEach(node => {\r\n                let globalNode = (window as any).context.commonService.session.data.nodeFilteredValues.find(x => x._id == node.id)\r\n                if (node.index == 1) {\r\n                    //console.log('prev ', node._state, node.x, node.y)\r\n                    //console.log('load ', globalNode['fx'], globalNode['fy'])\r\n                }\r\n                node.x = globalNode['fx'];\r\n                node.y = globalNode['fy'];\r\n                node._state = {fx: globalNode['fx'], fy: globalNode['fy']};\r\n                if (node.index == 1) {\r\n                    //console.log('post ', node._state, node.x, node.y)\r\n                }\r\n            })\r\n        } catch (error) {\r\n            console.log('error setting node positions back to previous location')\r\n        }\r\n        (this.twoDGraph as any).component?.render();  \r\n    }\r\n\r\n    /** Initializes the view.\r\n     * \r\n     * Defines the structure of the svg of twoD network and adds functionalities such as click, zoom, forces, etc...\r\n     * \r\n     * Populates various lists for Fieldlist (options for node-label-variable, node-symbol-variable, node-radius-variable, polygon-foci), \r\n     * ToolTipFieldList (options for link-width-variable, link-label-variable), and LinkToolTipList (link-toolitp-variable)\r\n     * \r\n     */\r\n    InitView() {\r\n\r\n        this.gtmService.pushTag({\r\n            event: \"page_view\",\r\n            page_location: \"/2d_network\",\r\n            page_title: \"2D Network View\"\r\n        });\r\n        this.visuals.twoD.IsDataAvailable = (this.visuals.twoD.commonService.session.data.nodes.length === 0 ? false : true);\r\n        if (!this.widgets['default-distance-metric']) {\r\n          this.widgets['default-distance-metric'] = \r\n            this.visuals.twoD.commonService.GlobalSettingsModel.SelectedDistanceMetricVariable;\r\n          this.widgets['link-threshold'] = \r\n            this.visuals.twoD.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable;\r\n        }\r\n  \r\n        // Use this method to prepare your variables before they're used in the template\r\n        this.commonService.session.style.widgets['node-tooltip-variable'] = this.ensureArray(this.commonService.session.style.widgets['node-tooltip-variable']);\r\n        this.commonService.session.style.widgets['link-tooltip-variable'] = this.ensureArray(this.commonService.session.style.widgets['link-tooltip-variable']);\r\n        let that = this;\r\n\r\n        if (this.visuals.twoD.IsDataAvailable === true && this.visuals.twoD.zoom === null) {\r\n\r\n            // PRE D3\r\n            d3.select('svg#viz-force')\r\n                .append('g')\r\n                .attr('class', 'horizontal-gridlines');\r\n\r\n            d3.select('svg#viz-force')\r\n                .append('g')\r\n                .attr('class', 'vertical-gridlines');\r\n            // d3.select('svg#network').exit().remove();\r\n            // this.visuals.twoD.svg = d3.select('svg#network').append('g');\r\n\r\n            // populate this.twoD.FieldList with [None, ...nodeFields]\r\n            this.visuals.twoD.FieldList = [];\r\n            this.visuals.twoD.FieldList.push({ label: \"None\", value: \"None\" });\r\n            this.visuals.twoD.commonService.session.data['nodeFields'].map((d, i) => {\r\n                if (d != 'seq' && d != 'sequence') {\r\n                    this.visuals.twoD.FieldList.push(\r\n                        {\r\n                            label: this.visuals.twoD.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                            value: d\r\n                        });\r\n                }\r\n\r\n            });\r\n\r\n\r\n            // populate this.visuals.twoD.ToolTipFieldList and this.LinkToolTipList\r\n            this.visuals.twoD.ToolTipFieldList = [];\r\n            this.LinkToolTipList = [];\r\n            this.visuals.twoD.ToolTipFieldList.push({ label: \"None\", value: \"None\" });\r\n            this.visuals.twoD.commonService.session.data['linkFields'].map((d, i) => {\r\n                if (d == 'source') {\r\n                    let data = [\r\n                        {\r\n                            label: 'Source ID',\r\n                            value: 'source_id'\r\n                        },\r\n                        {\r\n                            label: 'Source Index',\r\n                            value: 'source_index'\r\n                        }\r\n                    ]\r\n                    this.visuals.twoD.ToolTipFieldList = this.visuals.twoD.ToolTipFieldList.concat(data);\r\n                    this.LinkToolTipList = this.LinkToolTipList.concat(data)\r\n                } else if (d == 'target') {\r\n                    let data = [\r\n                        {\r\n                            label: 'Target ID',\r\n                            value: 'target_id'\r\n                        },\r\n                        {\r\n                            label: 'Target Index',\r\n                            value: 'target_index'\r\n                        }\r\n                    ]\r\n                    this.visuals.twoD.ToolTipFieldList = this.visuals.twoD.ToolTipFieldList.concat(data);\r\n                    this.LinkToolTipList = this.LinkToolTipList.concat(data)\r\n                } else {\r\n                    this.LinkToolTipList.push(\r\n                        {\r\n                            label: this.visuals.twoD.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                            value: d\r\n                        });\r\n                    this.visuals.twoD.ToolTipFieldList.push(\r\n                        {\r\n                            label: this.visuals.twoD.commonService.capitalize(d.replace(\"_\", \"\")),\r\n                            value: d\r\n                        });\r\n                }\r\n            });\r\n\r\n\r\n            this.visuals.twoD.svgStyle = {\r\n                'height': '100%',\r\n                'min-width.%': 100,\r\n            };\r\n\r\n            this.visuals.twoD.halfWidth = $('#network').parent().width() / 2;\r\n            this.visuals.twoD.halfHeight = $('#network').parent().parent().parent().height() / 2;\r\n            this.containerHeight = this.visuals.twoD.halfHeight * 2 - 40;\r\n\r\n            let networkData = { \r\n                nodes : this.visuals.twoD.commonService.getVisibleNodes(), \r\n                links : this.visuals.twoD.commonService.getVisibleLinks()\r\n            }\r\n            \r\n            this.data = this.visuals.twoD.commonService.convertToGraphDataArray(networkData);\r\n            // Now update panels\r\n            this.updatePanels();\r\n\r\n            console.log('data: ', this.data);\r\n\r\n            $( document ).on( \"node-visibility\", function( ) {\r\n                \r\n                // if (!that.isLoading) {\r\n                //     console.log('render node-vis');\r\n                //     that.isLoading = true;\r\n                //     that.visuals.twoD.render(false);\r\n                //     setTimeout(() => {\r\n                //         that.isLoading = false;\r\n                //       }, 1000);\r\n                // }\r\n                // let networkData = { \r\n                //     nodes : that.visuals.twoD.commonService.getVisibleNodes(), \r\n                //     links : that.visuals.twoD.commonService.getVisibleLinks()\r\n                // }\r\n                \r\n                // that.data = that.visuals.twoD.commonService.convertToGraphDataArray(networkData);\r\n            });\r\n\r\n            $( document ).on( \"link-visibility\", async function( ) {\r\n                if (!that.isLoading && that.viewActive) {\r\n                    that.isLoading = true;\r\n            \r\n                    await that._rerender(true);\r\n                    that.isLoading = false;\r\n\r\n\r\n                }  \r\n            });\r\n\r\n            $( document ).on( \"cluster-visibility\", function( ) {\r\n                // if (!that.isLoading) {\r\n                //     // console.log('render clus-vis');\r\n                //     that.isLoading = true;\r\n                //     that.visuals.twoD.render(true);\r\n                //     setTimeout(() => {\r\n                //         that.isLoading = false;\r\n                //       }, 1000);\r\n                // }     \r\n                \r\n                // let networkData = { \r\n                //     nodes : that.visuals.twoD.commonService.getVisibleNodes(), \r\n                //     links : that.visuals.twoD.commonService.getVisibleLinks()\r\n                // }\r\n                \r\n                // that.data = that.visuals.twoD.commonService.convertToGraphDataArray(networkData);\r\n            });\r\n\r\n            $( document ).on( \"node-selected\", function( ) {\r\n                if (!that.isLoading) {\r\n                    let mtSelectedNode = that.commonService.getSelectedNode(that.commonService.getVisibleNodes());\r\n                    if (mtSelectedNode && mtSelectedNode.id) {\r\n                        that.selectedNodeId = mtSelectedNode.id;\r\n                    } else if (mtSelectedNode && !mtSelectedNode.id) {\r\n                        that.selectedNodeId = mtSelectedNode._id;\r\n                    }\r\n\r\n                    that._rerender();\r\n                    console.log('node-selected in 2d: ', that.selectedNodeId);\r\n\r\n                    console.log('node-selected in data: ', that.data.nodes.find(node => node.id == that.selectedNodeId));\r\n                }            \r\n            });\r\n\r\n\r\n            window.addEventListener(\"node-selected\", () => {\r\n                this.visuals.twoD.render(false);\r\n            });\r\n\r\n            if (this.visuals.twoD.commonService.session.files.length > 1) $('#link-color-variable').val('origin').change();\r\n            if (this.widgets['background-color']) $('#network').css('background-color', this.widgets['background-color']);\r\n            this.visuals.microbeTrace.SelectedStatisticsTypesVariable = 'Show';\r\n            this.visuals.microbeTrace.onShowStatisticsChanged();\r\n            this.loadSettings();\r\n\r\n            //For some mysterious reason, this really needed a delay...\r\n            setTimeout(async () => {\r\n\r\n                if (this.widgets['node-symbol-variable'] !== 'None') {\r\n                    $('#node-symbol-variable').change(); //.trigger('change');\r\n                }\r\n\r\n                console.log('data: ', this.data);\r\n\r\n                // Call render and then set isLoading to false to allo triggering of other renders\r\n                await this.visuals.twoD.render();\r\n                this.isLoading = false;\r\n\r\n            }, 1);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n        // Method to ensure the value is an array\r\n        ensureArray(value: any): any[] {\r\n            if (Array.isArray(value)) {\r\n            return value; // It's already an array, return as is\r\n            } else if (value !== null && value !== undefined) {\r\n            return [value]; // Not an array, but has a value, wrap it in an array\r\n            } else {\r\n            return []; // No value, return an empty array\r\n            }\r\n        }\r\n\r\n        \r\n    /**\r\n     * Toggle the pointer events of the brush and overlay element\r\n     * \r\n     * @param {boolean} enable - If true, pointer events are enabled; otherwise, they are disabled\r\n     */\r\n    private toggleBrush(enable: boolean): void {\r\n        // PRE D3\r\n        // d3.select('svg#network g.brush')\r\n        //   .attr('pointer-events', enable ? 'all' : 'none')\r\n        //   .select('rect.overlay')\r\n        //   .attr('pointer-events', enable ? 'all' : 'none');\r\n      }\r\n\r\n    /**\r\n     * XXXXX empty function XXXXX\r\n     */\r\n    onDataChange(event) {\r\n\r\n    }\r\n\r\n    // loadDefaultVisualization(e: String) {\r\n\r\n    //     setTimeout(() => {\r\n\r\n    //         this.commonService.session.messages = [];\r\n    //         // this.messages = [];\r\n    //         $('#loading-information').html('');\r\n    //         $('#launch').prop('disabled', false).focus();\r\n\r\n    //         // this.displayloadingInformationModal = false;\r\n\r\n    //     }, 1000);\r\n\r\n    //     this.LoadDefaultVisualizationEvent.emit(e);\r\n    // }\r\n\r\n   \r\n\r\n    /**\r\n     * @returns an array [X, Y] of the position of mouse relative to twodcomponent. Global position (i.e. d3.event.pageX) doesn't work for a dashboard\r\n     */  \r\n    getRelativeMousePosition(event) {\r\n        // Get position based on container, which may be paralell viz or not\r\n        let rect = (!this.showParallel) ? document.getElementById('viz-force').getBoundingClientRect() : document.getElementById('viz-paralell').getBoundingClientRect()\r\n        const X = event['clientX'] - rect.left;\r\n        const Y = event['clientY'] - rect.top;\r\n        return [X, Y];\r\n    }\r\n\r\n    /**\r\n     * @returns an array [width, height] of the svg image\r\n     */\r\n    getImageDimensions() {\r\n        // let parent = this.svg.node().parentElement;\r\n        // return [parent.clientWidth, parent.clientHeight] \r\n    }\r\n\r\n    /**\r\n     * Sets CalculatedResolution variable to string such as '1250 x 855px'. Only called when export is first opened\r\n     */\r\n    setCalculatedResolution() {\r\n        // let [width, height] = this.getImageDimensions();\r\n        // this.CalculatedResolution = (Math.round(width * this.SelectedNetworkExportScaleVariable) + \" x \" + Math.round(height * this.SelectedNetworkExportScaleVariable) + \"px\");\r\n    }\r\n\r\n    /**\r\n     * Updates CalculatedResolution variable to string such as '1250 x 855px' based on ImageDimensions and SelectedNetworkExportScaleVariable. \r\n     * This is called anytime SelectedNetworkExportScaleVariable is updated.\r\n     */\r\n    updateCalculatedResolution(event) {\r\n        // let [width, height] = this.getImageDimensions();\r\n        // this.CalculatedResolution = (Math.round(width * this.SelectedNetworkExportScaleVariable) + \" x \" + Math.round(height * this.SelectedNetworkExportScaleVariable) + \"px\");\r\n        // this.cdref.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * Opens Global Setting Dialog\r\n     */\r\n    showGlobalSettings() {\r\n        //console.log(\"threshold: \",  this.commonService.GlobalSettingsModel.SelectedLinkThresholdVariable);\r\n        this.DisplayGlobalSettingsDialogEvent.emit(\"Styling\");\r\n    }\r\n\r\n    /**\r\n     * Hides export pane, sets isExporting variable to true and calls exportWork2 to export the twoD network image\r\n     */\r\n    exportVisualization(event) {\r\n\r\n        this.visuals.twoD.Show2DExportPane = false;\r\n        this.isExporting = true;\r\n\r\n        // if (this.widgets['node-symbol-variable'] != 'None') {\r\n        //     this.generateNodeSymbolSelectionTable(\"#node-symbol-table-bottom\", this.widgets['node-symbol-variable'], false);\r\n        // }\r\n\r\n        // if (this.widgets['node-color-variable'] != 'None') {\r\n        //     this.visuals.microbeTrace.generateNodeColorTable(\"#node-color-table-bottom\", false);\r\n        // }\r\n\r\n        // if (this.widgets['link-color-variable'] != 'None') {\r\n        //     this.visuals.microbeTrace.generateNodeLinkTable(\"#link-color-table-bottom\", false);\r\n        // }\r\n\r\n        if (!this.isExportClosed) {\r\n            setTimeout(() => this.exportVisualization(undefined), 300);\r\n        }\r\n        else {\r\n            this.exportWork2();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets this.isExportClosed to true\r\n     */\r\n    onCloseExport() {\r\n        this.isExportClosed = true;\r\n    }\r\n\r\n    /**\r\n     * When the svg is clicked, this function is called and it removes color transparency slider that appears when updating color transparency in node/link color tables\r\n     */\r\n    networkWhitespaceClicked() : void {\r\n\r\n        // The color transparency slider should dissapear if clicked out\r\n        $(\"#color-transparency-wrapper\").css({\r\n            display: \"none\"\r\n        });\r\n\r\n        this.commonService.session.network.nodes.forEach(node => {\r\n            node.selected = false;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * XXXXX Not currently used in codebase; exportWork2 is used instead XXXXX\r\n     */\r\n    exportWork() {\r\n        let network = document.getElementById('network');\r\n        let $network = $(network);\r\n        // PRE D3\r\n\r\n        // let watermark = d3.select(network).append('text')\r\n        // .attr('xlink:href', this.visuals.twoD.commonService.watermark)\r\n        // .attr('height', 128)\r\n        // .attr('width', 128)\r\n        // .attr('x', 10)\r\n        // .style('opacity', $('#network-export-opacity').val());\r\n        // let filetype = this.SelectedNetworkExportFileTypeListVariable, \r\n        //     filename = this.SelectedNetworkExportFilenameVariable;\r\n        // if (filetype == 'svg') {\r\n           \r\n        //     network.style.height = '100%';\r\n        //     network.style.width = '100%';\r\n        //     let content = this.visuals.twoD.commonService.unparseSVG(network);\r\n        //     let blob = new Blob([content], { type: 'image/svg+xml;charset=utf-8' });\r\n        //     saveAs(blob, filename + '.' + filetype);\r\n        //     watermark.remove();\r\n        //     const style: any = this.svgStyle;\r\n        //     network.style.height = style.height;\r\n        //     network.style.width = style.width;\r\n            \r\n        // } else {\r\n        //     setTimeout(() => {\r\n        //         const scale: number = this.visuals.twoD.SelectedNetworkExportScaleVariable;\r\n        //         const element = document.querySelector('TwoDComponent').parentElement;\r\n        //         domToImage.toBlob(element, {\r\n        //             width: element.clientWidth * scale,\r\n        //             height: element.clientHeight * scale,\r\n        //             style: {\r\n        //                 transform: 'scale(' + scale + ')',\r\n        //                 transformOrigin: 'top left'\r\n        //             },\r\n        //             quality: this.visuals.twoD.SelectedNetworkExportQualityVariable\r\n        //         })\r\n        //             .then((blob) => {\r\n        //                 saveAs(blob, filename + '.' + filetype);\r\n\r\n        //                 watermark.remove();\r\n        //                 this.visuals.twoD.isExporting = false;\r\n        //                 // this.visuals.microbeTrace.clearTable(\"#node-symbol-table-bottom\");\r\n        //                 // this.visuals.microbeTrace.clearTable(\"#node-color-table-bottom\");\r\n        //                 // this.visuals.microbeTrace.clearTable(\"#link-color-table-bottom\");\r\n\r\n        //                 // this.visuals.microbeTrace.GlobalSettingsDialogSettings.restoreStateAfterExport();\r\n        //                 // this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.restoreStateAfterExport();\r\n        //                 // this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.restoreStateAfterExport();\r\n        //                 // this.visuals.twoD.NodeSymbolTableWrapperDialogSettings.restoreStateAfterExport();\r\n        //                 // this.visuals.twoD.PolygonColorTableWrapperDialogSettings.restoreStateAfterExport();\r\n        //                 // this.visuals.twoD.Node2DNetworkExportDialogSettings.restoreStateAfterExport();\r\n        //             });\r\n        //     }, 1000);\r\n           \r\n        // }\r\n    }\r\n\r\n    /**\r\n     * Exports twoD network svg as an svg, png, jpeg, or webp image\r\n     */\r\n    exportWork2() {\r\n        let network = document.getElementById('viz-force');\r\n        let $network = $(network);\r\n        // PRE D3\r\n        // add microbeTrace logo as a watermark\r\n        // let watermark = d3.select(network).append('image')\r\n        //     .attr('xlink:href', this.visuals.twoD.commonService.watermark)\r\n        //     .attr('height', 128)\r\n        //     .attr('width', 128)\r\n        //     .attr('x', 35)\r\n        //     .attr('y', 35)\r\n        //     .style('opacity', $('#network-export-opacity').val());\r\n\r\n        let filetype = this.SelectedNetworkExportFileTypeListVariable; \r\n        let filename = this.SelectedNetworkExportFilenameVariable;\r\n\r\n        // add node color table\r\n        let vnodes : any = this.visuals.twoD.commonService.getVisibleNodes();\r\n        let aggregates = this.visuals.twoD.commonService.createNodeColorMap();\r\n        let values = Object.keys(aggregates);\r\n        var columns = [];\r\n        columns.push('Node ' + this.visuals.twoD.commonService.titleize(this.widgets[\"node-color-variable\"]));\r\n        if (this.widgets[\"node-color-table-counts\"]) columns.push('Count');\r\n        if (this.widgets[\"node-color-table-frequencies\"]) columns.push('Frequency');\r\n        columns.push('Color');\r\n        var data = [];\r\n        values.forEach((value, i) => {\r\n            let nodeValue =  (this.visuals.twoD.commonService.session.style.nodeValueNames[value] ? this.visuals.twoD.commonService.session.style.nodeValueNames[value] : this.visuals.twoD.commonService.titleize(\"\" + value));\r\n            let tableCounts = (this.widgets[\"node-color-table-counts\"] ?  aggregates[value] : undefined);\r\n            let tableFreq = (this.widgets[\"node-color-table-frequencies\"] ? (aggregates[value] / vnodes.length).toLocaleString() : undefined);\r\n            let line = {\r\n                Node: nodeValue,\r\n                Count: tableCounts, \r\n                Frequency: tableFreq,\r\n                Color: '<div  style=\"margin-left:5px; width:40px;height:12px;background:' + this.visuals.twoD.commonService.temp.style.nodeColorMap(value)  +'\"> </div>'\r\n            }\r\n            data.push(line);\r\n        })\r\n\r\n        let nodeWrapper = null;\r\n\r\n        this.visuals.twoD.commonService.currentNodeTableElement.subscribe((element) => {\r\n            if(element){\r\n                nodeWrapper = element;\r\n                } else {\r\n                console.error('currentNodeTableElement is null');\r\n                }                // You can now interact with this.myElement\r\n        });\r\n            // private symbolTableWrapper: HTMLElement | null = null;\r\n            // private linkColorTableWrapper: HTMLElement | null = null;\r\n            // private nodeColorTableWrapper: HTMLElement | null = null;\r\n            // let nodeWrapper = this.parent.getElementById('node-color-table');\r\n\r\n        //console.log('node wrapper: ', nodeWrapper);\r\n        let nodeLegend = this.tabulate2(data, columns, nodeWrapper, network, 200,false);\r\n    \r\n        // add link origin table\r\n        let vlinks = this.visuals.twoD.commonService.getVisibleLinks();\r\n        aggregates = this.visuals.twoD.commonService.createLinkColorMap();\r\n        values = Object.keys(aggregates);\r\n        columns = [];\r\n        columns.push('Link ' + this.visuals.twoD.commonService.titleize(this.widgets[\"link-color-variable\"]));\r\n        if (this.widgets[\"link-color-table-counts\"]) columns.push('Count');\r\n        if (this.widgets[\"link-color-table-frequencies\"]) columns.push('Frequency');\r\n        columns.push('Color');\r\n        data = [];\r\n        values.forEach((value, i) => {\r\n            let nodeValue =  (this.visuals.twoD.commonService.session.style.linkValueNames[value] ? this.visuals.twoD.commonService.session.style.linkValueNames[value] : this.visuals.twoD.commonService.titleize(\"\" + value));\r\n            let tableCounts = (this.widgets[\"link-color-table-counts\"] ?  aggregates[value] : undefined);\r\n            let tableFreq = (this.widgets[\"link-color-table-frequencies\"] ? (aggregates[value] / vlinks.length).toLocaleString() : undefined);\r\n            let line = {\r\n                Link: nodeValue,\r\n                Count: tableCounts, \r\n                Frequency: tableFreq,\r\n                Color: '<div  style=\"margin-left:5px; width:40px;height:12px;background:' + this.visuals.twoD.commonService.temp.style.linkColorMap(value)  +'\"> </div>'\r\n              }\r\n              data.push(line);\r\n        })\r\n\r\n        let linkWrapper = null;\r\n\r\n        this.visuals.twoD.commonService.currentLinkTableElement.subscribe((element) => {\r\n            linkWrapper = element;\r\n            // You can now interact with this.myElement\r\n            });\r\n        // let linkWrapper = document.getElementById('link-color-table-wrapper');\r\n        let linkLegend = this.tabulate2(data, columns, linkWrapper, network, 600, false);\r\n    \r\n        // add node symbol table\r\n        let variable = this.widgets['node-symbol-variable'];\r\n            values = [];\r\n        aggregates = {};\r\n        let nodes = this.visuals.twoD.commonService.session.data.nodes;\r\n        let n = nodes.length;\r\n        vnodes = 0;\r\n        for (let i = 0; i < n; i++) {\r\n            let d = nodes[i];\r\n            if (!d.visible) continue;\r\n            vnodes++;\r\n            let dv = d[variable];\r\n            if (values.indexOf(dv) == -1) values.push(dv);\r\n            if (dv in aggregates) {\r\n                aggregates[dv]++;\r\n            } else {\r\n                aggregates[dv] = 1;\r\n            }\r\n        }\r\n        columns = [];\r\n        columns.push('Node ' + this.visuals.twoD.commonService.titleize(variable));\r\n        if (this.widgets[\"node-symbol-table-counts\"]) columns.push('Count');\r\n        if (this.widgets[\"node-symbol-table-frequencies\"]) columns.push('Frequency');\r\n        columns.push('Shape');\r\n        data = [];\r\n        values.forEach((value, i) => {\r\n            let nodeValue =  this.visuals.twoD.commonService.titleize(\"\" + value);\r\n            let tableCounts = (this.widgets[\"node-symbol-table-counts\"] ?  aggregates[value] : undefined);\r\n            let tableFreq = (this.widgets[\"node-symbol-table-frequencies\"] ? (aggregates[value] / vnodes.length).toLocaleString() : undefined);        \r\n            let line = {\r\n                Node: nodeValue,\r\n                Count: tableCounts, \r\n                Frequency: tableFreq,\r\n                Shape: $(\"#node-symbol-table option[value='\" + this.commonService.temp.style.nodeSymbolMap(value) + \"']\").eq(parseInt(value)).text()\r\n            }\r\n            data.push(line);\r\n        })\r\n        let symbolWrapper = document.getElementById('node-symbol-table');\r\n        let symbolLegend;\r\n        if (symbolWrapper) {\r\n            symbolLegend = this.tabulate2(data, columns, symbolWrapper, network, 200, true);\r\n        }\r\n            \r\n        // add network statistics table\r\n        let statsDiv = document.getElementById('network-statistics-wrapper');\r\n        // PRE D3\r\n        // let foreignObjStats = d3.select(network).append(\"svg:foreignObject\")\r\n        //     .attr(\"x\", statsDiv.offsetLeft)\r\n        //     .attr(\"y\", statsDiv.offsetTop-10)\r\n        //     .attr(\"width\", statsDiv.offsetWidth)\r\n        //     .attr(\"height\", statsDiv.offsetHeight);\r\n        // foreignObjStats.append(\"xhtml:body\").html(statsDiv.innerHTML);\r\n\r\n        if (filetype == 'svg') {\r\n            let content = this.visuals.twoD.commonService.unparseSVG(network);\r\n            let blob = new Blob([content], { type: 'image/svg+xml;charset=utf-8' });\r\n            saveAs(blob, filename + '.' + filetype);\r\n            // PRE D3\r\n            // if (watermark){\r\n            //     watermark.remove();\r\n            // }\r\n            if (nodeLegend){\r\n                nodeLegend.remove();\r\n            }\r\n            if (linkLegend){\r\n                linkLegend.remove();\r\n            }\r\n            if (symbolLegend){\r\n                symbolLegend.remove();\r\n            }\r\n            // if (foreignObjStats){\r\n            //     foreignObjStats.remove();\r\n            // }\r\n        } else {\r\n            console.log('network: ', network);\r\n            console.log('network: ', network.getBoundingClientRect());\r\n            saveSvgAsPng(network, filename + '.' + filetype, {\r\n                scale: this.SelectedNetworkExportScaleVariable,\r\n                backgroundColor: this.widgets['background-color'],\r\n                encoderType: 'image/' + filetype,\r\n                encoderOptions: this.SelectedNetworkExportQualityVariable\r\n            }).then(() => {\r\n                // PRE D3\r\n                // if (watermark){\r\n                //     watermark.remove();\r\n                // }\r\n                if (nodeLegend){\r\n                    nodeLegend.remove();\r\n                }\r\n                if (linkLegend){\r\n                    linkLegend.remove();\r\n                }\r\n                if (symbolLegend){\r\n                    symbolLegend.remove();\r\n                }\r\n                // if (foreignObjStats){\r\n                //     foreignObjStats.remove();\r\n                // }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Converts table such as node color table, link color table or node symbol table from dialog window into element on twoD network svg when\r\n     * getting ready to export.\r\n     * @param data Object[] containing information in the table, such as color, count, node/groupLabel\r\n     * @param columns string array of table column names\r\n     * @param wrapper HTMLElement of table\r\n     * @param container HTMLElement of entive svg/network\r\n     * @param topOffset number\r\n     * @param leftOffset boolean\r\n     * @returns foreignObject that can be removed later by foreignObjectName.remove()\r\n     */\r\n    tabulate2 = (data, columns, wrapper, container, topOffset: number, leftOffset: boolean) => {\r\n\r\n        // console.log('wrapper: ', wrapper);\r\n        // console.log('left: ', wrapper.offsetLeft);\r\n        // console.log('container: ', container);\r\n        // let containerWidth = container.getBBox().width;\r\n        // let rightPosition = containerWidth - wrapper.offsetWidth;        \r\n        // console.log('right: ', rightPosition);\r\n\r\n        // PRE D3\r\n\r\n        return null;\r\n        // let foreignObj = d3.select(container).append(\"svg:foreignObject\")\r\n        //   .attr(\"x\", (leftOffset) ? rightPosition : wrapper.offsetLeft)\r\n        //   .attr(\"y\", wrapper.offsetTop + topOffset)\r\n        //   .attr(\"width\", wrapper.offsetWidth)\r\n        //   .attr(\"height\", wrapper.offsetHeight);\r\n\r\n        \r\n        // let body = foreignObj \r\n        //   .append(\"xhtml:body\")\r\n        //   .append(\"table\")\r\n        //   .style('position', 'absolute')\r\n        //   .style('top', '0')\r\n        //   .style('width', '100%')\r\n        //   .style('height', '100%')\r\n        //   .attr('cellpadding', '1px')\r\n        //   .attr(\"class\", \"table-bordered\");\r\n        //   // .html(nodeColorTable.innerHTML); SVG doesn't translate\r\n        // let thead = body.append(\"thead\"),\r\n        //     tbody = body.append(\"tbody\");\r\n        // thead.append(\"tr\")\r\n        //   .selectAll(\"th\")\r\n        //   .data(columns)\r\n        //   .enter()\r\n        //   .append(\"th\")\r\n        //   .text(function(column) { return column; });\r\n        // let rows = tbody.selectAll(\"tr\")\r\n        //   .data(data)\r\n        //   .enter()\r\n        //   .append(\"tr\");\r\n        // let cells = rows.selectAll(\"td\")\r\n        //   .data(function(row) {\r\n        //     return columns.map(function(column) {\r\n        //         return {column: column, value: row[column.split(\" \")[0]]};\r\n        //     });\r\n        //   })\r\n        //   .enter()\r\n        //   .append(\"td\")\r\n        //   .html(function(d) { return d.value; });\r\n        // return foreignObj;\r\n      }\r\n\r\n    /**\r\n     * Renders the twoD network.\r\n     * \r\n     * Set node functionalities and properties; set link functionalities, properties, and labels; sets polygon functionalities and properties if needed\r\n     * @param showStatistics updates this.showStatistics variable\r\n     */\r\n    render(showStatistics: boolean = true) {\r\n\r\n        if(this.isLoading) {\r\n\r\n        \r\n        console.log('rendering');\r\n\r\n        if (!$('#network').length) return;\r\n\r\n        $(\"#numberOfSelectedNodes\").text(this.visuals.twoD.commonService.session.data.nodes.filter(d => d.selected).length.toLocaleString());\r\n\r\n        // const start = Date.now();\r\n        // let newNodes = this.visuals.twoD.commonService.getVisibleNodes(true);\r\n        // let oldNodes;\r\n\r\n        // if(this.widgets[\"timeline-date-field\"] != 'None')\r\n        //     oldNodes = this.visuals.twoD.commonService.session.network.timelineNodes;\r\n        // else\r\n        //     oldNodes = this.visuals.twoD.commonService.session.network.nodes;\r\n        \r\n        // if (newNodes.length === 0 && this.widgets[\"timeline-date-field\"] == 'None') return;\r\n\r\n        // match newNodes to oldNodes so that position variables can be updated in newNodes\r\n        // newNodes.forEach((d, i) => {\r\n        //     let match = oldNodes.find(d2 =>  {\r\n        //         if(!d2.id) {\r\n        //             d2.id = d2._id;\r\n        //         }\r\n        //         if(!d.id){\r\n        //             d.id = d._id;\r\n        //         }\r\n        //         return d2.id == d.id\r\n        //     });            \r\n        //     if (match) {\r\n        //         ['x', 'y', 'fx', 'fy', 'vx', 'vy', 'fixed'].forEach(v => {\r\n                    \r\n        //             if (typeof match[v] != \"undefined\") {\r\n        //                 d[v] = match[v];\r\n        //             } \r\n\r\n        //         });\r\n        //     }\r\n        // });\r\n\r\n        // this.visuals.twoD.commonService.session.network.nodes = newNodes;\r\n\r\n        // PRE D3\r\n        // sets functionality for nodes, as well as node border and node text/label position\r\n        // let nodes = this.visuals.twoD.svg.select('g.nodes').selectAll('g').data(newNodes, d => d._id)\r\n        //     .join(\r\n        //         enter => {\r\n        //             let g = enter.append('g')\r\n        //                 .attr('tabindex', '0')\r\n        //                 .call(d3.drag() //A bunch of mouse handlers.\r\n        //                     .on('start', (x) => this.visuals.twoD.dragstarted(x))\r\n        //                     .on('drag', (x) => this.visuals.twoD.dragged(x))\r\n        //                     .on('end', (x) => this.visuals.twoD.dragended(x)))\r\n        //                 .on('mouseenter focusin', (x) => this.visuals.twoD.showNodeTooltip(x))\r\n        //                 .on('mouseout focusout', (x) => this.visuals.twoD.hideTooltip())\r\n        //                 .on('contextmenu', (x) => this.visuals.twoD.showContextMenu(x))\r\n        //                 .on('click', (x) => this.visuals.twoD.clickHandler(x))\r\n        //                 .on('keydown', n => {\r\n        //                     if (d3.event.code == 'Space') this.visuals.twoD.clickHandler(n);\r\n        //                     if (d3.event.shiftKey && d3.event.key == 'F10') this.visuals.twoD.showContextMenu(n);\r\n        //                 });\r\n        //                g.append('path')\r\n        //                 .style('stroke', 'black')\r\n        //                 .style('stroke-width', '2px');\r\n        //             g.append('text')\r\n        //                 .attr('dy', 5)\r\n        //                 .attr('dx', 8);\r\n        //             return g;\r\n        //         }\r\n        //     );\r\n\r\n        // updates node properties (color, shape, label, size, etc...)\r\n        // this.visuals.twoD.redrawNodes();\r\n        // this.visuals.twoD.redrawLabels();\r\n        // this.visuals.twoD.redrawNodeBorder();\r\n        // this.visuals.twoD.updateNodeColors();\r\n\r\n        // sets link functionality\r\n        // let vlinks = this.visuals.twoD.getVLinks();\r\n        // let links = this.visuals.twoD.svg.select('g.links').selectAll('line').data(vlinks)\r\n        //     .join('line')\r\n        //     .attr('stroke-width', this.widgets['link-width'])\r\n        //     .attr('opacity', 1 - this.widgets['link-opacity'])\r\n        //     .on('mouseenter', (x) => this.visuals.twoD.showLinkTooltip(x))\r\n        //     .on('mouseout', (x) => this.visuals.twoD.hideTooltip());\r\n\r\n        // updates link color and width\r\n        // this.visuals.twoD.updateLinkColor();\r\n        // this.visuals.twoD.scaleLinkWidth();\r\n\r\n        // defines link labels\r\n        // let linklabels = this.visuals.twoD.svg.select('g.links').selectAll('text').data(vlinks)\r\n        //     .join('text')\r\n        //     .attr('text-anchor', 'middle')\r\n        //     .attr('dy', this.widgets['link-width'] + 2)\r\n        //     .text((l) => {\r\n\r\n        //         const labelValue = l[this.widgets['link-label-variable']];\r\n              \r\n        //         if (typeof labelValue === 'number' || !isNaN(parseFloat(labelValue))) {\r\n\r\n        //             if(this.widgets['default-distance-metric'] == 'snps') {\r\n        //                 return Math.round(parseFloat(labelValue));\r\n        //             } else {\r\n        //                 return parseFloat(labelValue).toFixed(this.widgets['link-label-decimal-length']);\r\n        //             }\r\n\r\n        //         } else {\r\n        //             return labelValue;\r\n        //         }\r\n        //       });\r\n\r\n        /**\r\n         * Updates node and link position, and position and angle of link label\r\n         */\r\n        // let layoutTick = () => {\r\n        //      nodes\r\n        //         .attr('transform', d => {\r\n        //             var ew =\r\n        //                 d.fixed ?\r\n        //                     `translate(${d.fx}, ${d.fy})` :\r\n        //                     `translate(${d.x}, ${d.y})`;\r\n\r\n        //             return ew;\r\n        //         }\r\n        //         );\r\n        //     links\r\n        //         .attr('x1', l => l.source.x)\r\n        //         .attr('y1', l => l.source.y)\r\n        //         .attr('x2', l => l.target.x)\r\n        //         .attr('y2', l => l.target.y);\r\n\r\n\r\n        //     if (this.widgets['link-label-variable'] !== 'None') {\r\n        //         linklabels\r\n        //             .attr('x', l => (l.source.x + l.target.x) / 2)\r\n        //             .attr('y', l => (l.source.y + l.target.y) / 2)\r\n        //             .attr('transform', l => 'rotate(' +\r\n        //                 this.visuals.twoD.calcAngle(l.source, l.target) + ' ' +\r\n        //                 (l.source.x + l.target.x) / 2 + ' ' +\r\n        //                 (l.source.y + l.target.y) / 2 + ')'\r\n        //             );\r\n        //     }\r\n        // };\r\n        // this.visuals.twoD.force.nodes(this.visuals.twoD.commonService.session.network.nodes).on('tick', handleTick(this.widgets['polygons-show']));\r\n        // this.visuals.twoD.force.force('link').links(vlinks);\r\n        // this.visuals.twoD.force.alpha(0.3).alphaTarget(0).restart();\r\n        // $('#node-symbol-variable').trigger('change');\r\n\r\n        // this.visuals.twoD.ShowStatistics = showStatistics;\r\n        // this.visuals.twoD.cdref.detectChanges();\r\n\r\n        // // Get the new SVG dimensions after the network is generated\r\n        // let newSvgWidth = d3.select('svg#network').node().getBoundingClientRect().width;\r\n        // let newSvgHeight = d3.select('svg#network').node().getBoundingClientRect().height;\r\n\r\n        // // Update the brush extent\r\n        // this.visuals.twoD.brush.extent([[0, 0], [newSvgWidth, newSvgHeight]]);\r\n\r\n        // // Recall the brush to apply the new extent\r\n        // d3.select('g.brush').call(this.visuals.twoD.brush);\r\n    }\r\n\r\n    };\r\n\r\n    // PRE D3\r\n    /**\r\n     * This function is called when a polygonLabel drag is started; it moves <text> element to last under g.clusterLabels and adds class polygonText to the element\r\n     */\r\n    polygonLabelDragStarted(d) {\r\n        // d3.select(this).raise().attr(\"class\", \"polygonText\");\r\n    }\r\n    \r\n    /**\r\n     * Moves location of polygon label when it is dragged by updating transform=\"translate(x,y)\"\r\n     */\r\n    polygonLabelDragged(d) {\r\n        // d3.select(this).attr(\"transform\", \"translate(\" + d3.event.x + \",\" + d3.event.y + \")\");\r\n    }\r\n\r\n    /**\r\n     * This function is called when a polygonLabel drag is ended; it removes class polygonText from <text> element\r\n     */\r\n    polygonLabelDragEnded(d) {\r\n        // d3.select(this).attr(\"class\", \"\");\r\n    }\r\n\r\n    /**\r\n     * Generates Polygon Color Selection Table, updates polygonColorMap and polygonAlphaMap functions, and then calls render to show/update network\r\n     * \r\n     * XXXXX this function needs revisiting. Doesn't always populate table. I had to hide color polygons, then show it, and then show polygon color table setting\r\n     * to get table to appear. Also not sorting correctly with names XXXXX\r\n     */\r\n    updatePolygonColors() {\r\n        let polygonSort = $(\"<a style='cursor: pointer;'>&#8645;</a>\").on(\"click\", e => {\r\n            this.widgets[\"polygon-color-table-counts-sort\"] = \"\";\r\n          if (this.widgets[\"polygon-color-table-name-sort\"] === \"ASC\")\r\n          this.widgets[\"polygon-color-table-name-sort\"] = \"DESC\"\r\n          else\r\n          this.widgets[\"polygon-color-table-name-sort\"] = \"ASC\"\r\n            this.visuals.twoD.updatePolygonColors();\r\n        });\r\n        let polygonColorHeaderTitle =  (this.visuals.twoD.commonService.session.style['overwrite'] && this.visuals.twoD.commonService.session.style['overwrite']['polygonColorHeaderVariable'] && this.visuals.twoD.commonService.session.style['overwrite']['polygonColorHeaderVariable'] == this.widgets['polygons-foci'] ? this.visuals.twoD.commonService.session.style['overwrite']['polygonColorHeaderTitle'] : \"Polygon \" + this.visuals.twoD.commonService.titleize(this.widgets['polygons-foci']));\r\n        let polygonHeader = $(\"<th class='p-1' contenteditable>\" + polygonColorHeaderTitle + \"</th>\").append(polygonSort);\r\n        let countSort = $(\"<a style='cursor: pointer;'>&#8645;</a>\").on(\"click\", e => {\r\n  \r\n            this.widgets[\"polygon-color-table-name-sort\"] = \"\";\r\n          if (this.widgets[\"polygon-color-table-counts-sort\"] === \"ASC\")\r\n          this.widgets[\"polygon-color-table-counts-sort\"] = \"DESC\"\r\n          else\r\n          this.widgets[\"polygon-color-table-counts-sort\"] = \"ASC\"\r\n            this.visuals.twoD.updatePolygonColors();\r\n        });\r\n        let countHeader = $((this.widgets[\"polygon-color-table-counts\"] ? \"<th>Count</th>\" : \"\")).append(countSort);\r\n        let polygonColorTable = $(\"#polygon-color-table\")\r\n          .empty()\r\n          .append($(\"<tr></tr>\"))\r\n          .append(polygonHeader)\r\n          .append(countHeader)\r\n          .append((this.widgets[\"polygon-color-table-frequencies\"] ? \"<th>Frequency</th>\" : \"\"))\r\n          .append(\"<th>Color</th>\" );\r\n        if (!this.visuals.twoD.commonService.session.style['polygonValueNames']) this.visuals.twoD.commonService.session.style['polygonValueNames'] = {};\r\n        let aggregates = this.visuals.twoD.commonService.createPolygonColorMap();\r\n        let values = Object.keys(aggregates);\r\n  \r\n        if (this.widgets[\"polygon-color-table-counts-sort\"] == \"ASC\")\r\n          values.sort(function(a, b) { return aggregates[a] - aggregates[b] });\r\n        else if (this.widgets[\"polygon-color-table-counts-sort\"] == \"DESC\")\r\n          values.sort(function(a, b) { return aggregates[b] - aggregates[a] });\r\n        if (this.widgets[\"polygon-color-table-name-sort\"] == \"ASC\")\r\n          values.sort(function(a, b) { return a as any - (b as any) });\r\n        else if (this.widgets[\"polygon-color-table-name-sort\"] == \"DESC\")\r\n          values.sort(function(a, b) { return b as any - (a as any) });\r\n  \r\n        let total = 0;\r\n        values.forEach(d => total += aggregates[d] );\r\n  \r\n        let that = this;\r\n\r\n        values.forEach((value, i) => {\r\n            that.visuals.twoD.commonService.session.style['polygonColors'].splice(i, 1, that.visuals.twoD.commonService.temp.style.polygonColorMap(value));\r\n            that.visuals.twoD.commonService.session.style['polygonAlphas'].splice(i, 1, that.visuals.twoD.commonService.temp.style.polygonAlphaMap(value));\r\n          let colorinput = $('<input type=\"color\" value=\"' + that.visuals.twoD.commonService.temp.style.polygonColorMap(value) + '\">')\r\n            .on(\"change\", function(){\r\n                that.visuals.twoD.commonService.session.style['polygonColors'].splice(i, 1, $(this).val() as string);\r\n                that.visuals.twoD.commonService.temp.style.polygonColorMap = d3\r\n                .scaleOrdinal(that.visuals.twoD.commonService.session.style['polygonColors'])\r\n                .domain(values);\r\n                that._rerender();\r\n            });\r\n          let alphainput = $(\"<a></a>\").on(\"click\", e => {\r\n            $(\"#color-transparency-wrapper\").css({\r\n              top: e.clientY + 129,\r\n              left: e.clientX,\r\n              display: \"block\"\r\n            });\r\n            $(\"#color-transparency\")\r\n              .val(that.visuals.twoD.commonService.session.style['polygonAlphas'][i])\r\n              .on(\"change\", function() {\r\n                that.visuals.twoD.commonService.session.style['polygonAlphas'].splice(i, 1, parseFloat($(this).val() as string));\r\n                that.visuals.twoD.commonService.temp.style.polygonAlphaMap = d3\r\n                  .scaleOrdinal(that.visuals.twoD.commonService.session.style['polygonAlphas'])\r\n                  .domain(values);\r\n                $(\"#color-transparency-wrapper\").fadeOut();\r\n                that._rerender();\r\n              });\r\n          });\r\n          let cell = $(\"<td></td>\")\r\n            .append(colorinput)\r\n            .append(alphainput);\r\n  \r\n          let row = $(\r\n            \"<tr>\" +\r\n              \"<td data-value='\" + value + \"'>\" +\r\n                (that.visuals.twoD.commonService.session.style['polygonValueNames'][value] ? that.visuals.twoD.commonService.session.style['polygonValueNames'][value] : that.visuals.twoD.commonService.titleize(\"\" + value)) +\r\n              \"</td>\" +\r\n              (that.widgets[\"polygon-color-table-counts\"] ? \"<td>\" + aggregates[value] + \"</td>\" : \"\") +\r\n              (that.widgets[\"polygon-color-table-frequencies\"] ? \"<td>\" + (aggregates[value] / total).toLocaleString() + \"</td>\" : \"\") +\r\n            \"</tr>\"\r\n          ).append(cell);\r\n          polygonColorTable.append(row);\r\n          \r\n        });\r\n        \r\n        // PRE D3\r\n        // this.visuals.twoD.commonService.temp.style.polygonColorMap = d3\r\n        //   .scaleOrdinal(this.visuals.twoD.commonService.session.style['polygonColors'])\r\n        //   .domain(values);\r\n        //   this.visuals.twoD.commonService.temp.style.polygonAlphaMap = d3\r\n        //   .scaleOrdinal(this.visuals.twoD.commonService.session.style['polygonAlphas'])\r\n        //   .domain(values);\r\n  \r\n        polygonColorTable\r\n          .find(\"td\")\r\n          .on(\"dblclick\", function() {\r\n            // $(this).attr(\"contenteditable\", true).focus();\r\n          })\r\n          .on(\"focusout\", function() {\r\n            let $this = $(this);\r\n            // $this.attr(\"contenteditable\", false);\r\n            that.visuals.twoD.commonService.session.style['polygonValueNames'][$this.data(\"value\")] = $this.text();\r\n          });\r\n          \r\n        polygonColorTable\r\n          .find(\".p-1\")\r\n          .on(\"focusout\", function() {\r\n            that.visuals.twoD.commonService.session.style['overwrite']['polygonColorHeaderVariable'] = that.widgets[\"polygons-foci\"];\r\n            that.visuals.twoD.commonService.session.style['overwrite']['polygonColorHeaderTitle'] = $($(this).contents()[0]).text();\r\n          });\r\n\r\n          let isAscending = true;  // add this line before the click event handler\r\n\r\n\r\n        // The sorting functionality is added here\r\n        $('#polygon-color-table').on('click', 'th', function () {\r\n            let table = $(this).parents('table').eq(0);\r\n            let rows = table.find('tr:gt(0)').toArray().sort(comparer($(this).index()));\r\n            isAscending = !isAscending;  // replace 'this.asc' with 'isAscending'\r\n            if (!isAscending){rows = rows.reverse();}\r\n            for (let i = 0; i < rows.length; i++) { table.append(rows[i]); }\r\n        });\r\n\r\n        function comparer(index) {\r\n            return function(a, b) {\r\n                let valA = getCellValue(a, index), valB = getCellValue(b, index);\r\n                console.log(`Comparing: ${valA} and ${valB}`);  // New line\r\n                return !isNaN(Number(valA)) && !isNaN(Number(valB)) ? Number(valA) - Number(valB) : valA.toString().localeCompare(valB);\r\n            }\r\n        }\r\n\r\n        function getCellValue(row, index) {\r\n            return $(row).children('td').eq(index).text();\r\n        }\r\n  \r\n      }\r\n\r\n    /**\r\n     * This function is called when polygon-show widget is updated from the template.\r\n     * That widget controls whether polygons are shown or not\r\n     * \r\n     */\r\n    polygonsToggle(flag : boolean) {\r\n        \r\n        this.widgets['polygons-show'] = flag;\r\n\r\n        this.showParallel = flag;\r\n\r\n        if(flag) {\r\n            if(this.widgets['polygons-color-show'] == true){\r\n                $('#polygons-color-show').click();\r\n              } else {\r\n                $('#polygons-color-hide').click();\r\n              }\r\n              if(this.widgets['polygons-label-show'] == true){\r\n                $('#polygons-label-show').click();\r\n              } else {\r\n                $('#polygons-label-hide').click();\r\n              }\r\n        } else {\r\n            $(\".polygons-settings-row\").slideUp();\r\n            $('.polygons-label-row').slideUp();\r\n            $(\"#polygon-color-table-row\").slideUp();\r\n            $(\"#polygon-color-value-row\").slideUp();\r\n            $(\"#polygon-color-table\").empty();\r\n\r\n            this.visuals.twoD.PolygonColorTableWrapperDialogSettings.setVisibility(false);\r\n        }\r\n\r\n    }\r\n    /**\r\n     * This function is called when polygon-color-show widget is updated from the template.\r\n     * This widget controls whether polygon should be colored the same or different.\r\n     * \r\n     * XXXXX I think this function wasn't updated with the move to Angular; most of the code \r\n     * seems redundant/unnecessary. Evaluate whether function can be reduce/eliminated. XXXXX\r\n     */\r\n    polygonColorsToggle(e) {\r\n        if (e) {\r\n            this.widgets['polygons-color-show'] = true;\r\n            $(\"#polygon-color-value-row\").slideUp();\r\n            $(\"#polygon-color-table-row\").slideDown();\r\n            this.visuals.twoD.PolygonColorTableWrapperDialogSettings.setVisibility(true);\r\n            // this.visuals.twoD.updatePolygonColors();\r\n\r\n            setTimeout(() => {\r\n                this.visuals.twoD.updatePolygonColors();\r\n                this._rerender();\r\n            }, 200);\r\n\r\n        }\r\n        else {\r\n            this.widgets['polygons-color-show'] = false;\r\n            $(\"#polygon-color-value-row\").slideDown();\r\n            $(\"#polygon-color-table-row\").slideUp();\r\n            $(\"#polygon-color-table\").empty();\r\n            this.visuals.twoD.PolygonColorTableWrapperDialogSettings.setVisibility(false);\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This function is called when polygon-color widget is updated from the template. \r\n     * It is only available when polygon-color-show is false/hide\r\n     * This widget control polygon color when they are all colored the same.\r\n     * \r\n     * XXXXX I think this function wasn't updated with the move to Angular. \r\n     * Evaluate whether function can be reduce/eliminated. XXXXX\r\n     */\r\n    onPolygonColorChanged(e) {\r\n        this.widgets[\"polygon-color\"] = e;\r\n        this._rerender();\r\n    }\r\n\r\n    /**\r\n     * This function is called when polygon-color-table-visible widget is updated from the template. \r\n     * It is only available when polygon-color-show is true/show\r\n     * This widget controls whether the polygon color table is visible.\r\n     * \r\n     * XXXXX I think this function wasn't updated with the move to Angular. \r\n     * Evaluate whether function can be reduce/eliminated. XXXXX\r\n     */\r\n    polygonColorsTableToggle(e) {\r\n\r\n        if (e) {\r\n            this.visuals.twoD.onPolygonColorTableChange('Show')\r\n        }\r\n        else {\r\n            this.visuals.twoD.onPolygonColorTableChange('Hide')\r\n        }\r\n\r\n        this.visuals.twoD._rerender();\r\n    }\r\n\r\n    private polygonNodeSelected = null;\r\n\r\n    /**\r\n     * Executed when a polygon drag is start. All nodes within that polygon have variable selected set to true; other nodes have variable selected\r\n     * set to false. node-selected event is triggered and dragstarted is called\r\n     */\r\n    polygonDragStarted(n) {\r\n        this.visuals.twoD.commonService.session.data.nodes.forEach(sessionNode => {\r\n\r\n            let tempAry = n.values.filter(node => {\r\n                return node._id == sessionNode._id;\r\n            });\r\n\r\n            if (tempAry.length > 0) {\r\n                if(!this.polygonNodeSelected) {\r\n                    this.polygonNodeSelected = sessionNode;\r\n                }\r\n                sessionNode.selected = true;\r\n            } else {\r\n                sessionNode.selected = false\r\n            }\r\n\r\n      });\r\n\r\n      $(document).trigger('node-selected');\r\n\r\n      if(this.polygonNodeSelected) {\r\n        this.dragstarted(this.polygonNodeSelected);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Executed when a polygon is dragged. The dragged function is called and appropriated nodes previously had selected set to true\r\n     */\r\n    polygonDragged(n) {\r\n      if(this.polygonNodeSelected) {\r\n        this.dragged(this.polygonNodeSelected);\r\n      }\r\n\r\n    }\r\n\r\n    /**\r\n     * Calls the dragend function for the nodes. also polygonNodeSelected variable is set to null, and all nodes have selected set to false\r\n     */\r\n    polygonDragEnded(n) {\r\n      if(this.polygonNodeSelected) {\r\n        this.dragended(this.polygonNodeSelected);\r\n      }\r\n\r\n      this.polygonNodeSelected = null;\r\n\r\n      this.visuals.twoD.commonService.session.data.nodes.forEach(sessionNode => {\r\n        sessionNode.selected = false\r\n      });\r\n\r\n      $(document).trigger('node-selected');\r\n\r\n    }\r\n\r\n    /**\r\n     * Gets a list of all visible links objects; Similar to getLlinks(), and commonService.getVisibleLinks()\r\n     * \r\n     * Each link object has a single origin, so any links that have more than one origin are stored as separed link objects\r\n     * \r\n     * Each link's source and target are node object\r\n     * @returns a array of link objects; each link's source and target are node object\r\n     */\r\n    getVLinks() {\r\n        let vlinks = this.visuals.twoD.commonService.getVisibleLinks(true);\r\n        let output = [];\r\n        let n = vlinks.length;\r\n        let nodes = this.visuals.twoD.commonService.session.network.nodes;\r\n        for (let i = 0; i < n; i++) {\r\n            if (vlinks[i].origin) {\r\n                if (typeof vlinks[i].origin === 'object') {\r\n                    if (vlinks[i].origin.length > 0) {\r\n                      // 0 = current, j = index, l = array\r\n                      vlinks[i].origin.forEach((o, j, l) => {\r\n                          const holder = Object.assign({}, vlinks[i], {\r\n                              origin: o,\r\n                              oNum: j,\r\n                              origins: l.length,\r\n                              source: nodes.find(d => d._id === vlinks[i].source || d.id === vlinks[i].source),\r\n                              target: nodes.find(d => d._id === vlinks[i].target || d.id === vlinks[i].target)\r\n                          });\r\n                          output.push(holder);\r\n                      });\r\n                  } else {\r\n                    const holder = Object.assign({}, vlinks[i], {\r\n                        oNum: 0,\r\n                        origins: 1,\r\n                        source: nodes.find(d => d._id === vlinks[i].source || d.id === vlinks[i].source),\r\n                        target: nodes.find(d => d._id === vlinks[i].target || d.id === vlinks[i].target)\r\n                    });\r\n                      output.push(holder);\r\n                  }\r\n                } else {\r\n                    const holder = Object.assign({}, vlinks[i], {\r\n                        oNum: 0,\r\n                        origins: 1,\r\n                        source: nodes.find(d => d._id === vlinks[i].source || d.id === vlinks[i].source),\r\n                        target: nodes.find(d => d._id === vlinks[i].target || d.id === vlinks[i].target)\r\n                    });\r\n                      //console.log(holder);\r\n                      output.push(holder);\r\n                }\r\n            } else {\r\n                const holder = Object.assign({}, vlinks[i], {\r\n                    origin: 'Unknown',\r\n                    oNum: 0,\r\n                    origins: 1,\r\n                    source: nodes.find(d => d._id === vlinks[i].source || d.id === vlinks[i].source),\r\n                    target: nodes.find(d => d._id === vlinks[i].target || d.id === vlinks[i].target)\r\n                });\r\n                    output.push(holder);\r\n            }\r\n        }\r\n\r\n        output =  output.filter(x=>x.source != undefined && x.target != undefined);\r\n        return output;\r\n    };\r\n\r\n    /**\r\n     * Gets a list of all visible links objects; Similar to getVlinks(), and commonService.getVisibleLinks()\r\n     * \r\n     * A link that has multiple origins is stored as a single object\r\n     * \r\n     * Each link's source and target are node object\r\n     * @returns a array of link objects; each link's source and target are node object\r\n     */\r\n    getLLinks() {\r\n        let vlinks = this.visuals.twoD.commonService.getVisibleLinks(true);\r\n        let n = vlinks.length;\r\n        for (let i = 0; i < n; i++) {\r\n            vlinks[i].source = this.visuals.twoD.commonService.session.network.nodes.find(d => d._id == vlinks[i].source);\r\n            vlinks[i].target = this.visuals.twoD.commonService.session.network.nodes.find(d => d._id == vlinks[i].target);\r\n        }\r\n        return vlinks;\r\n    };\r\n\r\n    /**\r\n     * Used to calculate the angle between two nodes. It is used when setting link label\r\n     * @param source source node\r\n     * @param target target node\r\n     */\r\n    calcAngle(source, target) {\r\n        return Math.atan((source.y - target.y) / (source.x - target.x)) * this.visuals.twoD.radToDeg;\r\n    };\r\n\r\n    /**\r\n     * When a node (or multiple nodes) drag is started, update value of this.multidrag and this.selected and set the fx and fy values for each node selected\r\n     * @param n node/nodes\r\n     */\r\n    dragstarted(n) {\r\n        \r\n        // if (!d3.event.active) this.visuals.twoD.force.alphaTarget(0.3).restart();\r\n        function setNode(d) {\r\n            d.fx = d.x;\r\n            d.fy = d.y;\r\n        }\r\n        // this.visuals.twoD.multidrag = n.selected;\r\n        // this.visuals.twoD.selected = this.visuals.twoD.svg.select('g.nodes')\r\n        //     .selectAll('g')\r\n        //     .data(this.visuals.twoD.commonService.session.network.nodes)\r\n        //     .filter(d => d.selected);\r\n        // if (this.visuals.twoD.multidrag) {\r\n        //     this.visuals.twoD.selected.each(setNode);\r\n        // } else {\r\n        //     setNode(n);\r\n        // }\r\n    };\r\n\r\n    /**\r\n     * When a node (or multiple nodes) is dragged, update value fx and fy for each node selected\r\n     * @param n node/nodes\r\n     */\r\n    dragged(n) {\r\n        // function updateNode(d) {\r\n        //     d.fx += d3.event.dx;\r\n        //     d.fy += d3.event.dy;\r\n        // }\r\n        // if (this.visuals.twoD.multidrag) {\r\n        //     this.visuals.twoD.selected.each(updateNode);\r\n        // } else {\r\n        //     updateNode(n);\r\n        // }\r\n    };\r\n\r\n    /**\r\n     * When a node (or multiple nodes) is ended, update value fx and fy to null (unless node is pinned) for each node selected\r\n     * @param n node/nodes\r\n     */\r\n    dragended(n) {\r\n        // if (!d3.event.active) this.visuals.twoD.force.alphaTarget(0);\r\n        // let that = this;\r\n        // function unsetNode(d) {\r\n        //     if (!d.fixed) {\r\n        //         d.fx = null;\r\n        //         d.fy = null;\r\n        //     } else {\r\n        //         // save node location back to temp network for pinned network\r\n        //         if(that.widgets[\"timeline-date-field\"] != 'None') {\r\n        //           let node = that.visuals.twoD.commonService.session.network.timelineNodes.find(d2 => d2._id == d._id);\r\n        //           if(node) {\r\n        //             node.x = d.x;\r\n        //             node.y = d.y;\r\n        //             node.fx = d.fx;\r\n        //             node.fy = d.fy;\r\n        //           }\r\n        //         }\r\n        //       }\r\n        // }\r\n        // if (this.visuals.twoD.multidrag) {\r\n        //     this.visuals.twoD.selected.each(unsetNode);\r\n        // } else {\r\n        //     unsetNode(n);\r\n        // }\r\n    };\r\n\r\n    /**\r\n     * Click event handler, updates the node.selected value\r\n     * @param n \r\n     */\r\n    clickHandler(n) {\r\n        //console.log('event: ',d3.event)\r\n        // if (d3.event && d3.event.key === \"Shift\") {\r\n        //     this.visuals.twoD.commonService.session.data.nodes.find(node => node._id == n._id).selected = !n.selected;\r\n        // } else {\r\n        //     this.visuals.twoD.commonService.session.data.nodes.forEach(node => {\r\n        //         if (node._id == n._id) {\r\n        //             node.selected = !node.selected;\r\n        //         } else {\r\n        //             node.selected = false;\r\n        //         }\r\n        //     });\r\n        // }\r\n        // if (d3.event && d3.event.key === \"Shift\") {\r\n        //     this.visuals.twoD.commonService.session.data.nodes.find(node => node._id == n._id).selected = !n.selected;\r\n        // } else {\r\n        //     this.visuals.twoD.commonService.session.data.nodes.forEach(node => {\r\n        //         if (node._id == n._id) {\r\n        //             node.selected = !n.selected;\r\n        //         } else {\r\n        //             node.selected = false;\r\n        //         }\r\n        //     });\r\n        // }\r\n \r\n        // this.visuals.twoD.render(false);\r\n\r\n        // $(document).trigger('node-selected');\r\n    };\r\n\r\n    /**\r\n     * Used from Context Menu and copy node's ID to the user's clipboard\r\n     */\r\n    copyID() {\r\n        let id = $('#copyID').attr('data-clipboard-text')\r\n        this.clipboard.copy(id);\r\n        this.hideContextMenu();\r\n    }\r\n\r\n    /**\r\n     * Used from Context Menu and copy node's sequence to the user's clipboard\r\n     */\r\n    copySeq() {\r\n        let seq = $('#copySeq').attr('data-clipboard-text')\r\n        this.clipboard.copy(seq);\r\n        this.hideContextMenu()\r\n    }\r\n\r\n    /**\r\n     * Upon right clicking a node, d, the context menu will appear, which allows the user to option to pin node, copy id, copy sequence, or view attributes\r\n     * @param d the node right clicked\r\n     */\r\n    showContextMenu(d) {\r\n        // d3.event.preventDefault();\r\n        // this.visuals.twoD.hideTooltip();\r\n        // $('#copyID').attr('data-clipboard-text', d._id);\r\n        // if (d.seq === null || d.seq === undefined || d.seq === \"\") {\r\n        //     $('#copySeq').prop('disabled', true);\r\n        // } else {\r\n        //     $('#copySeq').prop('disabled', false).attr('data-clipboard-text', d.seq);\r\n        // }\r\n\r\n        // d3.select('#viewAttributes').on('click', () => {\r\n\r\n        //     this.visuals.twoD.ContextSelectedNodeAttributes = [];\r\n\r\n        //     this.visuals.twoD.hideContextMenu();\r\n\r\n        //     this.visuals.twoD.ShowNetworkAttributes = true;\r\n        //     this.visuals.twoD.cdref.detectChanges();\r\n\r\n        //     let nd = this.visuals.twoD.commonService.session.data.nodes.find(nd => nd._id == d._id);\r\n        //     for (let attribute in nd) {\r\n        //         if (attribute[0] == '_' && attribute !== '_id' || attribute == 'data') continue; // DC: where is data being added as an attribute to each node should data be removed here\r\n        //         this.visuals.twoD.ContextSelectedNodeAttributes.push({attribute: this.visuals.twoD.commonService.titleize(attribute), value: d[attribute]});\r\n        //     }\r\n\r\n        //     this.visuals.twoD.ContextSelectedNodeAttributes = this.visuals.twoD.ContextSelectedNodeAttributes\r\n        //         .filter(x=>x.attribute !== \"Seq\" && x.value !== undefined && x.value !== null && x.value !== \"\" )\r\n        //         .concat(this.visuals.twoD.ContextSelectedNodeAttributes.filter(x=>x.attribute !== \"Seq\" && (x.value === undefined || x.value === null || x.value === \"\" )))\r\n        //         .concat(this.visuals.twoD.ContextSelectedNodeAttributes.filter(x=>x.attribute === \"Seq\"));\r\n\r\n        // }).node().focus();\r\n        // if (d.fixed) {\r\n        //     $('#pinNode').text('Unpin Node').on('click', () => {\r\n\r\n        //         d.fx = null;\r\n        //         d.fy = null;\r\n        //         d.fixed = false;\r\n        //         this.visuals.twoD.force.alpha(0.3).alphaTarget(0).restart();\r\n        //         this.visuals.twoD.hideContextMenu();\r\n        //     });\r\n\r\n        // } else {\r\n        //     $('#pinNode').text('Pin Node').on('click', () => {\r\n\r\n        //         d.fx = d.x;\r\n        //         d.fy = d.y;\r\n        //         d.fixed = true;\r\n        //         this.visuals.twoD.hideContextMenu();\r\n        //     });\r\n        // }\r\n\r\n        // let [X, Y] = this.getRelativeMousePosition();\r\n        // $('#context-menu').css({\r\n        //     'z-index': 1000,\r\n        //     'display': 'block',\r\n        //     'left': (X-200) + 'px',\r\n        //     'top': (Y+30) + 'px',\r\n        // }).animate({ 'opacity': 1 }, 80);\r\n    };\r\n\r\n    /**\r\n     * Hides the Context Menu\r\n     */\r\n    hideContextMenu() {\r\n        $('#context-menu').animate({ 'opacity': 0 }, 80, function() {\r\n            $(this).css('z-index', -1);\r\n        });\r\n    };\r\n    \r\n    /**\r\n     * This function capitalizes the first letter of each word in a string.\r\n     * @param str input string\r\n     * @returns input string with first letter capitalized\r\n     */\r\n    titleize(str: string) {\r\n        return str.replace(/\\b\\w/g, l => l.toUpperCase());\r\n    }\r\n    \r\n    /**\r\n     * Generate a tabular HTML string from the data array\r\n     * @param data [ [Col1, ...], ...] - An Array of arrays where arrays within outer array represent different rows and\r\n     *  values within inner array represent the cells within that row\r\n     * @returns an HTML string with a table representation of the data\r\n     */\r\n    tabulate(data: any[]) {\r\n\r\n        let tableHtml = `\r\n            <style>\r\n            div:has(> table#tooltip-table) {\r\n              padding: 0px;\r\n            }\r\n\r\n            #tooltip-table {\r\n                border-spacing: 0;\r\n                width: 100%;\r\n                border: 1px solid #ddd;\r\n                z-index: 1000;\r\n            }\r\n            \r\n            #tooltip-table td, #tooltip-table th {\r\n                text-align: left;\r\n                padding: 10px;\r\n                border: 1px solid #ddd;\r\n            }\r\n            \r\n            #tooltip-table tr:nth-child(even) {\r\n                background-color: #f2f2f2;\r\n            }\r\n            \r\n            #tooltip-table tr:nth-child(odd) {\r\n                background-color: #fff;\r\n            }\r\n            </style>\r\n            <table id=\"tooltip-table\"><tbody>`;\r\n\r\n        for (let row of data) {\r\n            tableHtml += '<tr>';\r\n            for (let cell of row) {\r\n                tableHtml += '<td>' + cell + '</td>';\r\n            }\r\n            tableHtml += '</tr>';\r\n        }\r\n        tableHtml += '</tbody></table>';\r\n\r\n        return tableHtml;\r\n    }\r\n\r\n    /**\r\n     * Highlights the node and all of its neighbor (shares a link with) and the links that the node is \r\n     * a source or target\r\n     * @param node node that is mouseover by user\r\n     */\r\n    highlightNeighbors(node) {\r\n        let links = this.visuals.twoD.getVLinks();\r\n        let lindices = [], neighbors = [node._id];\r\n\r\n        let n = links.length;\r\n        for (let i = 0; i < n; i++) {\r\n            let l = links[i];\r\n            if (l.source._id !== node._id && l.target._id !== node._id) {\r\n                lindices.push(l.index);\r\n            } else {\r\n                if (l.source._id == node._id) {\r\n                    neighbors.push(l.target._id);\r\n                } else {\r\n                    neighbors.push(l.source._id);\r\n                }\r\n            }\r\n        }\r\n        // highlights current node and its neighbors\r\n        // this.visuals.twoD.svg\r\n        //     .select('g.nodes')\r\n        //     .selectAll('g')\r\n        //     .selectAll('path')\r\n        //     .attr('opacity', d => this.visuals.twoD.commonService.includes(neighbors, d._id) ? 1 : .1);\r\n        // hightlights all of current node's links\r\n        // this.visuals.twoD.svg\r\n        //     .select('g.links')\r\n        //     .selectAll('line')\r\n        //     .data(links)\r\n        //     .attr('opacity', l => this.visuals.twoD.commonService.includes(lindices, l.index) ? .1 : 1);\r\n    };\r\n\r\n    /**\r\n     * Gets data from current node needed for tooltip and displays it in the tooltip also hightlights neighbors if that option is selected\r\n     * @param d a node\r\n     */\r\n    showNodeTooltip(d, event) {\r\n        if (this.widgets['node-highlight']) {\r\n          this.selectedNodeId = d.id;\r\n          this.cdref.detectChanges();\r\n      }\r\n\r\n        let tt_var_len = this.widgets['node-tooltip-variable'].length\r\n        let tooltipHtml: string;\r\n\r\n        if (tt_var_len == 0) {\r\n          return null;\r\n        } else if (tt_var_len == 1) {\r\n          tooltipHtml =  `${d[this.widgets['node-tooltip-variable']]}`\r\n        } else {\r\n          tooltipHtml =  this.tabulate(this.widgets['node-tooltip-variable'].map(variable => [this.titleize(variable), d[variable]]))\r\n        }\r\n\r\n        let [X, Y] = this.getRelativeMousePosition(event);\r\n        d3.select('#tooltip')\r\n            .html(tooltipHtml)\r\n            .style('position', 'absolute')\r\n            .style('left', (X+ 10) + 'px')\r\n            .style('top', (Y - 10) + 'px')\r\n            .style('z-index', 1000)\r\n            .transition().duration(100)\r\n            .style('opacity', 1);\r\n    }\r\n\r\n    /**\r\n     * Gets data from current link needed for tooltip and displays it in the tooltip\r\n     * @param d link\r\n     */\r\n    showLinkTooltip(d, event) {\r\n        let v: any = this.visuals.twoD.SelectedLinkTooltipVariable;\r\n\r\n        if (v == 'None') return;\r\n\r\n\r\n        // Tooltip variables can be a single string or an array\r\n        let tooltipVariables = this.visuals.twoD.SelectedLinkTooltipVariable;\r\n        if (!Array.isArray(tooltipVariables)) {\r\n            tooltipVariables = [tooltipVariables];\r\n            this.visuals.twoD.SelectedLinkTooltipVariable = tooltipVariables;  // Update SelectedLinkTooltipVariable to be an array\r\n        }\r\n\r\n        // If no tooltip variable is selected, we shouldn't show a tooltip\r\n        if (tooltipVariables.length > 0 && tooltipVariables[0] == 'None') \r\n            return;\r\n\r\n        /**\r\n         * @param data link\r\n         * @param varName name of variable\r\n         * @returns the value of the link for the variable\r\n         */\r\n        let getData = (data, varName) => {\r\n            if (varName == 'source_id') {\r\n                return data['source']._id\r\n            } else if (varName == 'source_index') {\r\n                return data['source'].index\r\n            } else if (varName == 'target_id') {\r\n                return data['target']._id\r\n            } else if (varName == 'target_index') {\r\n                return data['target'].index\r\n            } else {\r\n                return data[varName];\r\n            }\r\n        }\r\n\r\n        // Generate the HTML for the tooltip\r\n        let tooltipHtml = '';\r\n        if (tooltipVariables.length > 1) {\r\n            tooltipHtml = this.tabulate(tooltipVariables.map(variable => [this.titleize(variable), getData(d,variable)]));\r\n        } else {\r\n            tooltipHtml = getData(d, tooltipVariables[0])\r\n        }\r\n\r\n        let [X, Y] = this.getRelativeMousePosition(event);\r\n        d3.select('#tooltip')\r\n            .html(tooltipHtml)\r\n            .style('position', 'absolute')\r\n            .style('left', (X+ 10) + 'px')\r\n            .style('top', (Y - 10) + 'px')\r\n            .style('z-index', 1000)\r\n            .transition().duration(100)\r\n            .style('opacity', 1);\r\n    };\r\n\r\n    /**\r\n     * Hides the Tooltip\r\n     */\r\n    hideTooltip() {\r\n        if (this.widgets['node-highlight']) {\r\n            this.selectedNodeId = undefined;\r\n            this.cdref.detectChanges();\r\n        }\r\n        let tooltip = d3.select('#tooltip');\r\n        tooltip\r\n            .transition().duration(100)\r\n            .style('opacity', 0)\r\n            .on('end', () => tooltip.style('z-index', -1));\r\n    };\r\n\r\n\r\n    /**\r\n     * @returns {boolean} if a is a number\r\n     */\r\n    isNumber(a): boolean {\r\n        return typeof a == \"number\";\r\n    };\r\n\r\n    /**\r\n     * This function updates the nodes based on node-symbol, node-symbol-variable, node-radius, node-radius-variable, node-radius-min, node-radius-max.\r\n     * It does not add new nodes to the DOM.\r\n     */\r\n    redrawNodes() {\r\n\r\n\r\n        //Things to track in the function:\r\n        //* Shapes:\r\n        // let type = d3[this.widgets['node-symbol']];\r\n        let symbolVariable = this.widgets['node-symbol-variable'];\r\n       \r\n        // // Custom Shape Selected\r\n        // if (type === undefined) {\r\n        //     type = this.customShapes.shapes[this.widgets['node-symbol']];\r\n        // }\r\n\r\n        // //* Sizes:\r\n        // let defaultSize = this.widgets['node-radius'];\r\n        // let size = defaultSize, med = defaultSize, oldrng, min, max;\r\n        // let sizeVariable = this.widgets['node-radius-variable'];\r\n        // let scale;\r\n        // let nodes;\r\n        // if (sizeVariable !== 'None') {\r\n        //     if (this.widgets[\"timeline-date-field\"] == 'None') nodes = this.visuals.twoD.commonService.session.network.nodes;\r\n        //     else nodes = this.visuals.twoD.commonService.session.network.timelineNodes;\r\n        //     let n = this.visuals.twoD.commonService.session.network.nodes.length;\r\n        //     min = Number.MAX_VALUE;\r\n        //     max = Number.MIN_VALUE;\r\n        //     for (let i = 0; i < n; i++) {\r\n        //         let size = this.visuals.twoD.commonService.session.network.nodes[i][sizeVariable];\r\n        //         if (typeof size == 'undefined') continue;\r\n        //         if (size < min) min = size;\r\n        //         if (size > max) max = size;\r\n        //     }\r\n        //     oldrng = max - min;\r\n        //     med = oldrng / 2;\r\n\r\n        //     let maxWidth = this.widgets['node-radius-max'];\r\n        //     let minWidth = this.widgets['node-radius-min'];\r\n        //     // scale = d3.scaleLinear()\r\n        //     // .domain([min, max])\r\n        //     // .range([minWidth, maxWidth]);\r\n        //     }\r\n        \r\n        // nodes = this.visuals.twoD.svg.select('g.nodes').selectAll('g').data(this.visuals.twoD.commonService.session.network.nodes);\r\n\r\n        // // TODO: Hides table row by default if no symbol variable - clean up\r\n        // if(symbolVariable === 'None') {\r\n        //     $('#node-symbol-table-row').slideUp();\r\n        // }\r\n\r\n        // // console.log('nodes: ', nodes);\r\n\r\n        // let that = this;\r\n\r\n        // nodes.selectAll('path').each(function (d) {\r\n\r\n        //     if (symbolVariable !== 'None') {\r\n\r\n        //         // type = d3[that.visuals.twoD.commonService.temp.style.nodeSymbolMap(d[symbolVariable])];\r\n\r\n        //         // if (type === undefined) {\r\n        //         //     type = that.customShapes.shapes[that.visuals.twoD.commonService.temp.style.nodeSymbolMap(d[symbolVariable])];\r\n        //         // }\r\n    \r\n        //     } \r\n        //     if (sizeVariable !== 'None') {\r\n        //       size = d[sizeVariable];\r\n        //       if (!that.isNumber(size)) size = med;\r\n        //       size = scale(size);\r\n        //     }\r\n\r\n        //     // d3.select(this).attr('d', d3.symbol().size(size).type(type));    \r\n            \r\n        //   });\r\n    };\r\n\r\n    /**\r\n     * redraws/updates node borders based on node-border-width\r\n     */\r\n    private redrawNodeBorder(){\r\n        // let nodes = this.visuals.twoD.svg.select('g.nodes').selectAll('g').data(this.visuals.twoD.commonService.session.network.nodes);\r\n        // nodes\r\n        //   .selectAll('path')\r\n        //   .style('stroke', 'black')\r\n        //   .style('stroke-width', this.widgets['node-border-width']);\r\n      }\r\n\r\n    /**\r\n     * uses values from node-label-variable, node-label-size, and node-label-orietation to add/remove labels from the the nodes\r\n     */\r\n    redrawLabels() {\r\n\r\n        // let nodes = this.visuals.twoD.svg.select('g.nodes').selectAll('g').data(this.visuals.twoD.commonService.session.network.nodes).select('text'),\r\n        //     labelVar = this.widgets['node-label-variable'];\r\n        // if (labelVar == 'None') {\r\n        //     nodes.text('');\r\n        // } else {\r\n        //     let size = this.widgets['node-label-size'],\r\n        //         orientation = this.widgets['node-label-orientation'];\r\n        //     nodes\r\n        //         .text(n => n[labelVar])\r\n        //         .style('font-size', size + 'px');\r\n        //     switch (orientation) {\r\n        //         case 'Left':\r\n        //             nodes\r\n        //                 .attr('text-anchor', 'end')\r\n        //                 .attr('dx', -8)\r\n        //                 .attr('dy', (size - 4) / 2);\r\n        //             break;\r\n        //         case 'Top':\r\n        //             nodes\r\n        //                 .attr('text-anchor', 'middle')\r\n        //                 .attr('dx', 0)\r\n        //                 .attr('dy', 4 - size);\r\n        //             break;\r\n        //         case 'Bottom':\r\n        //             nodes\r\n        //                 .attr('text-anchor', 'middle')\r\n        //                 .attr('dx', 0)\r\n        //                 .attr('dy', size + 4);\r\n        //             break;\r\n        //         case 'Middle':\r\n        //             nodes\r\n        //                 .attr('text-anchor', 'middle')\r\n        //                 .attr('dx', 0)\r\n        //                 .attr('dy', (size - 4) / 2);\r\n        //             break;\r\n        //         default: //'right'\r\n        //             nodes\r\n        //                 .attr('text-anchor', 'start')\r\n        //                 .attr('dx', 8)\r\n        //                 .attr('dy', (size - 4) / 2);\r\n        //     }\r\n        // }\r\n    };\r\n\r\n    /**\r\n     * This is called when the variable used to grouped by/created polygons is changed\r\n     * \r\n     * XXXXX May be worth revisiting when other polygon functions are updated. Some lines are probably not necessary XXXXX \r\n     */\r\n    centerPolygons(e) {\r\n\r\n        this.widgets['polygons-foci'] = e;\r\n        this._rerender();\r\n        if(this.widgets['polygons-color-show'] == true) {\r\n          $(\"#polygon-color-table\").empty();\r\n          this.visuals.twoD.updatePolygonColors();\r\n        //   this._rerender();\r\n        }\r\n        \r\n        if (e == 'None') {\r\n            $('#color-polygons').slideDown();\r\n            $('#polygon-color-value-row').slideDown();\r\n          } else {\r\n            $('#color-polygons').css('display', 'flex');\r\n            $('#polygon-color-value-row').slideUp();\r\n          }\r\n    }\r\n\r\n    /**\r\n     * Calls setPolygonLabelSize to update polygon-label-size widget and then redraws polygon labels\r\n     */\r\n    onPolygonLabelSizeChange(e) {\r\n        this.widgets['polygons-label-size'] = parseFloat(e);\r\n        document.documentElement.style.setProperty('--vis-graph-panel-label-font-size', e + 'px');\r\n        this.cdref.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * Updates polygons-label-orientation widget and then redraws polygon labels\r\n     */\r\n    onPolygonLabelOrientationChange(e) {\r\n        this.widgets['polygons-label-orientation'] = e;\r\n        this._rerender();\r\n    }\r\n\r\n    /**\r\n     * Updates polygons-label-show widget and the renders the network again\r\n     */\r\n    onPolygonLabelShowChange(e) {\r\n        if (e) {\r\n            this.widgets['polygons-label-show'] = true;\r\n            $('.polygons-label-row').slideDown();\r\n        }\r\n        else {\r\n            this.widgets['polygons-label-show'] = false;\r\n            $('.polygons-label-row').slideUp();\r\n        }\r\n\r\n        this._rerender();\r\n    }\r\n\r\n\r\n    /**\r\n     * XXXXX reevaluate if need to be combined with polygonColorsTableToggle; when called from polygonColorsTableToggle e is 'Show'/'Hide' when called\r\n     * from template e is true/false XXXXX\r\n     */\r\n    onPolygonColorTableChange(e) {\r\n        this.SelectedNetworkTableTypeVariable = e;\r\n        this.widgets[\"polygon-color-table-visible\"] = e;\r\n        if (this.SelectedNetworkTableTypeVariable == 'Show') {\r\n            this.PolygonColorTableWrapperDialogSettings.setVisibility(true);\r\n        }\r\n        else {\r\n            // this.PolygonColorTableWrapperDialogSettings.setVisibility(false);\r\n        }\r\n    }\r\n\r\n\r\n    /*/\r\n        Node Events\r\n    /*/\r\n\r\n    /**\r\n     * updates the value of the appropriate widget, add/removes rows from dialog menu, and calls redrawLabels to update labels on svg/view\r\n     * @param e the name of variable to change labels to\r\n     */\r\n    onNodeLabelVaribleChange(e) {\r\n\r\n        this.widgets['node-label-variable'] = e;\r\n        if (e == 'None') {\r\n            $('.node-label-row').slideUp();\r\n        } else {\r\n            $('.node-label-row').css('display', 'flex');\r\n        }\r\n\r\n        this._rerender();\r\n    }\r\n\r\n    /**\r\n     * Gets the label for a node based on node label variable\r\n     * @param node the node retrieve to get the value of the variable\r\n     */\r\n    getNodeLabel( node : any) {\r\n\r\n        // If no label variable then should be none\r\n        return (this.widgets['node-label-variable'] == 'None') ? '' : node[this.widgets['node-label-variable']];\r\n    \r\n    }\r\n\r\n    /**\r\n     * Gets the label for a link based on link label variable\r\n     * @param node the link we retrieve to get the value of the variable\r\n     */\r\n    getLinkLabel( link : any) {\r\n\r\n        // console.log('link variable: ',this.widgets['link-label-variable'] );\r\n        let labelVariable = this.widgets['link-label-variable'];\r\n        // If no label variable then should be none\r\n        if (labelVariable == 'None') {\r\n            return { text : ''};\r\n        } else {\r\n            // console.log('link variable2: ',this.visuals.twoD.commonService.session.data.links[index]);\r\n\r\n            if (labelVariable == 'source_id') {\r\n                return link['source']['id']\r\n            } else if (labelVariable == 'source_index') {\r\n                return link['source']['index']\r\n            } else if (labelVariable == 'target_id') {\r\n                return link['target']['id']\r\n            } else if(labelVariable == 'target_index') {\r\n                return link['target']['index']\r\n            } else if (labelVariable != 'distance') {\r\n                return { text : link[labelVariable] };\r\n            }\r\n            console.log('cluster link: ', link);\r\n            const labelValue = link[labelVariable];\r\n            if (typeof labelValue === 'number' || !isNaN(parseFloat(labelValue))) {\r\n                // console.log('is number');\r\n                if(this.widgets['default-distance-metric'] == 'snps') {\r\n                    return { text :  Math.round(parseFloat(labelValue))};\r\n                } else {\r\n                    return (labelValue != 0) ?  { text : parseFloat(labelValue).toFixed(this.widgets['link-label-decimal-length']) } : { text : ''};\r\n                }                \r\n            } else {\r\n\r\n                    return { text : labelValue};\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Calls setNodeLabelSize to update label-size and redraw labels\r\n     */\r\n    onNodeLabelSizeChange(e) {\r\n        this.setNodeLabelSize(e.target.value);\r\n    }\r\n\r\n    /**\r\n     * Updates node-label-size and then redraws labels\r\n     */\r\n    setNodeLabelSize(size) {\r\n        this.widgets['node-label-size'] = parseFloat(size);\r\n        document.documentElement.style.setProperty('--vis-graph-node-label-font-size', `${this.SelectedNodeLabelSizeVariable}pt`);\r\n    }\r\n    \r\n\r\n    /**\r\n     * Updates node-label-orientation and then redraws labels\r\n     * @param e orientation such as Right, Left, Top, Bottom, Middle\r\n     */\r\n    onNodeLabelOrientationChange(e) {\r\n        this.widgets['node-label-orientation'] = e;\r\n        this.visuals.twoD.redrawLabels();\r\n    }\r\n\r\n    /**\r\n     * updates node-tooltip-variable\r\n     */\r\n    onNodeTooltipVariableChange(e) {\r\n\r\n        let selectedValue = e;\r\n\r\n        if (!Array.isArray(selectedValue)) {\r\n            selectedValue = [selectedValue];\r\n        }\r\n\r\n        this.widgets['node-tooltip-variable'] = selectedValue;\r\n        \r\n    }\r\n\r\n    onNodeSymbolVariableChange(e, setVisibility = true) {\r\n\r\n            this.widgets['node-symbol-variable'] = this.SelectedNodeSymbolVariable;\r\n\r\n\r\n            if(setVisibility){\r\n                this.visuals.twoD.NodeSymbolTableWrapperDialogSettings.setVisibility(true);\r\n                this.visuals.twoD.SelectedNetworkTableTypeVariable = \"Show\";\r\n\r\n                if (this.SelectedNodeSymbolVariable !== 'None') {\r\n\r\n                    $('#node-symbol-row').slideUp();\r\n                    \r\n                    //If hidden by default, unhide to perform slide up and down\r\n                    if(!this.ShowNodeSymbolTable){\r\n                        this.ShowNodeSymbolTable = true;\r\n                    } else {\r\n                        $('#node-symbol-table-row').slideDown();\r\n                    }\r\n\r\n                    if (!this.ShowNodeSymbolWrapper) {\r\n                        this.ShowNodeSymbolWrapper = true;\r\n                    }\r\n                // No shape by variable selected\r\n                // show shape, hide table \r\n                } else {\r\n\r\n                    $('#node-symbol-row').slideDown();\r\n                    $('#node-symbol-table-row').slideUp();\r\n                    if (this.ShowNodeSymbolWrapper) {\r\n                        this.ShowNodeSymbolWrapper = false;\r\n                    }\r\n                    this.onNodeSymbolTableChange('Hide');\r\n\r\n                }\r\n    \r\n            }\r\n            // if(e !== 'None' && setVisibility){\r\n            //     this.visuals.twoD.NodeSymbolTableWrapperDialogSettings.setVisibility(true);\r\n            //     this.visuals.twoD.SelectedNetworkTableTypeVariable = \"Show\";\r\n\r\n            //     if (this.SelectedNodeSymbolVariable !== 'None') {\r\n\r\n            //         $('#node-symbol-row').slideUp();\r\n                    \r\n            //         //If hidden by default, unhide to perform slide up and down\r\n            //         if(!this.ShowNodeSymbolTable){\r\n            //             this.ShowNodeSymbolTable = true;\r\n            //         } else {\r\n            //             $('#node-symbol-table-row').slideDown();\r\n            //         }\r\n\r\n            //     // No shape by variable selected\r\n            //     // show shape, hide table \r\n            //     } else {\r\n\r\n            //         $('#node-symbol-row').slideDown();\r\n            //         $('#node-symbol-table-row').slideUp();\r\n            //         this.onNodeSymbolTableChange('Hide');\r\n\r\n            //     }\r\n    \r\n            // }\r\n\r\n\r\n            // this.visuals.twoD.cdref.detectChanges();\r\n\r\n            this.generateNodeSymbolSelectionTable(\"#node-symbol-table\", e);\r\n            this._rerender();\r\n    }\r\n\r\n    svgDefs = `\r\n    <path id=\"blob\" d=\"M 19.415 1.0564 C 20.585 2.47 20.225 5.89 21.665 8.2612 C 23.06 10.678 26.345 12.046 28.325 14.554 C 30.305 17.1076 31.025 20.8012 28.865 21.9412 C 26.75 23.1268 21.755 21.7588 18.605 23.3092 C 15.455 24.8596 14.105 29.3284 12.485 29.8756 C 10.865 30.3772 8.93 27.0028 6.41 25.042 C 3.89 23.1268 0.83 22.6708 0.38 20.9836 C -0.07 19.2964 2.135 16.378 2.54 13.642 C 2.945 10.9516 1.55 8.4892 2.135 7.03 C 2.72 5.5708 5.285 5.1148 7.355 4.294 C 9.47 3.4276 11.135 2.1964 13.34 1.2388 C 15.545 0.3268 18.245 -0.3116 19.415 1.0564 Z\"/>\r\n    <path id=\"cloud\" d=\"M 14 -1 A 9 9 90 0 0 5 8 A 9 9 90 0 0 5.1055 9.3125 A 6 6 90 0 0 1 15 A 6 6 90 0 0 7 21 L 22 21 A 7 7 90 0 0 29 14 A 7 7 90 0 0 22.9414 7.0703 A 9 9 90 0 0 14 -1 z\"/>\r\n    <polygon id=\"diamond\" points=\"0,15 15,0 30,15 15,30\"/>\r\n    <polygon id=\"house\" points=\"4,18 4,30 13,30 13,24 17,24 17,30 26,30 26,18 30,18 15,0 0,18\"/>\r\n    `;\r\n\r\n    public generateNodeSymbolSelectionTable(tableId: string, variable: string, isEditable: boolean = true) {\r\n        this.visuals.microbeTrace.clearTable(tableId);\r\n\r\n        let symbolMapping: { key: string, value: string }[] = [\r\n            { key: 'symbolCircle', value: '&#11044; (Circle)' },\r\n            { key: \"symbolTriangle\", value: '&#9650; (Up Triangle)' },\r\n            // { key: \"symbolTriangleDown\", value: '&#9660; (Down Triangle)' },\r\n            // { key: \"symbolTriangleLeft\", value: '&#9664; (Left Triangle)' },\r\n            // { key: \"symbolTriangleRight\", value: '&#9654; (Right Triangle)' },\r\n            { key: \"symbolDiamond\", value: '&#10731; (Vertical Diamond)' },\r\n            // { key: \"symbolDiamondAlt\", value: '&#10731; (Horizontal Diamond)' },\r\n            { key: \"symbolSquare\", value: '&#9632; (Square)' },\r\n            // { key: \"symbolDiamondSquare\", value: '&#9670; (Tilted Square)' },\r\n            // { key: \"symbolPentagon\", value: '&#11039; (Pentagon)' },\r\n            { key: \"symbolHexagon\", value: '&#11042; (Hexagon)' },\r\n            // { key: \"symbolHexagonAlt\", value: '&#11043; (Tilted Hexagon)' },\r\n            // { key: \"symbolOctagon\", value: '&#11042; (Octagon)' },\r\n            // { key: \"symbolOctagonAlt\", value: '&#11043; (Tilted Octagon)' },\r\n            // { key: \"symbolCross\", value: '&#10010; (Addition Sign)' },\r\n            // { key: \"symbolX\", value: '&#10006; (Multiplication Sign)' },\r\n            // { key: \"symbolWye\", value: '&#120300; (Wye)' },\r\n            // { key: \"symbolStar\", value: '&#9733; (Star)' },\r\n        ];\r\n\r\n        setTimeout(() => {\r\n    \r\n            let table = $(tableId)\r\n            const disabled: string = isEditable ? '' : 'disabled';\r\n\r\n            this.widgets['node-symbol-variable'] = variable;\r\n\r\n            if (variable === 'None' && !isEditable) return;\r\n\r\n            let values = [];\r\n            let aggregates = {};\r\n            let nodes = this.visuals.twoD.commonService.session.data.nodes;\r\n            let n = nodes.length;\r\n            let vnodes = 0;\r\n            for (let i = 0; i < n; i++) {\r\n                let d = nodes[i];\r\n                if (!d.visible) continue;\r\n                vnodes++;\r\n                let dv = d[variable];\r\n                if (values.indexOf(dv) == -1) values.push(dv);\r\n                if (dv in aggregates) {\r\n                    aggregates[dv]++;\r\n                } else {\r\n                    aggregates[dv] = 1;\r\n                }\r\n            }\r\n\r\n            if (values.length > this.visuals.twoD.commonService.session.style.nodeSymbols.length) {\r\n                let symbols = [];\r\n                let m = Math.ceil(values.length / this.visuals.twoD.commonService.session.style.nodeSymbols.length);\r\n                while (m-- > 0) {\r\n                    symbols = symbols.concat(this.visuals.twoD.commonService.session.style.nodeSymbols);\r\n                }\r\n                this.visuals.twoD.commonService.session.style.nodeSymbols = symbols;\r\n                // console.log('node symbols: ', symbols);\r\n\r\n            }\r\n\r\n            table.empty().append(\r\n                \"<tr>\" +\r\n                `<th class=\"${isEditable ? 'table-header-row' : ''}\" ${isEditable ? 'contenteditable' : ''}><div class=\"header-content sortable\">Node ${this.commonService.titleize(variable)}<a class='sort-button' style='cursor: pointer'></a></div></th>` +\r\n                (this.widgets['node-symbol-table-counts']\r\n                    ? `<th class=\"table-header-row\"><div class=\"header-content sortable\">Count<a class='sort-button' style='cursor: pointer'></a></div></th>`\r\n                    : '') +\r\n                (this.widgets['node-symbol-table-frequencies']\r\n                    ? `<th class=\"table-header-row\"><div class=\"header-content sortable\">Frequency<a class='sort-button' style='cursor: pointer'></a></div></th>`\r\n                    : '') +\r\n                '<th>Shape</th>' +\r\n                '</tr>'\r\n            );\r\n\r\n            values.sort( (a, b)  => {\r\n                return aggregates[b] - aggregates[a];\r\n            });\r\n\r\n            \r\n            this.visuals.twoD.commonService.temp.style.nodeSymbolMap = d3.scaleOrdinal(this.visuals.twoD.commonService.session.style.nodeSymbols).domain(values);\r\n            \r\n            values.forEach((v, i) => {\r\n                // PRE D3\r\n\r\n                // Manually create options instead of using the existing select\r\n                let optionsHtml = `\r\n                    <option value=\"symbolCircle\" ${this.visuals.twoD.commonService.temp.style.nodeSymbolMap(v) === 'circle' ? 'selected' : ''}>&nbsp;&#11044; (Circle)</option>\r\n                    <option value=\"symbolSquare\" ${this.visuals.twoD.commonService.temp.style.nodeSymbolMap(v) === 'square' ? 'selected' : ''}>&nbsp;&#9632; (Square)</option>\r\n                    <option value=\"symbolHexagon\" ${this.visuals.twoD.commonService.temp.style.nodeSymbolMap(v) === 'hexagon' ? 'selected' : ''}>&nbsp;&#11042; (Hexagon)</option>\r\n                    <option value=\"symbolTriangle\" ${this.visuals.twoD.commonService.temp.style.nodeSymbolMap(v) === 'triangle' ? 'selected' : ''}>&nbsp;&#9650; (Triangle)</option>\r\n                    <option value=\"symbolDiamond\" ${this.visuals.twoD.commonService.temp.style.nodeSymbolMap(v) === 'diamond' ? 'selected' : ''}>&nbsp;&#10731; (Diamond)</option>\r\n                `;\r\n\r\n                // console.log('symbol each value: ', v, this.visuals.twoD.commonService.temp.style.nodeSymbolMap(v));\r\n                let selector = $(`<select ${disabled}></select>`).append(optionsHtml).val(this.visuals.twoD.commonService.temp.style.nodeSymbolMap(v)).on('change',  (e) => {\r\n                    this.visuals.twoD.commonService.session.style.nodeSymbols.splice(i, 1, (e.target as any).value);\r\n                    this.visuals.twoD.commonService.temp.style.nodeSymbolMap = d3.scaleOrdinal(this.visuals.twoD.commonService.session.style.nodeSymbols).domain(values);\r\n                    this._rerender();\r\n                    // this.visuals.twoD.redrawNodes();\r\n                });        \r\n                let symbolText = symbolMapping.find(x => x.key === this.visuals.twoD.commonService.temp.style.nodeSymbolMap(v));\r\n\r\n                let cell = $('<td></td>').append(isEditable ? selector : symbolText ? symbolText.value : '');\r\n                let row = $(\r\n                    '<tr>' +\r\n                    `<td ${isEditable ? 'contenteditable' : ''}> ${this.visuals.twoD.commonService.titleize('' + v)} </td> ` +\r\n                    (this.widgets['node-symbol-table-counts'] ? ('<td>' + aggregates[v] + '</td>') : '') +\r\n                    (this.widgets['node-symbol-table-frequencies'] ? ('<td>' + (aggregates[v] / vnodes).toLocaleString() + '</td>') : '') +\r\n                    '</tr>'\r\n                ).append(cell);\r\n                table.append(row);\r\n            });\r\n\r\n\r\n            let isAscending = true;  // add this line before the click event handler\r\n\r\n            // The sorting functionality is added here\r\n            $(tableId).on('click', 'th', function () {\r\n                let table = $(this).parents('table').eq(0);\r\n                let rows = table.find('tr:gt(0)').toArray().sort(comparer($(this).index()));\r\n                isAscending = !isAscending;  // replace 'this.asc' with 'isAscending'\r\n                if (!isAscending){rows = rows.reverse();}\r\n                for (let i = 0; i < rows.length; i++) { table.append(rows[i]); }\r\n            });\r\n\r\n            function comparer(index) {\r\n                return function(a, b) {\r\n                    let valA = getCellValue(a, index), valB = getCellValue(b, index);\r\n                    console.log(`Comparing: ${valA} and ${valB}`);  // New line\r\n                    return !isNaN(Number(valA)) && !isNaN(Number(valB)) ? Number(valA) - Number(valB) : valA.toString().localeCompare(valB);\r\n                }\r\n            }\r\n\r\n            function getCellValue(row, index) {\r\n                return $(row).children('td').eq(index).text();\r\n            }\r\n\r\n        }, 100);\r\n\r\n    }\r\n\r\n    public onNodeRadiusVariableChange(e) {\r\n\r\n        this.widgets['node-radius-variable'] = e;\r\n\r\n        if (e == 'None') {\r\n            $('#node-max-radius-row').slideUp();\r\n            $('#node-min-radius-row').slideUp();\r\n            $('#node-radius-row').slideDown();\r\n          } else {\r\n            $('#node-max-radius-row').css('display', 'flex');\r\n            $('#node-min-radius-row').css('display', 'flex');\r\n            $('#node-radius-row').slideUp();\r\n          }\r\n\r\n          this._rerender(); \r\n\r\n    }\r\n\r\n    /**\r\n     * Updates node-radius-max widget and redraws nodes\r\n     */\r\n   public onNodeRadiusMaxChange(e) {\r\n    this.widgets['node-radius-max'] = e;\r\n    this.updateMinMaxNode();\r\n    this._rerender();\r\n   }\r\n\r\n    /**\r\n     * Updates node-radius-min widget and redraws nodes\r\n     */\r\n   public onNodeRadiusMinChange(e) {\r\n        this.widgets['node-radius-min'] = e;\r\n        this.updateMinMaxNode()\r\n        this._rerender();\r\n   }\r\n\r\n    /**\r\n     * Updates node-border-width widget and redraws nodes\r\n     */\r\n    public onNodeBorderWidthChange(e) {\r\n        this.widgets['node-border-width'] = e;\r\n        this.updateMinMaxNode()\r\n        this._rerender();\r\n    }\r\n\r\n    /**\r\n     * Updates node-radius widget and redraws nodes\r\n     */\r\n    public onNodeRadiusChange(e) {\r\n\r\n        this.widgets['node-radius'] = e;\r\n\r\n        this._rerender();\r\n       \r\n    }\r\n\r\n    /**\r\n     * Rerenders whole data set by resetting data object\r\n     */\r\n    private _rerender(timelineTick=false) {\r\n\r\n        if (this.data === undefined) {\r\n            return;\r\n        } \r\n\r\n        let nodes = this.commonService.getVisibleNodes();\r\n        if (timelineTick && nodes.length == (this.twoDGraph as any).component.datamodel._nodes.length) return;\r\n\r\n        let nodeIDs = new Set(nodes.map(node => node._id))\r\n        let links = this.commonService.getVisibleLinks();\r\n        let filteredLinks = links.filter(l => nodeIDs.has(l.source) && nodeIDs.has(l.target));\r\n\r\n        let networkData = { \r\n            nodes: nodes,\r\n            links: filteredLinks\r\n        };\r\n\r\n\r\n        if(networkData.nodes.length !== 0) {\r\n            if (this.visuals.microbeTrace.commonService.session.style.widgets['node-timeline-variable'] != 'None') {\r\n                this.autoFit = false;\r\n            } else {\r\n                this.autoFit = true;\r\n            }  \r\n        } else {\r\n            this.autoFit = true; \r\n        }\r\n\r\n        //console.log('link vis rerender: ', this.visuals.twoD.commonService.getVisibleLinks());\r\n        \r\n        this.data = this.visuals.twoD.commonService.convertToGraphDataArray(networkData);\r\n\r\n        // document.documentElement.style.setProperty('--vis-graph-panel-fill-color', `${this.SelectedNodeLabelSizeVariable}pt`);\r\n\r\n        setTimeout(() => {\r\n            this.cdref.detectChanges();\r\n            this.cdref.markForCheck();\r\n            if (timelineTick) {\r\n                this.applyNodeFx();\r\n                (this.twoDGraph as any).component.fitView();\r\n            }\r\n            \r\n          }, 0);\r\n          \r\n        // Update the panels\r\n        this.updatePanels();\r\n\r\n    }\r\n\r\n      public updatePanels(): void {\r\n        if (this.layoutType2 === GraphLayoutType.Parallel && this.showParallel) {\r\n          // Update nodes and generate new panels\r\n          const { updatedNodes, panels, groups } = this.commonService.updateNodesAndGeneratePanels(this.data);\r\n    \r\n          // Update data with updated nodes\r\n          this.data = {\r\n            ...this.data,\r\n            nodes: updatedNodes\r\n          };\r\n    \r\n          // Ensure panels are deep cloned\r\n          this.panels = JSON.parse(JSON.stringify(panels));\r\n\r\n          // Update polygonGroups\r\n          this.visuals.twoD.commonService.temp.polygonGroups = groups;\r\n        \r\n          // Use setTimeout to trigger change detection in the next tick\r\n          setTimeout(() => {\r\n            this.cdref.detectChanges();\r\n            this.cdref.markForCheck();\r\n          }, 0);\r\n        }\r\n      }\r\n\r\n    public getNodeShape( node : any ) {\r\n\r\n        //* Shapes:\r\n        let symbolVariable = this.widgets['node-symbol-variable'];\r\n\r\n\r\n        if(symbolVariable == \"None\") {\r\n\r\n            switch(this.selectedNodeShape) {\r\n                case 'symbolCircle':\r\n                    return 'circle';\r\n                case 'symbolSquare':\r\n                    console.log('node returning square');\r\n                    return 'square';\r\n                case 'symbolHexagon':\r\n                    return 'hexagon';\r\n                case 'symbolTriangle':\r\n                    return 'triangle';\r\n                default:\r\n                    return `circle`;\r\n               }\r\n            // return this.widgets['node-symbol-variable'];\r\n        } else {\r\n\r\n           let type = this.visuals.twoD.commonService.temp.style.nodeSymbolMap(node[symbolVariable]);\r\n\r\n           switch(type) {\r\n            case 'symbolCircle':\r\n                return 'circle';\r\n            case 'symbolSquare':\r\n                return 'square';\r\n            case 'symbolHexagon':\r\n                return 'hexagon';\r\n            case 'symbolTriangle':\r\n                return 'triangle';\r\n            case 'symbolDiamond':\r\n                return `<use href=\"#diamond\" stroke-width=\"3\" />`;\r\n           }\r\n        \r\n            // if (type === undefined) {\r\n            //     type = that.customShapes.shapes[that.visuals.twoD.commonService.temp.style.nodeSymbolMap(d[symbolVariable])];\r\n            // }\r\n        }\r\n\r\n        // // Custom Shape Selected\r\n        // if (type === undefined) {\r\n        //     type = this.customShapes.shapes[this.widgets['node-symbol']];\r\n        // }\r\n\r\n        // //* Sizes:\r\n        // let defaultSize = this.widgets['node-radius'];\r\n        // let size = defaultSize, med = defaultSize, oldrng, min, max;\r\n        // let sizeVariable = this.widgets['node-radius-variable'];\r\n        // let scale;\r\n        // let nodes;\r\n        // if (sizeVariable !== 'None') {\r\n        //     if (this.widgets[\"timeline-date-field\"] == 'None') nodes = this.visuals.twoD.commonService.session.network.nodes;\r\n        //     else nodes = this.visuals.twoD.commonService.session.network.timelineNodes;\r\n        //     let n = this.visuals.twoD.commonService.session.network.nodes.length;\r\n        //     min = Number.MAX_VALUE;\r\n        //     max = Number.MIN_VALUE;\r\n        //     for (let i = 0; i < n; i++) {\r\n        //         let size = this.visuals.twoD.commonService.session.network.nodes[i][sizeVariable];\r\n        //         if (typeof size == 'undefined') continue;\r\n        //         if (size < min) min = size;\r\n        //         if (size > max) max = size;\r\n        //     }\r\n        //     oldrng = max - min;\r\n        //     med = oldrng / 2;\r\n\r\n        //     let maxWidth = this.widgets['node-radius-max'];\r\n        //     let minWidth = this.widgets['node-radius-min'];\r\n        //     // scale = d3.scaleLinear()\r\n        //     // .domain([min, max])\r\n        //     // .range([minWidth, maxWidth]);\r\n        //     }\r\n        \r\n        // nodes = this.visuals.twoD.svg.select('g.nodes').selectAll('g').data(this.visuals.twoD.commonService.session.network.nodes);\r\n\r\n        // // TODO: Hides table row by default if no symbol variable - clean up\r\n        // if(symbolVariable === 'None') {\r\n        //     $('#node-symbol-table-row').slideUp();\r\n        // }\r\n\r\n        // // console.log('nodes: ', nodes);\r\n\r\n        // let that = this;\r\n\r\n        // nodes.selectAll('path').each(function (d) {\r\n\r\n        //     if (symbolVariable !== 'None') {\r\n\r\n        //         // type = d3[that.visuals.twoD.commonService.temp.style.nodeSymbolMap(d[symbolVariable])];\r\n\r\n        //         // if (type === undefined) {\r\n        //         //     type = that.customShapes.shapes[that.visuals.twoD.commonService.temp.style.nodeSymbolMap(d[symbolVariable])];\r\n        //         // }\r\n    \r\n        //     } \r\n        //     if (sizeVariable !== 'None') {\r\n        //       size = d[sizeVariable];\r\n        //       if (!that.isNumber(size)) size = med;\r\n        //       size = scale(size);\r\n        //     }\r\n\r\n        //     // d3.select(this).attr('d', d3.symbol().size(size).type(type));    \r\n            \r\n        //   });\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates node-symbol widget and redraws nodes\r\n     */\r\n    onNodeSymbolChange(e) {\r\n        this.widgets['node-symbol'] = e;\r\n        this._rerender();\r\n    }\r\n\r\n    /**\r\n     * Sets whether node symbol table is visible or not\r\n     * @param e 'Show' or 'Hide'\r\n     */\r\n    onNodeSymbolTableChange(e) {\r\n        this.SelectedNetworkTableTypeVariable = e;\r\n        this.widgets[\"node-symbol-table-visible\"] = this.SelectedNetworkTableTypeVariable;\r\n        if (this.SelectedNetworkTableTypeVariable == \"Show\") {\r\n            this.NodeSymbolTableWrapperDialogSettings.setVisibility(true);\r\n        }\r\n        else {\r\n            this.NodeSymbolTableWrapperDialogSettings.setVisibility(false);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates link-tooltip-variable and SelectedLinkTooltipVariable to update what tooltip displays for links\r\n     */\r\n    onLinkTooltipVariableChange(e) {\r\n        if (!Array.isArray(e)) {\r\n            e = [e];\r\n        }\r\n        e = e.filter(item => item !== 'None')\r\n    \r\n        this.widgets['link-tooltip-variable'] = e;\r\n        this.visuals.twoD.SelectedLinkTooltipVariable = this.widgets['link-tooltip-variable'];\r\n    }\r\n\r\n    /**\r\n     * Updates link-label-variable widget and link labels\r\n     */\r\n    onLinkLabelVariableChange(e) {\r\n        let label: any = e;\r\n        this.widgets['link-label-variable'] = label;\r\n\r\n        this._rerender();\r\n    }\r\n\r\n    /**\r\n     * Updates link-label-decimal-length widget and updates label with updated number of decimal points\r\n     */\r\n    onLinkDecimalVariableChange(e) {\r\n        this.widgets['link-label-decimal-length'] = e;\r\n        this._rerender();\r\n    }\r\n\r\n    /**\r\n     * Updates link-opacity widget and the opacity for all links\r\n     */\r\n    onLinkOpacityChange(e) {\r\n        this.widgets['link-opacity'] = e;\r\n        this._rerender();\r\n    }\r\n\r\n    updateLinkWidthRows(e) {\r\n        if (e == 'None') {\r\n            setTimeout(() => {\r\n                $('#link-reciprocalthickness-row').slideUp();\r\n                $('#link-max-width-row').slideUp();\r\n                $('#link-min-width-row').slideUp();\r\n                $('#link-width-row').slideDown();\r\n            }, 5)\r\n        } else {\r\n            setTimeout(() => {\r\n                $('#link-reciprocalthickness-row').css('display', 'flex');\r\n                $('#link-max-width-row').css('display', 'flex');\r\n                $('#link-min-width-row').css('display', 'flex');\r\n                $('#link-width-row').slideUp();\r\n            }, 5)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates link-width-variable widget and updates link width; Also cause min, max and reciprocal link width row to appear/disappear\r\n     */\r\n    onLinkWidthVariableChange(e) {\r\n        this.updateLinkWidthRows(e);\r\n        this.widgets['link-width-variable'] = e;\r\n        this.updateMinMaxLink();\r\n        this._rerender();\r\n    }\r\n\r\n    updateMinMaxNode(){\r\n\r\n        this.visNodes = this.commonService.getVisibleNodes();\r\n        let n = this.visNodes.length;\r\n        let maxWidth = this.widgets['node-radius-max'];\r\n        let minWidth = this.widgets['node-radius-min'];\r\n        let sizeVariable = this.widgets['node-radius-variable'];\r\n\r\n\r\n        this.nodeMin = Number.MAX_VALUE;\r\n        this.nodeMax = Number.MIN_VALUE;\r\n        for (let i = 0; i < n; i++) {\r\n          let size = this.visNodes[i][sizeVariable];\r\n          if (typeof size == 'undefined') continue;\r\n          if (size < this.nodeMin) this.nodeMin = size;\r\n          if (size > this.nodeMax) this.nodeMax = size;\r\n        }\r\n\r\n        this.nodeMid = (this.nodeMax - this.nodeMin) / 2;\r\n\r\n        this.nodeScale = d3.scaleLinear()\r\n          .domain([this.nodeMin, this.nodeMax])\r\n          .range([minWidth, maxWidth]);\r\n    }\r\n\r\n    updateMinMaxLink(){\r\n        let maxWidth = this.widgets['link-width-max'];\r\n        if (maxWidth == 'None') {\r\n            this.widgets['link-width-max'] = 15;\r\n            maxWidth = 15;\r\n        } \r\n        let minWidth = this.widgets['link-width-min'];\r\n        if (minWidth == 'None') {\r\n            this.widgets['link-width-min'] = 0;\r\n            minWidth = 0;\r\n        }\r\n        let variable = this.widgets['link-width-variable'];\r\n\r\n        this.visLinks = this.getVLinks();\r\n        let n = this.visLinks.length;\r\n        this.linkMax = -Infinity;\r\n        this.linkMin = Infinity;\r\n        for (let i = 0; i < n; i++) {\r\n          let l = this.visLinks[i][variable];\r\n          if (!this.isNumber(l)) return;\r\n          if (l > this.linkMax) this.linkMax = l;\r\n          if (l < this.linkMin) this.linkMin = l;\r\n        }\r\n        this.linkScale = d3.scaleLinear()\r\n            .domain([this.linkMin, this.linkMax])\r\n            .range([minWidth, maxWidth]);\r\n        \r\n    }\r\n\r\n    /**\r\n     * Updates link-width-reciprocal widget and updates link width\r\n     * This widget controls whether to set width smallest -> largest or largest -> smallest\r\n     */\r\n    onLinkWidthReciprocalNonReciprocalChange(e) {\r\n        if (e == \"Reciprocal\") {\r\n            this.widgets['link-width-reciprocal'] = true;\r\n            this.visuals.twoD.scaleLinkWidth();\r\n        }\r\n        else {\r\n            this.widgets['link-width-reciprocal'] = false;\r\n            this.visuals.twoD.scaleLinkWidth();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates link-width widget and link width\r\n     */\r\n    onLinkWidthChange(e) {\r\n        this.widgets['link-width'] = e;\r\n        this.visuals.twoD.scaleLinkWidth();\r\n        this._rerender();\r\n    }\r\n\r\n    /**\r\n     * Updates link-width-max widget and link width\r\n     */\r\n    onLinkWidthMaxChange(e) {\r\n        this.widgets['link-width-max'] = e;\r\n        this.updateMinMaxLink(); \r\n        this._rerender();\r\n    }\r\n\r\n    /**\r\n     * Updates link-width-min widget and link width\r\n     */\r\n    onLinkWidthMinChange(e) {\r\n        this.widgets['link-width-min'] = e;\r\n        this.updateMinMaxLink(); \r\n        this._rerender();\r\n    }\r\n\r\n    /**\r\n     * Updates link-length widget and link force distance\r\n     */\r\n    onLinkLengthChange(e) {\r\n        // this.visuals.twoD.force.force('link').distance(e);\r\n        // this.visuals.twoD.force.alpha(0.3).alphaTarget(0).restart();\r\n        this.widgets['link-length'] = e;\r\n    }\r\n\r\n    /**\r\n     * Updates link-directed widget. When directed, links have an arrow added; when undirected, links have no arrow\r\n     */\r\n    onLinkDirectedUndirectedChange(e) {\r\n        if (e == \"Show\") {\r\n            $('#link-bidirectional-row').slideDown();\r\n            $('#link-bidirectional-row').css('display', 'flex');\r\n            this.widgets['link-directed'] = true;\r\n        }\r\n        else {\r\n            this.widgets['link-directed'] = false;\r\n            \r\n            $(\"#link-bidirectional-row\").slideUp();\r\n        }\r\n\r\n        this._rerender();\r\n    }\r\n\r\n    onLinkBidirectionalChange(e) {\r\n        if (e == \"Show\") {\r\n            this.widgets['link-bidirectional'] = true;\r\n        }\r\n        else {\r\n \r\n            this.widgets['link-bidirectional'] = false;\r\n        }\r\n        this._rerender();\r\n    }\r\n\r\n    /**\r\n     * Updates node-highlight widget. When true and a node is mouseoved current node, all it of links, and neighbor nodes will be highlighted\r\n     */\r\n    onDontHighlightNeighborsHighlightNeighborsChange(e) {\r\n        if (e == \"Normal\") {\r\n            this.widgets['node-highlight'] = false;\r\n        }\r\n        else {\r\n            this.widgets['node-highlight'] = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds or removes vertical and horizontal gridlines from svg image\r\n     * @param show wheither to show or hide gridlines\r\n     */\r\n    drawGridlines(show: boolean): void {\r\n        const container = document.getElementById('viz-force');\r\n    \r\n        // Ensure the container exists\r\n        if (!container) return;\r\n    \r\n        // Reset width and height in case they have changed\r\n        this.visuals.twoD.halfWidth = container.parentElement.offsetWidth / 2;\r\n        this.visuals.twoD.halfHeight = container.parentElement.parentElement.parentElement.offsetHeight / 2;\r\n    \r\n        // Create or select horizontal gridlines group\r\n        let horizontalGridlinesGroup = container.querySelector('g.horizontal-gridlines') as SVGGElement;\r\n        if (!horizontalGridlinesGroup) {\r\n            horizontalGridlinesGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n            horizontalGridlinesGroup.classList.add('horizontal-gridlines');\r\n            container.querySelector('svg').insertBefore(horizontalGridlinesGroup, container.querySelector('svg').firstChild);\r\n        }\r\n    \r\n        // Create or select vertical gridlines group\r\n        let verticalGridlinesGroup = container.querySelector('g.vertical-gridlines') as SVGGElement;\r\n        if (!verticalGridlinesGroup) {\r\n            verticalGridlinesGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n            verticalGridlinesGroup.classList.add('vertical-gridlines');\r\n            container.querySelector('svg').insertBefore(verticalGridlinesGroup, container.querySelector('svg').firstChild);\r\n        }\r\n    \r\n        // Clear existing lines\r\n        horizontalGridlinesGroup.innerHTML = '';\r\n        verticalGridlinesGroup.innerHTML = '';\r\n    \r\n        if (show) {\r\n            const range = Math.ceil(Math.max(this.visuals.twoD.halfWidth, this.visuals.twoD.halfHeight) / 50);\r\n            const ords = Array.from({ length: range }, (_, i) => i);\r\n    \r\n            // Horizontal lines\r\n            ords.forEach(d => {\r\n                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n                line.setAttribute('x1', '0');\r\n                line.setAttribute('x2', (this.visuals.twoD.halfWidth * 2).toString());\r\n                line.setAttribute('y1', (d * 100).toString());\r\n                line.setAttribute('y2', (d * 100).toString());\r\n                line.setAttribute('stroke', 'lightgray');\r\n                horizontalGridlinesGroup.appendChild(line);\r\n            });\r\n    \r\n            // Vertical lines\r\n            ords.forEach(d => {\r\n                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n                line.setAttribute('x1', (d * 100).toString());\r\n                line.setAttribute('x2', (d * 100).toString());\r\n                line.setAttribute('y1', '0');\r\n                line.setAttribute('y2', (this.visuals.twoD.halfHeight * 2).toString());\r\n                line.setAttribute('stroke', 'lightgray');\r\n                verticalGridlinesGroup.appendChild(line);\r\n            });\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Take input from 2D Networks settings dialog box from template and update the widget and show/hides gridlines\r\n     * @param e string either 'Show' or 'Hide'\r\n     */\r\n    onNetworkGridlinesShowHideChange(e: string): void {\r\n        if (e === \"Show\") {\r\n            this.widgets['network-gridlines-show'] = true;\r\n            this.drawGridlines(true);\r\n        } else {\r\n            this.widgets['network-gridlines-show'] = false;\r\n            this.drawGridlines(false);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Changes value of charge force (d3.many-body-force). Sets charge to -e meaning each node will repell every other node\r\n     * @param {number} e value from 0-400\r\n     */\r\n    onNodeChargeChange(e: number) {\r\n\r\n        // this.visuals.twoD.force.force('charge').strength(-e);\r\n        // this.visuals.twoD.force.alpha(0.3).alphaTarget(0).restart();\r\n        this.widgets['node-charge'] = e;\r\n    }\r\n\r\n    /**\r\n     * Changes value of gravity force (d3-force-attract) which pulls nodes to the center. Sets strength e\r\n     * @param {number} e value from 0.025-1\r\n     */\r\n    onNetworkGravityChange(e: number) {\r\n\r\n        // this.visuals.twoD.force.force('gravity').strength(e);\r\n        // this.visuals.twoD.force.alpha(0.3).alphaTarget(0).restart();\r\n        this.widgets['network-gravity'] = e;\r\n    }\r\n\r\n    /**\r\n     * Changes value of velocityDecay (d3 velocityDecay). Sets too low causing network to oscillate\r\n     * @param {number} e value from 0-1 (default 0.4)\r\n     */\r\n    onNetworkFrictionChange(e) {\r\n\r\n        // this.visuals.twoD.force.velocityDecay(e);\r\n        // this.visuals.twoD.force.alpha(0.3).alphaTarget(0).restart();\r\n        this.widgets['network-friction'] = e;\r\n    }\r\n\r\n    /**\r\n     * Changes value of network-link-strength (d3.forceLink) which pulls the pair of nodes together\r\n     * @param {number} e value from 0-1 (default 0.4)\r\n     */\r\n    onNetworkLinkStrengthVariableChange(e) {\r\n\r\n        //console.log('st change: ', e);\r\n        let v = parseFloat(e);\r\n        // this.visuals.twoD.force.force('link').strength(v);\r\n        // this.visuals.twoD.force.alpha(0.3).alphaTarget(0).restart();\r\n        this.widgets['network-link-strength'] = e;\r\n    }\r\n\r\n    /**\r\n     * If exportFileType = 'svg' don't show advanced setting; otherwise do show them\r\n     * @param e string of filetype\r\n     */\r\n    onNetworkExportFiletypeChange(e) {\r\n        if (e == \"svg\") {\r\n            this.visuals.twoD.ShowAdvancedExport = false;\r\n        }\r\n        else\r\n            this.visuals.twoD.ShowAdvancedExport = true;\r\n    }\r\n\r\n    /**\r\n     * Updates the color of nodes and transparency based on node-color-variable, the value from nodeColorMap and nodeAlphaMap, and whether the node is selected\r\n     */\r\n    updateNodeColors() {\r\n\r\n        //debugger;\r\n\r\n        let variable = this.widgets['node-color-variable'];\r\n        let color = this.widgets['node-color']\r\n        // let nodes = this.visuals.twoD.svg.select('g.nodes').selectAll('g').select('path').data(this.visuals.twoD.commonService.session.network.nodes).classed('selected', d => d.selected);\r\n        // let col = this.widgets['node-color'];\r\n\r\n        let stroke = this.widgets['selected-node-stroke-color'];\r\n        let stroke_width = parseInt(this.widgets['selected-node-stroke-width']);\r\n\r\n\r\n        if (variable == 'None') {\r\n\r\n            this.data.nodes.forEach( x => {\r\n\r\n                x.color = color;\r\n\r\n            })\r\n\r\n\r\n            // nodes\r\n                // .attr('fill', col).attr('opacity', 1);\r\n\r\n            // this.context.microbeTrace.clearTable(\"#node-color-table-bottom\");\r\n\r\n        } else {\r\n\r\n            this.data.nodes.forEach( (x, index) => {\r\n\r\n                x.color = this.visuals.twoD.commonService.temp.style.nodeColorMap(this.visuals.twoD.commonService.session.data.nodes[index][variable]);\r\n                \r\n            })\r\n\r\n\r\n            // nodes\r\n            //     .attr('fill', d => this.visuals.twoD.commonService.temp.style.nodeColorMap(d[variable]))\r\n            //     .attr('opacity', d => this.visuals.twoD.commonService.temp.style.nodeAlphaMap(d[variable]));\r\n\r\n            //  this.context.microbeTrace.generateNodeColorTable(\"#node-color-table-bottom\", false);\r\n        }\r\n\r\n\r\n        // Array.from(nodes._groups).forEach((x: any)=>{\r\n        //     x.forEach(y=>{\r\n        //         if(!this.visuals.twoD.commonService.session.data.nodes.find(z => y.__data__.index === z.index)){\r\n        //             y.style['opacity'] = 0;\r\n        //         }\r\n        //     })\r\n        // })\r\n\r\n        // this.data.nodes.forEach( (x, index) => {\r\n\r\n        //     x.color = this.visuals.twoD.commonService.temp.style.nodeColorMap(this.visuals.twoD.commonService.session.data.nodes[index][variable]);\r\n            \r\n        // })\r\n\r\n        this._rerender();\r\n        this.cdref.markForCheck();\r\n        this.cdref.detectChanges();\r\n\r\n        // (data: Datum, event: MouseEvent, i: number, els: (SVGElement | HTMLElement)[])\r\n\r\n        // /*/\r\n        //  * Add a color that shows the node is selected.\r\n        // /*/\r\n\r\n        // if (_selected.length > 0) {\r\n\r\n        //     Array.from(nodes._groups).filter(x => {\r\n\r\n        //         (<any>x).filter(y => {\r\n\r\n        //             /*/\r\n        //              * Turn on the node(s) selected.\r\n        //             /*/\r\n        //             if (y['__data__'].selected == true) {\r\n\r\n        //                 y.style['stroke'] = stroke;\r\n        //                 y.style['strokeWidth'] = stroke_width;\r\n\r\n        //             }\r\n        //             else {\r\n        //                 /*/\r\n        //                  * Otherwise, turn on the node(s) selected.\r\n        //                 /*/\r\n\r\n        //                 y.style['stroke'] = \"#000000\";\r\n        //                 y.style['strokeWidth'] = this.widgets['node-border-width'];\r\n        //             }\r\n        //         });\r\n        //     });\r\n        // }\r\n        // else {\r\n\r\n\r\n        //     Array.from(nodes._groups).filter(x => {\r\n\r\n        //         (<any>x).filter(y => {\r\n\r\n        //             /*/\r\n        //                 * Otherwise, turn on the node(s) selected.\r\n        //             /*/\r\n\r\n        //             y.style['stroke'] = \"#000000\";\r\n        //             y.style['strokeWidth'] = this.widgets['node-border-width'];\r\n\r\n        //         });\r\n        //     });\r\n        // }\r\n\r\n\r\n\r\n    };\r\n\r\n\r\n    /**\r\n     * Updates the color of links and transparency based on link-color-variable and value from linkColorMap and linkAlphaMap\r\n     */\r\n    updateLinkColor() {\r\n\r\n        // let variable = this.widgets['link-color-variable'];\r\n        // // console.log('updating variable: ',variable );\r\n        // let links = this.visuals.twoD.svg.select('g.links').selectAll('line');\r\n        // if (variable == 'None') {\r\n        //     let color = this.widgets['link-color'],\r\n        //         opacity = 1 - this.widgets['link-opacity'];\r\n        //     links\r\n        //         .attr('stroke', color)\r\n        //         .attr('opacity', opacity);\r\n\r\n        //     // this.context.microbeTrace.clearTable(\"#link-color-table-bottom\");\r\n        // } else {\r\n        //     // this.context.microbeTrace.generateNodeLinkTable(\"#link-color-table-bottom\", false);\r\n        //     if (variable == 'source' || variable == 'target') {\r\n        //         links\r\n        //         .data(this.getVLinks())\r\n        //         .attr('stroke', l => this.visuals.twoD.commonService.temp.style.linkColorMap(l[variable]['_id']))\r\n        //         .attr('opacity', l => this.visuals.twoD.commonService.temp.style.linkAlphaMap(l[variable]['_id']))\r\n        //         .attr('stroke-dasharray', l => {\r\n        //             //This quirky little algorithm creates the dasharray code necessary to make dash-y links.\r\n        //             let length = 15;\r\n        //             let out = new Array(l.origins * 2);\r\n        //             let ofs = new Array(l.origins).fill(1);\r\n        //             let ons = new Array(l.origins).fill(0);\r\n        //             ons[l.oNum] = 1;\r\n        //             ofs[l.oNum] = 0;\r\n        //             for (let i = 0; i < l.origins; i++) {\r\n        //                 out[2 * i] = ons[i] * length;\r\n        //                 out[2 * i + 1] = ofs[i] * length;\r\n        //             }\r\n        //             return out.join(', ');\r\n        //         });\r\n        //     } else {\r\n        //         links\r\n        //             .data(this.getVLinks())\r\n        //             .attr('stroke', l => this.visuals.twoD.commonService.temp.style.linkColorMap(l[variable]))\r\n        //             .attr('opacity', l => this.visuals.twoD.commonService.temp.style.linkAlphaMap(l[variable]))\r\n        //             .attr('stroke-dasharray', l => {\r\n        //                 //This quirky little algorithm creates the dasharray code necessary to make dash-y links.\r\n        //                 let length = 15;\r\n        //                 let out = new Array(l.origins * 2);\r\n        //                 let ofs = new Array(l.origins).fill(1);\r\n        //                 let ons = new Array(l.origins).fill(0);\r\n        //                 ons[l.oNum] = 1;\r\n        //                 ofs[l.oNum] = 0;\r\n        //                 for (let i = 0; i < l.origins; i++) {\r\n        //                     out[2 * i] = ons[i] * length;\r\n        //                     out[2 * i + 1] = ofs[i] * length;\r\n        //                 }\r\n        //                 return out.join(', ');\r\n        //             });\r\n        //     }\r\n        // }\r\n        \r\n        this._rerender();\r\n    };\r\n\r\n    /**\r\n     * Updates the width of the links using link-width, link-width-variable, link-width-max, link-width-min, and link-width-reciprocal\r\n     */\r\n    scaleLinkWidth() {\r\n        // let scalar = this.widgets['link-width'];\r\n        // let variable = this.widgets['link-width-variable'];\r\n        // let vlinks = this.visuals.twoD.getVLinks();\r\n        // if (variable == 'None') return  scalar;\r\n        // let n = vlinks.length;\r\n        // let maxWidth = this.widgets['link-width-max'];\r\n        // let minWidth = this.widgets['link-width-min'];\r\n\r\n        // let max = -Infinity;\r\n        // let min = Infinity;\r\n        // for (let i = 0; i < n; i++) {\r\n        //     let l = vlinks[i][variable];\r\n        //     if (!this.visuals.twoD.isNumber(l)) return;\r\n        //     if (l > max) max = l;\r\n        //     if (l < min) min = l;\r\n        // }\r\n        // let mid = (max - min) / 2 + min;\r\n        // let scale = d3.scaleLinear()\r\n        //     .domain(this.widgets['link-width-reciprocal'] ? [max, min] : [min, max])\r\n        //     .range([minWidth, maxWidth]);\r\n        // links.attr('stroke-width', d => {\r\n        //     let v = d[variable];\r\n        //     if (!this.visuals.twoD.isNumber(v)) v = mid;\r\n        //     return scale(v);\r\n        // });\r\n    };\r\n\r\n    /**\r\n     * centers the view\r\n     * @param thing undefined\r\n     * @param bounds undefined\r\n     * @returns \r\n     */\r\n    fit(thing, bounds) {\r\n\r\n        // if (!bounds) bounds = this.visuals.twoD.svg.node().getBBox();\r\n        // if (bounds.width == 0 || bounds.height == 0) return; // nothing to fit\r\n        // let parent = this.visuals.twoD.svg.node().parentElement.parentElement,\r\n        //     midX = bounds.x + bounds.width / 2,\r\n        //     midY = bounds.y + bounds.height / 2;\r\n        // let scale = 0.8 / Math.max(bounds.width / parent.clientWidth, bounds.height / parent.clientHeight);\r\n        // const w = parent.clientWidth / 2 - midX*scale ;\r\n        // const h = parent.clientHeight / 2 - midY*scale;\r\n        // PRE D3\r\n        // d3.select('svg#network')\r\n        //     .transition()\r\n        //     .duration(750)\r\n        //     .call(this.visuals.twoD.zoom.transform, d3.zoomIdentity\r\n        //         .translate(w, h)\r\n        //         //.translate(parent.parentNode.clientWidth / 2 - midX, parent.parentNode.clientHeight / 2 - midY)\r\n        //         .scale(scale));\r\n    };\r\n\r\n    /**\r\n     * XXXXX Function is never called; Review if necessary XXXXX\r\n     * @param nodeData \r\n     * @returns \r\n     */\r\n    isFiltered(nodeData: any): boolean{\r\n        if(nodeData){\r\n            return this.visuals.twoD.commonService.session.data.nodeFilteredValues.find(x=>x.index === nodeData.index) !== undefined;\r\n        }\r\n        return true\r\n    }\r\n\r\n    /**\r\n     * On click of settings button, show/hide settings dialog\r\n     */     \r\n    openSettings() {\r\n        (this.visuals.twoD.Node2DNetworkExportDialogSettings.isVisible) ? this.visuals.twoD.Node2DNetworkExportDialogSettings.setVisibility(false) : this.visuals.twoD.Node2DNetworkExportDialogSettings.setVisibility(true);\r\n       this.visuals.twoD.ShowStatistics = !this.visuals.twoD.Show2DSettingsPane;\r\n       this.updateLinkWidthRows(this.SelectedLinkWidthByVariable);\r\n    }\r\n\r\n    /**\r\n     * Updates ShowStatistics variables to opposite of current value\r\n     * \r\n     * XXXXX Not currently executed; reevaluate if this function is needed XXXXX\r\n     */\r\n    enableSettings() {\r\n        this.visuals.twoD.ShowStatistics = !this.visuals.twoD.ShowStatistics;\r\n        this.cdref.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * On click of export button, show export dialog\r\n     */ \r\n    openExport() {\r\n\r\n        // this.visuals.microbeTrace.GlobalSettingsDialogSettings.setStateBeforeExport();\r\n        // this.visuals.microbeTrace.GlobalSettingsLinkColorDialogSettings.setStateBeforeExport();\r\n        // this.visuals.microbeTrace.GlobalSettingsNodeColorDialogSettings.setStateBeforeExport();\r\n        // this.visuals.twoD.NodeSymbolTableWrapperDialogSettings.setStateBeforeExport();\r\n        // this.visuals.twoD.Node2DNetworkExportDialogSettings.setStateBeforeExport();\r\n        this.setCalculatedResolution()\r\n        this.isExportClosed = false;\r\n        this.visuals.twoD.Show2DExportPane = true;\r\n    }\r\n\r\n    /**\r\n     * On click of center button, show centers the view\r\n     */ \r\n    openCenter() {\r\n        (this.twoDGraph as any).component.fitView();\r\n    }\r\n\r\n    /**\r\n     * On click of Pin All Nodes button, pin/unpins all nodes\r\n     */\r\n    openPinAllNodes() {\r\n\r\n        // this.showParallel = !this.showParallel;\r\n        // let nodes = this.visuals.twoD.svg\r\n        //     .select('g.nodes')\r\n        //     .selectAll('g')\r\n        //     .data(this.visuals.twoD.commonService.session.network.nodes)\r\n        //     .select('path');\r\n        // if (this.visuals.twoD.commonService.session.network.allPinned) {\r\n        //     nodes.each(function (d) {\r\n        //         delete d.fx;\r\n        //         delete d.fy;\r\n        //         d.fixed = false;\r\n        //     });\r\n        //     this.visuals.twoD.force.alpha(0.3).alphaTarget(0).restart();\r\n        // } else {\r\n        //     nodes.each(function (d) {\r\n        //         d.fx = d.x;\r\n        //         d.fy = d.y;\r\n        //         d.fixed = true;\r\n        //     });\r\n        // }\r\n        this.visuals.twoD.commonService.session.network.allPinned = !this.visuals.twoD.commonService.session.network.allPinned;\r\n    }\r\n\r\n    /**\r\n     * XXXXX empty function; may be added later XXXXX\r\n     */\r\n    onRecallSession(){\r\n        //this.loadSettings();\r\n    }\r\n\r\n    openRefreshScreen() {\r\n        this.loadSettings();\r\n        setTimeout(this.visuals.twoD.fit, 2000);\r\n    }\r\n\r\n    /**\r\n     * XXXXX empty function; may be added later XXXXX\r\n     */\r\n    openSelectDataSetScreen() {\r\n\r\n    }\r\n\r\n    /**\r\n     * renders the network\r\n     */\r\n    updateVisualization() {\r\n        this._rerender();\r\n        if (!this.isLoading) {\r\n            // console.log('render update vis');\r\n            // this.isLoading = true;\r\n            // this.render();\r\n            // setTimeout(() => {\r\n            //     this.isLoading = false;\r\n            //   }, 1000);\r\n        }    \r\n    }\r\n\r\n    applyStyleFileSettings() {\r\n        this.widgets = (window as any).context.commonService.session.style.widgets;\r\n        this.loadSettings();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        //this.context.twoD.widgets['node-label-variable'] = 'None';\r\n    }\r\n\r\n    /**\r\n     * renders the network\r\n     */\r\n    onLoadNewData(){\r\n        console.log('render new data');\r\n        this.render();\r\n    }\r\n\r\n    /**\r\n     * renders the network; sets this.showStatistics to false\r\n     */\r\n    onFilterDataChange(){\r\n        console.log('render filter change');\r\n        // render doesn't do anything unless this.isLoading == true; so need to ensure that before call render\r\n       this._rerender();\r\n    }\r\n\r\n    /**\r\n     * Sets twoD component variable based on the value in the appropriate widget and then calls appropriate function to update the view\r\n     * \r\n     * XXXXX this function should probably be reevaluated/refacted as well because sections of code are being evaluated multiple times \r\n     * (ie. onPolygonLabelVariableChange, onPolygonLabelVariableChange, onPolygonLabelOrientationChange all call redrawPolygonLabels) XXXXX\r\n     */\r\n    loadSettings(){\r\n\r\n        //Polygons|Label Size\r\n        this.SelectedPolygonLabelSizeVariable = this.widgets['polygons-label-size'];\r\n        this.onPolygonLabelSizeChange(this.SelectedPolygonLabelSizeVariable);\r\n\r\n        //Node|Orientation\r\n        this.SelectedPolygonLabelOrientationVariable = this.widgets['polygons-label-orientation'];\r\n        this.onPolygonLabelOrientationChange(this.SelectedPolygonLabelOrientationVariable);\r\n\r\n        this.polygonsToggle(this.widgets['polygons-show']);\r\n        if(this.widgets['polygons-show']){\r\n            this.visuals.twoD.updatePolygonColors();\r\n            this.polygonColorsToggle(this.widgets['polygon-color-table-visible'])\r\n        }\r\n\r\n       //Nodes|Label\r\n        this.SelectedNodeLabelVariable = this.widgets['node-label-variable'];\r\n        this.onNodeLabelVaribleChange(this.SelectedNodeLabelVariable);\r\n\r\n        //Node|Label Size\r\n        this.SelectedNodeLabelSizeVariable = this.widgets['node-label-size'];\r\n        this.setNodeLabelSize(this.SelectedNodeLabelSizeVariable);\r\n\r\n        if (!Array.isArray(this.widgets['node-tooltip-variable'])) {\r\n            this.widgets['node-tooltip-variable'] = [this.widgets['node-tooltip-variable']];\r\n        }\r\n        this.SelectedNodeTooltipVariable = this.widgets['node-tooltip-variable'];\r\n        this.onNodeTooltipVariableChange(this.SelectedNodeTooltipVariable);\r\n\r\n        //Nodes|Shape By Table\r\n        if (this.widgets['node-symbol-variable'] != undefined && this.widgets['node-symbol-variable'] != 'None') {\r\n            this.widgets[\"node-symbol-table-visible\"] = 'Show';\r\n        }\r\n        this.SelectedNetworkTableTypeVariable = this.widgets[\"node-symbol-table-visible\"];\r\n        this.onNodeSymbolTableChange(this.SelectedNetworkTableTypeVariable);\r\n\r\n        //Nodes|Shape By\r\n        this.SelectedNodeSymbolVariable = this.widgets['node-symbol-variable'];\r\n        this.onNodeSymbolVariableChange(this.widgets['node-symbol-variable'], this.SelectedNetworkTableTypeVariable === \"Show\");\r\n        \r\n\r\n        //Nodes|Shape\r\n        this.SelectedNodeShapeVariable = this.widgets['node-symbol'];\r\n        this.onNodeSymbolChange(this.SelectedNodeShapeVariable);\r\n\r\n        //Nodes|Size By\r\n        this.SelectedNodeRadiusVariable = this.widgets['node-radius-variable'];\r\n        this.onNodeRadiusVariableChange(this.SelectedNodeRadiusVariable);\r\n\r\n        //Nodes|Size\r\n        this.SelectedNodeRadiusSizeVariable = this.widgets['node-radius'].toString();\r\n        this.onNodeRadiusChange(this.SelectedNodeRadiusSizeVariable);\r\n\r\n        this.nodeBorderWidth = this.widgets['node-border-width']\r\n\r\n        //Links|Tooltip\r\n        this.SelectedLinkTooltipVariable = this.widgets['link-tooltip-variable'];\r\n        this.onLinkTooltipVariableChange(this.SelectedLinkTooltipVariable);\r\n\r\n        //Links|Label\r\n        this.SelectedLinkLabelVariable = this.widgets['link-label-variable'];\r\n        this.onLinkLabelVariableChange(this.SelectedLinkLabelVariable);\r\n\r\n        //Links|Decimal Length\r\n        this.SelectedLinkDecimalVariable = this.widgets['link-label-decimal-length'];\r\n        this.onLinkDecimalVariableChange(this.SelectedLinkDecimalVariable);\r\n\r\n        //Links|Transparency\r\n        this.SelectedLinkTransparencyVariable = this.widgets['link-opacity'];\r\n        this.onLinkOpacityChange(this.SelectedLinkTransparencyVariable);\r\n\r\n        //Links|Width By\r\n        this.SelectedLinkWidthByVariable = this.widgets['link-width-variable'];\r\n        this.onLinkWidthVariableChange(this.SelectedLinkWidthByVariable);\r\n\r\n        //Links|Reciprical\r\n        this.SelectedLinkReciprocalTypeVariable = this.widgets['link-width-reciprocal'] ? \"Reciprocal\" : \"Non-Reciprocal\"\r\n        this.onLinkWidthReciprocalNonReciprocalChange(this.SelectedLinkReciprocalTypeVariable);\r\n\r\n        //Links|Width\r\n        this.SelectedLinkWidthVariable = this.widgets['link-width'];\r\n        this.onLinkWidthChange(this.SelectedLinkWidthVariable);\r\n\r\n         //Links|Width Max\r\n         this.SelectedLinkWidthMax = this.widgets['link-width-max'];\r\n         this.onLinkWidthMaxChange(this.SelectedLinkWidthMax);\r\n \r\n         //Links|Width Min\r\n         this.SelectedLinkWidthMin = this.widgets['link-width-min'];\r\n         this.onLinkWidthMinChange(this.SelectedLinkWidthMin);\r\n\r\n        //Links|Length\r\n        this.SelectedLinkLengthVariable = this.widgets['link-length'];\r\n        this.onLinkLengthChange(this.SelectedLinkLengthVariable);\r\n\r\n        //Links|Arrows\r\n        this.SelectedLinkArrowTypeVariable = this.widgets['link-directed'] ? \"Show\" : \"Hide\";\r\n        this.onLinkDirectedUndirectedChange(this.SelectedLinkArrowTypeVariable); \r\n\r\n\r\n        //Network|Neighbors\r\n        this.SelectedNetworkNeighborTypeVariable = this.widgets['node-highlight'] ? \"Highlighted\" : \"Normal\";\r\n        this.onDontHighlightNeighborsHighlightNeighborsChange(this.SelectedNetworkNeighborTypeVariable);\r\n\r\n        //Network|Gridlines\r\n        this.SelectedNetworkGridLineTypeVariable = this.widgets['network-gridlines-show'] ? \"Show\" : \"Hide\";\r\n        this.onNetworkGridlinesShowHideChange(this.SelectedNetworkGridLineTypeVariable);\r\n\r\n        //Network|Charge\r\n        this.SelectedNetworkChargeVariable = this.widgets['node-charge'];\r\n        this.onNodeChargeChange(this.SelectedNetworkChargeVariable);\r\n\r\n        //Network|Gravity\r\n        this.SelectedNetworkGravityVariable = this.widgets['network-gravity'];\r\n        this.onNetworkGravityChange(this.SelectedNetworkGravityVariable);\r\n\r\n        //Network|Friction\r\n        this.SelectedNetworkFrictionVariable = this.widgets['network-friction'];\r\n        this.onNetworkFrictionChange(this.SelectedNetworkFrictionVariable);\r\n\r\n        //Network|Link Strength\r\n        this.SelecetedNetworkLinkStrengthVariable = this.widgets['network-link-strength'];\r\n        this.onNetworkFrictionChange(this.SelecetedNetworkLinkStrengthVariable);\r\n\r\n        if (this.widgets['polygon-label-orientation'] !== 'top' || this.widgets['polygon-label-orientation'] !== 'bottom') {\r\n            this.widgets['polygon-label-orientation'] = 'top';\r\n        }\r\n\r\n         //Network|Polygon Orientation\r\n         this.SelectedPolygonLabelOrientationVariable = this.widgets['polygon-label-orientation'];\r\n         this.onPolygonLabelOrientationChange(this.SelectedPolygonLabelOrientationVariable);\r\n    }\r\n}\r\n\r\nexport namespace TwoDComponent {\r\n    export const componentTypeName = '2D Network';\r\n}\r\n\r\n","import { OnInit, NgModule } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { InlineWorker } from '../helperClasses/inlineWorker';\r\nimport Papa from 'papaparse';\r\nimport * as bioseq from 'bioseq';\r\n\r\n@NgModule({})\r\nexport class WorkerModule implements OnInit {\r\n\r\n  public compute_parse_csv_matrixWorker: Worker;\r\n\r\n  constructor() {\r\n\r\n    this.compute_parse_csv_matrixWorker = new Worker('assets/parse-csv-matrix.js');\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  public compute_consensusWorker = new InlineWorker(() => {\r\n\r\n    const compute_consensus = (e): any => {\r\n\r\n\r\n      var start = Date.now();\r\n      var subset = (e.data != undefined ? e.data : e);\r\n      var n = subset.length;\r\n      var output = [];\r\n      for (var i = 0; i < n; i++) {\r\n        var seq = subset[i].seq.toUpperCase();\r\n        for (var j = 0; j < seq.length; j++) {\r\n          if (!output[j]) output.push({ A: 0, C: 0, G: 0, T: 0, '-': 0 });\r\n          output[j][seq[j]]++;\r\n        }\r\n      }\r\n      var consensus: any = \"\";\r\n      var m = output.length;\r\n      var entry, maxKey, maxVal;\r\n      for (var k = 0; k < m; k++) {\r\n        entry = output[k];\r\n        maxKey = 'A';\r\n        maxVal = entry[maxKey];\r\n        Object.keys(entry).forEach(char => {\r\n          if (maxVal <= entry[char]) {\r\n            maxVal = entry[char];\r\n            maxKey = char;\r\n          }\r\n        });\r\n        consensus += maxKey;\r\n      }\r\n      console.log('Consensus Compute time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n      start = Date.now();\r\n      var encoder = new TextEncoder();\r\n      consensus = encoder.encode(consensus).buffer;\r\n\r\n      let response = {}; \r\n      response = { consensus: consensus, start: start, data: consensus };\r\n\r\n      postMessage(response, null, null);\r\n\r\n    }\r\n\r\n    onmessage = (evt) => {           \r\n      compute_consensus(evt.data);\r\n    }\r\n\r\n\r\n  });\r\n\r\n  public compute_ambiguity_countsWorker = new InlineWorker(() => {\r\n\r\n    const compute_ambiguity_counts = (e): any => {\r\n\r\n      const start = Date.now();\r\n      const subset = (e.data != undefined ? e.data : e);\r\n      const n = subset.length;\r\n      let output = new Float32Array(n);\r\n      for (let i = 0; i < n; i++) {\r\n        const sequence = subset[i][\"_seqInt\"];\r\n        const sequenceLength = sequence.length;\r\n        let count = 0;\r\n        for (let j = 0; j < sequenceLength; j++) {\r\n          count += ((sequence[j] > 3) ? 1 : 0);\r\n        }\r\n        output[i] = count / sequenceLength;\r\n      }\r\n      console.log(\"Ambiguity Count time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n\r\n      let response = {};\r\n      response = { counts: output.buffer, start: Date.now(), data: output.buffer };\r\n\r\n      postMessage(response, null, null);\r\n    }\r\n\r\n    onmessage = (evt) => {\r\n      compute_ambiguity_counts(evt.data);\r\n    }\r\n\r\n  });\r\n\r\n  public compute_linksWorker = new InlineWorker(() => {\r\n\r\n    const compute_links = (e): any => {\r\n\r\n      let snps = (s1, s2) => {\r\n\r\n        let n = Math.min(s1.length, s2.length);\r\n        let sum = 0;\r\n        for (let i = 0; i < n; i++) {\r\n          let c1 = s1[i];\r\n          let c2 = s2[i];\r\n          sum += ((c1 != c2) && (c1 != 17) && (c2 != 17) ? 1 : 0);\r\n        }\r\n        return sum;\r\n      };\r\n\r\n      let start = Date.now(),\r\n        t = 0,\r\n        output;\r\n\r\n      const subset = e.nodes,\r\n        n = subset.length,\r\n        threshold = parseFloat(e.threshold),\r\n        strategy = e.strategy.toUpperCase(),\r\n        metric = e.metric;\r\n\r\n      if (metric == 'snps') {\r\n\r\n        output = new Uint16Array((n * n - n) / 2);\r\n        for (let i = 0; i < n; i++) {\r\n          let source = subset[i];\r\n          for (let j = 0; j < i; j++) {\r\n\r\n            output[t++] = snps(source['_seqInt'], subset[j]['_seqInt'])\r\n          }\r\n        }\r\n\r\n      } else {\r\n\r\n\r\n        output = new Float32Array((n * n - n) / 2);\r\n\r\n        if (strategy != \"HIVTRACE-G\") {\r\n          for (let i = 0; i < n; i++) {\r\n            let source = subset[i]['_seqInt'];\r\n            for (let j = 0; j < i; j++) {\r\n              // @ts-ignore\r\n              output[t++] = tn93.onInts(source, subset[j]['_seqInt'], strategy);\r\n            }\r\n          }\r\n        } else {\r\n          for (let i = 0; i < n; i++) {\r\n            let source = subset[i];\r\n            let sourceInThreshold = source['_ambiguity'] < threshold;\r\n            let sourceSeq = source['_seqInt'];\r\n            for (let j = 0; j < i; j++) {\r\n              let target = subset[j];\r\n              // @ts-ignore\r\n              output[t++] = tn93.onInts(sourceSeq, target['_seqInt'],\r\n                ((sourceInThreshold && target['_ambiguity'] < threshold) ?\r\n                  \"RESOLVE\" : \"AVERAGE\"\r\n                )\r\n              );\r\n            }\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n      console.log('Links Compute time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n      start = Date.now();\r\n\r\n      let response = {};\r\n      response = { links: output.buffer, start, data: output.buffer };\r\n\r\n      postMessage(response, null, null);\r\n    }\r\n\r\n    onmessage = (evt) => {\r\n      compute_links(evt.data);\r\n    }\r\n\r\n\r\n  });\r\n\r\n  public compute_treeWorker = new InlineWorker((patristic, tn93) => {\r\n\r\n    const compute_tree = (e): any => {\r\n      // self.importScript(\"../../node_modules/patristic/dist/patristic.js\");\r\n\r\n      let start = Date.now();\r\n\r\n      const matrix = e.matrix;\r\n\r\n      console.log('parsingggg');\r\n      let output;\r\n      // related to zenhub#810, one issue related to this dataset not loading was the parseMatrix leading to a call stack exceeded error \r\n      try {\r\n        // @ts-ignore\r\n        const RNJ = parseMatrix(matrix, e.labels);\r\n        console.log('Tree Compute time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n        start = Date.now();\r\n        const encoder = new TextEncoder();\r\n        output = encoder.encode(JSON.stringify(RNJ.toObject())).buffer;\r\n      } catch {\r\n        console.log('unable to compute tree');\r\n        const encoder = new TextEncoder();\r\n        output = encoder.encode(JSON.stringify({})).buffer;\r\n      }\r\n\r\n\r\n      let response = {};\r\n      response = { tree: output, start: start, data: output };\r\n\r\n      postMessage(response, null, null);\r\n    }\r\n\r\n    onmessage = (evt) => {\r\n      compute_tree(evt.data);\r\n    }\r\n\r\n  });\r\n\r\n  public compute_directionalityWorker = new InlineWorker(() => {\r\n\r\n    const compute_directionality = (e): any => {\r\n\r\n      const start = Date.now();\r\n      const links = e.links;\r\n      const n = links.length;\r\n      // @ts-ignore\r\n      const tree = parseJSON(e.tree);\r\n      let flips = new Uint8Array(n);\r\n      for (let i = 0; i < n; i++) {\r\n        const link = links[i];\r\n        const source = tree.getDescendant(link.source);\r\n        const target = tree.getDescendant(link.target);\r\n        // @ts-ignore\r\n        if (source instanceof Branch && target instanceof Branch) {\r\n          if (target.sources(source)) {\r\n            flips[i] = 1;\r\n          }\r\n        }\r\n      }\r\n      console.log('Directionality Inference time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n\r\n      let response = {};\r\n      response = { output: flips.buffer, start: Date.now(), data: flips.buffer };\r\n\r\n      postMessage(response, null, null);\r\n    }\r\n\r\n    onmessage = (evt) => {\r\n      compute_directionality(evt.data);\r\n    }\r\n\r\n  });\r\n\r\n\r\npublic compute_mstWorker = new InlineWorker(() => {\r\n\r\n  const compute_mst = (e): any => {\r\n\r\n    const start = Date.now();\r\n    const links = e.links;\r\n    const dm = e.matrix;\r\n    const labels = Object.keys(dm);\r\n    const epsilon = Math.pow(10, e.epsilon);\r\n    const metric = e.metric;\r\n    const n = labels.length\r\n    const m = links.length;\r\n    let output = new Uint8Array(m);\r\n    let matrix = [];\r\n    let map : string[] = [];\r\n    for (let i = 0; i < n; i++) {\r\n      let minDist = Number.MAX_VALUE;\r\n      let targets = [];\r\n      const nodeid = labels[i];\r\n      const row = dm[nodeid];\r\n      for (let j = 0; j < n; j++) {\r\n        let cell = row[labels[j]];\r\n        if(!cell) {\r\n          targets.push(0);\r\n          continue;\r\n        };\r\n        let value = cell[metric];\r\n        targets.push(value);\r\n      }\r\n      matrix.push(targets);\r\n      map.push(nodeid);\r\n    }\r\n\r\n    const minKey = (key, mstSet, V) => {\r\n      let min = Number.MAX_VALUE;\r\n      let min_index = -1;\r\n      for (let v = 0; v < V; v++)\r\n        if (!mstSet[v] && key[v] < min) {\r\n          min = key[v];\r\n          min_index = v;\r\n        }\r\n      return min_index;\r\n    }\r\n\r\n    const primMST = (graph) => {\r\n      const V = graph.length;\r\n      let parent = [];\r\n      let key = [];\r\n      let mstSet = [];\r\n      for (let i = 0; i < V; i++) {\r\n        key[i] = Number.MAX_VALUE;\r\n        mstSet[i] = false;\r\n      }\r\n      key[0] = 0.0; \r\n      parent[0] = -1;\r\n      for (let count = 0; count < V-1; count++) {\r\n        let u = minKey(key, mstSet, V);\r\n        if (u < 0) continue;\r\n        mstSet[u] = true;\r\n\r\n        if (graph[u].reduce((a, b) => a + b, 0) === 0 && u != 0) continue;\r\n\r\n        for (let v = 0; v < V; v++) {\r\n          if (graph[u][v] >= 0 && !mstSet[v] && graph[u][v] <  key[v]) {\r\n            parent[v]  = u;\r\n            key[v] = graph[u][v];\r\n          }\r\n        }\r\n      }\r\n      return parent;\r\n    }\r\n\r\n    const nearest_neighbour_graph = (graph, mst_parents, epsilon) => {\r\n      const V = graph.length;\r\n      let mst = [];\r\n      for (let i=0; i<V; ++i) {\r\n        mst.push([]);\r\n      }\r\n      for (let i=1; i<V; ++i) {\r\n        mst[i].push(mst_parents[i]);\r\n        mst[mst_parents[i]].push(i);\r\n      }\r\n      let nng = [];\r\n      let longest_edge = [];\r\n      for (let i=0; i<V; ++i) {\r\n        nng.push([]);\r\n        longest_edge.push([]);\r\n        for (let j=0; j<V; ++j) {\r\n          longest_edge[i][j] = 0;\r\n        }\r\n      }\r\n      for (let i=0; i<V; ++i) {\r\n        bfs_update_matrix(mst, graph, i, longest_edge);\r\n      }\r\n      for (let i=0; i<V; ++i) {\r\n        for (let j=0; j<V; ++j) {\r\n          if ((graph[i][j] > 0 ) && (graph[i][j] <= (longest_edge[i][j] * (1.0 + epsilon)))) {\r\n            nng[i].push(j);\r\n            nng[j].push(i);\r\n          } \r\n        }\r\n      }\r\n      return nng;\r\n    }\r\n\r\n    const bfs_update_matrix = (mst, weights, root, longest_edge) => {\r\n      let visited = [];\r\n      let queue = [];\r\n      queue.push(root);\r\n      while (queue.length) {\r\n        let v = queue.shift();\r\n        visited[v] = true;\r\n        mst[v].forEach((u, index) => {\r\n          if(visited[u]) return;\r\n          queue.push(u);\r\n          const value = Math.max(weights[v][u], Math.max(longest_edge[root][u], longest_edge[root][v]));\r\n          longest_edge[root][u] = value;\r\n          longest_edge[u][root] = value;\r\n        })\r\n      }\r\n    }\r\n\r\n    const mst = primMST(matrix);\r\n    const nng = nearest_neighbour_graph(matrix, mst, epsilon);\r\n\r\n\r\n    for (let i = 0; i < n; i++) {\r\n      const source = map[i];\r\n      nng[i].push(mst[i]);\r\n      Array.from(new Set(nng[i])).forEach((u, index) => {\r\n        const target = map[parseInt(u as string)];\r\n        for(let k = 0; k < m; k++){\r\n          let l = links[k];\r\n          if((l.source == source && l.target == target) || (l.source == target && l.target == source)) {\r\n            output[k] = 1;\r\n          }\r\n        }\r\n      })\r\n    }\r\n\r\n    console.log('MST Compute time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n\r\n    let response = {};\r\n    response = { links: output.buffer, start: Date.now(), data: output.buffer };\r\n\r\n    postMessage(response, null, null);\r\n  }\r\n\r\n  onmessage = (evt) => {\r\n    compute_mst(evt.data);\r\n  }\r\n\r\n});\r\n\r\npublic compute_nnWorker = new InlineWorker(() => {\r\n\r\n  const compute_nn = (e): any => {\r\n\r\n    const includes = (container: any, value: any) => {\r\n\r\n      var returnValue = false;\r\n      var pos = container.indexOf(value);\r\n      if (pos >= 0) {\r\n        returnValue = true;\r\n      }\r\n\r\n      return returnValue;\r\n    };\r\n\r\n\r\n\r\n    const start = Date.now();\r\n    const links = e.links,\r\n      dm = e.matrix,\r\n      labels = Object.keys(dm),\r\n      epsilon = Math.pow(10, e.epsilon),\r\n      metric = e.metric;\r\n    const n = labels.length, m = links.length;\r\n    let output = new Uint8Array(m);\r\n    for (let i = 0; i < n; i++) {\r\n      let minDist = Number.MAX_VALUE;\r\n      let targets = [];\r\n      const nodeid = labels[i];\r\n      const row = dm[nodeid];\r\n      for (let j = 0; j < i; j++) {\r\n        let cell = row[labels[j]];\r\n        if (!cell) continue;\r\n        let value = cell[metric];\r\n        if (typeof value != 'number' || isNaN(value)) continue;\r\n        if (value < minDist) minDist = value;\r\n      }\r\n      for (let h = 0; h < i; h++) {\r\n        let node = labels[h];\r\n        let cell = row[node];\r\n        if (!cell) continue;\r\n        let value = cell[metric];\r\n        if (typeof value != 'number' || isNaN(value)) continue;\r\n        if (Math.abs(value - minDist) < epsilon) {\r\n          targets.push(node);\r\n        }\r\n      }\r\n      for (let k = 0; k < m; k++) {\r\n        let l = links[k];\r\n\r\n        if ((l.source == nodeid && includes(targets, l.target)) ||\r\n          (l.target == nodeid && includes(targets, l.source))) {\r\n          output[k] = 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    console.log('NN Compute time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n\r\n    let response = {};\r\n    response = { links: output.buffer, start: Date.now(), data: output.buffer };\r\n\r\n    postMessage(response, null, null);\r\n  }\r\n\r\n  onmessage = (evt) => {\r\n    compute_nn(evt.data);\r\n  }\r\n\r\n});\r\n\r\npublic compute_triangulationWorker = new InlineWorker(() => {\r\n\r\n  const compute_triangulation = (e): any => {\r\n\r\n    let start = Date.now();\r\n    let m = e.matrix;\r\n    let n = m.length;\r\n    for (let i = 0; i < n; i++) {\r\n      for (let j = 0; j < i; j++) {\r\n        let missingCell = m[i][j];\r\n        if (typeof missingCell == 'number') continue;\r\n        let minRange = Infinity, min = Infinity;\r\n        for (let k = 0; k < i; k++) {\r\n          let companionA = m[i][k];\r\n          if (typeof companionA != 'number') continue;\r\n          for (let l = j + 1; l < n; l++) {\r\n            let companionB = m[l][j];\r\n            if (typeof companionB != 'number') continue;\r\n            let diff = Math.abs(companionA - companionB);\r\n            if (minRange > diff) {\r\n              minRange = diff;\r\n              min = Math.min(companionA, companionB);\r\n            }\r\n          }\r\n        }\r\n        if (minRange < Infinity) {\r\n          let newVal = min + minRange / 2;\r\n          m[i][j] = newVal;\r\n          m[j][i] = newVal;\r\n        }\r\n      }\r\n    }\r\n    console.log('Triangulation Compute time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n    start = Date.now();\r\n    let encoder = new TextEncoder();\r\n    let output = encoder.encode(JSON.stringify(m)).buffer;\r\n\r\n    let response = {}\r\n    response = { matrix: output, start: start, data: output };\r\n\r\n    postMessage(response, null, null);\r\n  }\r\n\r\n  onmessage = (evt) => {\r\n    compute_triangulation(evt.data);\r\n  }\r\n\r\n});\r\n\r\npublic compute_parse_fastaWorker = new InlineWorker(() => {\r\n\r\n  const compute_parse_fasta = (e): any => {\r\n\r\n    var start = Date.now();\r\n    var text = e.data;\r\n    if (!text || text.length == 0) return [];\r\n    var seqs: any = [], currentSeq: any = {};\r\n    var lines = text.split(/[\\r\\n]+/g);\r\n    var n = lines.length;\r\n    var isblank = /^\\s*$/;\r\n    for (var i = 0; i < n; i++) {\r\n      var line = lines[i];\r\n      if (isblank.test(line) || line[0] == ';') continue;\r\n      if (line[0] == '>') {\r\n        if (i > 0) seqs.push(currentSeq);\r\n        currentSeq = {\r\n          id: line.slice(1),\r\n          seq: ''\r\n        };\r\n      } else {\r\n        currentSeq.seq += line.toUpperCase();\r\n      }\r\n    }\r\n    seqs.push(currentSeq);\r\n    console.log('FASTA Parse time: ', (Date.now() - start).toLocaleString(), 'ms');\r\n    start = Date.now();\r\n    var encoder = new TextEncoder();\r\n    var output = encoder.encode(JSON.stringify(seqs)).buffer;\r\n\r\n\r\n    let response = {};\r\n    response = { nodes: output, start: start, data: output };\r\n\r\n    postMessage(response, null, null);\r\n  }\r\n\r\n  onmessage = (evt) => {\r\n    compute_parse_fasta(evt);\r\n  }\r\n\r\n});\r\n\r\n// public compute_parse_csv_matrixWorker = new Worker('parse-csv-matrix.worker.js');\r\n\r\npublic compute_align_swWorker = new InlineWorker(() => {\r\n\r\n  const compute_align_sw = (e): any => {\r\n\r\n    let start = Date.now();\r\n    let subset = e.nodes;\r\n    let reference = e.reference;\r\n    let n = subset.length;\r\n    for (let i = 0; i < n; i++) {\r\n      let node = subset[i];\r\n      let rst = bioseq.align(\r\n        reference,\r\n        node.seq,\r\n        false,\r\n        e.match,\r\n        e.gap\r\n      );\r\n      let fmt = bioseq.cigar2gaps(\r\n        reference,\r\n        node.seq,\r\n        rst.position,\r\n        rst.CIGAR,\r\n        true\r\n      );\r\n      node._score = rst.score;\r\n      node._padding = rst.position;\r\n      node._cigar = rst.CIGAR;\r\n      node._seq = fmt[1];\r\n    }\r\n    console.log(\"Alignment time: \", (Date.now() - start).toLocaleString(), \"ms\");\r\n    start = Date.now();\r\n    let encoder = new TextEncoder();\r\n    let output = encoder.encode(JSON.stringify(subset)).buffer;\r\n\r\n    let response = {};\r\n    response = { data: output, start: start };\r\n\r\n    postMessage(response, null, null);\r\n\r\n  }\r\n\r\n  onmessage = (evt) => {\r\n    compute_align_sw(evt.data);\r\n  }\r\n\r\n});\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MenuAsideDirective } from './directives/menu-aside.directive';\r\nimport { MenuAsideOffcanvasDirective } from './directives/menu-aside-offcanvas.directive';\r\nimport { MenuHorizontalOffcanvasDirective } from './directives/menu-horizontal-offcanvas.directive';\r\nimport { MenuHorizontalDirective } from './directives/menu-horizontal.directive';\r\n\r\nimport { MenuAsideToggleDirective } from './directives/menu-aside-toggle.directive';\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    declarations: [\r\n        // directives\r\n        MenuAsideDirective,\r\n        MenuAsideOffcanvasDirective,\r\n        MenuHorizontalOffcanvasDirective,\r\n        MenuHorizontalDirective,\r\n        MenuAsideToggleDirective\r\n    ],\r\n    exports: [\r\n        // directives\r\n        MenuAsideDirective,\r\n        MenuAsideOffcanvasDirective,\r\n        MenuHorizontalOffcanvasDirective,\r\n        MenuHorizontalDirective,\r\n        MenuAsideToggleDirective\r\n    ],\r\n    providers: []\r\n})\r\nexport class CoreModule { }\r\n","import { Directive, AfterViewInit, ElementRef } from '@angular/core';\r\nimport { filter } from 'rxjs/operators';\r\nimport { NavigationEnd, Router } from '@angular/router';\r\n\r\n@Directive({\r\n    selector: '[mMenuAsideOffcanvas]'\r\n})\r\nexport class MenuAsideOffcanvasDirective implements AfterViewInit {\r\n    menuOffcanvas: any;\r\n\r\n    constructor(\r\n        private el: ElementRef,\r\n        private router: Router\r\n    ) {\r\n\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        const offcanvasClass = mUtil.hasClass(this.el.nativeElement, 'm-aside-left--offcanvas-default') ? 'm-aside-left--offcanvas-default' : 'm-aside-left';\r\n\r\n        this.menuOffcanvas = new mOffcanvas(this.el.nativeElement, {\r\n            baseClass: offcanvasClass,\r\n            overlay: true,\r\n            closeBy: 'm_aside_left_close_btn',\r\n            toggleBy: [{\r\n                target: 'm_aside_left_offcanvas_toggle',\r\n                state: 'm-brand__toggler--active'\r\n            },\r\n            {\r\n                target: 'm_aside_left_offcanvas_mobile_toggle',\r\n                state: 'm-brand__toggler--active'\r\n            }]\r\n        });\r\n\r\n        this.router.events\r\n            .pipe(filter(event => event instanceof NavigationEnd))\r\n            .subscribe(event => {\r\n                if (mUtil.isMobileDevice()) {\r\n                    this.menuOffcanvas.hide();\r\n                }\r\n            });\r\n    }\r\n}\r\n","import { Directive, ElementRef, AfterViewInit } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[mMenuAsideToggle]'\r\n})\r\nexport class MenuAsideToggleDirective implements AfterViewInit {\r\n    toggle: any;\r\n    constructor(private el: ElementRef) { }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.toggle = new mToggle(this.el.nativeElement, {\r\n            target: 'body',\r\n            targetState: 'm-brand--minimize m-aside-left--minimize',\r\n            togglerState: 'm-brand__toggler--active'\r\n        });\r\n    }\r\n}\r\n","import { Directive, ElementRef } from '@angular/core';\r\nimport { LayoutConfigService } from '../services/layout-config.service';\r\nimport * as objectPath from 'object-path';\r\nimport { LayoutRefService } from '../services/layout/layout-ref.service';\r\nimport { mergeMap } from 'rxjs/operators';\r\n\r\n@Directive({\r\n    selector: '[mMenuAside]'\r\n})\r\nexport class MenuAsideDirective {\r\n    menu: any;\r\n    layout: any;\r\n\r\n    constructor(\r\n        private el: ElementRef,\r\n        private layoutConfigService: LayoutConfigService,\r\n        private layoutRefService: LayoutRefService\r\n    ) {\r\n        this.layoutConfigService.onLayoutConfigUpdated$\r\n            .pipe(\r\n                mergeMap(() => {\r\n                    return this.layoutRefService.layoutRefs$;\r\n                })\r\n            )\r\n            .subscribe(layout => {\r\n                this.layout = layout;\r\n                this.initMenu();\r\n            });\r\n    }\r\n\r\n    initMenu(): any {\r\n        if (!this.layout.hasOwnProperty('header')) {\r\n            return;\r\n        }\r\n\r\n        let scroll;\r\n        if (mUtil.attr(this.el.nativeElement, 'm-menu-scrollable') === '1') {\r\n            const headerHeight = parseInt(window.getComputedStyle(objectPath.get(this.layout, 'header'))['height'], null);\r\n            scroll = {\r\n                height() {\r\n                    return mUtil.getViewPort().height - headerHeight;\r\n                }\r\n            };\r\n        }\r\n\r\n        const options = {\r\n            // vertical scroll\r\n            scroll: scroll,\r\n            // submenu setup\r\n            submenu: {\r\n                desktop: {\r\n                    // by default the menu mode set to accordion in desktop mode\r\n                    default: 'accordion',\r\n                    // whenever body has this class switch the menu mode to dropdown\r\n                    state: {\r\n                        body: 'm-aside-left--minimize',\r\n                        mode: 'dropdown'\r\n                    }\r\n                },\r\n                tablet: 'accordion', // menu set to accordion in tablet mode\r\n                mobile: 'accordion' // menu set to accordion in mobile mode\r\n            },\r\n            // accordion setup\r\n            accordion: {\r\n                autoScroll: false,\r\n                expandAll: false\r\n            }\r\n        };\r\n\r\n        // init the mMenu plugin\r\n        if (this.menu instanceof mMenu) {\r\n            this.menu.update(options);\r\n        } else {\r\n            this.menu = new mMenu(this.el.nativeElement, options);\r\n        }\r\n    }\r\n}\r\n","import { Directive, AfterViewInit, ElementRef } from '@angular/core';\r\nimport { filter } from 'rxjs/operators';\r\nimport { NavigationEnd, Router } from '@angular/router';\r\n\r\n@Directive({\r\n    selector: '[mMenuHorizontalOffcanvas]'\r\n})\r\nexport class MenuHorizontalOffcanvasDirective implements AfterViewInit {\r\n    menuOffcanvas: any;\r\n\r\n    constructor(private el: ElementRef,\r\n        private router: Router) { }\r\n\r\n    ngAfterViewInit(): void {\r\n        // init the mOffcanvas plugin\r\n        this.menuOffcanvas = new mOffcanvas(this.el.nativeElement, {\r\n            overlay: true,\r\n            baseClass: 'm-aside-header-menu-mobile',\r\n            closeBy: 'm_aside_header_menu_mobile_close_btn',\r\n            toggleBy: {\r\n                target: 'm_aside_header_menu_mobile_toggle',\r\n                state: 'm-brand__toggler--active'\r\n            }\r\n        });\r\n\r\n        this.router.events\r\n            .pipe(filter(event => event instanceof NavigationEnd))\r\n            .subscribe(event => {\r\n                if (mUtil.isMobileDevice()) {\r\n                    this.menuOffcanvas.hide();\r\n                }\r\n            });\r\n    }\r\n}\r\n","import { Directive, AfterViewInit, ElementRef } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[mMenuHorizontal]'\r\n})\r\nexport class MenuHorizontalDirective implements AfterViewInit {\r\n    menu: any;\r\n\r\n    constructor(private el: ElementRef) {\r\n\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        // init the mMenu plugin\r\n        this.menu = new mMenu(this.el.nativeElement, {\r\n            submenu: {\r\n                desktop: 'dropdown',\r\n                tablet: 'accordion',\r\n                mobile: 'accordion'\r\n            },\r\n            accordion: {\r\n                slideSpeed: 200, // accordion toggle slide speed in milliseconds\r\n                autoScroll: true, // enable auto scrolling(focus) to the clicked menu item\r\n                expandAll: false // allow having multiple expanded accordions in the menu\r\n            }\r\n        });\r\n    }\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\nimport { Injectable } from '@angular/core';\r\nimport { tap, filter, mergeMap } from 'rxjs/operators';\r\nimport { Router, NavigationEnd } from '@angular/router';\r\nimport { UtilsService } from './utils.service';\r\n\r\n@Injectable()\r\nexport class LayoutConfigService {\r\n\r\n    public onLayoutConfigUpdated$: BehaviorSubject<any>;\r\n\r\n    constructor(\r\n        private router: Router,\r\n        private utils: UtilsService\r\n    ) {\r\n        // register on config changed event and set default config\r\n        this.onLayoutConfigUpdated$ = new BehaviorSubject(null);\r\n\r\n        this.router.events\r\n            .pipe(\r\n                filter(event => event instanceof NavigationEnd)\r\n            )\r\n            .subscribe(() => {\r\n                this.onLayoutConfigUpdated$.next(null);\r\n            });\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class LayoutRefService {\r\n    layoutRefs$: BehaviorSubject<any> = new BehaviorSubject<any>({});\r\n    layoutRefs: any = {};\r\n\r\n    addElement(name, element) {\r\n        const obj = {};\r\n        obj[name] = element;\r\n        this.layoutRefs$.next(Object.assign(this.layoutRefs, obj));\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpParams, HttpHeaders } from '@angular/common/http';\r\n\r\n@Injectable()\r\nexport class UtilsService {\r\n    constructor() { }\r\n\r\n    /**\r\n\t * Build url parameters key and value pairs from array or object\r\n\t * @param obj\r\n\t */\r\n    urlParam(obj: any): string {\r\n        return Object.keys(obj)\r\n            .map(k => k + '=' + encodeURIComponent(obj[k]))\r\n            .join('&');\r\n    }\r\n\r\n    /**\r\n\t * Simple object check.\r\n\t * @param item\r\n\t * @returns {boolean}\r\n\t */\r\n    isObject(item) {\r\n        return item && typeof item === 'object' && !Array.isArray(item);\r\n    }\r\n\r\n    /**\r\n\t * Deep merge two objects.\r\n\t * @param target\r\n\t * @param ...sources\r\n\t * @see https://stackoverflow.com/a/34749873/1316921\r\n\t */\r\n    mergeDeep(target, ...sources) {\r\n        if (!sources.length) {\r\n            return target;\r\n        }\r\n        const source = sources.shift();\r\n\r\n        if (this.isObject(target) && this.isObject(source)) {\r\n            for (const key in source) {\r\n                if (this.isObject(source[key])) {\r\n                    if (!target[key]) {\r\n                        Object.assign(target, { [key]: {} });\r\n                    }\r\n                    this.mergeDeep(target[key], source[key]);\r\n                } else {\r\n                    Object.assign(target, { [key]: source[key] });\r\n                }\r\n            }\r\n        }\r\n\r\n        return this.mergeDeep(target, ...sources);\r\n    }\r\n\r\n    getPath(obj, val, path?) {\r\n        path = path || '';\r\n        let fullpath = '';\r\n        for (const b in obj) {\r\n            if (obj[b] === val) {\r\n                return path + '/' + b;\r\n            } else if (typeof obj[b] === 'object') {\r\n                fullpath =\r\n                    this.getPath(obj[b], val, path + '/' + b) || fullpath;\r\n            }\r\n        }\r\n        return fullpath;\r\n    }\r\n\r\n    getFindHTTPParams(queryParams): HttpParams {\r\n        const params = new HttpParams()\r\n            .set('lastNamefilter', queryParams.filter)\r\n            .set('sortOrder', queryParams.sortOrder)\r\n            .set('sortField', queryParams.sortField)\r\n            .set('pageNumber', queryParams.pageNumber.toString())\r\n            .set('pageSize', queryParams.pageSize.toString());\r\n\r\n        return params;\r\n    }\r\n\r\n    getHTTPHeader() {\r\n        return {\r\n            headers: new HttpHeaders({ 'Content-Type': 'application/json' })\r\n        };\r\n    }\r\n}\r\n\r\n\r\nexport function isInteger(value: any): value is number {\r\n    return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\r\n}\r\n\r\n\r\nexport function isString(value: any): value is string {\r\n    return typeof value === 'string';\r\n}\r\n","export const environment = {\r\n  production: true\r\n};\r\n","import 'hammerjs';\r\nimport { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","export class AppConsts {\r\n\r\n    static readonly tenancyNamePlaceHolderInUrl = '{TENANCY_NAME}';\r\n\r\n    static remoteServiceBaseUrl: string;\r\n    static remoteServiceBaseUrlFormat: string;\r\n    static appBaseUrl: string;\r\n    static appBaseHref: string; // returns angular's base-href parameter value if used during the publish\r\n    static appBaseUrlFormat: string;\r\n    static recaptchaSiteKey: string;\r\n    static subscriptionExpireNootifyDayCount: number;\r\n\r\n    static localeMappings: any = [];\r\n\r\n    static readonly userManagement = {\r\n        defaultAdminUserName: 'admin'\r\n    };\r\n\r\n    static readonly localization = {\r\n        defaultLocalizationSourceName: 'BPAASDashboard'\r\n    };\r\n\r\n    static readonly authorization = {\r\n        encrptedAuthTokenName: 'enc_auth_token'\r\n    };\r\n\r\n    static readonly grid = {\r\n        defaultPageSize: 10\r\n    };\r\n}\r\n","// import { PermissionCheckerService } from '@abp/auth/permission-checker.service';\r\n// import { FeatureCheckerService } from '@abp/features/feature-checker.service';\r\n// import { LocalizationService } from '@abp/localization/localization.service';\r\n// import { MessageService } from '@abp/message/message.service';\r\n// import { AbpMultiTenancyService } from '@abp/multi-tenancy/abp-multi-tenancy.service';\r\n// import { NotifyService } from '@abp/notify/notify.service';\r\n// import { SettingService } from '@abp/settings/setting.service';\r\nimport { Injector } from '@angular/core';\r\nimport { AppConsts } from '@shared/AppConsts';\r\nimport { AppUrlService } from '@shared/common/nav/app-url.service';\r\nimport { AppSessionService } from '@shared/common/session/app-session.service';\r\nimport { AppUiCustomizationService } from '@shared/common/ui/app-ui-customization.service';\r\nimport { PrimengTableHelper } from '@shared/helpers/PrimengTableHelper';\r\n// import { UiCustomizationSettingsDto } from '@shared/service-proxies/service-proxies';\r\n\r\nexport abstract class AppComponentBase {\r\n\r\n    localizationSourceName = AppConsts.localization.defaultLocalizationSourceName;\r\n\r\n    // localization: LocalizationService;\r\n    // permission: PermissionCheckerService;\r\n    // feature: FeatureCheckerService;\r\n    // notify: NotifyService;\r\n    // setting: SettingService;\r\n    // message: MessageService;\r\n    // multiTenancy: AbpMultiTenancyService;\r\n    localization: any;\r\n    permission: any;\r\n    feature: any;\r\n    notify: any;\r\n    setting: any;\r\n    message: any;\r\n    multiTenancy: any;\r\n    appSession: AppSessionService;\r\n    primengTableHelper: PrimengTableHelper;\r\n    ui: AppUiCustomizationService;\r\n    appUrlService: AppUrlService;\r\n\r\n    constructor(injector: Injector\r\n        ) {\r\n        // this.localization = injector.get(LocalizationService);\r\n        // this.permission = injector.get(PermissionCheckerService);\r\n        // this.feature = injector.get(FeatureCheckerService);\r\n        // this.notify = injector.get(NotifyService);\r\n        // this.setting = injector.get(SettingService);\r\n        // this.message = injector.get(MessageService);\r\n        // this.multiTenancy = injector.get(AbpMultiTenancyService);\r\n        this.appSession = injector.get(AppSessionService);\r\n        this.ui = injector.get(AppUiCustomizationService);\r\n        this.appUrlService = injector.get(AppUrlService);\r\n        this.primengTableHelper = new PrimengTableHelper();\r\n    }\r\n\r\n    flattenDeep(array) {\r\n        return array.reduce((acc, val) =>\r\n            Array.isArray(val) ?\r\n            acc.concat(this.flattenDeep(val)) :\r\n            acc.concat(val),\r\n            []);\r\n    }\r\n\r\n    l(key: string, ...args: any[]): string {\r\n        args.unshift(key);\r\n        args.unshift(this.localizationSourceName);\r\n        return this.ls.apply(this, args);\r\n    }\r\n\r\n    ls(sourcename: string, key: string, ...args: any[]): string {\r\n        let localizedText = this.localization.localize(key, sourcename);\r\n\r\n        if (!localizedText) {\r\n            localizedText = key;\r\n        }\r\n\r\n        if (!args || !args.length) {\r\n            return localizedText;\r\n        }\r\n\r\n        args.unshift(localizedText);\r\n        return localizedText;\r\n        // return abp.utils.formatString.apply(this, this.flattenDeep(args));\r\n    }\r\n\r\n    isGranted(permissionName: string): boolean {\r\n        return this.permission.isGranted(permissionName);\r\n    }\r\n\r\n    isGrantedAny(...permissions: string[]): boolean {\r\n        if (!permissions) {\r\n            return false;\r\n        }\r\n\r\n        for (const permission of permissions) {\r\n            if (this.isGranted(permission)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    s(key: string): string {\r\n        return key;\r\n        // return abp.setting.get(key);\r\n    }\r\n\r\n    appRootUrl(): string {\r\n        return this.appUrlService.appRootUrl;\r\n    }\r\n\r\n    // get currentTheme(): UiCustomizationSettingsDto {\r\n    //     // return this.appSession.theme;\r\n    // }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AppConsts } from '@shared/AppConsts';\r\nimport { AppSessionService } from '@shared/common/session/app-session.service';\r\n\r\n@Injectable()\r\nexport class AppUrlService {\r\n\r\n    static tenancyNamePlaceHolder = '{TENANCY_NAME}';\r\n\r\n    constructor(\r\n        private readonly _appSessionService: AppSessionService\r\n    ) {\r\n\r\n    }\r\n\r\n    get appRootUrl(): string {\r\n        // if (this._appSessionService.tenant) {\r\n        //     return this.getAppRootUrlOfTenant(this._appSessionService.tenant.tenancyName);\r\n        // } else {\r\n        //     return this.getAppRootUrlOfTenant(null);\r\n        // }\r\n        return \"\";\r\n    }\r\n\r\n    /**\r\n     * Returning url ends with '/'.\r\n     */\r\n    getAppRootUrlOfTenant(tenancyName?: string): string {\r\n        if(!tenancyName) return undefined;\r\n        \r\n        let baseUrl = this.ensureEndsWith(AppConsts.appBaseUrlFormat, '/');\r\n\r\n        //Add base href if it is not configured in appconfig.json\r\n        if (baseUrl.indexOf(AppConsts.appBaseHref) < 0) {\r\n            baseUrl = baseUrl + this.removeFromStart(AppConsts.appBaseHref, '/');\r\n        }\r\n\r\n        if (baseUrl.indexOf(AppUrlService.tenancyNamePlaceHolder) < 0) {\r\n            return baseUrl;\r\n        }\r\n\r\n        if (baseUrl.indexOf(AppUrlService.tenancyNamePlaceHolder + '.') >= 0) {\r\n            baseUrl = baseUrl.replace(AppUrlService.tenancyNamePlaceHolder + '.', AppUrlService.tenancyNamePlaceHolder);\r\n            if (tenancyName) {\r\n                tenancyName = tenancyName + '.';\r\n            }\r\n        }\r\n\r\n        if (!tenancyName) {\r\n            return baseUrl.replace(AppUrlService.tenancyNamePlaceHolder, '');\r\n        }\r\n\r\n        return baseUrl.replace(AppUrlService.tenancyNamePlaceHolder, tenancyName);\r\n    }\r\n\r\n    private ensureEndsWith(str: string, c: string) {\r\n        if (str && str.charAt(str.length - 1) !== c) {\r\n            str = str + c;\r\n        }\r\n\r\n        return str;\r\n    }\r\n\r\n    private removeFromEnd(str: string, c: string) {\r\n        if (str && str.charAt(str.length - 1) === c) {\r\n            str = str.substr(0, str.length - 1);\r\n        }\r\n\r\n        return str;\r\n    }\r\n\r\n    private removeFromStart(str: string, c: string) {\r\n        if (str && str.charAt(0) === c) {\r\n            str = str.substr(1, str.length - 1);\r\n        }\r\n\r\n        return str;\r\n    }\r\n}\r\n","import { Injector, Pipe, PipeTransform } from '@angular/core';\r\n// import { FeatureCheckerService } from '@abp/features/feature-checker.service';\r\n\r\n@Pipe({\r\n    name: 'checkFeature'\r\n})\r\nexport class FeatureCheckerPipe implements PipeTransform {\r\n\r\n    // featureCheckerService: FeatureCheckerService;\r\n\r\n    constructor(injector: Injector) {\r\n        // this.featureCheckerService = injector.get(FeatureCheckerService);\r\n    }\r\n\r\n    transform(feature: string): boolean {\r\n        // return this.featureCheckerService.isEnabled(feature);\r\n        return true;\r\n    }\r\n}\r\n","import { Injector, Pipe, PipeTransform } from '@angular/core';\r\nimport { AppConsts } from '@shared/AppConsts';\r\n// import { LocalizationService } from '@abp/localization/localization.service';\r\n\r\n@Pipe({\r\n    name: 'localize'\r\n})\r\nexport class LocalizePipe implements PipeTransform {\r\n\r\n    localizationSourceName = AppConsts.localization.defaultLocalizationSourceName;\r\n\r\n    // localization: LocalizationService;\r\n\r\n    constructor(injector: Injector) {\r\n        // this.localization = injector.get(LocalizationService);\r\n    }\r\n\r\n    l(key: string, ...args: any[]): string {\r\n        args.unshift(key);\r\n        args.unshift(this.localizationSourceName);\r\n        return this.ls.apply(this, args);\r\n    }\r\n\r\n    ls(sourcename: string, key: string, ...args: any[]): string {\r\n        return key;\r\n\r\n        // let localizedText = this.localization.localize(key, sourcename);\r\n\r\n        // if (!localizedText) {\r\n        //     localizedText = key;\r\n        // }\r\n\r\n        // if (!args || !args.length) {\r\n        //     return localizedText;\r\n        // }\r\n\r\n        // args.unshift(localizedText);\r\n        // return this.localizedText;\r\n        // return abp.utils.formatString.apply(this, this.flattenDeep(args));\r\n    }\r\n\r\n    transform(key: string, ...args: any[]): string {\r\n        return this.l(key, args);\r\n    }\r\n\r\n    flattenDeep(array) {\r\n        return array.reduce((acc, val) =>\r\n            Array.isArray(val) ?\r\n                acc.concat(this.flattenDeep(val)) :\r\n                acc.concat(val),\r\n            []);\r\n    }\r\n}\r\n","import { Injector, Pipe, PipeTransform } from '@angular/core';\r\n// import { PermissionCheckerService } from '@abp/auth/permission-checker.service';\r\n\r\n@Pipe({\r\n    name: 'permission'\r\n})\r\nexport class PermissionPipe implements PipeTransform {\r\n\r\n    // permission: PermissionCheckerService;\r\n\r\n    constructor(injector: Injector) {\r\n        // this.permission = injector.get(PermissionCheckerService);\r\n    }\r\n\r\n    isGranted(permissionName: string): boolean {\r\n        // return this.permission.isGranted(permissionName);\r\n        return false;\r\n    }\r\n\r\n    isGrantedAny(...permissions: string[]): boolean {\r\n        if (!permissions) {\r\n            return false;\r\n        }\r\n\r\n        for (const permission of permissions) {\r\n            if (this.isGranted(permission)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    transform(key: string): boolean {\r\n        return this.isGranted(key);\r\n    }\r\n}\r\n","// import { AbpMultiTenancyService } from '@abp/multi-tenancy/abp-multi-tenancy.service';\r\nimport { Injectable } from '@angular/core';\r\n// import { ApplicationInfoDto, GetCurrentLoginInformationsOutput, SessionServiceProxy, TenantLoginInfoDto, UserLoginInfoDto, UiCustomizationSettingsDto } from '@shared/service-proxies/service-proxies';\r\n\r\n@Injectable()\r\nexport class AppSessionService {\r\n\r\n    // private _user: UserLoginInfoDto;\r\n    // private _tenant: TenantLoginInfoDto;\r\n    // private _application: ApplicationInfoDto;\r\n    // private _theme: UiCustomizationSettingsDto;\r\n\r\n    // constructor(\r\n    //     private _sessionService: SessionServiceProxy,\r\n    //     private _abpMultiTenancyService: AbpMultiTenancyService) {\r\n    // }\r\n\r\n    // get application(): ApplicationInfoDto {\r\n    //     return this._application;\r\n    // }\r\n\r\n    // set application(val: ApplicationInfoDto) {\r\n    //     this._application = val;\r\n    // }\r\n\r\n    // get user(): UserLoginInfoDto {\r\n    //     return this._user;\r\n    // }\r\n\r\n    // get userId(): number {\r\n    //     return this.user ? this.user.id : null;\r\n    // }\r\n\r\n    // get tenant(): TenantLoginInfoDto {\r\n    //     return this._tenant;\r\n    // }\r\n\r\n    // get tenancyName(): string {\r\n    //     return this._tenant ? this.tenant.tenancyName : '';\r\n    // }\r\n\r\n    // get tenantId(): number {\r\n    //     return this.tenant ? this.tenant.id : null;\r\n    // }\r\n\r\n    // getShownLoginName(): string {\r\n    //     const userName = this._user.userName;\r\n    //     if (!this._abpMultiTenancyService.isEnabled) {\r\n    //         return userName;\r\n    //     }\r\n\r\n    //     return (this._tenant ? this._tenant.tenancyName : '.') + '\\\\' + userName;\r\n    // }\r\n\r\n    // get theme(): UiCustomizationSettingsDto {\r\n    //     return this._theme;\r\n    // }\r\n\r\n    // set theme(val: UiCustomizationSettingsDto) {\r\n    //     this._theme = val;\r\n    // }\r\n\r\n    // init(): Promise<UiCustomizationSettingsDto> {\r\n    //     return new Promise<UiCustomizationSettingsDto>((resolve, reject) => {\r\n    //         this._sessionService.getCurrentLoginInformations().toPromise().then((result: GetCurrentLoginInformationsOutput) => {\r\n    //             this._application = result.application;\r\n    //             this._user = result.user;\r\n    //             this._tenant = result.tenant;\r\n    //             this._theme = result.theme;\r\n\r\n    //             resolve(result.theme);\r\n    //         }, (err) => {\r\n    //             reject(err);\r\n    //         });\r\n    //     });\r\n    // }\r\n\r\n    // changeTenantIfNeeded(tenantId?: number): boolean {\r\n    //     if (this.isCurrentTenant(tenantId)) {\r\n    //         return false;\r\n    //     }\r\n\r\n    //     abp.multiTenancy.setTenantIdCookie(tenantId);\r\n    //     location.reload();\r\n    //     return true;\r\n    // }\r\n\r\n    // private isCurrentTenant(tenantId?: number) {\r\n    //     let isTenant = tenantId > 0;\r\n\r\n    //     if (!isTenant && !this.tenant) { // this is host\r\n    //         return true;\r\n    //     }\r\n\r\n    //     if (!tenantId && this.tenant) {\r\n    //         return false;\r\n    //     } else if (tenantId && (!this.tenant || this.tenant.id !== tenantId)) {\r\n    //         return false;\r\n    //     }\r\n\r\n    //     return true;\r\n    // }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n// import { UiCustomizationSettingsDto } from '@shared/service-proxies/service-proxies';\r\n\r\n@Injectable()\r\nexport class AppUiCustomizationService {\r\n\r\n    // private _theme: UiCustomizationSettingsDto;\r\n    private _theme: any;\r\n\r\n\r\n    // init(theme: UiCustomizationSettingsDto): void {\r\n    //     this._theme = theme;\r\n    // }\r\n\r\n    init(): void {\r\n    }\r\n\r\n    getContainerClass() {\r\n        if (this._theme.baseSettings.layout.layoutType === 'fluid') {\r\n            return 'm-container--fluid';\r\n        }\r\n\r\n        return 'm-container--responsive m-container--xxl';\r\n    }\r\n\r\n    private isLeftMenuUsed(): boolean {\r\n        return this._theme.baseSettings.menu.position === 'left';\r\n    }\r\n\r\n    getAppModuleBodyClass(): string {\r\n        let topMenuUsed = this._theme.baseSettings.menu.position === 'top';\r\n\r\n        return 'm-page--' + this._theme.baseSettings.layout.layoutType + ' m--skin-' + this._theme.baseSettings.layout.contentSkin + ' ' +\r\n            (this._theme.baseSettings.layout.contentSkin !== '' ? ('m-content--skin-' + this._theme.baseSettings.layout.contentSkin) : '') + ' ' +\r\n            'm-header--' + (this._theme.baseSettings.header.desktopFixedHeader ? 'fixed' : 'static') + ' ' +\r\n            (this._theme.baseSettings.header.mobileFixedHeader ? 'm-header--fixed-mobile' : '') + ' ' +\r\n            ((this._theme.baseSettings.menu.fixedAside && !topMenuUsed ? 'm-aside-left--fixed' : '')) + ' ' +\r\n            (this._theme.baseSettings.menu.defaultMinimizedAside ? 'm-aside-left--minimize m-brand--minimize' : '') + ' ' +\r\n            (this._theme.baseSettings.menu.defaultHiddenAside || this._theme.baseSettings.menu.position === 'top' ? 'm-aside-left--hide' : '') + ' ' +\r\n            (this.isLeftMenuUsed() ? 'm-aside-left--enabled' : '') + ' ' +\r\n            'm-aside-left--skin-' + this._theme.baseSettings.menu.asideSkin + ' ' +\r\n            'm-aside-left--offcanvas' + ' ' +\r\n            (this._theme.baseSettings.footer.fixedFooter && this._theme.baseSettings.layout.layoutType !== 'boxed' ? 'm-footer--fixed' : '') + ' ' +\r\n            (this._theme.baseSettings.layout.fixedBody ? 'm-body--fixed' : '') + ' ' +\r\n            (this._theme.baseSettings.layout.mobileFixedBody ? 'm-body--mobile-fixed' : '');\r\n    }\r\n\r\n    getAccountModuleBodyClass() {\r\n        return 'm--skin- m-header--fixed m-header--fixed-mobile ' + (this.isLeftMenuUsed() ? ' m-aside-left--enabled' : '') + ' m-aside-left--skin-dark m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default';\r\n    }\r\n\r\n    getSelectEditionBodyClass() {\r\n        return 'm--skin-';\r\n    }\r\n\r\n    getSideBarMenuClass(): string {\r\n        let menuCssClass = 'm-aside-menu m-aside-menu--skin-' + this._theme.baseSettings.menu.asideSkin;\r\n\r\n        menuCssClass += ' m-aside-menu--submenu-skin-';\r\n        menuCssClass += this._theme.baseSettings.menu.asideSkin;\r\n\r\n        if (!this._theme.baseSettings.menu.fixedAside && this._theme.baseSettings.menu.submenuToggle === 'Dropdown') {\r\n            menuCssClass += ' m-aside-menu--dropdown';\r\n        }\r\n\r\n        return menuCssClass;\r\n    }\r\n\r\n    getMenuListClass(): string {\r\n        return 'm-menu__nav--dropdown-submenu-arrow';\r\n    }\r\n\r\n    getTopBarMenuContainerClass(): string {\r\n        let menuCssClass = 'm-header__bottom m-header-menu--skin-' + this._theme.baseSettings.menu.asideSkin + ' m-container m-container--full-height m-container--responsive';\r\n        if (this._theme.baseSettings.layout.layoutType === 'boxed') {\r\n            return menuCssClass + ' m-container--xxl';\r\n        }\r\n\r\n        return menuCssClass;\r\n    }\r\n\r\n    getIsMenuScrollable(): boolean {\r\n        return this._theme.allowMenuScroll && this._theme.baseSettings.menu.fixedAside;\r\n    }\r\n\r\n    getSideBarMenuItemClass(item, isMenuActive) {\r\n        let menuCssClass = 'm-menu__item';\r\n\r\n        if (item.items.length) {\r\n            menuCssClass += ' m-menu__item--submenu';\r\n        }\r\n\r\n        if (isMenuActive) {\r\n            menuCssClass += ' m-menu__item--open m-menu__item--expanded m-menu__item--active';\r\n        }\r\n\r\n        return menuCssClass;\r\n    }\r\n}\r\n","import { \r\n  Directive,\r\n  Output,\r\n  EventEmitter,\r\n  HostBinding,\r\n  HostListener } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appDnd]'\r\n})\r\nexport class DndDirective {\r\n\r\n  @HostBinding('class.fileover') fileOver: boolean;\r\n  @Output() fileDropped = new EventEmitter<any>();\r\n\r\n  // Dragover listener\r\n  @HostListener('dragover', ['$event']) onDragOver(evt) {\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n    this.fileOver = true;\r\n  }\r\n\r\n  // Dragleave listener\r\n  @HostListener('dragleave', ['$event']) public onDragLeave(evt) {\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n    this.fileOver = false;\r\n  }\r\n\r\n  // Drop listener\r\n  @HostListener('drop', ['$event']) public ondrop(evt) {\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n    this.fileOver = false;\r\n    let files = evt.dataTransfer.files;\r\n    if (files.length > 0) {\r\n      this.fileDropped.emit(files);\r\n    }\r\n  }\r\n\r\n}\r\n","import { LazyLoadEvent } from 'primeng/api';\r\nimport { Paginator } from 'primeng/paginator';\r\nimport { Table } from 'primeng/table';\r\n\r\nexport class PrimengTableHelper {\r\n    predefinedRecordsCountPerPage = [5, 10, 25, 50, 100, 250, 500];\r\n\r\n    defaultRecordsCountPerPage = 10;\r\n\r\n    isResponsive = true;\r\n\r\n    resizableColumns: false;\r\n\r\n    totalRecordsCount = 0;\r\n\r\n    records: any[];\r\n\r\n    isLoading = false;\r\n\r\n    showLoadingIndicator(): void {\r\n        setTimeout(() => {\r\n            this.isLoading = true;\r\n        }, 0);\r\n    }\r\n\r\n    hideLoadingIndicator(): void {\r\n        setTimeout(() => {\r\n            this.isLoading = false;\r\n        }, 0);\r\n    }\r\n\r\n    getSorting(table: Table): string {\r\n        let sorting;\r\n        if (table.sortField) {\r\n            sorting = table.sortField;\r\n            if (table.sortOrder === 1) {\r\n                sorting += ' ASC';\r\n            } else if (table.sortOrder === -1) {\r\n                sorting += ' DESC';\r\n            }\r\n        }\r\n\r\n        return sorting;\r\n    }\r\n\r\n    getMaxResultCount(paginator: Paginator, event: LazyLoadEvent): number {\r\n        if (paginator.rows) {\r\n            return paginator.rows;\r\n        }\r\n\r\n        if (!event) {\r\n            return 0;\r\n        }\r\n\r\n        return event.rows;\r\n    }\r\n\r\n    getSkipCount(paginator: Paginator, event: LazyLoadEvent): number {\r\n        if (paginator.first) {\r\n            return paginator.first;\r\n        }\r\n\r\n        if (!event) {\r\n            return 0;\r\n        }\r\n\r\n        return event.first;\r\n    }\r\n\r\n    shouldResetPaging(event: LazyLoadEvent): boolean {\r\n        if (!event /*|| event.sortField*/) { // if you want to reset after sorting, comment out parameter\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n","import { Injectable, EventEmitter } from '@angular/core';    \r\nimport { Subscription } from 'rxjs/internal/Subscription';    \r\n    \r\n@Injectable({    \r\n  providedIn: 'root'    \r\n})    \r\nexport class EventEmitterService {    \r\n    \r\n  invokeFirstComponentFunction = new EventEmitter();    \r\n  subsVar: Subscription = new Subscription;    \r\n    \r\n  constructor() { }    \r\n    \r\n  onFirstComponentButtonClick() {    \r\n    this.invokeFirstComponentFunction.emit();    \r\n  }    \r\n}  ","import { Injectable } from '@angular/core';\r\nimport * as localForage from 'localforage';\r\n\r\n@Injectable()\r\nexport class LocalStorageService {\r\n\r\n    getItem(key: string, callback: any): void {\r\n        if (!localForage) {\r\n            return;\r\n        }\r\n\r\n        localForage.getItem(key, callback);\r\n    }\r\n\r\n\r\n    setItem(key: string, value: string | null | undefined): void {\r\n        if (!localForage) {\r\n            return;\r\n        }\r\n\r\n        if (value === null) {\r\n            value = undefined;\r\n        }\r\n\r\n        localForage.setItem(key, value);\r\n    }\r\n\r\n    removeItem(key: string, value: ((err: any) => void) | null | undefined): void {\r\n        if (!localForage) {\r\n            return;\r\n        }\r\n\r\n        if (value === null) {\r\n            value = undefined;\r\n        }\r\n\r\n        localForage.removeItem(key, value);\r\n    }\r\n\r\n    keys() {\r\n\r\n        if (!localForage) {\r\n            return;\r\n        }\r\n\r\n        return localForage.keys();\r\n    }\r\n\r\n}\r\n","import {NgControl} from '@angular/forms';\r\nimport {Directive, ElementRef, HostListener} from '@angular/core';\r\n\r\n@Directive({\r\n    selector: 'input[nullValue]'\r\n})\r\nexport class NullDefaultValueDirective {\r\n    constructor(private el: ElementRef, private control: NgControl) {}\r\n\r\n    @HostListener('input', ['$event.target'])\r\n    onEvent(target: HTMLInputElement) {\r\n        this.control.viewToModelUpdate((target.value === '') ? null : target.value);\r\n    }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\n@Injectable()\r\nexport class StyleLoaderService {\r\n\r\n    private styles: any = {};\r\n\r\n    load(...styles: string[]) {\r\n        this.styles = styles;\r\n        let promises: any[] = [];\r\n        styles.forEach((style) => promises.push(this.loadStyle(style)));\r\n        return Promise.all(promises);\r\n    }\r\n\r\n    loadArray(styles: string[]) {\r\n        this.styles = styles;\r\n        let promises: any[] = [];\r\n        styles.forEach((style) => promises.push(this.loadStyle(style)));\r\n        return Promise.all(promises);\r\n    }\r\n\r\n    loadStyle(name: string) {\r\n        return new Promise((resolve, reject) => {\r\n            let style = (document.createElement('link') as any);\r\n            style.type = 'text/css';\r\n            style.rel = 'stylesheet';\r\n            style.href = name;\r\n\r\n            if (style.readyState) {  //IE\r\n                style.onreadystatechange = () => {\r\n                    if (style.readyState === 'loaded' || style.readyState === 'complete') {\r\n                        style.onreadystatechange = null;\r\n                        resolve({style: name, loaded: true, status: 'Loaded'});\r\n                    }\r\n                };\r\n            } else {  //Others\r\n                style.onload = () => {\r\n                    resolve({ style: name, loaded: true, status: 'Loaded'});\r\n                };\r\n            }\r\n\r\n            style.onerror = (error: any) => resolve({ style: name, loaded: false, status: 'Loaded'});\r\n            document.getElementsByTagName('head')[0].appendChild(style);\r\n        });\r\n    }\r\n\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\n//import { ButtonBusyDirective } from './button-busy.directive';\r\n// import { FriendProfilePictureComponent } from './friend-profile-picture.component';\r\nimport { LocalStorageService } from './local-storage.service';\r\nimport { NullDefaultValueDirective } from './null-value.directive';\r\nimport { StyleLoaderService } from './style-loader.service';\r\nimport { LocalizePipe } from '@shared/common/pipes/localize.pipe';\r\nimport { PermissionPipe } from '@shared/common/pipes/permission.pipe';\r\nimport { FeatureCheckerPipe } from '@shared/common/pipes/feature-checker.pipe';\r\nimport { EventEmitterService } from './event-emitter.service';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule\r\n    ],\r\n    providers: [\r\n        EventEmitterService,\r\n        LocalStorageService,\r\n        StyleLoaderService,\r\n    ],\r\n    declarations: [\r\n\r\n        // FriendProfilePictureComponent,\r\n\r\n        //ValidationMessagesComponent,\r\n        NullDefaultValueDirective,\r\n        LocalizePipe,\r\n        PermissionPipe,\r\n        FeatureCheckerPipe\r\n    ],\r\n    exports: [\r\n        // EqualValidator,\r\n        // FriendProfilePictureComponent,\r\n\r\n        //ValidationMessagesComponent,\r\n        NullDefaultValueDirective,\r\n        LocalizePipe,\r\n        PermissionPipe,\r\n        FeatureCheckerPipe\r\n    ]\r\n})\r\nexport class UtilsModule { }\r\n","import * as patristic from 'patristic';\r\nimport * as d3 from 'd3';\r\n// import \"patristic\";\r\n// import \"d3\";\r\n\r\n/**\r\n * This class function creates a TidyTree object.\r\n * @param {String} newick A valid newick string\r\n * @param {Object} options A Javascript object containing options to set up the tree\r\n */\r\nexport default function TidyTree(data, options, events) {\r\n  let defaults = {\r\n    layout: \"vertical\",\r\n    type: \"tree\",\r\n    mode: \"smooth\",\r\n    colorOptions: { nodeColorMode: \"none\" },\r\n    leafNodes: true,\r\n    leafLabels: false,\r\n    equidistantLeaves: false,\r\n    branchNodes: false,\r\n    branchLabels: false,\r\n    branchDistances: false,\r\n    hStretch: 1,\r\n    vStretch: 1,\r\n    rotation: 0,\r\n    ruler: true,\r\n    animation: 500,\r\n    margin: [50, 50, 50, 50] //CSS order: top, right, bottom, left\r\n  };\r\n  if (!options) options = {};\r\n  Object.assign(this, defaults, options, {\r\n    events: {\r\n      draw: [],\r\n      showtooltip: [],\r\n      hidetooltip: [],\r\n      contextmenu: [],\r\n      search: [],\r\n      select: []\r\n    }\r\n  });\r\n\r\n  if(events) Object.keys(events).forEach(e => this.events[e].push(events[e]));\r\n\r\n  if (this.parent) this.draw(this.parent);\r\n\r\n  if (data instanceof patristic.Branch) {\r\n    this.setData(data);\r\n  } else {\r\n    this.setTree(data);\r\n  }\r\n\r\n  if (this.parent) this.recenter();\r\n}\r\n\r\n/**\r\n * Update the TidyTree's underlying data structure\r\n * There are two contexts in which you should call this:\r\n * \t1. You wish to replace the tree with a completely different tree, given by a different newick string\r\n * \t2. Your underlying tree data has changed (e.g. the tree has been re-rooted)\r\n * @param  {Object} data A patristic.Branch object\r\n * @return {Object}        the TidyTree object\r\n */\r\nTidyTree.prototype.setData = function (data) {\r\n  if (!data) throw Error(\"Invalid Data\");\r\n  this.data = data;\r\n  this.range = [Number.MAX_SAFE_INTEGER, Number.MIN_SAFE_INTEGER];\r\n  this.hierarchy = d3\r\n    .hierarchy(this.data, d => d.children)\r\n    .eachBefore(d => {\r\n      d.value =\r\n        (d.parent ? d.parent.value : 0) + (d.data.length ? Math.abs(d.data.length) : 0);\r\n      if (d.value < this.range[0]) this.range[0] = d.value;\r\n      if (d.value > this.range[1]) this.range[1] = d.value;\r\n    })\r\n    .each(d => (d.value /= this.range[1]));\r\n  if (this.parent) return this.redraw();\r\n  return this;\r\n};\r\n\r\n/**\r\n * Update the TidyTree's underlying data structure\r\n * There are two contexts in which you should call this:\r\n * \t1. You wish to replace the tree with a completely different tree, given by a different newick string\r\n * \t2. Your underlying tree data has changed (e.g. the tree has been re-rooted)\r\n * @param  {String} newick A valid newick string\r\n * @return {Object}        the TidyTree object\r\n */\r\nTidyTree.prototype.setTree = function (newick) {\r\n  if (!newick) throw Error(\"Invalid Newick String\");\r\n  return this.setData(patristic.parseNewick(newick));\r\n};\r\n\r\n/**\r\n * The available layouts for rendering trees.\r\n * @type {Array}\r\n */\r\nTidyTree.validLayouts = [\"horizontal\", \"vertical\", \"circular\"];\r\n\r\n/**\r\n * The available types for rendering branches.\r\n * @type {Array}\r\n */\r\nTidyTree.validTypes = [\"tree\", \"weighted\", \"dendrogram\"];\r\n\r\n/**\r\n * The available modes for rendering branches.\r\n * @type {Array}\r\n */\r\nTidyTree.validModes = [\"smooth\", \"square\", \"straight\"];\r\n\r\n/**\r\n * The available color modes for rendering nodes.\r\n * @type {Array}\r\n */\r\nTidyTree.validNodeColorModes = [\"none\", \"list\"]; // later, highlight on hover, or maybe color by annotation on a node/ search\r\n\r\n/**\r\n * The available color modes for rendering branches.\r\n * @type {Array}\r\n */\r\nTidyTree.validBranchColorModes = [\"none\", \"monophyletic\"]; // later, toRoot? \r\n\r\n/**\r\n * Draws a Phylogenetic on the element referred to by selector\r\n * @param  {String} selector A CSS selector\r\n * @return {TidyTree}           the TidyTree object\r\n */\r\nTidyTree.prototype.draw = function (selector) {\r\n  if (!selector && !this.parent) {\r\n    throw Error(\"No valid target for drawing given! Where should the tree go?\");\r\n  }\r\n  let parent = (this.parent = d3.select(selector ? selector : this.parent));\r\n\r\n  this.width =\r\n    parseFloat(parent.style(\"width\")) - this.margin[1] - this.margin[3];\r\n  this.height =\r\n    parseFloat(parent.style(\"height\")) - this.margin[0] - this.margin[2] - 25;\r\n\r\n  let tree = d3.tree();\r\n\r\n  let svg = parent\r\n    .html(null)\r\n    .append(\"svg\")\r\n    .attr(\"width\", \"100%\")\r\n    .attr(\"height\", \"100%\");\r\n\r\n  let g = svg.append(\"g\");\r\n\r\n  svg\r\n    .append(\"g\")\r\n    .attr(\"class\", \"tidytree-ruler\")\r\n    .append(\"rect\")\r\n    .attr(\"y\", -5)\r\n    .attr(\"fill\", \"white\");\r\n\r\n  this.zoom = d3.zoom().on(\"zoom\", () => {\r\n    let transform = (this.transform = d3.event.transform);\r\n    g.attr(\r\n      \"transform\",\r\n      `translate(${transform.x},${transform.y}) scale(${transform.k}) rotate(${\r\n        this.rotation\r\n      },${this.layout === \"circular\" ? 0 : this.width / 2},${\r\n        this.layout === \"circular\" ? 0 : this.height / 2\r\n      })`\r\n    );\r\n    updateRuler.call(this, transform);\r\n  });\r\n  svg.call(this.zoom);\r\n\r\n  g.append(\"g\").attr(\"class\", \"tidytree-links\");\r\n  g.append(\"g\").attr(\"class\", \"tidytree-nodes\");\r\n\r\n  if (this.events.draw.length) this.events.draw.forEach(c => c());\r\n\r\n  return this;\r\n};\r\n\r\nconst getX = d => d.x,\r\n  getY = d => d.y,\r\n  getLength = d => d.weight;\r\n\r\nlet linkTransformers = {\r\n  tree: {\r\n    smooth: {\r\n      horizontal: d3\r\n        .linkHorizontal()\r\n        .x(getY)\r\n        .y(getX),\r\n      vertical: d3\r\n        .linkVertical()\r\n        .x(getX)\r\n        .y(getY),\r\n      circular: d3\r\n        .linkRadial()\r\n        .angle(getX)\r\n        .radius(getY)\r\n    },\r\n    straight: {\r\n      horizontal: d =>\r\n        `M${d.source.y} ${d.source.x} L ${d.target.y} ${d.target.x}`,\r\n      vertical: d =>\r\n        `M${d.source.x} ${d.source.y} L ${d.target.x} ${d.target.y}`,\r\n      circular: d => {\r\n        const startAngle = d.source.x - Math.PI / 2,\r\n          startRadius = d.source.y,\r\n          endAngle = d.target.x - Math.PI / 2,\r\n          endRadius = d.target.y;\r\n        const x0 = Math.cos(startAngle),\r\n          y0 = Math.sin(startAngle),\r\n          x1 = Math.cos(endAngle),\r\n          y1 = Math.sin(endAngle);\r\n        return (\r\n          \"M\" +\r\n          startRadius * x0 +\r\n          \",\" +\r\n          startRadius * y0 +\r\n          \"L\" +\r\n          endRadius * x1 +\r\n          \",\" +\r\n          endRadius * y1\r\n        );\r\n      }\r\n    },\r\n    square: {\r\n      horizontal: d =>\r\n        `M${d.source.y} ${d.source.x} V ${d.target.x} H ${d.target.y}`,\r\n      vertical: d =>\r\n        `M${d.source.x} ${d.source.y} H ${d.target.x} V ${d.target.y}`,\r\n      circular: d => {\r\n        const startAngle = d.source.x - Math.PI / 2,\r\n          startRadius = d.source.y,\r\n          endAngle = d.target.x - Math.PI / 2,\r\n          endRadius = d.target.y;\r\n        const x0 = Math.cos(startAngle),\r\n          y0 = Math.sin(startAngle),\r\n          x1 = Math.cos(endAngle),\r\n          y1 = Math.sin(endAngle);\r\n        return (\r\n          \"M\" +\r\n          startRadius * x0 +\r\n          \",\" +\r\n          startRadius * y0 +\r\n          (endAngle === startAngle\r\n            ? \"\"\r\n            : \"A\" +\r\n              startRadius +\r\n              \",\" +\r\n              startRadius +\r\n              \" 0 0 \" +\r\n              (endAngle > startAngle ? 1 : 0) +\r\n              \" \" +\r\n              startRadius * x1 +\r\n              \",\" +\r\n              startRadius * y1) +\r\n          \"L\" +\r\n          endRadius * x1 +\r\n          \",\" +\r\n          endRadius * y1\r\n        );\r\n      }\r\n    }\r\n  },\r\n  weighted: {\r\n    smooth: {\r\n      horizontal: d3\r\n        .linkHorizontal()\r\n        .x(getLength)\r\n        .y(getX),\r\n      vertical: d3\r\n        .linkVertical()\r\n        .x(getX)\r\n        .y(getLength),\r\n      circular: d3\r\n        .linkRadial()\r\n        .angle(getX)\r\n        .radius(getLength)\r\n    },\r\n    straight: {\r\n      horizontal: d =>\r\n        `M${d.source.weight} ${d.source.x} L ${d.target.weight} ${d.target.x}`,\r\n      vertical: d =>\r\n        `M${d.source.x} ${d.source.weight} L ${d.target.x} ${d.target.weight}`,\r\n      circular: d => {\r\n        const startAngle = d.source.x - Math.PI / 2,\r\n          startRadius = d.source.weight,\r\n          endAngle = d.target.x - Math.PI / 2,\r\n          endRadius = d.target.weight;\r\n        const x0 = Math.cos(startAngle),\r\n          y0 = Math.sin(startAngle),\r\n          x1 = Math.cos(endAngle),\r\n          y1 = Math.sin(endAngle);\r\n        return (\r\n          \"M\" +\r\n          startRadius * x0 +\r\n          \",\" +\r\n          startRadius * y0 +\r\n          \"L\" +\r\n          endRadius * x1 +\r\n          \",\" +\r\n          endRadius * y1\r\n        );\r\n      }\r\n    },\r\n    square: {\r\n      horizontal: d =>\r\n        `M${d.source.weight} ${d.source.x} V ${d.target.x} H ${\r\n          d.target.weight\r\n        }`,\r\n      vertical: d =>\r\n        `M${d.source.x} ${d.source.weight} H ${d.target.x} V ${\r\n          d.target.weight\r\n        }`,\r\n      circular: d => {\r\n        const startAngle = d.source.x - Math.PI / 2,\r\n          startRadius = d.source.weight,\r\n          endAngle = d.target.x - Math.PI / 2,\r\n          endRadius = d.target.weight;\r\n        const x0 = Math.cos(startAngle),\r\n          y0 = Math.sin(startAngle),\r\n          x1 = Math.cos(endAngle),\r\n          y1 = Math.sin(endAngle);\r\n        return (\r\n          \"M\" +\r\n          startRadius * x0 +\r\n          \",\" +\r\n          startRadius * y0 +\r\n          (endAngle === startAngle\r\n            ? \"\"\r\n            : \"A\" +\r\n              startRadius +\r\n              \",\" +\r\n              startRadius +\r\n              \" 0 0 \" +\r\n              (endAngle > startAngle ? 1 : 0) +\r\n              \" \" +\r\n              startRadius * x1 +\r\n              \",\" +\r\n              startRadius * y1) +\r\n          \"L\" +\r\n          endRadius * x1 +\r\n          \",\" +\r\n          endRadius * y1\r\n        );\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nlinkTransformers.dendrogram = linkTransformers.tree;\r\n\r\n/**\r\n * Calculate the coordinates of a point transformed onto a circle.\r\n *\r\n * @param {number} x - The x-coordinate of the center of the point.\r\n * @param {number} y - The y-coordinate of the center of the point.\r\n * @return {Array<number>} The new x and y coordinates of the point on the circle.\r\n */\r\nfunction circularPoint(x, y) {\r\n  return [(y = +y) * Math.cos((x -= Math.PI / 2)), y * Math.sin(x)];\r\n}\r\n\r\nlet nodeTransformers = {\r\n  tree: {\r\n    horizontal: d => `translate(${d.y}, ${d.x})`,\r\n    vertical: d => `translate(${d.x}, ${d.y})`,\r\n    circular: d => `translate(${circularPoint(d.x, d.y)})`\r\n  },\r\n  weighted: {\r\n    horizontal: d => `translate(${d.weight}, ${d.x})`,\r\n    vertical: d => `translate(${d.x}, ${d.weight})`,\r\n    circular: d => `translate(${circularPoint(d.x, d.weight)})`\r\n  }\r\n};\r\n\r\nnodeTransformers.dendrogram = nodeTransformers.tree;\r\n\r\n/**\r\n * Finds the color of a given node based on the color options provided.\r\n *\r\n * @param {Object} node - The node for which to find the color.\r\n * @param {Object} colorOptions - The color options object containing the color mode, node list, default color, and highlight color.\r\n * @return {string} The color of the node.\r\n */\r\nfunction findNodeColor(node, colorOptions) {\r\n  if (colorOptions.nodeColorMode === \"none\") {\r\n    // steelblue\r\n    return colorOptions.defaultNodeColor ?? \"#4682B4\";\r\n  }\r\n \r\n  let nodeList = colorOptions.nodeList;\r\n\r\n  if (nodeList && nodeList.includes(node.data._guid)) {\r\n    // yellowish\r\n    return colorOptions.highlightColor ?? \"#feb640\";\r\n  } else {\r\n    // charcoal\r\n    return colorOptions.defaultNodeColor ?? \"#243127\";\r\n  }\r\n}\r\n\r\n/**\r\n * Find the color of a given link based on the provided color options.\r\n *\r\n * @param {string} link - The link for which to find the color.\r\n * @param {object} colorOptions - The options for different link colors.\r\n * @return {string} The color of the link.\r\n */\r\nfunction findBranchColor(link, colorOptions) {\r\n  if (colorOptions.branchColorMode === \"none\") {\r\n    // light gray\r\n    return colorOptions.defaultBranchColor ?? \"#cccccc\";\r\n  }\r\n  \r\n  let source = link.source;\r\n  let childLeafNodes = getAllLeaves(source);\r\n  \r\n  let allChildLeafNodesInNodeList = childLeafNodes.every(child =>\r\n    colorOptions.nodeList?.includes(child.data._guid)\r\n  );\r\n \r\n  if (allChildLeafNodesInNodeList) {\r\n    // yellowish\r\n    return colorOptions.highlightColor ?? \"#feb640\";\r\n  }\r\n\r\n  return colorOptions.defaultBranchColor ?? \"#cccccc\";\r\n}\r\n\r\n/**\r\n * Returns an array of all the child leaf nodes of the given node in a tree.\r\n *\r\n * @param {Object} node - A node of the tree.\r\n * @param {boolean} includeSelf - Whether to include the given node itself as a leaf node. Defaults to false.\r\n * @return {Array} An array of leaf nodes.\r\n */\r\nfunction getAllLeaves(node, includeSelf) {\r\n  includeSelf = includeSelf ?? false;\r\n  let leaves = [];\r\n\r\n  if (includeSelf && node.height === 0) {\r\n    leaves.push(node);\r\n  } else {\r\n    node.children.forEach(child => {\r\n      leaves.push(...getAllLeaves(child, true));\r\n    });\r\n  }\r\n\r\n  return leaves;\r\n}\r\n\r\nconst radToDeg = 180 / Math.PI;\r\n\r\nlet labelTransformers = {\r\n  tree: {\r\n    straight: {\r\n      horizontal: l =>\r\n        `translate(${(l.source.y + l.target.y) / 2}, ${(l.source.x +\r\n          l.target.x) /\r\n          2}) rotate(${Math.atan(\r\n          (l.target.x - l.source.x) / (l.target.y - l.source.y)\r\n        ) * radToDeg})`,\r\n      vertical: l =>\r\n        `translate(${(l.source.x + l.target.x) / 2}, ${(l.source.y +\r\n          l.target.y) /\r\n          2}) rotate(${Math.atan(\r\n          (l.source.y - l.target.y) / (l.source.x - l.target.x)\r\n        ) * radToDeg})`,\r\n      circular: l => {\r\n        let s = circularPoint(l.source.x, l.source.y),\r\n          t = circularPoint(l.target.x, l.target.y);\r\n        return `translate(${(s[0] + t[0]) / 2}, ${(s[1] + t[1]) /\r\n          2}) rotate(${Math.atan((s[1] - t[1]) / (s[0] - t[0])) * radToDeg})`;\r\n      }\r\n    },\r\n    square: {\r\n      horizontal: l =>\r\n        `translate(${(l.source.y + l.target.y) / 2}, ${l.target.x})`,\r\n      vertical: l =>\r\n        `translate(${l.target.x}, ${(l.source.y + l.target.y) / 2}) rotate(90)`,\r\n      circular: l => {\r\n        let u = circularPoint(l.target.x, (l.source.y + l.target.y) / 2);\r\n        return `translate(${u[0]}, ${u[1]}) rotate(${((l.target.x * radToDeg) %\r\n          180) -\r\n          90})`;\r\n      }\r\n    }\r\n  },\r\n  weighted: {\r\n    straight: {\r\n      horizontal: l =>\r\n        `translate(${(l.source.weight + l.target.weight) / 2}, ${(l.source.x +\r\n          l.target.x) /\r\n          2}) rotate(${Math.atan(\r\n          (l.target.x - l.source.x) / (l.target.weight - l.source.weight)\r\n        ) * radToDeg})`,\r\n      vertical: l =>\r\n        `translate(${(l.source.x + l.target.x) / 2}, ${(l.source.weight +\r\n          l.target.weight) /\r\n          2}) rotate(${Math.atan(\r\n          (l.source.weight - l.target.weight) / (l.source.x - l.target.x)\r\n        ) * radToDeg})`,\r\n      circular: l => {\r\n        let s = circularPoint(l.source.x, l.source.weight),\r\n          t = circularPoint(l.target.x, l.target.weight);\r\n        return `translate(${(s[0] + t[0]) / 2}, ${(s[1] + t[1]) /\r\n          2}) rotate(${Math.atan((s[1] - t[1]) / (s[0] - t[0])) * radToDeg})`;\r\n      }\r\n    },\r\n    square: {\r\n      horizontal: l => `\r\n        translate(${(l.source.weight + l.target.weight) / 2}, ${l.target.x})\r\n      `,\r\n      vertical: l => `\r\n        translate(${l.target.x}, ${(l.source.weight + l.target.weight) / 2})\r\n        rotate(90)\r\n      `,\r\n      circular: l => {\r\n        let u = circularPoint(\r\n          l.target.x,\r\n          (l.source.weight + l.target.weight) / 2\r\n        );\r\n        return `\r\n          translate(${u[0]}, ${u[1]})\r\n          rotate(${((l.target.x * radToDeg) % 180) - 90})\r\n        `;\r\n      }\r\n    }\r\n  }\r\n};\r\nlabelTransformers.tree.smooth = labelTransformers.tree.straight;\r\nlabelTransformers.weighted.smooth = labelTransformers.weighted.straight;\r\nlabelTransformers.dendrogram = labelTransformers.tree;\r\n\r\nfunction labeler(d) {\r\n  if (!d.target.data.length) return \"0.000\";\r\n  return d.target.data.length.toFixed(3);\r\n}\r\n\r\n/**\r\n * Redraws the links and relocates the nodes accordingly\r\n * @return {TidyTree} The TidyTree Object\r\n */\r\nTidyTree.prototype.redraw = function () {\r\n  let parent = this.parent;\r\n\r\n  this.width  = (parseFloat(parent.style(\"width\" )) - this.margin[1] - this.margin[3]     ) * this.hStretch;\r\n  this.height = (parseFloat(parent.style(\"height\")) - this.margin[0] - this.margin[2] - 25) * this.vStretch;\r\n\r\n  this.scalar =\r\n    this.layout === \"horizontal\" ? this.width :\r\n    this.layout === \"vertical\" ? this.height :\r\n    Math.min(this.width, this.height) / 2;\r\n\r\n  this.hierarchy.each(d => (d.weight = this.scalar * d.value));\r\n\r\n  let g = parent.select(\"svg g\");\r\n\r\n  let source = (this.type === \"tree\" ? d3.tree() : d3.cluster()).size(\r\n    this.layout === \"circular\"   ? [2 * Math.PI, Math.min(this.height, this.width) / 2] :\r\n    this.layout === \"horizontal\" ? [this.height, this.width] :\r\n    [this.width, this.height]\r\n  );\r\n\r\n  if (this.equidistantLeaves) {\r\n    if (this.layout === \"circular\") {\r\n      source.separation((a,b) => 1 / a.depth);\r\n    } else {\r\n      source.separation((a,b) => 1);\r\n    }\r\n  } else {\r\n    if (this.layout === \"circular\")\r\n      source.separation((a, b) => (a.parent == b.parent ? 1 : 2) / a.depth);\r\n  }\r\n  \r\n  //Note: You must render links prior to nodes in order to get correct placement!\r\n  let links = g\r\n    .select(\"g.tidytree-links\")\r\n    .selectAll(\"g.tidytree-link\")\r\n    .data(source(this.hierarchy).links(), l => l.source.data._guid + ':' + l.target.data._guid);\r\n\r\n  links.join(\r\n    enter => {\r\n      let newLinks = enter.append(\"g\").attr(\"class\", \"tidytree-link\");\r\n\r\n      let linkTransformer = linkTransformers[this.type][this.mode][this.layout];\r\n      newLinks\r\n        .append(\"path\")\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"stroke\", d => findBranchColor(d, this.colorOptions))\r\n        .attr(\"d\", linkTransformer)\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 1);\r\n\r\n      let labelTransformer = labelTransformers[this.type][this.mode][this.layout];\r\n      newLinks\r\n        .append(\"text\")\r\n        .attr(\"y\", 2)\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .style(\"font-size\", \"12px\")\r\n        .text(labeler)\r\n        .attr(\"transform\", labelTransformer)\r\n        .transition()\r\n        .duration(this.animation)\r\n        .style(\"opacity\", this.branchDistances ? 1 : 0);\r\n    },\r\n    update => {\r\n      let linkTransformer = linkTransformers[this.type][this.mode][this.layout];\r\n      let paths = update.select(\"path\");\r\n      if (!this.animation > 0) {\r\n        paths\r\n        .attr(\"d\", linkTransformer)\r\n        .attr(\"stroke\", d => findBranchColor(d, this.colorOptions));\r\n      } else {\r\n        paths\r\n          .transition()\r\n          .duration(this.animation / 2)\r\n          .attr(\"stroke\", d => findBranchColor(d, this.colorOptions))\r\n          .attr(\"opacity\", 0)\r\n          .end()\r\n          .then(() => {\r\n            paths\r\n              .attr(\"d\", linkTransformer)\r\n              .transition()\r\n              .duration(this.animation / 2)\r\n              .attr(\"opacity\", 1);\r\n          });\r\n      }\r\n\r\n      let labelTransformer =\r\n        labelTransformers[this.type][this.mode][this.layout];\r\n      let labels = update.select(\"text\");\r\n      if (this.animation) {\r\n        labels\r\n          .transition()\r\n          .duration(this.animation / 2)\r\n          .style(\"opacity\", 0)\r\n          .end()\r\n          .then(() => {\r\n            labels.text(labeler).attr(\"transform\", labelTransformer);\r\n            if (this.branchDistances) {\r\n            labels\r\n              .transition()\r\n              .duration(this.animation / 2)\r\n              .style(\"opacity\", this.branchDistances ? 1 : 0);\r\n            }\r\n          });\r\n      } else {\r\n        labels.text(labeler).attr(\"transform\", labelTransformer);\r\n      }\r\n    },\r\n    exit =>\r\n      exit\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 0)\r\n        .remove()\r\n  );\r\n\r\n  let nodes = g\r\n    .select(\"g.tidytree-nodes\")\r\n    .selectAll(\"g.tidytree-node\")\r\n    .data(this.hierarchy.descendants(), d => d.data._guid);\r\n  nodes.join(\r\n    enter => {\r\n      let nt = nodeTransformers[this.type][this.layout];\r\n      let newNodes = enter\r\n        .append(\"g\")\r\n        .attr(\"class\", \"tidytree-node\")\r\n        .classed(\"tidytree-node-internal\", d => d.children)\r\n        .classed(\"tidytree-node-leaf\", d => !d.children)\r\n        .attr(\"transform\", nt);\r\n\r\n      newNodes\r\n        .append(\"circle\")\r\n        .attr(\"title\", d => d.data.id)\r\n        .style(\"opacity\", d =>\r\n          (d.children && this.branchNodes) ||\r\n          (!d.children && this.leafNodes) ? 1 : 0\r\n        )\r\n        .style(\"fill\", d => findNodeColor(d, this.colorOptions))\r\n        .on(\"mouseenter focusin\", d => this.trigger(\"showtooltip\", d))\r\n        .on(\"mouseout focusout\", d => this.trigger(\"hidetooltip\", d))\r\n        .on(\"contextmenu\", d => this.trigger(\"contextmenu\", d))\r\n        .on(\"click\", d => this.trigger(\"select\", d))\r\n        .attr(\"r\", 2.5);\r\n\r\n      let nodeLabels = newNodes\r\n        .append(\"text\")\r\n        .text(d => d.data.id)\r\n        .style(\"font-size\", \"12px\")\r\n        .attr(\"y\", 2)\r\n        .style(\"opacity\", d =>\r\n          ( d.children && this.branchLabels) ||\r\n          (!d.children && this.leafLabels) ? 1 : 0\r\n        );\r\n\r\n      if (this.layout === \"vertical\") {\r\n        nodeLabels\r\n          .attr(\"text-anchor\", \"start\")\r\n          .attr(\"x\", 5)\r\n          .transition()\r\n          .duration(this.animation)\r\n          .attr(\"transform\", \"rotate(90)\");\r\n      } else if (this.layout === \"horizontal\") {\r\n        nodeLabels\r\n          .attr(\"text-anchor\", \"start\")\r\n          .attr(\"x\", 5)\r\n          .transition()\r\n          .duration(this.animation)\r\n          .attr(\"transform\", \"rotate(0)\");\r\n      } else {\r\n        nodeLabels\r\n          .transition()\r\n          .duration(this.animation)\r\n          .attr(\"transform\", l => `rotate(${(((l.x / Math.PI) * 180) % 180) - 90})`)\r\n          .attr(\"text-anchor\", l => l.x % (2 * Math.PI) > Math.PI ? \"end\" : \"start\")\r\n          .attr(\"x\", l => (l.x % (2 * Math.PI) > Math.PI ? -5 : 5));\r\n      }\r\n\r\n      newNodes\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 1);\r\n    },\r\n    update => {\r\n      let nodeTransformer = nodeTransformers[this.type][this.layout];\r\n      update\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"transform\", nodeTransformer);\r\n\r\n      let nodeGlyphs = update.select(\"circle\");\r\n      nodeGlyphs.style(\"fill\", d => findNodeColor(d, this.colorOptions));      \r\n\r\n      let nodeLabels = update.select(\"text\");\r\n      if (this.layout === \"vertical\") {\r\n        nodeLabels\r\n          .attr(\"text-anchor\", \"start\")\r\n          .attr(\"x\", 5)\r\n          .transition()\r\n          .duration(this.animation)\r\n          .attr(\"transform\", \"rotate(90)\");\r\n      } else if (this.layout === \"horizontal\") {\r\n        nodeLabels\r\n          .attr(\"text-anchor\", \"start\")\r\n          .attr(\"x\", 5)\r\n          .transition()\r\n          .duration(this.animation)\r\n          .attr(\"transform\", \"rotate(0)\");\r\n      } else {\r\n        nodeLabels\r\n          .transition()\r\n          .duration(this.animation)\r\n          .attr(\"transform\", l => `rotate(${(((l.x / Math.PI) * 180) % 180) - 90})`)\r\n          .attr(\"text-anchor\", l => l.x % (2 * Math.PI) > Math.PI ? \"end\" : \"start\")\r\n          .attr(\"x\", l => (l.x % (2 * Math.PI) > Math.PI ? -5 : 5));\r\n      }\r\n    },\r\n    exit =>\r\n      exit\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 0)\r\n        .remove()\r\n  );\r\n\r\n  updateRuler.call(this);\r\n\r\n  return this;\r\n};\r\n\r\nfunction updateRuler(transform) {\r\n  if (!transform) transform = { k: 1 };\r\n  let height = parseFloat(this.parent.style(\"height\")) - this.margin[2] - 15;\r\n  let ruler = this.parent.select(\"g.tidytree-ruler\");\r\n  let bg = ruler.select(\"rect\");\r\n  if (this.ruler) {\r\n    if (this.layout == \"horizontal\") {\r\n      ruler.attr(\"transform\", `translate(${this.margin[3]}, ${height})`);\r\n      bg\r\n        .attr(\"width\", `calc(100% - ${this.margin[1] + this.margin[3] - 15}px)`)\r\n        .attr(\"height\", \"25px\")\r\n        .attr(\"x\", -5);\r\n    } else {\r\n      ruler.attr(\"transform\", `translate(${this.margin[3] - 10}, ${this.margin[0]})`);\r\n      bg\r\n        .attr(\"height\", `calc(100% - ${this.margin[0] + this.margin[2] - 15}px)`)\r\n        .attr(\"width\", \"25px\")\r\n        .attr(\"x\", -25);\r\n    }\r\n    let axis = this.layout == \"horizontal\" ? d3.axisBottom() : d3.axisLeft();\r\n    if (this.type === \"tree\" && this.layout !== \"circular\") {\r\n      ruler\r\n        .attr(\"opacity\", 1)\r\n        .call(\r\n          axis.scale(\r\n            d3.scaleLinear(\r\n              [0, this.hierarchy.height / transform.k],\r\n              [0, this.scalar]\r\n            )\r\n          )\r\n        );\r\n    } else if (this.type === \"weighted\" && this.layout !== \"circular\") {\r\n      ruler\r\n        .attr(\"opacity\", 1)\r\n        .call(\r\n          axis.scale(\r\n            d3.scaleLinear(\r\n              [this.range[0], this.range[1] / transform.k],\r\n              [0, this.scalar]\r\n            )\r\n          )\r\n        );\r\n    } else {\r\n      ruler\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 0);\r\n    }\r\n  } else {\r\n    ruler\r\n      .transition()\r\n      .duration(this.animation)\r\n      .attr(\"opacity\", 0);\r\n  }\r\n}\r\n\r\n/**\r\n * Recenters the tree in the center of the view\r\n * @return {TidyTree} The TidyTree object\r\n */\r\nTidyTree.prototype.recenter = function () {\r\n  let svg = this.parent.select(\"svg\"),\r\n    x = this.margin[0],\r\n    y = this.margin[3];\r\n  if (this.layout === \"circular\") {\r\n    x += parseFloat(svg.style(\"width\")) / 2;\r\n    y += parseFloat(svg.style(\"height\")) / 2;\r\n  }\r\n  svg\r\n    .transition()\r\n    .duration(this.animation)\r\n    .call(this.zoom.transform, d3.zoomIdentity.translate(x, y));\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's layout\r\n * @param {String} newLayout The new layout\r\n * @return {TidyTree} The TidyTree Object\r\n */\r\nTidyTree.prototype.setLayout = function (newLayout) {\r\n  if (!TidyTree.validLayouts.includes(newLayout)) {\r\n    throw Error(`\r\n      Cannot set TidyTree to layout: ${newLayout}\\n\r\n      Valid layouts are: ${TidyTree.validLayouts.join(', ')}\r\n    `);\r\n  }\r\n  this.layout = newLayout;\r\n  if (this.parent) return this.redraw();\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's colorOptions\r\n * @param {Object} newColorOptions The new colorOptions\r\n * @return {TidyTree} The TidyTree Object\r\n */\r\nTidyTree.prototype.setColorOptions = function (newColorOptions) {\r\n  if (!TidyTree.validNodeColorModes.includes(newColorOptions.nodeColorMode)) {\r\n    throw Error(`\r\n      Cannot set TidyTree colorOptions: ${newColorOptions.nodeColorMode}\\n\r\n      Valid nodeColorModes are: ${TidyTree.validNodeColorModes.join(', ')}\r\n    `);\r\n  }\r\n  if (!TidyTree.validBranchColorModes.includes(newColorOptions.branchColorMode)) {\r\n    throw Error(`\r\n      Cannot set TidyTree colorOptions: ${newColorOptions.branchColorMode}\\n\r\n      Valid branchColorModes are: ${TidyTree.validBranchColorModes.join(', ')}\r\n    `);\r\n  }\r\n\r\n  if (newColorOptions.nodeColorMode === 'list') {\r\n    if (!Array.isArray(newColorOptions.nodeList)) {\r\n      throw Error('nodeList must be an array for nodeColorMode \"list\"');\r\n    }\r\n  } else {\r\n    // nodeColorMode === 'none'\r\n    if (newColorOptions.branchColorMode !== 'none') {\r\n      throw Error('branchColorMode must be \"none\" for nodeColorMode \"none\"');\r\n    }\r\n  }\r\n\r\n  this.colorOptions = newColorOptions;\r\n  if (this.parent) return this.redraw();\r\n  return this;\r\n}\r\n\r\n/**\r\n * Set the TidyTree's mode\r\n * @param {String} newMode The new mode\r\n * @return {TidyTree} The TidyTree object\r\n */\r\nTidyTree.prototype.setMode = function (newMode) {\r\n  if (!TidyTree.validModes.includes(newMode)) {\r\n    throw Error(`\r\n      Cannot set TidyTree to mode: ${newMode},\\n\r\n      Valid modes are: ${TidyTree.validModes.join(', ')}\r\n    `);\r\n  }\r\n  this.mode = newMode;\r\n  if (this.parent) return this.redraw();\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's type\r\n * @param {Boolean} newType The new type\r\n * @return {TidyTree} the TidyTree object\r\n */\r\nTidyTree.prototype.setType = function (newType) {\r\n  if (!TidyTree.validTypes.includes(newType)) {\r\n    throw Error(`\r\n      Cannot set TidyTree to type: ${newType},\\n\r\n      Valid types are: ${TidyTree.validTypes.join(', ')}\r\n    `);\r\n  }\r\n  this.type = newType;\r\n  if (this.parent) return this.redraw();\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's rotation\r\n * @param {Number} degrees The new number of degrees by which to rotate the tree\r\n * @return {TidyTree} the TidyTree object\r\n */\r\nTidyTree.prototype.setRotation = function (degrees) {\r\n  this.rotation = degrees;\r\n  if (this.parent)\r\n    this.parent\r\n      .select(\"svg g\")\r\n      .attr(\"transform\", `\r\n        translate(${this.transform.x},${this.transform.y})\r\n        scale(${this.transform.k})\r\n        rotate(${this.rotation},\r\n          ${this.layout === \"circular\" ? 0 : this.width / 2},\r\n          ${this.layout === \"circular\" ? 0 : this.height / 2}\r\n        )\r\n      `);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's Horizontal Stretch\r\n * @param {Number} proportion The new proportion by which to stretch the tree\r\n * @return {TidyTree} the TidyTree object\r\n */\r\nTidyTree.prototype.setHStretch = function (proportion) {\r\n  this.hStretch = parseFloat(proportion);\r\n  if (this.parent) {\r\n    let animCache = this.animation;\r\n    this.setAnimation(0);\r\n    this.redraw();\r\n    this.setAnimation(animCache);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's Vertical Stretch\r\n * @param {Number} proportion The new proportion by which to stretch the tree\r\n * @return {TidyTree} the TidyTree object\r\n */\r\nTidyTree.prototype.setVStretch = function (proportion) {\r\n  this.vStretch = parseFloat(proportion);\r\n  if (this.parent) {\r\n    let animCache = this.animation;\r\n    this.setAnimation(0);\r\n    this.redraw();\r\n    this.setAnimation(animCache);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's animation time. Note that this does not trigger a\r\n * redraw.\r\n * @param {number} time The desired duration of an animation, in ms. Set to 0\r\n * to turn animations off completely.\r\n * @return {TidyTree} The TidyTree object\r\n */\r\nTidyTree.prototype.setAnimation = function (time) {\r\n  this.animation = time;\r\n  return this;\r\n};\r\n\r\n/**\r\n * Shows or hides the Branch Nodes\r\n * @param  {Boolean} show Should Branch nodes be shown?\r\n * @return {TidyTree} the TidyTree object\r\n */\r\nTidyTree.prototype.setBranchNodes = function (show) {\r\n  this.branchNodes = show ? true : false;\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    this.parent\r\n      .select(\"svg\")\r\n      .selectAll(\"g.tidytree-node-internal circle\")\r\n      .transition()\r\n      .duration(this.animation)\r\n      .style(\"opacity\", show ? 1 : 0);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Restyles Leaf Nodes\r\n * @param  {Function} styler A function that restyles each node. `styler`\r\n * receives a reference to the DOM node to be styled, and an associated data\r\n * object.\r\n * @return {TidyTree} the TidyTree Object\r\n */\r\nTidyTree.prototype.eachBranchNode = function (styler) {\r\n  if (!this.parent)\r\n    throw Error(\r\n      \"Tree has not been rendered yet! Can't style Nodes that don't exist!\"\r\n    );\r\n  this.parent\r\n    .select(\"svg\")\r\n    .selectAll(\"g.tidytree-node-internal circle\")\r\n    .each(function (d) { styler(this, d); });\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's branchLabels\r\n * @param  {Boolean} show Should the TidyTree show branchLabels?\r\n * @return {TidyTree}     the TidyTree Object\r\n */\r\nTidyTree.prototype.setBranchLabels = function (show) {\r\n  this.branchLabels = show ? true : false;\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    this.parent\r\n      .select(\"svg\")\r\n      .selectAll(\"g.tidytree-node-internal text\")\r\n      .transition()\r\n      .duration(this.animation)\r\n      .style(\"opacity\", show ? 1 : 0);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Restyles Branch Label\r\n * @param  {Function} styler A function that restyles each node. `styler`\r\n * receives a reference to the DOM node to be styled, and an associated data\r\n * object.\r\n * @return {TidyTree} the TidyTree Object\r\n */\r\nTidyTree.prototype.eachBranchLabel = function (styler) {\r\n  if (!this.parent){\r\n    throw Error(\"Tree has not been rendered yet! Can't style Nodes that don't exist!\");\r\n  }\r\n  this.parent\r\n    .select(\"svg\")\r\n    .selectAll(\"g.tidytree-node-internal text\")\r\n    .each(function (d, i, l) { styler(this, d); });\r\n  return this;\r\n};\r\n\r\n/**\r\n * Shows or hides the TidyTree's branch labels\r\n * @param {Boolean} show Should the TidyTree show branch distances?\r\n * @return {TidyTree} The TidyTree Object\r\n */\r\nTidyTree.prototype.setBranchDistances = function (show) {\r\n  this.branchDistances = show ? true : false;\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    let links = this.parent\r\n      .select(\"svg g.tidytree-links\")\r\n      .selectAll(\"g.tidytree-link\")\r\n      .selectAll(\"text\");\r\n    links.attr(\"transform\", labelTransformers[this.type][this.mode][this.layout]);\r\n    links\r\n      .transition()\r\n      .duration(this.animation)\r\n      .style(\"opacity\", show ? 1 : 0);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Restyles Branch Distances\r\n * @param  {Function} styler A function that restyles each node. `styler`\r\n * receives a reference to the DOM node to be styled, and an associated data\r\n * object.\r\n * @return {TidyTree} the TidyTree Object\r\n */\r\nTidyTree.prototype.eachBranchDistance = function (styler) {\r\n  if (!this.parent)\r\n    throw Error(\"Tree has not been rendered yet! Can't style Nodes that don't exist!\");\r\n  this.parent\r\n    .select(\"svg g.tidytree-links\")\r\n    .selectAll(\"g.tidytree-link\")\r\n    .selectAll(\"text\")\r\n    .each(function (d, i, l) { styler(this, d); });\r\n  return this;\r\n};\r\n\r\n/**\r\n * Shows or Hides the Leaf Nodes\r\n * @param  {Boolean} show Should leaf nodes be visible?\r\n * @return {TidyTree} The TidyTree Object\r\n */\r\nTidyTree.prototype.setLeafNodes = function (show) {\r\n  this.leafNodes = show ? true : false;\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    this.parent\r\n      .select(\"svg\")\r\n      .selectAll(\"g.tidytree-node-leaf circle\")\r\n      .transition()\r\n      .duration(this.animation)\r\n      .style(\"opacity\", show ? 1 : 0);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Restyles Leaf Nodes\r\n * @param  {Function} styler A function that restyles each node. `styler`\r\n * receives a reference to the DOM node to be styled, and an associated data\r\n * object.\r\n * @return {TidyTree} the TidyTree Object\r\n */\r\nTidyTree.prototype.eachLeafNode = function (styler) {\r\n  if (!this.parent){\r\n    throw Error(\"Tree has not been rendered yet! Can't style Nodes that don't exist!\");\r\n  }\r\n  this.parent\r\n    .select(\"svg\")\r\n    .selectAll(\"g.tidytree-node-leaf circle\")\r\n    .each(function (d) {\r\n      styler(this, d);\r\n    });\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set the TidyTree's leaves to be equidistant\r\n */\r\nTidyTree.prototype.setEquidistantLeaves = function (isEquidistant) {\r\n  this.equidistantLeaves = isEquidistant ? true : false;\r\n\r\n  if (this.parent) return this.redraw();\r\n  return this;\r\n}\r\n\r\n/**\r\n * Shows or Hides the TidyTree's Leaf Labels\r\n * @param  {Boolean} show Should the TidyTree show leafLabels?\r\n * @return {TidyTree}     the TidyTree Object\r\n */\r\nTidyTree.prototype.setLeafLabels = function (show) {\r\n  this.leafLabels = show ? true : false;\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    this.parent\r\n      .select(\"svg\")\r\n      .selectAll(\"g.tidytree-node-leaf text\")\r\n      .transition()\r\n      .duration(this.animation)\r\n      .style(\"opacity\", show ? 1 : 0);\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Restyles Leaf Labels\r\n * @param  {Function} styler A function that restyles each node. `styler`\r\n * receives a reference to the DOM node to be styled, and an associated data\r\n * object.\r\n * @return {TidyTree} the TidyTree Object\r\n */\r\nTidyTree.prototype.eachLeafLabel = function (styler) {\r\n  if (!this.parent){\r\n    throw Error(\"Tree has not been rendered yet! Can't style Nodes that don't exist!\");\r\n  }\r\n  this.parent\r\n    .select(\"svg\")\r\n    .selectAll(\"g.tidytree-node-leaf text\")\r\n    .each(function (d) { styler(this, d); });\r\n  return this;\r\n};\r\n\r\n/**\r\n * Shows or hides the TidyTree's branch labels\r\n * @param {Boolean} show Should the TidyTree show branchLabels?\r\n * @return {TidyTree} The TidyTree Object\r\n */\r\nTidyTree.prototype.setRuler = function (show) {\r\n  this.ruler = show ? true : false;\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    if (show) {\r\n      this.parent\r\n        .select(\"g.tidytree-ruler\")\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 1);\r\n    } else {\r\n      this.parent\r\n        .select(\"g.tidytree-ruler\")\r\n        .transition()\r\n        .duration(this.animation)\r\n        .attr(\"opacity\", 0);\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Retrieves the GUIDs of the nodes in the TidyTree instance.\r\n *\r\n * @param {boolean} leavesOnly - Whether to retrieve GUIDs only for leaf nodes.\r\n * @param {function} predicate - A function that returns true if the node should be included\r\n * @return {Array} An array of GUIDs of the nodes.\r\n */\r\nTidyTree.prototype.getNodeGUIDs = function (leavesOnly, predicate) {\r\n  let nodeList = this.parent\r\n    .select(\"svg\")\r\n    .selectAll(\"g.tidytree-node-leaf circle\")\r\n    ._groups[0];\r\n\r\n  if (!leavesOnly) {\r\n    nodeList = this.parent\r\n      .select(\"svg\")\r\n      .selectAll(\"g.tidytree-node-leaf circle, g.tidytree-node-internal circle\")\r\n      ._groups[0];\r\n  }\r\n\r\n  let nodeGUIDs = [];\r\n  for (const node of nodeList.values()) {\r\n    if (!predicate || predicate(node)) {\r\n      nodeGUIDs.push(node.__data__.data._guid);\r\n    }\r\n  }\r\n\r\n  return nodeGUIDs;\r\n}\r\n\r\n/**\r\n * Searches the tree, returns Search Results\r\n * @param  {Function} test A function which takes a Branch and returns a Truthy\r\n * or Falsy value.\r\n * @return {Array} The array of results\r\n */\r\nTidyTree.prototype.search = function (test) {\r\n  if (!test) return;\r\n  let results = this.parent\r\n    .select(\"svg g.tidytree-nodes\")\r\n    .selectAll(\"g.tidytree-node\")\r\n    .filter(test);\r\n  if (this.events.search.length) this.events.search.forEach(c => c(results));\r\n  return results;\r\n};\r\n\r\n/**\r\n * Attaches a new event listener\r\n * Please note that this is not yet functioning.\r\n * @param  {String}   events   A space-delimited list of event names\r\n * @param  {Function} callback The function to run when one of the `events` occurs.\r\n * @return {TidyTree} The TidyTree on which this method was called.\r\n */\r\nTidyTree.prototype.on = function (events, callback) {\r\n  events.split(\" \").forEach(event => this.events[event].push(callback));\r\n  return this;\r\n};\r\n\r\n/**\r\n * Removes all event listeners from the given events\r\n * @param  {String}   events   A space-delimited list of event names\r\n * @return {TidyTree} The TidyTree on which this method was called.\r\n */\r\nTidyTree.prototype.off = function (events) {\r\n  events.split(\" \").forEach(event => (this.events[event] = []));\r\n  return this;\r\n};\r\n\r\n/**\r\n * Forces the tree to respond as though an `event` has occurred\r\n * @param  {String} events space-delimited list of names of events to trigger.\r\n * @param  {Spread} args Any arguments which should be passed to the event\r\n * handler(s).\r\n * @return The output of the callback run on `event`\r\n */\r\nTidyTree.prototype.trigger = function (events, ...args) {\r\n  return events.split(\" \").map(event => {\r\n    if (this.events[event].length)\r\n      return this.events[event].map(handler => handler(args));\r\n    return [];\r\n  });\r\n};\r\n\r\n/**\r\n * Destroys the TidyTree\r\n * @return {undefined}\r\n */\r\nTidyTree.prototype.destroy = function () {\r\n  if (this.parent) {\r\n    //i.e. has already been drawn\r\n    this.parent.html(null);\r\n  }\r\n  delete this; //Go to work, GC!\r\n};\r\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n    :host {\n      height: 100%;\n      width: 100%;\n      padding: 0;\n      display: block;\n      position: relative;\n    }\n    `, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/golden-layout-host.component.ts\"],\"names\":[],\"mappings\":\";IACI;MACE,YAAY;MACZ,WAAW;MACX,UAAU;MACV,cAAc;MACd,kBAAkB;IACpB\",\"sourcesContent\":[\"\\n    :host {\\n      height: 100%;\\n      width: 100%;\\n      padding: 0;\\n      display: block;\\n      position: relative;\\n    }\\n    \"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mapStyle{\r\n    height:100%;\r\n    width:100%;\r\n    /* height:calc(100vh - 350px); */\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    z-index: 1;\r\n    /* position: sticky !important; */\r\n}\r\n\r\n:host {\r\n  position: absolute;\r\n  overflow: hidden;\r\n  z-index: 1 !important;\r\n}\r\n\r\n.map-container {\r\n  height: 100%;\r\n  width: 100%;\r\n  position: relative;\r\n}\r\n\r\n\r\n#mapTooltip {\r\n    color:#333333;\r\n    background:#f5f5f5;\r\n    border:1px solid #cccccc;\r\n    border-radius:.25rem;\r\n    padding:.25rem;\r\n  }\r\n\r\n  .bottom-table{\r\n    font-size: calc((.5vmax));   \r\n}\r\n\r\n.OSM-credit {\r\n  position: absolute;\r\n  bottom: 7px;\r\n  left: 50px;\r\n  z-index: 2;\r\n}\r\n\r\n.OSM-credit a {\r\n  color: #4e8bb7 !important;\r\n  text-decoration: underline !important;\r\n  cursor: pointer !important;\r\n}\r\n\r\n /* Button appearance on hover */\r\n .btn-icon:hover {\r\n  transform: scale(1.1); /* Slight enlarge on hover */\r\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\r\n}\r\n\r\n.btn-icon {\r\n  margin-right: 10px;\r\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\r\n  background: white;\r\n}\r\n\r\n.flaticon-settings:before {\r\n  font-weight: 800 !important;\r\n}\r\n\r\n\r\n.flaticon-download:before {\r\n  font-weight: 800 !important;\r\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/MapComponent/map-plugin.component.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,WAAW;IACX,UAAU;IACV,gCAAgC;IAChC,kBAAkB;IAClB,MAAM;IACN,SAAS;IACT,OAAO;IACP,QAAQ;IACR,UAAU;IACV,iCAAiC;AACrC;;AAEA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,qBAAqB;AACvB;;AAEA;EACE,YAAY;EACZ,WAAW;EACX,kBAAkB;AACpB;;;AAGA;IACI,aAAa;IACb,kBAAkB;IAClB,wBAAwB;IACxB,oBAAoB;IACpB,cAAc;EAChB;;EAEA;IACE,yBAAyB;AAC7B;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,UAAU;EACV,UAAU;AACZ;;AAEA;EACE,yBAAyB;EACzB,qCAAqC;EACrC,0BAA0B;AAC5B;;CAEC,+BAA+B;CAC/B;EACC,qBAAqB,EAAE,4BAA4B;EACnD,oCAAoC,EAAE,qCAAqC;AAC7E;;AAEA;EACE,kBAAkB;EAClB,0CAA0C;EAC1C,iBAAiB;AACnB;;AAEA;EACE,2BAA2B;AAC7B;;;AAGA;EACE,2BAA2B;AAC7B\",\"sourcesContent\":[\".mapStyle{\\r\\n    height:100%;\\r\\n    width:100%;\\r\\n    /* height:calc(100vh - 350px); */\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    bottom: 0;\\r\\n    left: 0;\\r\\n    right: 0;\\r\\n    z-index: 1;\\r\\n    /* position: sticky !important; */\\r\\n}\\r\\n\\r\\n:host {\\r\\n  position: absolute;\\r\\n  overflow: hidden;\\r\\n  z-index: 1 !important;\\r\\n}\\r\\n\\r\\n.map-container {\\r\\n  height: 100%;\\r\\n  width: 100%;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n\\r\\n#mapTooltip {\\r\\n    color:#333333;\\r\\n    background:#f5f5f5;\\r\\n    border:1px solid #cccccc;\\r\\n    border-radius:.25rem;\\r\\n    padding:.25rem;\\r\\n  }\\r\\n\\r\\n  .bottom-table{\\r\\n    font-size: calc((.5vmax));   \\r\\n}\\r\\n\\r\\n.OSM-credit {\\r\\n  position: absolute;\\r\\n  bottom: 7px;\\r\\n  left: 50px;\\r\\n  z-index: 2;\\r\\n}\\r\\n\\r\\n.OSM-credit a {\\r\\n  color: #4e8bb7 !important;\\r\\n  text-decoration: underline !important;\\r\\n  cursor: pointer !important;\\r\\n}\\r\\n\\r\\n /* Button appearance on hover */\\r\\n .btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n\\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n  background: white;\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `#main-tabset {\n  height: 100%;\n}\n\n#phylocanvas {\n  height: 100%;\n}\n\nbody .ui-tabview {\n  height: 100% !important;\n}\n\nbody .ui-tabview .ui-tabview-panels {\n  height: 100% !important;\n}\n\nbody .ui-tabview .ui-tabview-panels .ui-tabview-panel {\n  height: 100% !important;\n}\n\n:root {\n  --vis-graph-node-label-background: black;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/app.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,YAAA;AACJ;;AACA;EACI,YAAA;AAEJ;;AAAA;EACI,uBAAA;AAGJ;;AADA;EACI,uBAAA;AAIJ;;AAFA;EACI,uBAAA;AAKJ;;AAFA;EACI,wCAAA;AAKJ\",\"sourcesContent\":[\"#main-tabset {\\r\\n    height: 100%;\\r\\n}\\r\\n#phylocanvas {\\r\\n    height: 100%;\\r\\n}\\r\\nbody .ui-tabview {\\r\\n    height: 100% !important;\\r\\n}\\r\\nbody .ui-tabview .ui-tabview-panels {\\r\\n    height: 100% !important;\\r\\n}\\r\\nbody .ui-tabview .ui-tabview-panels .ui-tabview-panel {\\r\\n    height: 100% !important;\\r\\n}\\r\\n\\r\\n:root {\\r\\n    --vis-graph-node-label-background: black;\\r\\n  }\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n  padding: 1px;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n.aggregate-wrapper {\n  padding: 50px 20px 5px 20px;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n\n#tablesContainer p-table {\n  border: 2px solid #555555;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/AggregateComponent/aggregate.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;EACA,YAAA;AACJ;;AAII;EACE,SAAA;EACA,gBAAA;AADN;AAMI;EACE,uBAAA;EACA,yBAAA;AAJN;;AAQA;EACE,2BAAA;AALF;;AAQA,+BAAA;AACA;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AALF;;AAQA;EACE,kBAAA;EACA,0CAAA;AALF;;AAQA;EACE,2BAAA;AALF;;AAQA;EACE,2BAAA;AALF;;AAQA;EACE,2BAAA;AALF;;AAQA;EACE,yBAAA;AALF\",\"sourcesContent\":[\":host {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    z-index: 1 !important;\\r\\n    padding: 1px; \\r\\n}\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n.aggregate-wrapper {\\r\\n  padding: 50px 20px 5px 20px;\\r\\n}\\r\\n\\r\\n/* Button appearance on hover */\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n    \\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n#tablesContainer p-table {\\r\\n  border: 2px solid #555555;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n  padding: 1px;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n\n.msa-viewer-container {\n  position: relative;\n  top: 50px;\n  left: 5px;\n  padding-right: 5px;\n}\n\n#msa-viewer {\n  overflow-y: hidden;\n  overflow-x: hidden;\n  display: flex;\n  gap: 5px;\n}\n\n.title {\n  font-size: 24px;\n  text-align: right;\n  padding-right: 20px;\n}\n\n.canvasLabels {\n  overflow-y: auto;\n  overflow-x: hidden;\n  position: relative;\n}\n\n#searchHighlight {\n  width: 1500px;\n  position: absolute;\n  height: 10px;\n  top: 0px;\n  left: 0px;\n  border: red 2px dotted;\n}\n\n#searchHighlightHolder {\n  width: 250px;\n}\n\n.searchHighlight2 {\n  background-color: #E3F2FD;\n}\n\n.triangle {\n  width: 10px;\n  position: relative;\n  left: 42px;\n  border-left: 8px transparent solid;\n  border-right: 8px transparent solid;\n  border-bottom: 16px lightgray solid;\n}\n\n#tooltipHolder {\n  display: none;\n}\n\n#tooltipAlign {\n  background-color: lightgray;\n  padding: 5px;\n  display: block;\n}\n\n.canvasHolder {\n  overflow-x: auto;\n  overflow-y: scroll;\n}\n\n#alignmentTop {\n  overflow-x: auto;\n  height: 160px;\n}\n\n.alignRow {\n  display: flex;\n}\n\n.alignName {\n  width: 200px;\n  margin-right: 5px;\n  flex: none;\n}\n\n#miniMapHolder {\n  padding: 5px 10px;\n  border: 3px black solid;\n  background-color: white;\n  margin-bottom: 10px;\n}\n\n#miniMap {\n  position: relative;\n}\n\n#miniMapTitle {\n  margin-bottom: 10px;\n}\n\n#miniMapHighlight {\n  display: none;\n  background-color: rgba(128, 128, 128, 0.4);\n  position: absolute;\n}\n\n.customColorSchemeSelection div {\n  justify-content: space-around;\n}\n\n.customColorSchemeSelection label {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.customColorSchemeSelection input {\n  width: 46.63px;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/AlignmentViewComponent/alignment-view-plugin-component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;EACA,YAAA;AACJ;;AAKI;EACE,SAAA;EACA,gBAAA;AAFN;AAOI;EACE,uBAAA;EACA,yBAAA;AALN;;AAUI,+BAAA;AACJ;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AAPF;;AAUA;EACE,kBAAA;EACA,0CAAA;AAPF;;AAUA;EACE,2BAAA;AAPF;;AAUA;EACE,2BAAA;AAPF;;AAUA;EACE,2BAAA;AAPF;;AAUA;EACE,kBAAA;EACA,SAAA;EACA,SAAA;EACA,kBAAA;AAPF;;AAUA;EACE,kBAAA;EACA,kBAAA;EACA,aAAA;EACA,QAAA;AAPF;;AAUA;EACE,eAAA;EACA,iBAAA;EACA,mBAAA;AAPF;;AAUA;EACE,gBAAA;EACA,kBAAA;EACA,kBAAA;AAPF;;AAUA;EACE,aAAA;EACA,kBAAA;EACA,YAAA;EACA,QAAA;EACA,SAAA;EACA,sBAAA;AAPF;;AAUA;EACE,YAAA;AAPF;;AAUA;EACE,yBAAA;AAPF;;AAUA;EACE,WAAA;EACA,kBAAA;EACA,UAAA;EACA,kCAAA;EACA,mCAAA;EACA,mCAAA;AAPF;;AAUA;EACE,aAAA;AAPF;;AAUA;EACE,2BAAA;EACA,YAAA;EACA,cAAA;AAPF;;AAUA;EACE,gBAAA;EACA,kBAAA;AAPF;;AAUA;EACE,gBAAA;EACA,aAAA;AAPF;;AAUA;EACE,aAAA;AAPF;;AAUA;EACE,YAAA;EACA,iBAAA;EACA,UAAA;AAPF;;AAUA;EACE,iBAAA;EACA,uBAAA;EACA,uBAAA;EACA,mBAAA;AAPF;;AAUA;EACE,kBAAA;AAPF;;AAUA;EACE,mBAAA;AAPF;;AAUA;EACE,aAAA;EACA,0CAAA;EACA,kBAAA;AAPF;;AAUA;EACE,6BAAA;AAPF;;AAUA;EACE,aAAA;EACA,mBAAA;EACA,SAAA;AAPF;;AAUA;EACE,cAAA;AAPF\",\"sourcesContent\":[\":host {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    z-index: 1 !important;\\r\\n    padding: 1px; \\r\\n    //background-color: rgb(168, 125, 211, .2);\\r\\n}\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n    /* Button appearance on hover */\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n\\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.msa-viewer-container {\\r\\n  position: relative;\\r\\n  top: 50px;\\r\\n  left: 5px;\\r\\n  padding-right: 5px;\\r\\n}\\r\\n\\r\\n#msa-viewer {\\r\\n  overflow-y: hidden;\\r\\n  overflow-x: hidden;\\r\\n  display: flex;\\r\\n  gap: 5px;\\r\\n}\\r\\n\\r\\n.title {\\r\\n  font-size: 24px;\\r\\n  text-align: right;\\r\\n  padding-right: 20px;\\r\\n}\\r\\n\\r\\n.canvasLabels {\\r\\n  overflow-y: auto;\\r\\n  overflow-x: hidden;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n#searchHighlight {\\r\\n  width: 1500px;\\r\\n  position: absolute;\\r\\n  height: 10px;\\r\\n  top: 0px;\\r\\n  left: 0px;\\r\\n  border: red 2px dotted;\\r\\n}\\r\\n\\r\\n#searchHighlightHolder{\\r\\n  width: 250px;\\r\\n}\\r\\n\\r\\n.searchHighlight2 {\\r\\n  background-color: #E3F2FD;\\r\\n}\\r\\n\\r\\n.triangle {\\r\\n  width: 10px;\\r\\n  position: relative;\\r\\n  left: 42px;\\r\\n  border-left: 8px transparent solid;\\r\\n  border-right: 8px transparent solid;\\r\\n  border-bottom: 16px lightgray solid;\\r\\n}\\r\\n\\r\\n#tooltipHolder {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n#tooltipAlign {\\r\\n  background-color: lightgray; \\r\\n  padding: 5px;\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.canvasHolder {\\r\\n  overflow-x: auto;\\r\\n  overflow-y: scroll;\\r\\n}\\r\\n\\r\\n#alignmentTop {\\r\\n  overflow-x: auto;\\r\\n  height: 160px;\\r\\n}\\r\\n\\r\\n.alignRow {\\r\\n  display: flex;\\r\\n}\\r\\n\\r\\n.alignName {\\r\\n  width: 200px;\\r\\n  margin-right: 5px;\\r\\n  flex: none;\\r\\n}\\r\\n\\r\\n#miniMapHolder {\\r\\n  padding: 5px 10px;\\r\\n  border: 3px black solid;\\r\\n  background-color: white;\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n#miniMap {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n#miniMapTitle{\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\n#miniMapHighlight {\\r\\n  display: none;\\r\\n  background-color: rgb(gray, .4);\\r\\n  position: absolute;\\r\\n}\\r\\n\\r\\n.customColorSchemeSelection div {\\r\\n  justify-content: space-around;\\r\\n}\\r\\n\\r\\n.customColorSchemeSelection label {\\r\\n  display: flex; \\r\\n  align-items: center;\\r\\n  gap:10px;\\r\\n}\\r\\n\\r\\n.customColorSchemeSelection input {\\r\\n  width: 46.63px\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n  padding: 1px;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n.bubble-wrapper {\n  padding: 50px 20px 5px 20px;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/BubbleComponent/bubble.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;EACA,YAAA;AACJ;;AAII;EACE,SAAA;EACA,gBAAA;AADN;AAMI;EACE,uBAAA;EACA,yBAAA;AAJN;;AAQA;EACE,2BAAA;AALF;;AAQA,+BAAA;AACA;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AALF;;AAQA;EACE,kBAAA;EACA,0CAAA;AALF;;AAQA;EACE,2BAAA;AALF;;AAQA;EACE,2BAAA;AALF;;AAQA;EACE,2BAAA;AALF\",\"sourcesContent\":[\":host {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    z-index: 1 !important;\\r\\n    padding: 1px; \\r\\n}\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n.bubble-wrapper {\\r\\n  padding: 50px 20px 5px 20px;\\r\\n}\\r\\n\\r\\n/* Button appearance on hover */\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n    \\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n  padding: 1px;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n.crosstab-wrapper {\n  padding: 70px 20px 10px 20px;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n\np-table {\n  border: 2px solid #555555;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/CrosstabComponent/crosstab-plugin.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;EACA,YAAA;AACJ;;AAII;EACE,SAAA;EACA,gBAAA;AADN;AAMI;EACE,uBAAA;EACA,yBAAA;AAJN;;AAQA;EACE,4BAAA;AALF;;AAQA,+BAAA;AACA;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AALF;;AAQA;EACE,kBAAA;EACA,0CAAA;AALF;;AAQA;EACE,2BAAA;AALF;;AAQA;EACE,2BAAA;AALF;;AAQA;EACE,2BAAA;AALF;;AAQA;EACE,yBAAA;AALF\",\"sourcesContent\":[\":host {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    z-index: 1 !important;\\r\\n    padding: 1px; \\r\\n}\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n.crosstab-wrapper {\\r\\n  padding: 70px 20px 10px 20px;\\r\\n}\\r\\n\\r\\n/* Button appearance on hover */\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n    \\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\np-table {\\r\\n  border: 2px solid #555555;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.gantt-entry {\n  opacity: 0.8;\n}\n.gantt-entry:hover {\n  opacity: 1;\n}\n\n#component .tooltip {\n  visibility: hidden;\n}\n\n#component:hover .tooltip {\n  visibility: visible;\n  position: absolute;\n}\n\n#component:hover:after .tooltip {\n  position: relative;\n  left: 0;\n  top: 100%;\n  white-space: nowrap;\n}\n\n.tooltip text {\n  fill: #eeeeee;\n  font-size: 12px;\n  font-family: sans-serif;\n}\n\n.tooltip rect {\n  fill: #222222;\n  stroke: #111111;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/GanttComponent/gantt-chart/gantt-chart.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,YAAA;AACJ;AAAI;EACI,UAAA;AAER;;AACA;EACI,kBAAA;AAEJ;;AACC;EACE,mBAAA;EACA,kBAAA;AAEH;;AACC;EACC,kBAAA;EACA,OAAA;EACA,SAAA;EACA,mBAAA;AAEF;;AAEA;EACI,aAAA;EACA,eAAA;EACA,uBAAA;AACJ;;AAEG;EACC,aAAA;EACA,eAAA;AACJ\",\"sourcesContent\":[\".gantt-entry {\\r\\n    opacity: 0.8;\\r\\n    &:hover {\\r\\n        opacity: 1;\\r\\n    }\\r\\n}\\r\\n#component .tooltip {\\r\\n    visibility: hidden\\r\\n }\\r\\n \\r\\n #component:hover .tooltip {\\r\\n   visibility: visible;\\r\\n   position: absolute;\\r\\n  }\\r\\n \\r\\n #component:hover:after .tooltip{\\r\\n  position: relative;\\r\\n  left: 0;\\r\\n  top: 100%;\\r\\n  white-space: nowrap;\\r\\n }\\r\\n \\r\\n \\r\\n.tooltip text {\\r\\n    fill: #eeeeee;\\r\\n    font-size: 12px;\\r\\n    font-family: sans-serif; \\r\\n   }\\r\\n   \\r\\n   .tooltip rect {\\r\\n    fill: #222222;\\r\\n    stroke: #111111;\\r\\n   }\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n}\n\n#gantt {\n  background-color: #fff;\n}\n\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\np-dropdown {\n  overflow: visible !important;\n}\n\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/GanttComponent/gantt-plugin.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;AACJ;;AAEA;EACE,sBAAA;AACF;;AAII;EACE,uBAAA;EACA,yBAAA;AADN;;AAMA;EACI,4BAAA;AAHJ;;AAMA;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AAHF;;AAMA;EACE,kBAAA;EACA,0CAAA;AAHF;;AAMA;EACE,2BAAA;AAHF;;AAMA;EACE,2BAAA;AAHF;;AAMA;EACE,2BAAA;AAHF\",\"sourcesContent\":[\":host {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    z-index: 1 !important;\\r\\n  }\\r\\n\\r\\n#gantt {\\r\\n  background-color: #fff;\\r\\n}\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\np-dropdown {\\r\\n    overflow: visible !important;\\r\\n}\\r\\n\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n    \\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.dialogSize {\n  width: 30vw;\n  height: 150px;\n  min-width: 150px;\n}\n\n:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n  padding: 1px;\n  /*top: 37px !important;\n  left: 1px !important; \n  width: 99% !important; */\n}\n\n.p-component p-dropdown {\n  overflow: visible !important;\n}\n\n.network {\n  margin-top: 0 !important;\n  cursor: grab;\n}\n\n.ui-dropdown {\n  width: 100% !important;\n}\n\n.display-none {\n  display: none;\n}\n\n.bottom-table {\n  font-size: 0.5vmax;\n}\n\n#node-max-radius-row, #node-min-radius-row {\n  display: none;\n}\n\n.clusters path {\n  cursor: grab;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n\n#network-export-filetype {\n  overflow: visible !important;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/HeatmapComponent/heatmap.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,WAAA;EACA,aAAA;EACA,gBAAA;AACJ;;AAEA;EACE,kBAAA;EACA,gBAAA;EACA,qBAAA;EACA,YAAA;EACA;;0BAAA;AAGF;;AAEA;EACI,4BAAA;AACJ;;AAEA;EACE,wBAAA;EACA,YAAA;AACF;;AAEA;EACI,sBAAA;AACJ;;AAEA;EACE,aAAA;AACF;;AAEA;EACI,kBAAA;AACJ;;AAEA;EACE,aAAA;AACF;;AAEA;EAEI,YAAA;AACJ;;AAII;EACE,SAAA;EACA,gBAAA;AADN;AAMI;EACE,uBAAA;EACA,yBAAA;AAJN;;AASE,+BAAA;AACF;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AANF;;AASA;EACE,kBAAA;EACA,0CAAA;AANF;;AASA;EACE,2BAAA;AANF;;AASA;EACE,2BAAA;AANF;;AASA;EACE,2BAAA;AANF;;AASA;EACE,4BAAA;AANF\",\"sourcesContent\":[\".dialogSize{\\r\\n    width: 30vw;\\r\\n    height: 150px;\\r\\n    min-width: 150px;\\r\\n}\\r\\n\\r\\n:host {\\r\\n  position: absolute;\\r\\n  overflow: hidden;\\r\\n  z-index: 1 !important;\\r\\n  padding: 1px;\\r\\n  /*top: 37px !important;\\r\\n  left: 1px !important; \\r\\n  width: 99% !important; */ \\r\\n}\\r\\n\\r\\n.p-component p-dropdown {\\r\\n    overflow: visible !important;\\r\\n}\\r\\n\\r\\n.network {\\r\\n  margin-top: 0 !important;\\r\\n  cursor: grab;\\r\\n}\\r\\n\\r\\n.ui-dropdown {\\r\\n    width: 100% !important;\\r\\n}\\r\\n\\r\\n.display-none {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.bottom-table{\\r\\n    font-size: calc((.5vmax));   \\r\\n}\\r\\n\\r\\n#node-max-radius-row, #node-min-radius-row {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.clusters path {\\r\\n    cursor: -webkit-grab;\\r\\n    cursor: grab;\\r\\n  }\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n  /* Button appearance on hover */\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n\\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n#network-export-filetype {\\r\\n  overflow: visible !important;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/*\n * phylogenetic-plugin.component.css\n * Copyright (C) 2022 ylb9\n *\n * Distributed under terms of the MIT license.\n */\n#phylocanavas {\n  height: 100%;\n}\n\n:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n}\n\n#phyloTooltip {\n  position: absolute;\n  background: lightgray;\n  border-radius: 0.25rem;\n  padding: 0.25rem;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n  background: white;\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/PhylogeneticComponent/phylogenetic-plugin.component.scss\"],\"names\":[],\"mappings\":\"AAAA;;;;;EAAA;AAOA;EACI,YAAA;AAAJ;;AAGA;EACE,kBAAA;EACA,gBAAA;EACA,qBAAA;AAAF;;AAGA;EACI,kBAAA;EACA,qBAAA;EACA,sBAAA;EACA,gBAAA;AAAJ;;AAKI;EACE,SAAA;EACA,gBAAA;AAFN;AAOI;EACE,uBAAA;EACA,yBAAA;AALN;;AAUC,+BAAA;AACA;EACC,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AAPF;;AAUA;EACE,kBAAA;EACA,0CAAA;EACA,iBAAA;AAPF;;AAUA;EACE,2BAAA;AAPF;;AAWA;EACE,2BAAA;AARF\",\"sourcesContent\":[\"/*\\r\\n * phylogenetic-plugin.component.css\\r\\n * Copyright (C) 2022 ylb9\\r\\n *\\r\\n * Distributed under terms of the MIT license.\\r\\n */\\r\\n\\r\\n#phylocanavas {\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n:host {\\r\\n  position: absolute;\\r\\n  overflow: hidden;\\r\\n  z-index: 1 !important;\\r\\n}\\r\\n\\r\\n#phyloTooltip {\\r\\n    position: absolute;\\r\\n    background: lightgray;\\r\\n    border-radius: 0.25rem;\\r\\n    padding: 0.25rem;\\r\\n}\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n /* Button appearance on hover */\\r\\n .btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n\\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n  background: white;\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n  \\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n}\n\n#epiCurve {\n  padding-top: 50px;\n}\n\n#epiCurve .axis--grid .domain {\n  fill: #ddd;\n  stroke: none;\n}\n\n#epiCurve .axis--x .domain,\n#epiCurve .axis--grid .tick line {\n  stroke: #fff;\n}\n\n#epiCurve .axis--grid .tick--minor line {\n  stroke-opacity: 0.5;\n}\n\n#epiCurve-date-field {\n  width: auto;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n  background: white;\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n\n#tool-btn-container {\n  display: flex !important;\n}\n\n.tool-btn {\n  height: 30px;\n  width: 30px !important;\n  display: block !important;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/TimelineComponent/timeline-component.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;AACJ;;AAEE;EACE,iBAAA;AACJ;;AACE;EACE,UAAA;EACA,YAAA;AAEJ;;AACE;;EAEE,YAAA;AAEJ;;AACE;EACE,mBAAA;AAEJ;;AAAE;EACE,WAAA;AAGJ;;AACG,+BAAA;AACF;EACG,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AAEJ;;AACE;EACE,kBAAA;EACA,0CAAA;EACA,iBAAA;AAEJ;;AACE;EACE,2BAAA;AAEJ;;AACE;EACE,2BAAA;AAEJ;;AACE;EACE,wBAAA;AAEJ;;AACE;EACE,YAAA;EACA,sBAAA;EACA,yBAAA;AAEJ\",\"sourcesContent\":[\":host {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    z-index: 1 !important;\\r\\n  }\\r\\n\\r\\n  #epiCurve {\\r\\n    padding-top: 50px;\\r\\n  }\\r\\n  #epiCurve .axis--grid .domain {\\r\\n    fill: #ddd;\\r\\n    stroke: none;\\r\\n  }\\r\\n  \\r\\n  #epiCurve .axis--x .domain,\\r\\n  #epiCurve .axis--grid .tick line {\\r\\n    stroke: #fff;\\r\\n  }\\r\\n  \\r\\n  #epiCurve .axis--grid .tick--minor line {\\r\\n    stroke-opacity: 0.5;\\r\\n  }\\r\\n  #epiCurve-date-field {\\r\\n    width: auto;\\r\\n  }\\r\\n\\r\\n\\r\\n   /* Button appearance on hover */\\r\\n .btn-icon:hover {\\r\\n    transform: scale(1.1); /* Slight enlarge on hover */\\r\\n    background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n  }\\r\\n  \\r\\n  .btn-icon {\\r\\n    margin-right: 10px;\\r\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n    background: white;\\r\\n  }\\r\\n  \\r\\n  .flaticon-settings:before {\\r\\n    font-weight: 800 !important;\\r\\n  }\\r\\n  \\r\\n  .flaticon-download:before {\\r\\n    font-weight: 800 !important;\\r\\n  }\\r\\n\\r\\n  #tool-btn-container {\\r\\n    display: flex !important;\\r\\n  }\\r\\n\\r\\n  .tool-btn {\\r\\n    height: 30px;\\r\\n    width: 30px !important;\\r\\n    display: block !important;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.dialogSize {\n  width: 30vw;\n  height: 150px;\n  min-width: 150px;\n}\n\n:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n  padding: 1px;\n  /*top: 37px !important;\n  left: 1px !important; \n  width: 99% !important; */\n}\n\n:root {\n  --vis-graph-brush-selection-opacity: 0.5;\n  --vis-graph-brushed-node-stroke-color: #ff0000;\n  --vis-graph-brushed-node-label-text-color: #00ff00;\n  --vis-graph-brushed-node-icon-fill-color: #0000ff;\n}\n\n::ng-deep .css-1vv8bkf-link-arrow {\n  fill: #4e5f99;\n}\n::ng-deep .css-uryleg-label-background {\n  fill: transparent !important;\n}\n::ng-deep .css-14dxyvq-background {\n  fill: transparent !important;\n}\n\n.network {\n  margin-top: 0 !important;\n  cursor: grab;\n}\n\n.ui-dropdown {\n  width: 100% !important;\n}\n\n.display-none {\n  display: none;\n}\n\n.bottom-table {\n  font-size: 0.5vmax;\n}\n\n#node-max-radius-row, #node-min-radius-row {\n  display: none;\n}\n\n.clusters path {\n  cursor: grab;\n}\n\n:host ::ng-deep .p-accordion-tab:not(.p-accordion-tab-active) .p-toggleable-content {\n  height: 0;\n  overflow: hidden;\n}\n:host ::ng-deep .p-accordion-tab.p-accordion-tab-active .p-toggleable-content {\n  height: auto !important;\n  overflow: auto !important;\n}\n\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1); /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\n}\n\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-pin:before {\n  font-weight: 800 !important;\n}\n\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n\n#network-export-filename {\n  height: 42px;\n}\n\n#network-attribute-table {\n  border-spacing: 0;\n  width: 100%;\n  border: 1px solid #ddd;\n}\n\n#network-attribute-table td, #network-attribute-table th {\n  text-align: left;\n  padding: 2px;\n  border: 1px solid #ddd;\n}\n\n#network-attribute-table tr:nth-child(even) {\n  background-color: #f2f2f2;\n}\n\n#network-attribute-table tr:nth-child(odd) {\n  background-color: #fff;\n}\n\n:root {\n  --vis-graph-link-label-background: black;\n  --vis-dark-graph-link-label-background: black;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/TwoDComponent/twoD-plugin.component.scss\"],\"names\":[],\"mappings\":\"AAAA;EACI,WAAA;EACA,aAAA;EACA,gBAAA;AACJ;;AAEA;EACE,kBAAA;EACA,gBAAA;EACA,qBAAA;EACA,YAAA;EACA;;0BAAA;AAGF;;AAEA;EACE,wCAAA;EACA,8CAAA;EACA,kDAAA;EACA,iDAAA;AACF;;AAGE;EACE,aAAA;AAAJ;AAEE;EACE,4BAAA;AAAJ;AAGE;EACE,4BAAA;AADJ;;AASA;EACE,wBAAA;EACA,YAAA;AANF;;AASA;EACI,sBAAA;AANJ;;AASA;EACE,aAAA;AANF;;AASA;EACI,kBAAA;AANJ;;AASA;EACE,aAAA;AANF;;AASA;EAEI,YAAA;AANJ;;AAWI;EACE,SAAA;EACA,gBAAA;AARN;AAaI;EACE,uBAAA;EACA,yBAAA;AAXN;;AAgBE,+BAAA;AACF;EACE,qBAAA,EAAA,4BAAA;EACA,oCAAA,EAAA,qCAAA;AAbF;;AAgBA;EACE,kBAAA;EACA,0CAAA;AAbF;;AAgBA;EACE,2BAAA;AAbF;;AAgBA;EACE,2BAAA;AAbF;;AAgBA;EACE,2BAAA;AAbF;;AAgBA;EACE,YAAA;AAbF;;AAgBA;EACE,iBAAA;EACA,WAAA;EACA,sBAAA;AAbF;;AAgBA;EACE,gBAAA;EACA,YAAA;EACA,sBAAA;AAbF;;AAgBA;EACE,yBAAA;AAbF;;AAgBA;EACE,sBAAA;AAbF;;AAgBA;EACE,wCAAA;EACA,6CAAA;AAbF\",\"sourcesContent\":[\".dialogSize{\\r\\n    width: 30vw;\\r\\n    height: 150px;\\r\\n    min-width: 150px;\\r\\n}\\r\\n\\r\\n:host {\\r\\n  position: absolute;\\r\\n  overflow: hidden;\\r\\n  z-index: 1 !important;\\r\\n  padding: 1px;\\r\\n  /*top: 37px !important;\\r\\n  left: 1px !important; \\r\\n  width: 99% !important; */ \\r\\n}\\r\\n\\r\\n:root {\\r\\n  --vis-graph-brush-selection-opacity: 0.5; // Adjust the opacity value as needed\\r\\n  --vis-graph-brushed-node-stroke-color: #ff0000; // Adjust the color as needed\\r\\n  --vis-graph-brushed-node-label-text-color: #00ff00; // Adjust the color as needed\\r\\n  --vis-graph-brushed-node-icon-fill-color: #0000ff; // Adjust the color as needed\\r\\n}\\r\\n\\r\\n::ng-deep {\\r\\n  .css-1vv8bkf-link-arrow {\\r\\n    fill: #4e5f99;\\r\\n  }\\r\\n  .css-uryleg-label-background {\\r\\n    fill: transparent !important;\\r\\n  }\\r\\n\\r\\n  .css-14dxyvq-background {\\r\\n    fill: transparent !important;\\r\\n}\\r\\n\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n.network {\\r\\n  margin-top: 0 !important;\\r\\n  cursor: grab;\\r\\n}\\r\\n\\r\\n.ui-dropdown {\\r\\n    width: 100% !important;\\r\\n}\\r\\n\\r\\n.display-none {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.bottom-table{\\r\\n    font-size: calc((.5vmax));   \\r\\n}\\r\\n\\r\\n#node-max-radius-row, #node-min-radius-row {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.clusters path {\\r\\n    cursor: -webkit-grab;\\r\\n    cursor: grab;\\r\\n  }\\r\\n\\r\\n:host ::ng-deep {\\r\\n  .p-accordion-tab:not(.p-accordion-tab-active) {\\r\\n    .p-toggleable-content {\\r\\n      height: 0;\\r\\n      overflow: hidden;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  .p-accordion-tab.p-accordion-tab-active {\\r\\n    .p-toggleable-content {\\r\\n      height: auto !important;\\r\\n      overflow: auto !important;\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n  /* Button appearance on hover */\\r\\n.btn-icon:hover {\\r\\n  transform: scale(1.1); /* Slight enlarge on hover */\\r\\n  background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\r\\n}\\r\\n\\r\\n.btn-icon {\\r\\n  margin-right: 10px;\\r\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.flaticon-settings:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-pin:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n.flaticon-download:before {\\r\\n  font-weight: 800 !important;\\r\\n}\\r\\n\\r\\n#network-export-filename{\\r\\n  height: 42px;  \\r\\n}\\r\\n\\r\\n#network-attribute-table {\\r\\n  border-spacing: 0;\\r\\n  width: 100%;\\r\\n  border: 1px solid #ddd;\\r\\n}\\r\\n\\r\\n#network-attribute-table td, #network-attribute-table th {\\r\\n  text-align: left;\\r\\n  padding: 2px;\\r\\n  border: 1px solid #ddd;\\r\\n}\\r\\n\\r\\n#network-attribute-table tr:nth-child(even) {\\r\\n  background-color: #f2f2f2;\\r\\n}\\r\\n\\r\\n#network-attribute-table tr:nth-child(odd) {\\r\\n  background-color: #fff;\\r\\n}\\r\\n\\r\\n:root {\\r\\n  --vis-graph-link-label-background: black;\\r\\n  --vis-dark-graph-link-label-background: black;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.example-container {\n  width: 400px;\n  height: 200px;\n  margin: 12px;\n  border: 1px solid #555;\n}\n:host {\n  position: absolute;\n  overflow: hidden;\n}\nmat-drawer-content {\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n.spinner-wrapper {\n  position: fixed;\n  /* Absolute positioning relative to the viewport */\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.8);\n  /* Optional background overlay */\n  z-index: 9999;\n  /* Ensures it appears above all content */\n  display: flex;\n  /* Utilizes Flexbox */\n  align-items: center;\n  /* Center vertically */\n  justify-content: center;\n  /* Center horizontally */\n}\n#file-footer {\n  z-index: 1;\n  position: absolute;\n  bottom: 15px;\n  width: 100%;\n}\n#file-prompt {\n  z-index: 1;\n  position: relative;\n}\n#alignment-preview {\n  margin: 0 15px;\n  padding: 0;\n  min-height: 115px;\n  max-height: 200px;\n  overflow-x: scroll;\n  overflow-y: auto;\n}\n#distance-metrics_chosen .chosen-choices {\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n}\n#loading-information {\n  font-family: \"Courier New\", Courier, \"Lucida Sans Typewriter\", \"Lucida Typewriter\", monospace;\n  font-size: 11px;\n  font-style: normal;\n  font-variant: normal;\n  font-weight: 400;\n  line-height: 23px;\n  padding: 10px;\n  white-space: pre-line;\n}\n.dna {\n  margin: 40px auto;\n  width: 360px;\n  height: 70px;\n  perspective: 466px;\n  transform-style: preserve-3d;\n}\n.ele {\n  width: 1px;\n  height: 70px;\n  float: left;\n  margin: 0 8px;\n  border-left: 1px #b0b0b0 dashed;\n  position: relative;\n  transform: rotateX(-360deg);\n  animation: run 2s linear infinite;\n}\n.ele:before,\n.ele:after {\n  content: \"\";\n  width: 10px;\n  height: 10px;\n  background: deepskyblue;\n  border-radius: 50%;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.ele:before {\n  top: -2px;\n  background: #000000;\n}\n.ele:after {\n  bottom: -2px;\n}\n.ele:nth-of-type(1) {\n  animation-delay: -0.15s;\n}\n.ele:nth-of-type(2) {\n  animation-delay: -0.3s;\n}\n.ele:nth-of-type(3) {\n  animation-delay: -0.45s;\n}\n.ele:nth-of-type(4) {\n  animation-delay: -0.6s;\n}\n.ele:nth-of-type(5) {\n  animation-delay: -0.75s;\n}\n.ele:nth-of-type(6) {\n  animation-delay: -0.9s;\n}\n.ele:nth-of-type(7) {\n  animation-delay: -1.05s;\n}\n.ele:nth-of-type(8) {\n  animation-delay: -1.2s;\n}\n.ele:nth-of-type(9) {\n  animation-delay: -1.35s;\n}\n.ele:nth-of-type(10) {\n  animation-delay: -1.5s;\n}\n.ele:nth-of-type(11) {\n  animation-delay: -1.65s;\n}\n.ele:nth-of-type(12) {\n  animation-delay: -1.8s;\n}\n.ele:nth-of-type(13) {\n  animation-delay: -1.95s;\n}\n.ele:nth-of-type(14) {\n  animation-delay: -2.1s;\n}\n.ele:nth-of-type(15) {\n  animation-delay: -2.25s;\n}\n.ele:nth-of-type(16) {\n  animation-delay: -2.4s;\n}\n.ele:nth-of-type(17) {\n  animation-delay: -2.55s;\n}\n.ele:nth-of-type(18) {\n  animation-delay: -2.7s;\n}\n.ele:nth-of-type(19) {\n  animation-delay: -2.85s;\n}\n.ele:nth-of-type(20) {\n  animation-delay: -3s;\n}\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1);\n  /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1);\n  /* Subtle background color on hover */\n}\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/filesComponent/files-plugin.component.less\"],\"names\":[],\"mappings\":\"AAAA;EACI,YAAA;EACA,aAAA;EACA,YAAA;EACA,sBAAA;AACJ;AAEA;EACI,kBAAA;EACA,gBAAA;AAAJ;AAGA;EACI,aAAA;EACA,aAAA;EACA,sBAAA;EACA,uBAAA;AADJ;AAIA;EACI,eAAA;EAFF,kDAAkD;EAGhD,MAAA;EACA,OAAA;EACA,QAAA;EACA,SAAA;EACA,0CAAA;EADF,gCAAgC;EAE9B,aAAA;EAAF,yCAAyC;EACvC,aAAA;EACF,qBAAqB;EAAnB,mBAAA;EAEF,sBAAsB;EADpB,uBAAA;EAGF,wBAAwB;AAC1B;AADA;EACI,UAAA;EACA,kBAAA;EACA,YAAA;EACA,WAAA;AAGJ;AAAA;EACI,UAAA;EACA,kBAAA;AAEJ;AAEA;EACI,cAAA;EACA,UAAA;EACA,iBAAA;EACA,iBAAA;EACA,kBAAA;EACA,gBAAA;AAAJ;AAGA;EACI,yBAAA;EACA,sBAAA;AADJ;AAIA;EACI,6FAAA;EACA,eAAA;EACA,kBAAA;EACA,oBAAA;EACA,gBAAA;EACA,iBAAA;EACA,aAAA;EACA,qBAAA;AAFJ;AAKA;EACI,iBAAA;EACA,YAAA;EACA,YAAA;EACA,kBAAA;EACA,4BAAA;AAHJ;AAMA;EACI,UAAA;EACA,YAAA;EACA,WAAA;EACA,aAAA;EACA,+BAAA;EACA,kBAAA;EACA,2BAAA;EACA,iCAAA;AAJJ;AAOA;;EAEI,WAAA;EACA,WAAA;EACA,YAAA;EACA,uBAAA;EACA,kBAAA;EACA,kBAAA;EACA,SAAA;EACA,2BAAA;AALJ;AAQA;EACI,SAAA;EACA,mBAAA;AANJ;AASA;EACI,YAAA;AAPJ;AAUA;EACI,uBAAA;AARJ;AAWA;EACI,sBAAA;AATJ;AAYA;EACI,uBAAA;AAVJ;AAaA;EACI,sBAAA;AAXJ;AAcA;EACI,uBAAA;AAZJ;AAeA;EACI,sBAAA;AAbJ;AAgBA;EACI,uBAAA;AAdJ;AAiBA;EACI,sBAAA;AAfJ;AAkBA;EACI,uBAAA;AAhBJ;AAmBA;EACI,sBAAA;AAjBJ;AAoBA;EACI,uBAAA;AAlBJ;AAqBA;EACI,sBAAA;AAnBJ;AAsBA;EACI,uBAAA;AApBJ;AAuBA;EACI,sBAAA;AArBJ;AAwBA;EACI,uBAAA;AAtBJ;AAyBA;EACI,sBAAA;AAvBJ;AA0BA;EACI,uBAAA;AAxBJ;AA2BA;EACI,sBAAA;AAzBJ;AA4BA;EACI,uBAAA;AA1BJ;AA6BA;EACI,oBAAA;AA3BJ;AA8BA;EACI,2BAAA;AA5BJ;AACA,+BAA+B;AA+B/B;EACI,qBAAA;EA7BF,4BAA4B;EA8B1B,oCAAA;EA5BF,qCAAqC;AACvC;AA8BA;EACI,kBAAA;EACA,0CAAA;AA5BJ\",\"sourcesContent\":[\".example-container {\\n    width: 400px;\\n    height: 200px;\\n    margin: 12px;\\n    border: 1px solid #555;\\n}\\n\\n:host {\\n    position: absolute;\\n    overflow: hidden;\\n}\\n\\nmat-drawer-content {\\n    padding: 12px;\\n    display: flex;\\n    flex-direction: column;\\n    align-items: flex-start;\\n}\\n\\n.spinner-wrapper {\\n    position: fixed; /* Absolute positioning relative to the viewport */\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background-color: rgba(255, 255, 255, 0.8); /* Optional background overlay */\\n    z-index: 9999; /* Ensures it appears above all content */\\n    display: flex; /* Utilizes Flexbox */\\n    align-items: center; /* Center vertically */\\n    justify-content: center; /* Center horizontally */\\n  }\\n\\n#file-footer {\\n    z-index: 1;\\n    position: absolute;\\n    bottom: 15px;\\n    width: 100%;\\n}\\n\\n#file-prompt {\\n    z-index: 1;\\n    position: relative;\\n}\\n\\n\\n#alignment-preview {\\n    margin: 0 15px;\\n    padding: 0;\\n    min-height: 115px;\\n    max-height: 200px;\\n    overflow-x: scroll;\\n    overflow-y: auto;\\n}\\n\\n#distance-metrics_chosen .chosen-choices {\\n    border: 1px solid #ced4da;\\n    border-radius: 0.25rem;\\n}\\n\\n#loading-information {\\n    font-family: \\\"Courier New\\\", Courier, \\\"Lucida Sans Typewriter\\\", \\\"Lucida Typewriter\\\", monospace;\\n    font-size: 11px;\\n    font-style: normal;\\n    font-variant: normal;\\n    font-weight: 400;\\n    line-height: 23px;\\n    padding: 10px;\\n    white-space: pre-line;\\n}\\n\\n.dna {\\n    margin: 40px auto;\\n    width: 360px;\\n    height: 70px;\\n    perspective: 466px;\\n    transform-style: preserve-3d;\\n}\\n\\n.ele {\\n    width: 1px;\\n    height: 70px;\\n    float: left;\\n    margin: 0 8px;\\n    border-left: 1px #b0b0b0 dashed;\\n    position: relative;\\n    transform: rotateX(-360deg);\\n    animation: run 2s linear infinite;\\n}\\n\\n.ele:before,\\n.ele:after {\\n    content: \\\"\\\";\\n    width: 10px;\\n    height: 10px;\\n    background: deepskyblue;\\n    border-radius: 50%;\\n    position: absolute;\\n    left: 50%;\\n    transform: translateX(-50%);\\n}\\n\\n.ele:before {\\n    top: -2px;\\n    background: #000000;\\n}\\n\\n.ele:after {\\n    bottom: -2px;\\n}\\n\\n.ele:nth-of-type(1) {\\n    animation-delay: -0.15s;\\n}\\n\\n.ele:nth-of-type(2) {\\n    animation-delay: -0.3s;\\n}\\n\\n.ele:nth-of-type(3) {\\n    animation-delay: -0.45s;\\n}\\n\\n.ele:nth-of-type(4) {\\n    animation-delay: -0.6s;\\n}\\n\\n.ele:nth-of-type(5) {\\n    animation-delay: -0.75s;\\n}\\n\\n.ele:nth-of-type(6) {\\n    animation-delay: -0.9s;\\n}\\n\\n.ele:nth-of-type(7) {\\n    animation-delay: -1.05s;\\n}\\n\\n.ele:nth-of-type(8) {\\n    animation-delay: -1.2s;\\n}\\n\\n.ele:nth-of-type(9) {\\n    animation-delay: -1.35s;\\n}\\n\\n.ele:nth-of-type(10) {\\n    animation-delay: -1.5s;\\n}\\n\\n.ele:nth-of-type(11) {\\n    animation-delay: -1.65s;\\n}\\n\\n.ele:nth-of-type(12) {\\n    animation-delay: -1.8s;\\n}\\n\\n.ele:nth-of-type(13) {\\n    animation-delay: -1.95s;\\n}\\n\\n.ele:nth-of-type(14) {\\n    animation-delay: -2.1s;\\n}\\n\\n.ele:nth-of-type(15) {\\n    animation-delay: -2.25s;\\n}\\n\\n.ele:nth-of-type(16) {\\n    animation-delay: -2.4s;\\n}\\n\\n.ele:nth-of-type(17) {\\n    animation-delay: -2.55s;\\n}\\n\\n.ele:nth-of-type(18) {\\n    animation-delay: -2.7s;\\n}\\n\\n.ele:nth-of-type(19) {\\n    animation-delay: -2.85s;\\n}\\n\\n.ele:nth-of-type(20) {\\n    animation-delay: -3s;\\n}\\n\\n.flaticon-settings:before {\\n    font-weight: 800 !important;\\n}\\n\\n/* Button appearance on hover */\\n.btn-icon:hover {\\n    transform: scale(1.1); /* Slight enlarge on hover */\\n    background-color: rgba(0, 0, 0, 0.1); /* Subtle background color on hover */\\n}\\n  \\n.btn-icon {\\n    margin-right: 10px;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host ::ng-deep .ui-multiselected-item-token,\n:host ::ng-deep .ui-multiselected-empty-token {\n  padding: 2px 4px;\n  margin: 0 0.286em 0 0;\n  display: inline-block;\n  vertical-align: middle;\n  height: 1.857em;\n}\n/* Search */\n.autocomplete-wrapper {\n  position: relative;\n  /*border: solid 1px #EEE;*/\n  padding: 1px 2px;\n  font-family: 'Verdana', sans-serif;\n}\n.autocomplete-wrapper #search {\n  padding: 0px 0px 0px 5px;\n  margin: 0;\n  width: 100%;\n  font-size: 13px;\n}\n.autocomplete-wrapper #search:focus {\n  outline: 0;\n}\n.autocomplete-wrapper #search-results {\n  display: none;\n  position: absolute;\n  z-index: 5;\n  top: 36px;\n  left: -1px;\n  right: -1px;\n  border: solid 1px #CCC;\n  min-height: 50px;\n  max-height: 200px;\n  overflow-y: scroll;\n  list-style: none;\n  padding: 2px;\n  background: white;\n}\n.autocomplete-wrapper #search-results li {\n  padding: 5px;\n  margin: 0;\n  font-size: 13px;\n}\n.autocomplete-wrapper #search-results li:hover {\n  background: #EEE;\n  cursor: pointer;\n}\n#url-warning-div {\n  background-color: #f00;\n  color: #fff;\n  font-weight: 600;\n  font-size: 14px;\n  text-align: center;\n}\n#url-warning-div a {\n  color: #fff;\n}\n#search-form {\n  display: none;\n  float: right;\n  z-index: 2;\n  position: relative;\n  margin-left: auto;\n}\nlabel[for=\"search\"] {\n  color: white;\n  margin-right: 10px;\n}\n#search {\n  border-radius: 0.25rem 0 0 0.25rem;\n}\n#search-field {\n  border-radius: 0 0.25rem 0.25rem 0;\n  border-left: 0;\n  margin-left: 2px;\n}\n#casesensitivebutton,\n#wholewordbutton {\n  margin: 2px;\n  border-radius: 0.25rem;\n}\n:host ::ng-deep .ui-multiselected-item-token {\n  background: #007ad9;\n  color: #ffffff;\n}\n:host ::ng-deep .ui-multiselected-empty-token {\n  background: #d95f00;\n  color: #ffffff;\n}\n.tab-content {\n  padding-top: 15px;\n}\n.loader {\n  position: absolute;\n  left: calc(50% - 20px);\n  top: 40%;\n}\n.pointer {\n  cursor: pointer;\n}\n.about-links {\n  padding: 10px 0 10px 0;\n}\n.tabulator {\n  font-size: 12px;\n  border: none;\n}\n.tabulator .tabulator-header {\n  font-weight: normal;\n  border-bottom: 1px solid;\n  border-bottom-color: rgba(0, 0, 0, 0.12);\n  color: rgba(0, 0, 0, 0.54);\n}\n.tabulator .tabulator-header .tabulator-col {\n  height: 48px;\n  background-color: #ffffff;\n  border: none;\n  padding: 0 7px;\n}\n.tabulator-row {\n  border-bottom: 1px solid;\n  border-bottom-color: rgba(0, 0, 0, 0.12);\n  min-height: 48px;\n  vertical-align: middle;\n}\n.tabulator-row .tabulator-cell {\n  padding: 16px 7px;\n  border-right: none;\n  vertical-align: middle;\n}\n.tabulator-row .tabulator-cell:first-of-type,\n.tabulator .tabulator-header .tabulator-col:first-of-type {\n  padding-left: 24px;\n}\n.tabulator-row.tabulator-row-even {\n  background-color: #ffffff;\n}\n/* Tooltip container */\n.tooltip {\n  position: relative;\n  display: inline-block;\n  border-bottom: 1px dotted black;\n  /* If you want dots under the hoverable text */\n}\n/* Tooltip text */\n.tooltip .tooltiptext {\n  visibility: hidden;\n  width: 120px;\n  background-color: black;\n  color: #fff;\n  text-align: center;\n  padding: 5px 0;\n  border-radius: 6px;\n  /* Position the tooltip text - see examples below! */\n  position: absolute;\n  z-index: 1;\n}\n/* Show the tooltip text when you mouse over the tooltip container */\n.tooltip:hover .tooltiptext {\n  visibility: visible;\n}\n.floater {\n  border: 1px solid #cccccc;\n  border-radius: 0.25rem;\n}\n#color-transparency-wrapper {\n  display: none;\n  position: absolute;\n  z-index: 1100;\n  border-radius: 0.25rem;\n  color: #303030;\n  background-color: #f8f9fa !important;\n  padding: 4px 8px;\n  transform: rotate(270deg);\n  transform-origin: top left;\n}\n.mt-icon-toolbar {\n  width: 26px;\n  height: 26px;\n  margin-left: 5px;\n}\n.transparency-symbol {\n  cursor: pointer;\n}\n#network-statistics-wrapper {\n  display: none;\n  position: absolute;\n  bottom: 10px;\n  right: 20px;\n  z-index: 1;\n  color: #303030;\n  background-color: #f8f9fa !important;\n  border: 1px solid #c0c0c0;\n  border-radius: 0.25rem;\n}\n#network-statistics-draghandle {\n  display: none;\n  width: 100%;\n  text-align: center;\n}\n#network-statistics-table td {\n  border: none;\n  padding: 0.125rem 0.25rem;\n}\nmat-slider {\n  width: 300px;\n}\n#reveal-all {\n  background-color: #dadada;\n}\n.custom-file-label {\n  margin-left: 15px;\n  margin-right: 15px;\n}\n#timeline {\n  padding-top: 50px;\n}\n#timeline .axis--grid .domain {\n  fill: #ddd;\n  stroke: none;\n}\n#timeline .axis--x .domain,\n#timeline .axis--grid .tick line {\n  stroke: #fff;\n}\n#timeline .axis--grid .tick--minor line {\n  stroke-opacity: 0.5;\n}\n#timeline-date-field {\n  width: auto;\n}\n#global-timeline-wrapper {\n  /* background: #f8f9fa; */\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  position: absolute;\n  left: 0px;\n  bottom: 0px;\n  right: 15px;\n  z-index: 1001;\n}\n#timeline-play-button {\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  background: #f08080;\n  padding-right: 10px;\n  border-radius: 3px;\n  border: none;\n  color: white;\n  margin: 0;\n  padding: 0 12px;\n  width: 60px;\n  cursor: pointer;\n  height: 30px;\n}\n#global-timeline-field {\n  padding: 4px;\n  font-size: 1.25em;\n}\n#timeline-play:hover {\n  background-color: #696969;\n}\n.track,\n.track-inset,\n.track-overlay {\n  stroke-linecap: round;\n}\n.track {\n  stroke: #000;\n  stroke-opacity: 0.3;\n  stroke-width: 10px;\n}\n.track-inset {\n  stroke: #dcdcdc;\n  stroke-width: 8px;\n}\n.track-overlay {\n  pointer-events: stroke;\n  stroke-width: 50px;\n  stroke: transparent;\n}\n.handle {\n  fill: #fff;\n  stroke: #000;\n  cursor: grab;\n  stroke-opacity: 0.5;\n  stroke-width: 1.25px;\n}\n.p-dialog .p-dialog-header button {\n  color: #495057;\n  width: 2rem;\n  height: 2rem;\n  border-radius: 50%;\n}\n.p-dialog .p-dialog-header button:enabled:hover {\n  border-color: transparent;\n  background: #e9ecef;\n}\n#nodeColorCounts,\n#nodeColorFrequencies,\n#linkColorCounts,\n#linkColorFrequencies {\n  width: 100%;\n  border-radius: 0;\n  display: flex;\n  justify-content: space-between;\n  gap: 15px;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/microbe-trace-next-plugin.component.less\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\":host ::ng-deep .ui-multiselected-item-token,\\n:host ::ng-deep .ui-multiselected-empty-token {\\n    padding: 2px 4px;\\n    margin: 0 0.286em 0 0;\\n    display: inline-block;\\n    vertical-align: middle;\\n    height: 1.857em;\\n}\\n\\n\\n/* Search */\\n.autocomplete-wrapper {\\n  position: relative;\\n  /*border: solid 1px #EEE;*/\\n  padding: 1px 2px;\\n  font-family: 'Verdana', sans-serif;\\n}\\n.autocomplete-wrapper #search {\\n  padding: 0px 0px 0px 5px;\\n  margin: 0;\\n  width: 100%;\\n  font-size: 13px;\\n}\\n.autocomplete-wrapper #search:focus {\\n  outline: 0;\\n}\\n.autocomplete-wrapper #search-results {\\n  display: none;\\n  position: absolute;\\n  z-index: 5;\\n  top: 36px;\\n  left: -1px;\\n  right: -1px;\\n  border: solid 1px #CCC;\\n  min-height: 50px;\\n  max-height: 200px;\\n  overflow-y: scroll;\\n  list-style: none;\\n  padding: 2px;\\n  background: white;\\n}\\n.autocomplete-wrapper #search-results li {\\n  padding: 5px;\\n  margin: 0;\\n  font-size: 13px;\\n}\\n.autocomplete-wrapper #search-results li:hover {\\n  background: #EEE;\\n  cursor: pointer;\\n}\\n\\n#url-warning-div {\\n  background-color: #f00;\\n  color: #fff;\\n  font-weight: 600;\\n  font-size: 14px;\\n  text-align: center;\\n  a {\\n    color: #fff;\\n  }\\n}\\n\\n#search-form {\\n  display: none;\\n  float: right;\\n  z-index: 2;\\n  position: relative;\\n  margin-left: auto;\\n}\\nlabel[for=\\\"search\\\"] {\\n  color: white;\\n  margin-right: 10px;\\n}\\n#search {\\n  border-radius: 0.25rem 0 0 0.25rem;\\n}\\n#search-field {\\n  border-radius: 0 0.25rem 0.25rem 0;\\n  border-left: 0;\\n  margin-left: 2px;\\n}\\n\\n#casesensitivebutton, #wholewordbutton {\\n  margin: 2px;\\n  border-radius: 0.25rem;\\n}\\n\\n:host ::ng-deep .ui-multiselected-item-token {\\n  background: #007ad9;\\n  color: #ffffff;\\n}\\n\\n:host ::ng-deep .ui-multiselected-empty-token {\\n  background: #d95f00;\\n  color: #ffffff;\\n}\\n\\n.tab-content {\\n  padding-top: 15px;\\n}\\n\\n.loader {\\n    position: absolute;\\n    left: calc(50% - 20px);\\n    top: 40%;\\n}\\n\\n.pointer {\\n    cursor: pointer;\\n}\\n\\n.about-links {\\n  padding: 10px 0 10px 0;\\n}\\n\\n//Tabulator styles override\\n\\n.tabulator {\\n  font-size: 12px;\\n  border: none;\\n}\\n\\n.tabulator .tabulator-header {\\n  font-weight: normal;\\n  border-bottom: 1px solid;\\n  border-bottom-color: rgba(0, 0, 0, 0.12);\\n  color: rgba(0, 0, 0, 0.54);\\n}\\n\\n.tabulator .tabulator-header .tabulator-col {\\n  height: 48px;\\n  background-color: #ffffff;\\n  border: none;\\n  padding: 0 7px;\\n}\\n\\n.tabulator-row {\\n  border-bottom: 1px solid;\\n  border-bottom-color: rgba(0, 0, 0, 0.12);\\n  min-height: 48px;\\n  vertical-align: middle;\\n}\\n\\n.tabulator-row .tabulator-cell {\\n  padding: 16px 7px;\\n  border-right: none;\\n  vertical-align: middle;\\n}\\n\\n.tabulator-row .tabulator-cell:first-of-type,\\n.tabulator .tabulator-header .tabulator-col:first-of-type {\\n  padding-left: 24px;\\n}\\n\\n.tabulator-row.tabulator-row-even {\\n  background-color: #ffffff;\\n}\\n\\n/* Tooltip container */\\n.tooltip {\\n    position: relative;\\n    display: inline-block;\\n    border-bottom: 1px dotted black; /* If you want dots under the hoverable text */\\n}\\n\\n/* Tooltip text */\\n.tooltip .tooltiptext {\\n    visibility: hidden;\\n    width: 120px;\\n    background-color: black;\\n    color: #fff;\\n    text-align: center;\\n    padding: 5px 0;\\n    border-radius: 6px;\\n    /* Position the tooltip text - see examples below! */\\n    position: absolute;\\n    z-index: 1;\\n}\\n\\n/* Show the tooltip text when you mouse over the tooltip container */\\n.tooltip:hover .tooltiptext {\\n    visibility: visible;\\n}\\n\\n// color table\\n.floater {\\n    border: 1px solid #cccccc;\\n    border-radius: 0.25rem;\\n}\\n\\n#color-transparency-wrapper {\\n    display: none;\\n    position: absolute;\\n    z-index: 1100;\\n    border-radius: 0.25rem;\\n    color: #303030;\\n    background-color: #f8f9fa !important;\\n    padding: 4px 8px;\\n    transform: rotate(270deg);\\n    transform-origin: top left;\\n}\\n\\n.mt-icon-toolbar {\\n  width: 26px;\\n  height: 26px;\\n  margin-left: 5px;\\n}\\n\\n.transparency-symbol {\\n    cursor: pointer;\\n}\\n\\n#network-statistics-wrapper {\\n    display: none;\\n    position: absolute;\\n    bottom: 10px;\\n    right: 20px;\\n    z-index: 1;\\n    color: #303030;\\n    background-color: #f8f9fa !important;\\n    border: 1px solid #c0c0c0;\\n    border-radius: 0.25rem;\\n  }\\n  #network-statistics-draghandle {\\n    display: none;\\n    width: 100%;\\n    text-align: center;\\n  }\\n  #network-statistics-table td {\\n    border: none;\\n    padding: 0.125rem 0.25rem;\\n  }\\n\\n  mat-slider {\\n    width: 300px;\\n  }\\n\\n  #reveal-all {\\n    background-color: #dadada;\\n  }\\n\\n  .custom-file-label {\\n    margin-left: 15px;\\n    margin-right: 15px;\\n  }\\n\\n  #timeline {\\n    padding-top: 50px;\\n  }\\n  #timeline .axis--grid .domain {\\n    fill: #ddd;\\n    stroke: none;\\n  }\\n  \\n  #timeline .axis--x .domain,\\n  #timeline .axis--grid .tick line {\\n    stroke: #fff;\\n  }\\n  \\n  #timeline .axis--grid .tick--minor line {\\n    stroke-opacity: 0.5;\\n  }\\n  #timeline-date-field {\\n    width: auto;\\n  }\\n  \\n\\n  #global-timeline-wrapper {\\n    /* background: #f8f9fa; */\\n    border-top: 1px solid rgba(0, 0, 0, 0.1);\\n    position: absolute;\\n    left: 0px;\\n    bottom: 0px;\\n    right: 15px;\\n    z-index: 1001;\\n  }\\n  \\n  #timeline-play-button {\\n    position: absolute;\\n    top: 10px;\\n    left: 10px;\\n    background: #f08080;\\n    padding-right: 10px;\\n    border-radius: 3px;\\n    border: none;\\n    color: white;\\n    margin: 0;\\n    padding: 0 12px;\\n    width: 60px;\\n    cursor: pointer;\\n    height: 30px;\\n  }\\n  #global-timeline-field {\\n    padding: 4px;\\n    font-size: 1.25em;\\n  }\\n  #timeline-play:hover {\\n    background-color: #696969;\\n  }    \\n  .track,\\n  .track-inset,\\n  .track-overlay {\\n    stroke-linecap: round;\\n  }\\n  .track {\\n    stroke: #000;\\n    stroke-opacity: 0.3;\\n    stroke-width: 10px;\\n  }\\n  .track-inset {\\n    stroke: #dcdcdc;\\n    stroke-width: 8px;\\n  }\\n  .track-overlay {\\n    pointer-events: stroke;\\n    stroke-width: 50px;\\n    stroke: transparent;\\n    // cursor: crosshair;\\n  }\\n  .handle {\\n    fill: #fff;\\n    stroke: #000;\\n    cursor:grab;\\n    stroke-opacity: 0.5;\\n    stroke-width: 1.25px;\\n  }\\n\\n  .p-dialog .p-dialog-header button {\\n    color: #495057;\\n    width: 2rem;\\n    height: 2rem;\\n    border-radius: 50%;\\n  }\\n  .p-dialog .p-dialog-header button:enabled:hover {\\n    border-color: transparent;\\n    background: #e9ecef;\\n  }\\n\\n#nodeColorCounts, #nodeColorFrequencies, #linkColorCounts, #linkColorFrequencies {\\n  width: 100%; \\n  border-radius: 0; \\n  display: flex; \\n  justify-content: space-between;\\n  gap: 15px;\\n}\\n  \\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host {\n  position: absolute;\n  overflow: hidden;\n  z-index: 1 !important;\n}\n#tool-btn-container {\n  display: flex !important;\n}\n.tool-btn {\n  height: 30px;\n}\n:host ::ng-deep .ui-table-customers {\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.2), 0 1px 1px 0 rgba(0, 0, 0, 0.14), 0 2px 1px -1px rgba(0, 0, 0, 0.12);\n}\n:host ::ng-deep .ui-table-customers .customer-badge {\n  border-radius: 2px;\n  padding: 0.25em 0.5em;\n  text-transform: uppercase;\n  font-weight: 700;\n  font-size: 12px;\n  letter-spacing: 0.3px;\n}\n:host ::ng-deep .ui-table-customers .customer-badge.status-qualified {\n  background-color: #C8E6C9;\n  color: #256029;\n}\n:host ::ng-deep .ui-table-customers .customer-badge.status-unqualified {\n  background-color: #FFCDD2;\n  color: #C63737;\n}\n:host ::ng-deep .ui-table-customers .customer-badge.status-negotiation {\n  background-color: #FEEDAF;\n  color: #8A5340;\n}\n:host ::ng-deep .ui-table-customers .customer-badge.status-new {\n  background-color: #B3E5FC;\n  color: #23547B;\n}\n:host ::ng-deep .ui-table-customers .customer-badge.status-renewal {\n  background-color: #ECCFFF;\n  color: #694382;\n}\n:host ::ng-deep .ui-table-customers .customer-badge.status-proposal {\n  background-color: #FFD8B2;\n  color: #805B36;\n}\n:host ::ng-deep .ui-table-customers .flag {\n  vertical-align: middle;\n  width: 30px;\n  height: 20px;\n}\n:host ::ng-deep .ui-table-customers .ui-multiselect-representative-option {\n  display: inline-block;\n  vertical-align: middle;\n}\n:host ::ng-deep .ui-table-customers .ui-multiselect-representative-option img {\n  vertical-align: middle;\n  width: 24px;\n}\n:host ::ng-deep .ui-table-customers .ui-multiselect-representative-option span {\n  margin-top: 0.125em;\n  vertical-align: middle;\n  margin-left: 0.5em;\n}\n:host ::ng-deep .ui-table-customers .ui-paginator .ui-dropdown {\n  float: left;\n}\n:host ::ng-deep .ui-table-customers .ui-paginator .ui-paginator-current {\n  float: right;\n}\n:host ::ng-deep .ui-table-customers .ui-progressbar {\n  height: 8px;\n  background-color: #D8DADC;\n}\n:host ::ng-deep .ui-table-customers .ui-progressbar .ui-progressbar-value {\n  background-color: #00ACAD;\n}\n:host ::ng-deep .ui-table-customers .ui-column-filter {\n  display: block;\n}\n:host ::ng-deep .ui-table-customers .ui-column-filter input {\n  width: 100%;\n}\n:host ::ng-deep .ui-table-customers .ui-table-globalfilter-container {\n  float: right;\n}\n:host ::ng-deep .ui-table-customers .ui-table-globalfilter-container input {\n  width: 200px;\n}\n:host ::ng-deep .ui-table-customers .ui-datepicker {\n  min-width: 25em;\n}\n:host ::ng-deep .ui-table-customers .ui-datepicker td {\n  font-weight: 400;\n}\n:host ::ng-deep .ui-table-customers .ui-table-caption {\n  border: 0 none;\n  padding: 12px;\n  text-align: left;\n  font-size: 20px;\n}\n:host ::ng-deep .ui-table-customers .ui-paginator {\n  border: 0 none;\n  padding: 1em;\n}\n:host ::ng-deep .ui-table-customers .ui-table-thead > tr > th {\n  border: 0 none;\n  text-align: left;\n}\n:host ::ng-deep .ui-table-customers .ui-table-thead > tr > th.ui-filter-column {\n  border-top: 1px solid #c8c8c8;\n}\n:host ::ng-deep .ui-table-customers .ui-table-thead > tr > th:first-child {\n  width: 5em;\n  text-align: center;\n}\n:host ::ng-deep .ui-table-customers .ui-table-thead > tr > th:last-child {\n  width: 8em;\n  text-align: center;\n}\n:host ::ng-deep .ui-table-customers .ui-table-tbody > tr > td {\n  border: 0 none;\n  cursor: auto;\n}\n:host ::ng-deep .ui-table-customers .ui-table-tbody > tr > td:first-child {\n  width: 3em;\n  text-align: center;\n}\n:host ::ng-deep .ui-table-customers .ui-table-tbody > tr > td:last-child {\n  width: 8em;\n  text-align: center;\n}\n:host ::ng-deep .ui-table-customers .ui-dropdown-label:not(.ui-placeholder) {\n  text-transform: uppercase;\n}\n:host ::ng-deep .ui-table-customers .ui-table-tbody > tr > td .ui-column-title {\n  display: none;\n}\n.item {\n  display: inline-block;\n  background: blue;\n}\n.filterType {\n  background: transparent;\n  border-color: transparent;\n  border-width: 0px;\n  border: 0px solid transparent;\n  border-style: inset;\n  outline-style: dashed;\n  outline-color: transparent;\n}\n/* Responsive */\n@media screen and (max-width: 64em) {\n  :host ::ng-deep .ui-table.ui-table-customers .ui-table-thead > tr > th,\n  :host ::ng-deep .ui-table.ui-table-customers .ui-table-tfoot > tr > td {\n    display: none !important;\n  }\n  :host ::ng-deep .ui-table.ui-table-customers .ui-table-tbody > tr > td {\n    text-align: left;\n    display: block;\n    border: 0 none !important;\n    width: 100% !important;\n    float: left;\n    clear: left;\n    border: 0 none;\n  }\n  :host ::ng-deep .ui-table.ui-table-customers .ui-table-tbody > tr > td .ui-column-title {\n    padding: 0.4em;\n    min-width: 30%;\n    display: inline-block;\n    margin: -0.4em 1em -0.4em -0.4em;\n    font-weight: bold;\n  }\n}\n.table-wrapper {\n  padding: 70px 20px 10px 20px;\n}\n/* Button appearance on hover */\n.btn-icon:hover {\n  transform: scale(1.1);\n  /* Slight enlarge on hover */\n  background-color: rgba(0, 0, 0, 0.1);\n  /* Subtle background color on hover */\n}\n.btn-icon {\n  margin-right: 10px;\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n  background: white;\n}\n.flaticon-settings:before {\n  font-weight: 800 !important;\n}\n.flaticon-download:before {\n  font-weight: 800 !important;\n}\n::ng-deep .p-datatable-scrollable-table > .p-datatable-thead {\n  z-index: 1 !important;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/visualizationComponents/TableComponent/table-plugin-component.less\"],\"names\":[],\"mappings\":\"AAAA;EACI,kBAAA;EACA,gBAAA;EACA,qBAAA;AACJ;AAEA;EACI,wBAAA;AAAJ;AAGA;EACI,YAAA;AADJ;AAKA;EACI,+GAAA;AAHJ;AAEA;EAIQ,kBAAA;EACA,qBAAA;EACA,yBAAA;EACA,gBAAA;EACA,eAAA;EACA,qBAAA;AAHR;AAKQ;EACI,yBAAA;EACA,cAAA;AAHZ;AAMQ;EACI,yBAAA;EACA,cAAA;AAJZ;AAOQ;EACI,yBAAA;EACA,cAAA;AALZ;AAQQ;EACI,yBAAA;EACA,cAAA;AANZ;AASQ;EACI,yBAAA;EACA,cAAA;AAPZ;AAUQ;EACI,yBAAA;EACA,cAAA;AARZ;AA9BA;EA2CQ,sBAAA;EACA,WAAA;EACA,YAAA;AAVR;AAnCA;EAiDQ,qBAAA;EACA,sBAAA;AAXR;AAvCA;EAqDY,sBAAA;EACA,WAAA;AAXZ;AA3CA;EA0DY,mBAAA;EACA,sBAAA;EACA,kBAAA;AAZZ;AAhDA;EAkEY,WAAA;AAfZ;AAnDA;EAsEY,YAAA;AAhBZ;AAtDA;EA2EQ,WAAA;EACA,yBAAA;AAlBR;AA1DA;EA+EY,yBAAA;AAlBZ;AA7DA;EAoFQ,cAAA;AApBR;AAhEA;EAuFY,WAAA;AApBZ;AAnEA;EA4FQ,YAAA;AAtBR;AAtEA;EA+FY,YAAA;AAtBZ;AAzEA;EAoGQ,eAAA;AAxBR;AA5EA;EAuGY,gBAAA;AAxBZ;AA/EA;EA4GQ,cAAA;EACA,aAAA;EACA,gBAAA;EACA,eAAA;AA1BR;AArFA;EAmHQ,cAAA;EACA,YAAA;AA3BR;AAzFA;EAwHQ,cAAA;EACA,gBAAA;AA5BR;AA8BQ;EACI,6BAAA;AA5BZ;AA+BQ;EACI,UAAA;EACA,kBAAA;AA7BZ;AAgCQ;EACI,UAAA;EACA,kBAAA;AA9BZ;AAxGA;EA2IQ,cAAA;EACA,YAAA;AAhCR;AAkCQ;EACI,UAAA;EACA,kBAAA;AAhCZ;AAmCQ;EACI,UAAA;EACA,kBAAA;AAjCZ;AApHA;EA0JQ,yBAAA;AAnCR;AAvHA;EA8JQ,aAAA;AApCR;AA0CA;EACI,qBAAA;EACA,gBAAA;AAxCJ;AA2CA;EACI,uBAAA;EACA,yBAAA;EACA,iBAAA;EACA,6BAAA;EAEA,mBAAA;EACA,qBAAA;EACA,0BAAA;AA1CJ;AACA,eAAe;AA6Cf;EAEQ;;IAIQ,wBAAA;EA9Cd;EA0CM;IAQQ,gBAAA;IACA,cAAA;IACA,yBAAA;IACA,sBAAA;IACA,WAAA;IACA,WAAA;IACA,cAAA;EA/Cd;EAiCM;IAiBY,cAAA;IACA,cAAA;IACA,qBAAA;IACA,gCAAA;IACA,iBAAA;EA/ClB;AACF;AAqDA;EACI,4BAAA;AAnDJ;AACA,+BAA+B;AAuD/B;EACI,qBAAA;EArDF,4BAA4B;EAuD1B,oCAAA;EArDF,qCAAqC;AACvC;AAwDA;EACI,kBAAA;EACA,0CAAA;EACA,iBAAA;AAtDJ;AAyDA;EACI,2BAAA;AAvDJ;AA0DA;EACI,2BAAA;AAxDJ;AA2DA;EACI,qBAAA;AAzDJ\",\"sourcesContent\":[\":host {\\n    position: absolute;\\n    overflow: hidden;\\n    z-index: 1 !important;\\n}\\n\\n#tool-btn-container {\\n    display: flex !important;\\n}\\n\\n.tool-btn {\\n    height: 30px;\\n}\\n\\n\\n:host ::ng-deep .ui-table-customers {\\n    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.2), 0 1px 1px 0 rgba(0, 0, 0, 0.14), 0 2px 1px -1px rgba(0, 0, 0, 0.12);\\n\\n    .customer-badge {\\n        border-radius: 2px;\\n        padding: .25em .5em;\\n        text-transform: uppercase;\\n        font-weight: 700;\\n        font-size: 12px;\\n        letter-spacing: .3px;\\n\\n        &.status-qualified {\\n            background-color: #C8E6C9;\\n            color: #256029;\\n        }\\n\\n        &.status-unqualified {\\n            background-color: #FFCDD2;\\n            color: #C63737;\\n        }\\n\\n        &.status-negotiation {\\n            background-color: #FEEDAF;\\n            color: #8A5340;\\n        }\\n\\n        &.status-new {\\n            background-color: #B3E5FC;\\n            color: #23547B;\\n        }\\n\\n        &.status-renewal {\\n            background-color: #ECCFFF;\\n            color: #694382;\\n        }\\n\\n        &.status-proposal {\\n            background-color: #FFD8B2;\\n            color: #805B36;\\n        }\\n    }\\n\\n    .flag {\\n        vertical-align: middle;\\n        width: 30px;\\n        height: 20px;\\n    }\\n\\n    .ui-multiselect-representative-option {\\n        display: inline-block;\\n        vertical-align: middle;\\n\\n        img {\\n            vertical-align: middle;\\n            width: 24px;\\n        }\\n\\n        span {\\n            margin-top: .125em;\\n            vertical-align: middle;\\n            margin-left: .5em\\n        }\\n    }\\n\\n    .ui-paginator {\\n        .ui-dropdown {\\n            float: left;\\n        }\\n\\n        .ui-paginator-current {\\n            float: right;\\n        }\\n    }\\n\\n    .ui-progressbar {\\n        height: 8px;\\n        background-color: #D8DADC;\\n\\n        .ui-progressbar-value {\\n            background-color: #00ACAD;\\n        }\\n    }\\n\\n    .ui-column-filter {\\n        display: block;\\n\\n        input {\\n            width: 100%;\\n        }\\n    }\\n\\n    .ui-table-globalfilter-container {\\n        float: right;\\n\\n        input {\\n            width: 200px;\\n        }\\n    }\\n\\n    .ui-datepicker {\\n        min-width: 25em;\\n\\n        td {\\n            font-weight: 400;\\n        }\\n    }\\n\\n    .ui-table-caption {\\n        border: 0 none;\\n        padding: 12px;\\n        text-align: left;\\n        font-size: 20px;\\n    }\\n\\n    .ui-paginator {\\n        border: 0 none;\\n        padding: 1em;\\n    }\\n\\n    .ui-table-thead>tr>th {\\n        border: 0 none;\\n        text-align: left;\\n\\n        &.ui-filter-column {\\n            border-top: 1px solid #c8c8c8;\\n        }\\n\\n        &:first-child {\\n            width: 5em;\\n            text-align: center;\\n        }\\n\\n        &:last-child {\\n            width: 8em;\\n            text-align: center;\\n        }\\n    }\\n\\n    .ui-table-tbody>tr>td {\\n        border: 0 none;\\n        cursor: auto;\\n\\n        &:first-child {\\n            width: 3em;\\n            text-align: center;\\n        }\\n\\n        &:last-child {\\n            width: 8em;\\n            text-align: center;\\n        }\\n    }\\n\\n    .ui-dropdown-label:not(.ui-placeholder) {\\n        text-transform: uppercase;\\n    }\\n\\n    .ui-table-tbody>tr>td .ui-column-title {\\n        display: none;\\n    }\\n}\\n\\n.wrapper {}\\n\\n.item {\\n    display: inline-block;\\n    background: blue;\\n}\\n\\n.filterType {\\n    background: transparent;\\n    border-color: transparent;\\n    border-width: 0px;\\n    border: 0px solid transparent;\\n\\n    border-style: inset;\\n    outline-style: dashed;\\n    outline-color: transparent;\\n}\\n\\n/* Responsive */\\n@media screen and (max-width: 64em) {\\n    :host ::ng-deep .ui-table {\\n        &.ui-table-customers {\\n\\n            .ui-table-thead>tr>th,\\n            .ui-table-tfoot>tr>td {\\n                display: none !important;\\n            }\\n\\n            .ui-table-tbody>tr>td {\\n                text-align: left;\\n                display: block;\\n                border: 0 none !important;\\n                width: 100% !important;\\n                float: left;\\n                clear: left;\\n                border: 0 none;\\n\\n                .ui-column-title {\\n                    padding: .4em;\\n                    min-width: 30%;\\n                    display: inline-block;\\n                    margin: -.4em 1em -.4em -.4em;\\n                    font-weight: bold;\\n                }\\n            }\\n        }\\n    }\\n}\\n\\n.table-wrapper {\\n    padding: 70px 20px 10px 20px;\\n}\\n\\n\\n/* Button appearance on hover */\\n.btn-icon:hover {\\n    transform: scale(1.1);\\n    /* Slight enlarge on hover */\\n    background-color: rgba(0, 0, 0, 0.1);\\n    /* Subtle background color on hover */\\n}\\n\\n.btn-icon {\\n    margin-right: 10px;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\n    background: white;\\n}\\n\\n.flaticon-settings:before {\\n    font-weight: 800 !important;\\n}\\n\\n.flaticon-download:before {\\n    font-weight: 800 !important;\\n}\\n\\n::ng-deep .p-datatable-scrollable-table > .p-datatable-thead { \\n    z-index: 1 !important; \\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","var map = {\n\t\"./af\": 85637,\n\t\"./af.js\": 85637,\n\t\"./ar\": 6777,\n\t\"./ar-dz\": 74508,\n\t\"./ar-dz.js\": 74508,\n\t\"./ar-kw\": 67504,\n\t\"./ar-kw.js\": 67504,\n\t\"./ar-ly\": 95373,\n\t\"./ar-ly.js\": 95373,\n\t\"./ar-ma\": 92412,\n\t\"./ar-ma.js\": 92412,\n\t\"./ar-ps\": 78823,\n\t\"./ar-ps.js\": 78823,\n\t\"./ar-sa\": 36670,\n\t\"./ar-sa.js\": 36670,\n\t\"./ar-tn\": 36448,\n\t\"./ar-tn.js\": 36448,\n\t\"./ar.js\": 6777,\n\t\"./az\": 23009,\n\t\"./az.js\": 23009,\n\t\"./be\": 28299,\n\t\"./be.js\": 28299,\n\t\"./bg\": 4685,\n\t\"./bg.js\": 4685,\n\t\"./bm\": 11171,\n\t\"./bm.js\": 11171,\n\t\"./bn\": 23590,\n\t\"./bn-bd\": 5841,\n\t\"./bn-bd.js\": 5841,\n\t\"./bn.js\": 23590,\n\t\"./bo\": 54309,\n\t\"./bo.js\": 54309,\n\t\"./br\": 54130,\n\t\"./br.js\": 54130,\n\t\"./bs\": 8033,\n\t\"./bs.js\": 8033,\n\t\"./ca\": 55294,\n\t\"./ca.js\": 55294,\n\t\"./cs\": 53028,\n\t\"./cs.js\": 53028,\n\t\"./cv\": 5807,\n\t\"./cv.js\": 5807,\n\t\"./cy\": 70342,\n\t\"./cy.js\": 70342,\n\t\"./da\": 38269,\n\t\"./da.js\": 38269,\n\t\"./de\": 11489,\n\t\"./de-at\": 42123,\n\t\"./de-at.js\": 42123,\n\t\"./de-ch\": 17757,\n\t\"./de-ch.js\": 17757,\n\t\"./de.js\": 11489,\n\t\"./dv\": 28152,\n\t\"./dv.js\": 28152,\n\t\"./el\": 7687,\n\t\"./el.js\": 7687,\n\t\"./en-au\": 46668,\n\t\"./en-au.js\": 46668,\n\t\"./en-ca\": 76798,\n\t\"./en-ca.js\": 76798,\n\t\"./en-gb\": 53615,\n\t\"./en-gb.js\": 53615,\n\t\"./en-ie\": 91364,\n\t\"./en-ie.js\": 91364,\n\t\"./en-il\": 79907,\n\t\"./en-il.js\": 79907,\n\t\"./en-in\": 70533,\n\t\"./en-in.js\": 70533,\n\t\"./en-nz\": 33190,\n\t\"./en-nz.js\": 33190,\n\t\"./en-sg\": 51096,\n\t\"./en-sg.js\": 51096,\n\t\"./eo\": 3962,\n\t\"./eo.js\": 3962,\n\t\"./es\": 37726,\n\t\"./es-do\": 65010,\n\t\"./es-do.js\": 65010,\n\t\"./es-mx\": 63654,\n\t\"./es-mx.js\": 63654,\n\t\"./es-us\": 59043,\n\t\"./es-us.js\": 59043,\n\t\"./es.js\": 37726,\n\t\"./et\": 25343,\n\t\"./et.js\": 25343,\n\t\"./eu\": 90728,\n\t\"./eu.js\": 90728,\n\t\"./fa\": 60787,\n\t\"./fa.js\": 60787,\n\t\"./fi\": 71771,\n\t\"./fi.js\": 71771,\n\t\"./fil\": 45335,\n\t\"./fil.js\": 45335,\n\t\"./fo\": 69761,\n\t\"./fo.js\": 69761,\n\t\"./fr\": 1670,\n\t\"./fr-ca\": 28991,\n\t\"./fr-ca.js\": 28991,\n\t\"./fr-ch\": 97280,\n\t\"./fr-ch.js\": 97280,\n\t\"./fr.js\": 1670,\n\t\"./fy\": 24203,\n\t\"./fy.js\": 24203,\n\t\"./ga\": 69858,\n\t\"./ga.js\": 69858,\n\t\"./gd\": 38605,\n\t\"./gd.js\": 38605,\n\t\"./gl\": 27365,\n\t\"./gl.js\": 27365,\n\t\"./gom-deva\": 33896,\n\t\"./gom-deva.js\": 33896,\n\t\"./gom-latn\": 95587,\n\t\"./gom-latn.js\": 95587,\n\t\"./gu\": 97950,\n\t\"./gu.js\": 97950,\n\t\"./he\": 92029,\n\t\"./he.js\": 92029,\n\t\"./hi\": 51897,\n\t\"./hi.js\": 51897,\n\t\"./hr\": 29816,\n\t\"./hr.js\": 29816,\n\t\"./hu\": 22253,\n\t\"./hu.js\": 22253,\n\t\"./hy-am\": 28196,\n\t\"./hy-am.js\": 28196,\n\t\"./id\": 51307,\n\t\"./id.js\": 51307,\n\t\"./is\": 95474,\n\t\"./is.js\": 95474,\n\t\"./it\": 23099,\n\t\"./it-ch\": 45807,\n\t\"./it-ch.js\": 45807,\n\t\"./it.js\": 23099,\n\t\"./ja\": 19127,\n\t\"./ja.js\": 19127,\n\t\"./jv\": 30182,\n\t\"./jv.js\": 30182,\n\t\"./ka\": 10758,\n\t\"./ka.js\": 10758,\n\t\"./kk\": 93444,\n\t\"./kk.js\": 93444,\n\t\"./km\": 72034,\n\t\"./km.js\": 72034,\n\t\"./kn\": 46223,\n\t\"./kn.js\": 46223,\n\t\"./ko\": 83064,\n\t\"./ko.js\": 83064,\n\t\"./ku\": 8714,\n\t\"./ku-kmr\": 10961,\n\t\"./ku-kmr.js\": 10961,\n\t\"./ku.js\": 8714,\n\t\"./ky\": 12062,\n\t\"./ky.js\": 12062,\n\t\"./lb\": 84796,\n\t\"./lb.js\": 84796,\n\t\"./lo\": 19279,\n\t\"./lo.js\": 19279,\n\t\"./lt\": 106,\n\t\"./lt.js\": 106,\n\t\"./lv\": 11840,\n\t\"./lv.js\": 11840,\n\t\"./me\": 42240,\n\t\"./me.js\": 42240,\n\t\"./mi\": 13588,\n\t\"./mi.js\": 13588,\n\t\"./mk\": 15518,\n\t\"./mk.js\": 15518,\n\t\"./ml\": 37823,\n\t\"./ml.js\": 37823,\n\t\"./mn\": 98657,\n\t\"./mn.js\": 98657,\n\t\"./mr\": 61285,\n\t\"./mr.js\": 61285,\n\t\"./ms\": 43014,\n\t\"./ms-my\": 86253,\n\t\"./ms-my.js\": 86253,\n\t\"./ms.js\": 43014,\n\t\"./mt\": 20167,\n\t\"./mt.js\": 20167,\n\t\"./my\": 47940,\n\t\"./my.js\": 47940,\n\t\"./nb\": 50014,\n\t\"./nb.js\": 50014,\n\t\"./ne\": 49023,\n\t\"./ne.js\": 49023,\n\t\"./nl\": 34208,\n\t\"./nl-be\": 71412,\n\t\"./nl-be.js\": 71412,\n\t\"./nl.js\": 34208,\n\t\"./nn\": 81354,\n\t\"./nn.js\": 81354,\n\t\"./oc-lnc\": 40870,\n\t\"./oc-lnc.js\": 40870,\n\t\"./pa-in\": 80389,\n\t\"./pa-in.js\": 80389,\n\t\"./pl\": 7342,\n\t\"./pl.js\": 7342,\n\t\"./pt\": 34774,\n\t\"./pt-br\": 73003,\n\t\"./pt-br.js\": 73003,\n\t\"./pt.js\": 34774,\n\t\"./ro\": 85333,\n\t\"./ro.js\": 85333,\n\t\"./ru\": 73451,\n\t\"./ru.js\": 73451,\n\t\"./sd\": 66302,\n\t\"./sd.js\": 66302,\n\t\"./se\": 59682,\n\t\"./se.js\": 59682,\n\t\"./si\": 80582,\n\t\"./si.js\": 80582,\n\t\"./sk\": 4348,\n\t\"./sk.js\": 4348,\n\t\"./sl\": 95337,\n\t\"./sl.js\": 95337,\n\t\"./sq\": 39358,\n\t\"./sq.js\": 39358,\n\t\"./sr\": 50683,\n\t\"./sr-cyrl\": 69382,\n\t\"./sr-cyrl.js\": 69382,\n\t\"./sr.js\": 50683,\n\t\"./ss\": 51156,\n\t\"./ss.js\": 51156,\n\t\"./sv\": 29855,\n\t\"./sv.js\": 29855,\n\t\"./sw\": 18536,\n\t\"./sw.js\": 18536,\n\t\"./ta\": 15373,\n\t\"./ta.js\": 15373,\n\t\"./te\": 37809,\n\t\"./te.js\": 37809,\n\t\"./tet\": 61297,\n\t\"./tet.js\": 61297,\n\t\"./tg\": 92527,\n\t\"./tg.js\": 92527,\n\t\"./th\": 85862,\n\t\"./th.js\": 85862,\n\t\"./tk\": 79331,\n\t\"./tk.js\": 79331,\n\t\"./tl-ph\": 44387,\n\t\"./tl-ph.js\": 44387,\n\t\"./tlh\": 3592,\n\t\"./tlh.js\": 3592,\n\t\"./tr\": 79732,\n\t\"./tr.js\": 79732,\n\t\"./tzl\": 99570,\n\t\"./tzl.js\": 99570,\n\t\"./tzm\": 83553,\n\t\"./tzm-latn\": 7699,\n\t\"./tzm-latn.js\": 7699,\n\t\"./tzm.js\": 83553,\n\t\"./ug-cn\": 25674,\n\t\"./ug-cn.js\": 25674,\n\t\"./uk\": 69974,\n\t\"./uk.js\": 69974,\n\t\"./ur\": 45773,\n\t\"./ur.js\": 45773,\n\t\"./uz\": 357,\n\t\"./uz-latn\": 77135,\n\t\"./uz-latn.js\": 77135,\n\t\"./uz.js\": 357,\n\t\"./vi\": 20043,\n\t\"./vi.js\": 20043,\n\t\"./x-pseudo\": 40767,\n\t\"./x-pseudo.js\": 40767,\n\t\"./yo\": 80150,\n\t\"./yo.js\": 80150,\n\t\"./zh-cn\": 21828,\n\t\"./zh-cn.js\": 21828,\n\t\"./zh-hk\": 86644,\n\t\"./zh-hk.js\": 86644,\n\t\"./zh-mo\": 79305,\n\t\"./zh-mo.js\": 79305,\n\t\"./zh-tw\": 31860,\n\t\"./zh-tw.js\": 31860\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 35358;"],"names":["NgModule","RouterModule","MicrobeTraceNextHomeComponent","routes","path","component","AppRoutingModule","__decorate","imports","forRoot","exports","Component","AppComponent","constructor","title","selector","template","__NG_CLI_RESOURCE__0","BrowserModule","BrowserAnimationsModule","CommonModule","$","HttpClientModule","HttpClientJsonpModule","FormsModule","UtilsModule","GoldenLayoutComponentService","GoldenLayoutHostComponent","TableModule","FileUploadModule","ListboxModule","RadioButtonModule","CalendarModule","PaginatorModule","ProgressBarModule","ConfirmDialogModule","DropdownModule","AccordionModule","SidebarModule","MultiSelectModule","SliderModule","TabViewModule","SelectButtonModule","TreeModule","DialogModule","OrderListModule","AppSessionService","AppUiCustomizationService","AppUrlService","FilesComponent","PhylogeneticComponent","TimelineComponent","TwoDComponent","CoreModule","TableComponent","MapComponent","AlignmentViewComponent","LeafletModule","LeafletMarkerClusterModule","MatButtonModule","MatInputModule","MatMenuModule","MatToolbarModule","MatSliderModule","DndDirective","MatSelectModule","MatIconModule","MatProgressSpinnerModule","CrosstabComponent","AggregateComponent","BubbleComponent","TooltipModule","TabsModule","ModalModule","BsDropdownModule","PopoverModule","VisGraphModule","VisSingleContainerModule","VisXYContainerModule","VisScatterModule","VisAxisModule","VisTooltipModule","GanttComponent","GanttChartComponent","GanttChartService","HeatmapComponent","GoogleTagManagerModule","window","TestedComponent","AppModule","declarations","id","providers","bootstrap","Directive","InjectionToken","BaseComponentDirective","rootHtmlElement","setPositionAndSize","left","top","width","height","style","numberToPixels","setVisibility","visible","display","setZIndex","value","zIndex","toString","HTMLElement","GoldenLayoutContainerTokenName","GoldenLayoutContainerInjectionToken","Injectable","Output","EventEmitter","Injector","BehaviorSubject","d3","patristic","Papa","_","moment","WorkerModule","LocalStorageService","AuspiceHandler","AppComponentBase","MicrobeTraceNextVisuals","HttpClient","CommonService","setLinkTableElement","element","linkElementSource","next","setNodeTableElement","nodeElementSource","injector","localStorageService","visuals","http","LoadViewEvent","decoder","TextDecoder","r01","Math","random","debugMode","currentLinkTableElement","asObservable","currentNodeTableElement","GlobalSettingsModel","SelectedColorNodesByVariable","SelectedColorLinksByVariable","SelectedNodeColorVariable","SelectedLinkColorVariable","SelectedPruneWityTypesVariable","SelectedStatisticsTypesVariable","SelectedClusterMinimumSizeVariable","SelectedLinkSortVariable","SelectedLinkThresholdVariable","SelectedDistanceMetricVariable","SelectedLinkColorTableTypesVariable","SelectedNodeColorTableTypesVariable","SelectedColorVariable","SelectedBackgroundColorVariable","SelectedApplyStyleVariable","SelectedRevealTypesVariable","dataSkeleton","nodes","links","unoNodes","unoLinks","clusters","nodeFields","nodeExclusions","linkFields","clusterFields","nodeFilter","linkFilter","clusterFilter","nodeFilteredValues","linkFilteredValues","clusterFilteredValues","nodeTableColumns","linkTableColumns","clusterTableColumns","tree","newickString","reference","watermark","HXB2","defaultWidgets","sessionSkeleton","data","files","layout","content","type","messages","meta","loadTime","readyTime","Date","now","startTime","anySequences","network","allPinned","timelinePinned","timelineNodes","initialLoad","launched","state","timeStart","timeEnd","timeTarget","linkAlphas","linkColors","schemePaired","linkValueNames","nodeAlphas","nodeColors","schemeCategory10","concat","slice","nodeColorsTable","nodeColorsTableHistory","nodeColorsTableKeys","linkColorsTable","linkColorsTableKeys","nodeSymbols","nodeSymbolsTable","nodeSymbolsTableKeys","nodeValueNames","polygonAlphas","polygonColors","polygonValueNames","overwrite","widgets","timeline","warnings","tempSkeleton","componentCache","mapData","matrix","messageTimeout","linkAlphaMap","session","linkColorMap","nodeAlphaMap","nodeColorMap","nodeSymbolMap","polygonAlphaMap","polygonColorMap","trees","temp","createPolygonColorMap","context","commonService","polygonGroups","aggregates","groups","forEach","d","key","values","length","Object","keys","sort","a","b","colors","m","ceil","Array","fill","undefined","domain","scaleOrdinal","getNetworkNodes","n","out","i","node","push","JSON","parse","stringify","initialize","ngOnInit","reset","capitalize","s","charAt","toUpperCase","clearData","updateLegacyNodeSymbols","defaultNode","index","_id","selected","cluster","degree","origin","hasDistance","onlyUnique","self","indexOf","includes","container","returnValue","pos","filterXSS","t","e","argType","tempT","replace","isNumber","addNode","newNode","check","trim","uniq","assign","newElement","hasOwnProperty","addLink","newLink","source","target","console","log","serv","linkIsNew","sdlinks","oldLink","myorigin","filter","distanceOrigin","directed","merge","warn","seen","len","j","item","getSelectedNode","find","getColorByIndex","variable","color","convertToGraphDataArray","microbeData","map","group","link","chapter","distance","updateNodesAndGeneratePanels","graphData","updatedNodes","uniqueGroups","from","Set","panels","groupNodes","groupColor","label","labelPosition","borderColor","borderWidth","fillColor","padding","dashedOutline","halveLinksArray","halfIndex","processSVG","svg","$xml","document","getElementById","each","$node","gephid","attr","size","parseFloat","$link","coords","split","base","$l","findIndex","abs","runHamsters","processJSON","json","extension","result","error","applySession","version","applyGHOST","applyHIVTrace","stashObject","prop","trigger","off","tabs","templateRef","tabTitle","isActive","componentRef","oldSession","v","processData","geoJSONLayerName","geoJSON","applyStyle","finishUp","createLinkColorMap","createNodeColorMap","$id","val","toLowerCase","filesPlugin","applyStyleFileSettings","microbeTrace","homepageTabs","tab","instance","updateVisualization","hivtrace","resetData","patient_attributes","metric","sequences","ghost","genotypes","dist","applyAuspice","auspice","Promise","resolve","auspiceHandler","auspiceData","run","openAuspiceUrl","url","auspiceDataHolder","get","subscribe","updateNetwork","updateStatistics","decode","x","parseFASTA","text","computer","response","compute_parse_fastaWorker","postMessage","onmessage","Uint8Array","start","toLocaleString","parseCSVMatrix","file","name","nn","nl","compute_parse_csv_matrixWorker","contents","tn","tl","auspiceCallBack","nodeCount","exec","nodeKeys","linkCount","generateSeqs","idPrefix","count","snps","seed","sampleCodons","sampleSNPs","sample","vec","nCodons","samples","idx","floor","seqs","seq","randomCodonSet","join","oldseed","replacementCodonSet","newseed","addedSNPs","randomSNP","locOfSNP","substr","align","params","aligner","referenceLength","compute_align_swWorker","subset","minPadding","Infinity","_seq","_padding","repeat","substring","padEnd","computeConsensus","compute_consensusWorker","consensus","computeAmbiguityCounts","subsetLength","compute_ambiguity_countsWorker","dists","Float32Array","counts","_ambiguity","computeConsensusDistances","nodesLength","Uint16Array","_diff","computeLinks","k","compute_linksWorker","strategy","threshold","l","sourceID","targetID","getDM","dm","newick","treeObj","parseNewick","toMatrix","labels","row","computeTree","toNewick","then","compute_treeWorker","round","treeString","parseJSON","computeDirectionality","compute_directionalityWorker","flips","output","fliplink","fliptemp","computeMST","reject","compute_mstWorker","epsilon","numLinks","computeNN","compute_nnWorker","computeTriangulation","compute_triangulationWorker","_asyncToGenerator","_this","clearTimeout","fields","field","nodeSkeleton","fieldsToCheck","f","times","time","isValid","isNaN","toDate","minTime","min","minTimeString","String","html","titleize","css","updateThresholdHistogram","hide","setLinkVisibility","tagClusters","setClusterVisibility","setNodeVisibility","thing","fadeIn","setTimeout","launchView","convertName","delayFunction","_x","_x2","_delayFunction","apply","arguments","callback","loadOtherViews","_loadOtherViews","_ref","view","viewName","Viewclick","epiCurve","viewActive","_x3","foldMultiSelect","foldRaces","foldExposures","races","displayValue","Race","selectedRace","raceDetails","race","RaceDetails","exposures","Exposure","exposureDetails","exposure","ExposureInfoWorkplaceIsCriticalInfra","ExposureInfoWorkplaceSetting","ExposureDetails","getVisibleNodes","copy","getVisibleLinks","cloneDeep","getVisibleClusters","is","vnodes","vlinks","clusterCount","src","tgt","singletons","dv","ind","aggregatesTL","nodesTL","nodeColorsTL","valuesTL","tempNodeColors","table","nodeColor","nodeColorKeys","multiLinkCount","o","lv","cycles","linksTL","linkColorsTL","dd","tempLinkColors","linkColor","linkColorsKeys","newTempSkeleton","obj","newSessionSkeleton","onLinkThresholdChanged","getJurisdictions","appRootUrl","responseType","toPromise","header","catch","getMapData","parts","format","contrastColor","hexcolor","r","parseInt","g","yiq","peek","ra","emit","unparseSVG","svgNode","setAttribute","selectorTextArr","nClasses","classList","c","getElementsByTagName","nNodes","classes","extractedCSSText","nStylesheets","styleSheets","cssRules","nRules","rule","selectorText","cssText","styleElement","createElement","innerHTML","refNode","hasChildNodes","children","insertBefore","serializer","XMLSerializer","serializeToString","exportHIVTRACE","geneticLinks","pas","trace_results","Degrees","Distribution","Model","fitted","rho","Count","Edges","attributes","removed","support","Chronic","Clusters","Nodes","baseline","edi","patient_attribute_schema","Settings","contaminants","small","numNodes","tempnodes","lsv","DFS","clusterID","sum_distances","links_per_node","mean_genetic_distance","silent","dateField","checkCluster","showNN","overrideNN","fileName","hasAuspice","test","includesDistanceOrigin","updatePinNodes","fixed","preFixed","fx","fy","y","histogram","thresholdHistogram","select","max","Number","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","range","ticks","scaleLinear","bins","thresholds","bar","selectAll","enter","append","x0","updateThreshold","xc","mouse","decimalPlaces","toFixed","on","event","preventDefault","providedIn","Inject","ElementRef","ChangeDetectionStrategy","XLSX","saveAs","fileto","generateCanvas","tn93","EventEmitterService","ComponentContainer","elRef","eventEmitterService","nativeElement","LoadDefaultVisualizationEvent","SelectedDefaultDistanceMetricVariable","SelectedAmbiguityResolutionStrategyVariable","SelectedAmbiguityThresholdVariable","SelectedDefaultDistanceThresholdVariable","SelectedDefaultViewVariable","SelectedGenerateNumberVariable","DirectionalityTypes","SelectedDirectionalityTypeVariable","TriangulationTypes","SelectedTriangulationTypeVariable","AutostashingTypes","SelectedAutostashingTypeVariable","AlignTypes","SelectedAlignTypeVariable","isLoadingFiles","ReferenceTypes","SelectedReferenceTypeVariable","SelectedRefSeqFileLoadVariable","RefSeqIDTypes","SelectedRefSeqIDVariable","SelectedAlignerMatchVariable","SelectedAlignerMismatchVariable","SelectedAlignerGapOVariable","SelectedAlignerGapEVariable","IsReferenceSourceSelected","IsReferenceOptionsSelected","SelectedAuditEmptyVariable","SelectedAuditGapsVariable","SelectedAuditRNAVariable","SelectedAuditAminoAcidsVariable","SelectedAuditCIGARVariable","SelectedAuditMalformedVariable","IsDataAvailable","displayFileSettings","displaySequenceSettings","displayloadingInformationModal","nodeIds","edgeIds","uniqueNodes","uniqueEdgeNodes","onLinkThresholdChange","onDistanceMetricChange","slideUp","onDistanceMetricChanged","slideDown","parent","stateRequestEvent","handleContainerStateRequestEvent","initialState","loadDefaultVisualization","subsVar","invokeFirstComponentFunction","processFile","empty","show","reader","FileReader","onloadend","readyState","DONE","readAsText","readFastas","updatePreview","auditBlock","logAudit","parentContext","match","button","thi$","removeClass","addClass","splice","isGaps","isRNA","isAA","isDNA","isCIGAR","isMalformed","checkEmpty","checkGaps","checkRNA","checkAA","checkCIGAR","checkMalformed","any","change","setItem","cachedLSV","getItem","cachedView","localStorage","autostash","clearInterval","interval","auspiceUrlVal","getJSON","populateTable","fileTableRows","remove","addToTable","toglleAll","InitView","changeDefaultView","selectedOptions","innerText","openSettings","openExport","openCenter","openRefreshScreen","openSelectDataSetScreen","showSequenceSettings","focus","showMessage","msg","launchClick","thresholdOnLaunch","metricOnLaunch","ambiguityOnLaunch","viewOnLaunch","twoD","isLoading","creatLaunchSequences","nFiles","hierarchy","some","field2","fileNum","nodeRegex","newNodes","sources","targets","forEachLink","safeLink","field1","srcIndex","tgtIndex","field3","bidirectional","workbook","read","utils","sheet_to_json","Sheets","SheetNames","nodeIDs","f1","f2","results","safeKey","totalNodes","dynamicTyping","skipEmptyLines","complete","safeNode","step","cell","newLinks","ids","processSequence","gapString","isLocal","gap","toInts","accordianToggle","open","processFiles","rawfile","pop","auspiceFile","promise","removeAllFiles","removeFile","nodeEdgeCheck","isFasta","isNewick","isXL","isJSON","isAuspice","isNode","headers","addTableTile","loadNodes","loadEdges","root","fnamerow","Blob","appendTo","optionsrow","options","h","matchHeaders","these","list","refit","first","second","third","updateMetadata","fileTable","selectElements","querySelectorAll","addEventListener","el","$el","fname","selects","isJson","firstField","currentNodeId","currentEdgeId","allNodesListNodes","allEdgeListNodes","runNodeEdgeCheck","_this2","fastas","nodeFilesWithSeqs","fasta","csv","seqLabel","dataJSON","_this3","canvas","onAmbiguityStrategyChanged","onAmbiguityThresholdChanged","generateSequences","File","unparse","args","changeDetection","OnPush","componentTypeName","ComponentFactoryResolver","componentFactoryResolver","_componentTypeMap","Map","registerComponentType","componentType","set","getRegisteredComponentTypeNames","createComponent","componentTypeJsonValue","Error","provider","provide","useValue","create","componentFactoryRef","resolveComponentFactory","ApplicationRef","ViewChild","ViewContainerRef","GoldenLayout","goldenLayout","_goldenLayout","virtualActive","_virtualActive","viewContainerRefActive","_viewContainerRefActive","isGoldenLayoutSubWindow","isSubWindow","_appRef","_elRef","goldenLayoutComponentService","_componentRefMap","_goldenLayoutBoundingClientRect","DOMRect","_goldenLayoutBindComponentEventListener","itemConfig","handleBindComponentEvent","_goldenLayoutUnbindComponentEventListener","handleUnbindComponentEvent","TabRemovedEvent","TabChangedEvent","_goldenLayoutElement","ngOnDestroy","destroy","initialise","resizeWithContainerAutomatically","beforeVirtualRectingEvent","handleBeforeVirtualRectingEvent","checkAddDefaultPopinButton","contentItem","handleActiveTabChange","setViewContainerRefActive","setVirtualActive","clear","setSize","getComponentRef","focusComponent","componentId","componentItem","virtualRectingRequiredEvent","handleContainerVirtualRectingRequiredEvent","virtualVisibilityChangeRequiredEvent","handleContainerVisibilityChangeRequiredEvent","virtualZIndexChangeRequiredEvent","logicalZIndex","defaultZIndex","handleContainerVirtualZIndexChangeRequiredEvent","_componentViewContainerRef","insert","hostView","attachView","componentRootElement","appendChild","domElem","rootNodes","virtual","delete","viewRefIndex","removeChild","detachView","getBoundingClientRect","containerBoundingClientRect","removeComponent","_title","static","strainSymbol","Symbol","NODE_VISIBLE","invalidStrings","nodeList","linkList","recurseChildren","makeNode","branch","Branch","rootNode","newTree","child","addChild","branch_attrs","mutations","nuc","attribute","node_attrs","combineMutations","leaves","getLeaves","leaf","mutHolder","ancestor","getAncestors","nodeIndex","nodeHolder","parseAuspice","auspiceTree","treeToNewick","temporal","internalNodeNames","nodeAnnotation","getXVal","getTraitFromNode","getDivFromNode","recurse","parentX","childSubtrees","subtree","rootXVal","trait","entropy","confidence","isValueValid","div","makeLinksFromMatrix","addLatLong","metadata","geo_resolutions","deme","latitude","demes","longtude","longitude","jsonObj","fullTree","distanceMatrix","updatedTree","bareNewickString","ColorIterator","position","current","valid","CustomShapes","diamondAlt","draw","tan30","sqrt","tan30_2","moveTo","lineTo","closePath","diamondSquare","w","hexagon","sideLength","area","num","denom","rotatePoint","theta","cos","sin","tau","PI","R","hexagonAlt","octogon","circumradiusCoeff","circumradius","side","octagonAlt","pentagon","triangleDown","triangleLeft","triangleRight","points","shapes","DialogSettings","dialogControlId","isVisible","linkTop","linkLeft","mapRight","nodeTop","nodeLeft","shapeTop","shapeRight","polygonRight","polygonTop","polygonLeft","getDialogControl","querySelector","getDomRect","dialogControl","onShow","onHide","setStateBeforeExport","stateBeforeExport","domRect","restoreStateAfterExport","innerHeight","innerWidth","Subject","InlineWorker","func","onMessage","onError","WORKER_ENABLED","Worker","urls","functionBody","request","XMLHttpRequest","send","responseText","finish","worker","URL","createObjectURL","onerror","terminate","ViewChildren","QueryList","ChangeDetectorRef","ViewEncapsulation","Renderer2","DomSanitizer","Tabulator","JSZip","domSanitizer","cdref","renderer","ambiguity","showSettings","showExport","showCenter","showPinAllNodes","showRefresh","showButtonGroup","showSorting","downloadedBlocks","ledgerOptions","ledgerOptionSelected","ledgerOptionSelectedFlag","selectedItemsLabel","displayHelp","displayAbout","displayStashDialog","displayUrlDialog","displayMTDialog","displayRecallStashDialog","displayLedgerLoaderDialog","saveFileName","saveByCluster","saveFileTypeOptions","selectedSaveFileType","searchField","searchText","BlockChainLedgerNodeList","BlockChainLedgerEdgeList","FieldList","ToolTipFieldList","PruneWityTypes","RevealTypes","StatisticsTypes","SelectedTimelineVariable","timelineSpeed","LinkColorTableTypes","NodeColorTableTypes","activeTabNdx","ShowGlobalSettingsLinkColorTable","ShowGlobalSettingsNodeColorTable","roles","ShowGlobalSettingsSettingsPane","cachedGlobalSettingsVisibility","cachedGlobalSettingsLinkColorVisibility","cachedGlobalSettingsNodeColorVisibility","playBtnText","previousTab","bpaaSPayloadWrappers","DisplayGlobalSettingsDialogEvent","HideThisForNow","appSession","activeTabIndex","dataSetView","dataSetViewSelected","currentUrl","location","href","URLSearchParams","search","getGlobalSettingsData","elem","documentElement","GlobalSettingsDialogSettings","GlobalSettingsLinkColorDialogSettings","GlobalSettingsNodeColorDialogSettings","err","that","generateNodeLinkTable","generateNodeColorTable","fadeTo","animate","marginTop","opacity","addComponent","goldenLayoutComponent","_goldenLayoutHostComponent","newComponent","addTab","setActiveTabProperties","loadSettings","deleteFile","onSearch","dataSet","fieldData","encodedField","charCodeAt","add","dataArray","vre","RegExp","$li","ac_v","ac_val","ac_vre","firstSelected","onSearchFieldChange","ev","onWholeWordChange","onCaseSensitiveChange","prepareFilesLists","$event","fadeOut","_removeGlView","getfileContent","updateMetric","toLocaleLowerCase","updateAmbiguity","toLocaleUpperCase","updateLaunchView","recallClicked","continueClicked","onBackgroundChanged","onMinimumClusterSizeChanged","updatedVisualization","onLinkSortChanged","onApplyStyle","onload","onColorNodesByChanged","onColorLinksByChanged","onEpsilonValueChange","onPruneWithTypesChanged","SelectedEpsilonValue","pow","toPrecision","tableComp","onLinkColorTableChanged","onNodeColorTableChanged","checkActiveView","onShowStatisticsChanged","onNodeColorChanged","publishUpdateNodeColors","updateNodeColors","publishUpdateVisualization","publishUpdateLinkColor","updateLinkColor","onLinkColorChanged","detectChanges","tableId","isEditable","linkColorTable","aggregateValues","disabled","colorinput","alphainput","clientY","clientX","nonEditCell","$this","isAscending","updateCountFreqTable","delay","parents","eq","rows","toArray","comparer","reverse","valA","getCellValue","valB","localeCompare","onTimelineChanged","loadingJsonFile","bubble","sortData","globalTimelineField","encodedGlobalTimelineField","formatDateIntoYear","timeFormat","formatDateIntoMonthYear","formatDateIntoMonth","formatDateMonthYear","formatDateDateMonth","timeDomainStart","timeDomainEnd","days","diff","tickDateFormat","handleDateFormat","startDate","endDate","margin","right","bottom","svgTimeline","currentTimelineValue","currentTimelineTargetValue","playButton","xAttribute","scaleTime","clamp","nice","slider","call","drag","interrupt","update","invert","handle","playTimeline","setInterval","showNodeColorTable","hideNodeColorTable","showLinkColorTable","hideLinkColorTable","prevColorNodesByVariable","nodeColorTable","one","asc","toggleColorTableSettings","tableName","settingsPane","toggleColorTableColumns","column","tableReferenceName","showCount","showFreq","countColumn","freqColumn","minClust","revealClicked","updateGlobalSettingsModel","phylogenetic","getUserRoles","ngAfterViewInit","layoutConfig","dimensions","headerHeight","DisplayUrlDialog","subscription","publishLoadNewData","getLedgerData","downloadSelectedBlocks","block","blockName","isNodeList","convertToCSV","objArray","tmpArray","str","headerLoaded","line","index1","index2","officialInstance","prodVal","devVal","getHeight","timelineHeight","warningHeight","showSpinner","spinnerDivElement","spinnerElement","hideSpinner","loadLedgerOptions","loadedAny","endLoadBadly","endLoadNoData","resetLayout","fileList","unsubscribe","getSinglefileContent","onPanelHide","onClickChildOptionContainer","onClickChildOptionChecbox","onChangeChildOptionCheckbox","DisplayHelp","DisplayAbout","DisplayLedgerLoaderDialog","ledgerLoaderAction","ToggleDisplayLedgerLoaderDialog","clusterSaveClick","DisplayStashDialog","saveStash","blob","zip","lightTabs","clusterNodeList","clusterLinkList","singletonNodeList","dyadNodeList","dyadEdgeList","clusterNodes","clusterLinks","singletonFolder","dyadFolder","currentCluster","clusterFolder","folder","clusterNode","NodeList","clusterLink","LinkList","nodesBlob","edgesBlob","generateAsync","stash","compression","compressionOptions","level","getAuspiceName","nameParts","saveUrl","auspiceUrl","DisplayMTDialog","ResetTabs","home","NewSession","onReloadScreen","OpenStashFiles","stashFile","OpenStash","sessionData","sessionObject","DisplayRecallStashDialog","recallStash","FileClick","actionName","stashSession","updateTable","SettingsClick","DisplayGlobalSettingsDialog","stashes","selectable","columns","sorter","fullname","date","toISOString","setData","tabNdx","activeTab","linkThresholdSparkline","globalSettingsTab","active","WindowClick","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","reload","HelpClick","activeComponentName","tabLabel","tabPosition","activate","clearTable","onLoadNewData","publishFilterDataChange","onFilterDataChange","Default","encapsulation","None","BpaaSPayloadWrapper","BlockHashCode","BlockName","BpaaSPayload","FuzzyMatchRatios","BpaaSPayloadWrapperData","Type","SubType","JurisdictionKey","JurisdictionName","Jurisdiction","FileName","Data","EventManager","OrderList","GoogleTagManagerService","eventManager","gtmService","SelectedDataTables","fieldOptions","items","SelectedDataFields","settingsOpen","exportOpen","SelectedAggregateExportFilename","AggregateExportFileTypeList","SelectedAggregateExportFileType","aggregate","updateFieldOptions","pushTag","page_location","page_title","tableColumns","updateViewHeight","updateTableColWidth","fullField","dataset","total","rawdata","arow","groupName","viewHeight","tableStyle","addTable","orderList","cd","deleteTable","loc","short_label","formatTableTitle","inputString","colGroupName","onRecallSession","exportVisualization","tmpData","percent","wb","book_new","ws","json_to_sheet","book_append_sheet","writeFile","outputData","datasetName","default","pdfMake","pdfFonts","vfs","documentDefinition","image","alignment","headerRow","widths","body","footer","currentPage","pageCount","styles","fontSize","bold","paddedTable","createPdf","download","reordered","updatedTableOrder","updateDataField","svgAsPngUri","alignmentDialogSettings","ShowAlignExportPane","showHideOptions","labelFieldList","longestSeqLength","alignmentTopDisplayOptions","charSettingOptions","seqTypeOptions","selectedSeqType","startPos","rulerIntervalOptions","translationSetting","sizes","colorSchemeOptions","AlignmentExportFileName","AlignmentExportFileTypeVis","AlignmentExportFileTypeData","setEvents","setDefaultWidgets","nodesWithSeq","seqArray","labelArray","getData","calculateProportionAtEachLocation","onAlignmentTopChange","useCustomColorScheme","onSelectedColorChanged","onSelectedSizeChanged","shortenNodesWithSeq","updateMiniMapVisibility","goldenLayoutComponentResize","highlightRows","indexList","isArray","currentObj","updateLongestSeqLength","longestSeq","updateAlignment","spanWidth","spanHeight","charSetting","colorScheme","updateViewHeights","updateMiniMap","seqArrayShortened","showMiniMapHighlight","miniMap","mmDimensions","scaleFactorNumber","highlightHeight","scaleFactorLength","rightWidth","highlightWidth","canvasWidth","updateMiniMapHighlight","hideMiniMapHighlight","miniMapClick","canvasHolder","canvasLabels","alignmentTop","highlightDimensions","horizontalScroll","scrollLeft","verticalScroll","scrollTop","showTooltip","getRelativeMousePosition","adjX","offsetX","offsetY","htmlString","tabulate","hideTooltip","downSizedSeq","countMatrix","proportionMatrix","positionMatrix","nt","calcProportion","sum","calculatePosition","mergeA","mergeB","sortedIndexes","locA","locB","calculateProportionAminoAcids","reduce","acc","cur","calculatePositionMatrixAminoAcids","proportionMatrixAA","nonZeroIndexes","compareIndices","calculateAdvancedProportion","xPos","getSVGWidth","onSeqTypeChange","revert2NT","NT2Codon","convertToAASequence","getNT2AATable","NT2AA_table","AAarray","NT_check","aaString","codon","checkAmbiguousCodons","gapCount","aa","A","N","D","C","Q","E","G","H","I","L","K","M","F","P","S","T","W","Y","V","X","positionMatrixAA","ambiguousCheck","positionPossibilities","currentNT","possibleCodons","nt0","nt1","nt2","possibleAA","AA","newSeqs","codons","rightViewHeight","calculateRightHeight","alignmentViewHeight","calculateViewHeight","canvasViewHeight","calculateCanvasViewHeight","miniMapHeight","outerHeight","calculateRightWidth","leftWidth","onSpanHeightChange","onSpanWidthChange","skipUpdateAlignment","updateColorScheme","isFieldNumerical","indexes","scroll","topIndex","bottomIndex","scrollPos","selectedNodes","firstPositionSelected","calculateY","canvasScroll","dataType","tableHtml","index2NT","numberOfRows","AAindex","rect","pageX","pageY","onLabelFieldChange","onSortFieldChange","newSort","sortField","exportPNG","mainCanvas","exportWidth","exportHeight","scale","backgroundColor","encoderType","encoderOptions","topB64string","imageDataUrl","exportCanvas","ctx","getContext","iTop","Image","iMain","toDataURL","drawImage","canvasDataURL","foreignObj","createElementNS","exportData","includeConsensus","megaFormat","getConsensus","consensusString","exportDataTable","option","csvString","csvHeader","innerArray","consensusInterator","getNextPosition","chars","input","char","bracketContent","consensusSeq","maxPos","config","longest","ch","cw","alpha","fillStyle","fillRect","nucleotide","col","font","textAlign","textBaseline","fillText","refSeq","saveSvgAsPng","Scatter","Axis","BubbleExportFileType","BubbleExportFileName","SelectedBubbleExportScaleVariable","selectedFieldList","nodeSpacing","allData","visibleData","X_categories","X_axisFormat","tick","X_tickValues","Y_categories","Y_axisFormat","Y_tickValues","tooltipTriggers","selectors","point","SelectedNodeCollapsingTypeVariable","totalCount","strokeColor","NodeCollapsingTypes","setWidgets","updateAxisValues","onNodeSizeChange","setSelectedNodes","updateVisibleNodes","updateViewRatio","viewWidth","xVariable","yVariable","nodeSize","nodeDR","Xgroup","Ygroup","nodeX","locX","nodeY","locY","updateAxes","updateColors","getCollapsedData","visibleNodes","vNode","axis","xLoc","yLoc","filteredNodes","calculateHexagonalGridPositions","initial","fullNodes","X_group","Y_group","currentFullNode","fNode","changedVisibleNodes","generateCollapsedCounts","gradient","generatePieChartsSVGDefs","svgDef","currentNode","XMLS","childNodes","cNode","setProperty","colorCategory","currentNodes","previousTotal","currentCategory","countItem","patternString","indexNumber","proportions","coordinates","proportion","cv","yPos","arcStart","largeArcFlag","arcEnd","fillcolor","colorVariable","Fnode","layerDistance","layer","nodesInLayer","angle","onNodeCollapsingChange","sizing","count_x","count_y","x_axis_height","x_axis","_axisSizeBBox","y_axis_width","y_axis","ratio","scatterPlot","ngOnChanges","datum","datum_all","onDataChange","sortVariable","allNodes","getTime","dataNode","recalculatePositions","onNodeSpacingChange","showGlobalSettings","gradient2","getAxisLabel","setCalculatedResolution","CalculatedResolution","updateCalculatedResolution","textElements","svgString","Table","showOptions","SelectedCrossTabExportFilename","SelectedCrossTabExportFileType","CrossTabExportFileTypeList","selectedSize","class","crossTab","updateFieldLists","pFooterHeight","scrollHeight","tableStyleCrosstab","fieldList","xValues","yValues","totalRow","newRow","SelectedTableData","convertToProportion","pivotCrosstab","tmp","prevData","prevColumns","newData","newTotalRow","newTableColumns","pcol","ncol","aRow","useProportionChanged","tempX","tempY","saveAsExcelFile","dataTable","exportFilename","exportCSV","dataBody","formatData","dataRow","xlsx","worksheet","excelBuffer","write","bookType","EXCEL_TYPE","onTableSizeChange","colorSchemes","colorful","cool","warm","Input","addDays","newdate","setDate","getDate","day","monthIndex","getMonth","year","getFullYear","monthNames","shortenDate","computeGrid","flag","qts","ganttChartService","ganttDateRange","gridPrecisionX","gridWidthX","transformX","gridWidthY","rectHeight","ganttPhases","gridPath","xAxis","yAxis","ganttMinDate","yTrans","yPadding","ganttMaxDate","transformGanttDate","xPadding","transform","cnt","phase","getWidth","gEntry","to","setDimensions","host","currentElement","parentNode","dims","setColors","team","customColorScheme","definePhaseTimelines","phaseTimelines","timelines","info","toolTip","componentID","setValues","gridID","ganttOpacity","computeRectDimensions","rectWidth","computeLegionDimensions","noOfLines","legionWidth","legionHeight","maxX","minX","computeLegion","legion","legionLine","ganttTeams","oneDay","daysSinceMinDate","closestMultipleLessThanEqualTo","factor","closestMultipleMoreThanEqualTo","froms","tos","phases","minDate","maxDate","printAll","domToImage","svgStyle","ganttChartData","customShapes","ShowNetworkAttributes","ShowStatistics","ShowGanttExportPane","ShowGanttSettingsPane","settings","GanttEntryName","GanttStartVariable","GanttEndVariable","GanttEntryColor","ganttEntries","SelectedGanttChartImageFilenameVariable","NetworkExportFileTypeList","SelectedNetworkExportFileTypeListVariable","GanttSettingsDialogSettings","gantt","dataAvail","isExportClosed","getNodeIds","makeBlankEntry","timelineEntry","blankEntry","makeGanttEntry","dateName","startVariable","endVariable","entryColor","nodeData","hasTimeZone","regExp","entry","ganttEntry","createGanttEntry","newEntry","entryName","existingData","markForCheck","resetEntryForm","removeGanttEntry","startingEntries","endingEntries","updateEntryColor","startingData","idSet","listGanttEntries","saveImage","domId","exportImageType","toPng","dataUrl","toJpeg","quality","svgContent","parser","DOMParser","deserialized","parseFromString","HeatmapSettingsDialogSettings","ShowHeatmapExportPane","invertOptions","SelectedImageFilenameVariable","SelectedNetworkExportFileTypeVariable","SelectedDistanceMatrixFilenameVariable","heatmap","invertX","invertY","heatmapShowLabels","loColor","medColor","hiColor","heatmapMetric","reCenter","Plotly","redrawHeatmap","drawHeatmap","xLabels","yLabels","heatmapLabels","heatmapData","z","colorscale","parentElement","heatmapContainerRef","clientWidth","clientHeight","heatmapLayout","xaxis","yaxis","heatmapConfig","displaylogo","displayModeBar","newPlot","heatmapElement","setStyle","autotick","showticklabels","setBackground","contrast","mainSvg","rectBg","titles","axisTexts","updateLoColor","updateMedColor","updateHiColor","updateInvertX","direction","updateInvertY","fixedContent","fixGradient","insertionPoint","getElementsByClassName","startingUrl","idVal","saveDistanceMatrix","csvContent","unshift","tileLayer","latLng","markerClusterGroup","circleMarker","featureGroup","LongLatClass","layers","MapLayers","ShowGEOMapExportPane","ShowGEOMapSettingsPane","SelectedLatitude","SelectedLongitude","SelectedCensusTract","SelectedZipCode","SelectedCounty","SelectedState","SelectedCountry","SelectedResidenceAddress","SelectedVenueAddress","SelectedExposureAddress","geocoder","address","OriginalCenterLocation","markers","SelectedNetworkExportFilenameVariable","SelectedNetworkExportScaleVariable","SelectedNetworkExportQualityVariable","CalculatedResolutionWidth","CalculatedResolutionHeight","NodesTypes","SelectedNodesTypeVariable","LinksTypes","SelectedLinksTypeVariable","CountriesTypes","SelectedCountriesTypeVariable","StatesTypes","SelectedStatesTypeVariable","CountiesTypes","SelectedCountiesTypeVariable","BasemapTypes","SelectedBasemapTypeVariable","SatelliteTypes","SelectedSatelliteTypeVariable","GeospatialTypes","SelectedGeospatialTypeVariable","SelectedNodeTransparencyVariable","SelectedNodeJitterVariable","SelectedNodeTooltipVariable","SelectedLinkTransparencyVariable","SelectedLinkTooltipVariable","clusterImages","m1","m2","m3","m4","m5","locationsFound","mapTooltip","leafletMarkers","isExporting","exportTryCount","colorIterator","marker","triangle","square","circle","dateFilterRangeValues","dateFilterRangeMax","dateFilterRangeDates","geospatialNodes","gisMap","NodeMapSettingsExportDialogSettings","initializeMap","zipcodes","drawNodes","visNodes","matchCoordinates","_jlat","_jlon","rerollNodeAndJitter","drawLinks","lmap","invalidateSize","centerMap","codeAddress","Latitude","Longitude","initializeLeafletMap","mapTokenKey","basemap","maxZoom","attribution","satellite","leafletInitialOptions","zoom","zoomControl","preferCanvas","center","leafletMarkerClusterOptions","showCoverageOnHover","zoomToBoundsOnClick","spiderfyOnMaxZoom","removeOutsideVisibleBounds","maxClusterRadius","spiderLegPolylineOptions","onMapReady","setPosition","onMarkerClusterReady","markerCluster","getMarker","radius","onDateFilterChange","dateFilterRangeMinDate","showAllVisibleMarkers","getLayers","flyToBounds","getBounds","clearAllMarkers","clearAllMarkers_Leaflet","removeNodes","removeLinks","dataFound","rerollCheck","jitter","resetStack","onMapNodeShowHideChange","onMapLinksShowHideChange","onCountriesShowHidChange","countries","addTo","onStatesShowHideChange","states","onCountiesShowHideChange","counties","onBasemapChange","isReload","bringToFront","onSatelliteChange","onGeospatialTypeChange","onNodeTransparencyChange","onNodeJitterChange","onNodeToolTipChange","onLinkTransparencyChange","onLinkToolTipChange","exportWork","onCloseExport","toBlob","displayColorOptions","addressList","positionList","geocode","status","geometry","lat","lng","alert","weight","fillOpacity","norefresh","country","features","properties","_lat","_lon","sval","usps","cval","county","fips","zo","zipcode","tracts","tract","lon","getResidenceMarker","iconCode","iconSettings","mapIconUrl","mapIconColor","divIcon","className","Util","iconSize","locationDetail","Name","FullAddress","icon","getVenueMarker","DateOfContact","getExposureMarkers","exposureProp","locationDetails","ExposedDate","rerollNodes","drawLeafletMapNodes","drawLeafletMapNodesList","selectedColor","showNodeTooltip","clickHandler","addLayers","addLayer","lcv","color1","color2","dashPattern1","dashPattern2","polyline1","polyline","dashArray","polyline2","connectorLine","locationData","htmlText","containerPoint","transition","duration","showLinkTooltip","originalEvent","tooltip","sourceTarget","ctrlKey","bringToBack","_theta","_j","clearLayers","MarkerWithData","Marker","CircleWithData","CircleMarker","PolyLineWithData","Polyline","TidyTree","ShowPhylogeneticExportPane","ShowPhylogeneticSettingsPane","radToDeg","multidrag","TreeLayouts","SelectedTreeLayoutVariable","TreeModes","SelectedTreeModeVariable","TreeTypes","SelectedTreeTypeVariable","SelectedVerticalStretchVariable","SelectedHorizontalStretchVariable","SelectedLeafLabelShowVariable","SelectedLeafLabelVariable","LeafLabelFieldList","SelectedLeafLabelSizeVariable","SelectedLeafTooltipShowVariable","SelectedLeafTooltipVariable","LeafTooltipFieldList","SelectedLeafNodeShowVariable","SelectedLeafNodeSizeVariable","SelectedLeafNodeColorVariable","SelectedSelectedLeafNodeColorVariable","SelectedBranchNodeShowVariable","SelectedBranchNodeSizeVariable","SelectedBranchNodeColorVariable","SelectedBranchSizeVariable","SelectedBranchLabelSizeVariable","SelectedBranchLabelShowVariable","SelectedBranchDistanceShowVariable","SelectedBranchDistanceSizeVariable","SelectedBranchTooltipShowVariable","hideShowOptions","SelectedTreeImageFilenameVariable","SelectedNewickStringFilenameVariable","ShowAdvancedExport","PhylogeneticTreeExportDialogSettings","ContextSelectedNodeAttributes","openTree","buildTree","styleTree","showContextMenu","code","shiftKey","setBranchLabels","eachBranchLabel","styleBranchLabel","setBranchNodes","eachBranchNode","styleBranchNode","setBranchDistances","eachBranchDistance","styleBranchDistance","setLeafNodes","eachLeafNode","styleLeafNode","setLeafLabels","eachLeafLabel","styleLeafLabel","branchEls","styleBranch","node_values","node_color","clone","getTreeOptions","getTreeHandlers","treeOpts","mode","leafNodes","branchNodes","leafLabels","branchLabels","branchDistances","ruler","animation","handlers","contextmenu","showtooltip","hidetooltip","getContextLeftVal","getContextTopVal","leftVal","topVal","reroot","hideContextMenu","rotate","getRoot","flip","htmlValue","thisTree","recenter","redraw","onTreeLayoutChange","setLayout","onTreeModeChange","setMode","onTreeTypeChange","setType","onLeafLabelVariableChange","labelVar","onLeafTooltipVariableChange","onHorizontalStretchChange","cached","setAnimation","setHStretch","onVerticalStretchChange","setVStretch","onBranchLabelShowChange","onBranchLabelSizeChange","onBranchDistanceShowChange","onBranchDistanceSizeChange","onBranchNodeShowChange","onBranchNodeSizeChange","onBranchTooltipShowChange","onLeafLabelTooltipShowChange","onLeafLabelShowChange","onLeafSizeChange","onLeafLabelSizeChange","onBranchSizeChange","treeId","saveNewickString","newickBlob","SelectedTableExportFilenameVariable","TableExportFileTypeList","exportColumnOptions","exportAllColumns","SelectedTableExportFileTypeListVariable","SelectedTextSizeVariable","ShowTableExportPane","ShowTableSettingsPane","TableColumns","SelectableTableColumns","AvailableColumns","TableDatas","TableDataSelection","TableType","filterTypes","selectedRows","createTable","temp2","availableColumns","rowData","filteredValue","EXCEL_EXTENSION","onTableFilter","filterValue","filterType","onFilter","filteredValues","filters","onRowSelect","nodeSelect","onRowUnselect","isSelect","tableData","tableType","isNewTableData","dataSelection","selectedTableColumns","foundFilterItem","foundAvailableColumn","curVal","typeData","nrow","stringVal","foundTableData","resetTextsize","reorderColumns","FieldListStack","binSizes","graphTypes","selectedGraphType","legendPositionOptions","ShowEpiSettingsPane","ShowEpiExportPane","EpiExportFileName","EpiExportFileType","localColorMap","isPlaying","setDefaultsWidgets","tickInterval","updateSettingsRows","SelectedDateFieldVariable","SelectedDateFieldVariable2","SelectedDateFieldVariable3","setupEventListeners","refresh","refreshMulti","updateSizes","getTimes","binInterval","calculateBinInterval","rangeRound","epiCurveSVGElement","classed","updateLocalColorMap","maxCount","updateBins","x1","length2","generateLegend","currentCount","currentbin","numberOfBins","xOffset","nodeColorTableKeys","wrapper","epiCurveElement","middle","xLabelOffset","configureXAxisSettings","axisLeft","fieldNames","prevLength","rowCount","nLength","baseX","click","stopTimeline","startTimeline","setTimer","maxTime","timeMonth","timeDay","timeMonday","setMonth","timeYear","heights","offsets","bin","paritalSum","numberOfDays","axisBottom","tickFormat","every","onDateFieldChange","onBinSizeChange","onGraphTypeChange","onUseNodeColorChange","onTickIntevalChange","onLegendPositionChange","setCumulative","getImageDimensions","timer","stop","timerFlush","selection","brushSelection","brushG","brush","move","propagate","GraphNodeShape","shape","Circle","Square","sideIconSymbol","sideIconShape","sideIconShapeStroke","sideIconCursor","sideIconFontSize","sideIconShapeSize","Clipboard","Graph","GraphLayoutType","GraphLinkStyle","onSelectionBrush","getLinkStyle","Dashed","Solid","onSelectionDrag","getLinkDistance","getNodeSize","defaultSize","med","oldrng","sizeVariable","nodeMid","scaleValue","nodeScale","getNodeColor","showParallel","getLinkWidth","scalar","mid","linkMax","linkMin","linkScale","onNodeShapeChange","newShape","selectedNodeShape","_rerender","getLinkColor","hexToRgba","hex","finalColor","alphaValue","clipboard","vizLoaded","data2","layoutParallelNodesPerColumn","layoutType2","Parallel","layoutNodeGroup","layoutParallelNodeSubGroup","layoutType","Force","containerHeight","selectedNodeId","forceLayoutSettings","fixNodePositionAfterSimulation","linkDistance","linkLabel","getLinkLabel","nodeLabel","getNodeLabel","nodeShape","getNodeShape","linkStroke","linkStyle","linkWidth","linkArrow","getLinkArrow","nodeFill","nodeStroke","getNodeStroke","events","mouseover","mouseout","nodeStrokeWidth","nodeBorderWidth","symbolTableWrapper","linkColorTableWrapper","nodeColorTableWrapper","linkMid","nodeMin","nodeMax","autoFit","Show2DExportPane","Show2DSettingsPane","halfWidth","halfHeight","force","LinkToolTipList","ctrlPressed","dragging","SelectedPolygonLabelVariable","SelectedPolygonColorVariable","SelectedPolygonLabelOrientationVariable","SelectedPolygonLabelSizeVariable","SelectedPolygonGatherValue","CenterPolygonVariable","SelectedPolygonLabelShowVariable","SelectedPolygonColorShowVariable","SelectedPolygonColorTableShowVariable","SelectedNodeLabelVariable","SelectedNodeSymbolVariable","SelectedNodeShapeVariable","SelectedNodeRadiusVariable","SelectedNodeRadiusSizeVariable","SelectedNodeRadiusSizeMaxVariable","SelectedNodeRadiusSizeMinVariable","TableTypes","SelectedNetworkTableTypeVariable","isMac","navigator","userAgent","SelectedLinkLabelVariable","SelectedLinkDecimalVariable","SelectedLinkWidthByVariable","SelectedLinkWidthMax","SelectedLinkWidthMin","ReciprocalTypes","SelectedLinkReciprocalTypeVariable","SelectedLinkWidthVariable","SelectedLinkLengthVariable","ArrowTypes","bidirectionalOptions","SelectedLinkArrowTypeVariable","SelectedLinkBidirectionalTypeVariable","NeighborTypes","SelectedNetworkNeighborTypeVariable","GridLineTypes","SelectedNetworkGridLineTypeVariable","SelectedNetworkChargeVariable","SelectedNetworkGravityVariable","SelectedNetworkFrictionVariable","SelecetedNetworkLinkStrengthVariable","SelectedNodeLabelSizeVariable","ShowNodeSymbolWrapper","ShowNodeSymbolTable","ShowPolygonColorTable","NodeSymbolTableWrapperDialogSettings","PolygonColorTableWrapperDialogSettings","Node2DNetworkExportDialogSettings","zoomScaleExtent","tabulate2","topOffset","leftOffset","polygonNodeSelected","svgDefs","showState","drawGridlines","twoDGraph","fitView","saveNodeFx","onNodeDragEnd","updateNodeFx","datamodel","_nodes","globalNode","_state","applyNodeFx","render","ensureArray","networkData","updatePanels","mtSelectedNode","toggleBrush","enable","exportWork2","networkWhitespaceClicked","$network","filetype","filename","nodeValue","tableCounts","tableFreq","Node","Frequency","Color","nodeWrapper","nodeLegend","Link","linkWrapper","linkLegend","Shape","symbolWrapper","symbolLegend","statsDiv","showStatistics","polygonLabelDragStarted","polygonLabelDragged","polygonLabelDragEnded","updatePolygonColors","polygonSort","polygonColorHeaderTitle","polygonHeader","countSort","countHeader","polygonColorTable","polygonsToggle","polygonColorsToggle","onPolygonColorChanged","polygonColorsTableToggle","onPolygonColorTableChange","polygonDragStarted","sessionNode","tempAry","dragstarted","polygonDragged","dragged","polygonDragEnded","dragended","getVLinks","holder","oNum","origins","getLLinks","calcAngle","atan","setNode","copyID","copySeq","highlightNeighbors","lindices","neighbors","tt_var_len","tooltipHtml","tooltipVariables","varName","redrawNodes","symbolVariable","redrawNodeBorder","redrawLabels","centerPolygons","onPolygonLabelSizeChange","onPolygonLabelOrientationChange","onPolygonLabelShowChange","onNodeLabelVaribleChange","labelVariable","labelValue","onNodeLabelSizeChange","setNodeLabelSize","onNodeLabelOrientationChange","onNodeTooltipVariableChange","selectedValue","onNodeSymbolVariableChange","onNodeSymbolTableChange","generateNodeSymbolSelectionTable","symbolMapping","symbols","optionsHtml","symbolText","onNodeRadiusVariableChange","onNodeRadiusMaxChange","updateMinMaxNode","onNodeRadiusMinChange","onNodeBorderWidthChange","onNodeRadiusChange","timelineTick","filteredLinks","has","onNodeSymbolChange","onLinkTooltipVariableChange","onLinkLabelVariableChange","onLinkDecimalVariableChange","onLinkOpacityChange","updateLinkWidthRows","onLinkWidthVariableChange","updateMinMaxLink","maxWidth","minWidth","MAX_VALUE","MIN_VALUE","visLinks","onLinkWidthReciprocalNonReciprocalChange","scaleLinkWidth","onLinkWidthChange","onLinkWidthMaxChange","onLinkWidthMinChange","onLinkLengthChange","onLinkDirectedUndirectedChange","onLinkBidirectionalChange","onDontHighlightNeighborsHighlightNeighborsChange","offsetWidth","offsetHeight","horizontalGridlinesGroup","firstChild","verticalGridlinesGroup","ords","onNetworkGridlinesShowHideChange","onNodeChargeChange","onNetworkGravityChange","onNetworkFrictionChange","onNetworkLinkStrengthVariableChange","onNetworkExportFiletypeChange","stroke","stroke_width","fit","bounds","isFiltered","enableSettings","openPinAllNodes","bioseq","compute_consensus","maxKey","maxVal","encoder","TextEncoder","encode","buffer","evt","compute_ambiguity_counts","sequence","sequenceLength","compute_links","s1","s2","c1","c2","onInts","sourceInThreshold","sourceSeq","compute_tree","RNJ","parseMatrix","toObject","compute_directionality","getDescendant","compute_mst","minDist","nodeid","minKey","mstSet","min_index","primMST","graph","u","nearest_neighbour_graph","mst_parents","mst","nng","longest_edge","bfs_update_matrix","weights","visited","queue","shift","compute_nn","compute_triangulation","missingCell","minRange","companionA","companionB","newVal","compute_parse_fasta","currentSeq","lines","isblank","compute_align_sw","rst","fmt","cigar2gaps","CIGAR","_score","score","_cigar","MenuAsideDirective","MenuAsideOffcanvasDirective","MenuHorizontalOffcanvasDirective","MenuHorizontalDirective","MenuAsideToggleDirective","NavigationEnd","Router","router","offcanvasClass","mUtil","hasClass","menuOffcanvas","mOffcanvas","baseClass","overlay","closeBy","toggleBy","pipe","isMobileDevice","toggle","mToggle","targetState","togglerState","LayoutConfigService","objectPath","LayoutRefService","mergeMap","layoutConfigService","layoutRefService","onLayoutConfigUpdated$","layoutRefs$","initMenu","getComputedStyle","getViewPort","submenu","desktop","tablet","mobile","accordion","autoScroll","expandAll","menu","mMenu","slideSpeed","UtilsService","layoutRefs","addElement","HttpParams","HttpHeaders","urlParam","encodeURIComponent","isObject","mergeDeep","getPath","fullpath","getFindHTTPParams","queryParams","sortOrder","pageNumber","pageSize","getHTTPHeader","isInteger","isFinite","isString","environment","production","enableProdMode","platformBrowserDynamic","bootstrapModule","AppConsts","tenancyNamePlaceHolderInUrl","localeMappings","userManagement","defaultAdminUserName","localization","defaultLocalizationSourceName","authorization","encrptedAuthTokenName","grid","defaultPageSize","PrimengTableHelper","localizationSourceName","ui","appUrlService","primengTableHelper","flattenDeep","array","ls","sourcename","localizedText","localize","isGranted","permissionName","permission","isGrantedAny","permissions","tenancyNamePlaceHolder","_appSessionService","getAppRootUrlOfTenant","tenancyName","baseUrl","ensureEndsWith","appBaseUrlFormat","appBaseHref","removeFromStart","AppUrlService_1","removeFromEnd","Pipe","FeatureCheckerPipe","feature","LocalizePipe","PermissionPipe","init","getContainerClass","_theme","baseSettings","isLeftMenuUsed","getAppModuleBodyClass","topMenuUsed","contentSkin","desktopFixedHeader","mobileFixedHeader","fixedAside","defaultMinimizedAside","defaultHiddenAside","asideSkin","fixedFooter","fixedBody","mobileFixedBody","getAccountModuleBodyClass","getSelectEditionBodyClass","getSideBarMenuClass","menuCssClass","submenuToggle","getMenuListClass","getTopBarMenuContainerClass","getIsMenuScrollable","allowMenuScroll","getSideBarMenuItemClass","isMenuActive","HostBinding","HostListener","fileDropped","onDragOver","stopPropagation","fileOver","onDragLeave","ondrop","dataTransfer","predefinedRecordsCountPerPage","defaultRecordsCountPerPage","isResponsive","totalRecordsCount","showLoadingIndicator","hideLoadingIndicator","getSorting","sorting","getMaxResultCount","paginator","getSkipCount","shouldResetPaging","Subscription","onFirstComponentButtonClick","localForage","removeItem","NgControl","NullDefaultValueDirective","control","onEvent","viewToModelUpdate","StyleLoaderService","load","promises","loadStyle","all","loadArray","rel","onreadystatechange","loaded","defaults","colorOptions","nodeColorMode","equidistantLeaves","hStretch","vStretch","rotation","setTree","prototype","eachBefore","validLayouts","validTypes","validModes","validNodeColorModes","validBranchColorModes","updateRuler","getX","getY","getLength","linkTransformers","smooth","horizontal","linkHorizontal","vertical","linkVertical","circular","linkRadial","straight","startAngle","startRadius","endAngle","endRadius","y0","y1","weighted","dendrogram","circularPoint","nodeTransformers","findNodeColor","defaultNodeColor","_guid","highlightColor","findBranchColor","branchColorMode","defaultBranchColor","childLeafNodes","getAllLeaves","allChildLeafNodesInNodeList","includeSelf","labelTransformers","labeler","separation","depth","linkTransformer","labelTransformer","paths","end","exit","descendants","nodeLabels","nodeTransformer","nodeGlyphs","bg","zoomIdentity","translate","newLayout","setColorOptions","newColorOptions","newMode","newType","setRotation","degrees","animCache","styler","setEquidistantLeaves","isEquidistant","setRuler","getNodeGUIDs","leavesOnly","predicate","_groups","nodeGUIDs","__data__","handler"],"sourceRoot":"webpack:///","x_google_ignoreList":[75]}